import{q as R,x as O}from"./chunk-ZV7BIBVF.js";import{b as E}from"./chunk-OBSVEP5A.js";import{Bb as u,Ca as c,Db as v,Fa as m,Hb as y,Ja as r,Ka as d,Lc as D,Ma as n,Tb as g,Zc as h,_c as _,ca as p,cc as b,cd as N,dc as w,mc as x,nc as C,oa as i,oc as T,uc as z,vb as f,vc as S}from"./chunk-75CTPCD6.js";var s=class{constructor(l){this.node=l,this.position=n("top"),this.template=n(null),this.offset=n(10),this.point=h(()=>{switch(this.position()){case"top":return{x:this.node.width()/2-this.size().width/2,y:-this.size().height-this.offset()};case"bottom":return{x:this.node.width()/2-this.size().width/2,y:this.node.height()+this.offset()};case"left":return{x:-this.size().width-this.offset(),y:this.node.height()/2-this.size().height/2};case"right":return{x:this.node.width()+this.offset(),y:this.node.height()/2-this.size().height/2}}}),this.transform=h(()=>`translate(${this.point().x}, ${this.point().y})`),this.size=n({width:0,height:0})}};var W=["toolbar"],j=["*"];function q(t,l){if(t&1&&(b(0,"div",1),T(1),w()),t&2){let o=x();g("model",o.model)}}var K=(()=>{class t{constructor(){this.overlaysService=i(R),this.nodeService=i(E),this.position=r("top"),this.toolbarContentTemplate=f.required("toolbar"),this.model=new s(this.nodeService.model()),_(()=>this.model.position.set(this.position()))}ngOnInit(){this.model.template.set(this.toolbarContentTemplate()),this.overlaysService.addToolbar(this.model)}ngOnDestroy(){this.overlaysService.removeToolbar(this.model)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["node-toolbar"]],viewQuery:function(e,a){e&1&&z(a.toolbarContentTemplate,W,5),e&2&&S()},inputs:{position:[1,"position"]},ngContentSelectors:j,decls:2,vars:0,consts:[["toolbar",""],["nodeToolbarWrapper","",1,"wrapper",3,"model"]],template:function(e,a){e&1&&(C(),y(0,q,2,1,"ng-template",null,0,D))},dependencies:()=>[M],styles:[".wrapper[_ngcontent-%COMP%]{width:max-content}"],changeDetection:0})}}return t})(),M=(()=>{class t{constructor(){this.element=i(d),this.zone=i(m),this.destroyRef=i(c),this.model=r.required()}ngOnInit(){O([this.element.nativeElement],this.zone).pipe(p(()=>this.setSize()),N(this.destroyRef)).subscribe()}setSize(){this.model().size.set({width:this.element.nativeElement.clientWidth,height:this.element.nativeElement.clientHeight})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275dir=v({type:t,selectors:[["","nodeToolbarWrapper",""]],inputs:{model:[1,"model"]}})}}return t})();export{K as a};
