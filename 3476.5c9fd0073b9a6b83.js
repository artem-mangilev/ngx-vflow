"use strict";(self.webpackChunkngx_vflow_demo=self.webpackChunkngx_vflow_demo||[]).push([[3476],{3476:(Wn,It,Lt)=>{Lt.r(It),Lt.d(It,{default:()=>on});var d="",$e='"',We=",",_e="'",se=" ",R="\n";function Xe(e){switch(e){case"text":return"Plain Text";case"html":return"HTML";case"liquid":return"Liquid";case"xml":return"XML";case"json":return"JSON";case"jsx":return"JSX";case"tsx":return"TSX";case"typescript":return"TypeScript";case"javascript":return"JavaScript";case"less":return"LESS";case"scss":return"SCSS";case"sass":return"SASS";case"css":return"CSS"}}function Le(e){switch(e){case"text":return"ignore";case"auto":return"auto";case"markup":case"html":case"liquid":case"xml":return"markup";case"json":case"jsx":case"tsx":case"typescript":case"javascript":return"script";case"less":case"scss":case"sass":case"css":return"style"}}function gt(e){switch(e){case"auto":return 5;case"markup":case"html":case"liquid":case"xml":return 1;case"json":case"jsx":case"tsx":case"typescript":case"javascript":return 2;case"less":case"scss":case"sass":case"css":return 3}return 4}function Tt(e,a){let i={lexer:a,language:Xe(e),chars:0,time:""},p=Date.now();return x=>{let l=+(Date.now()-p).toFixed(0);return i.time=l>1e3?`${l}s`:`${l}ms`,i.chars=x,i}}function kt(...e){return e.join(R)}function at(e,a=se){if(e<=0)return a;let i=d,p=1;do{i+=a}while(p++<e);return i}function t(e,a){return!!e&&e.charCodeAt(0)===a}function Me(e,a){return t(e[e.length-1],a)}function Ge(e,a,i=2){return t(e[e.length-i],a)}function P(e,a){return!1===t(e,a)}function Nt(e,a){return!1===Me(e,a)}function ue(e){return/\s/.test(e)}function Te(e){return/\d/.test(e)}function Pt(e){return`\\${e}`}var{toString:Ye}=Object.prototype;function Re(e){return a=>a in e}function Ae(e){return"Array"===Ye.call(e).slice(8,-1)}function mt(e){return"Object"===Ye.call(e).slice(8,-1)}function bt(e){return"String"===Ye.call(e).slice(8,-1)}function et(e){return"Boolean"===Ye.call(e).slice(8,-1)}function lt(e){return"Number"===Ye.call(e).slice(8,-1)}function He(e){return"Undefined"===Ye.call(e).slice(8,-1)}function yt(e){let a=r.count,i=r.stack.index,p=0,x=0,l=0,j=0,s=0,n=0,h=0,o=!0,{count:L}=r,k=r.stack.token,O=r.stack.index,c=r.lineOffset,f="style"===e.lexer[L],b=f&&"global"===k,Y=f?[";","separator"]:[",","separator"],u=[],G={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};j=a;do{if(e.begin[a]===i||b&&a<j&&t(e.token[a],125)&&-1===e.begin[e.begin[a]]){if(e.types[a].indexOf("liquid")>-1)return;if(e.token[a]===Y[0]||!0===f&&t(e.token[a],125)&&P(e.token[a+1],59)?(o=!0,s=a+1):!0===f&&t(e.token[a-1],125)&&(o=!0,s=a),0===s&&"comment"===e.types[0])do{s+=1}while("comment"===e.types[s]);else"comment"===e.types[s]&&e.lines[s]<2&&(s+=1);!0===o&&(e.token[a]===Y[0]||!0===f&&t(e.token[a-1],125))&&s<=j&&((!0===f&&"};".indexOf(e.token[j])<0||!1===f&&P(e.token[j],44))&&(j+=1),u.push([s,j]),j=!0===f&&t(e.token[s],125)?s:s-1)}a-=1}while(a>i);if(u.length>0&&u[u.length-1][0]>a+1){if(p=u[u.length-1][0]-1,"comment"===e.types[p]&&e.lines[p]>1){do{p-=1}while(p>0&&"comment"===e.types[p]);u[u.length-1][0]=p+1}if("comment"===e.types[a+1]&&-1===a)do{a+=1}while("comment"===e.types[a+1]);u.push([a+1,p])}if(u.length>1&&(!0===f||"json"===r.language||t(e.token[a-1],61)||t(e.token[a-1],58)||t(e.token[a-1],40)||t(e.token[a-1],91)||t(e.token[a-1],44)||"word"===e.types[a-1]||0===a)){u.sort(function B(q,E){let I=q[0],ie=E[0];if("comment"===e.types[I]){do{I+=1}while(I<L&&"comment"===e.types[I]);if(void 0===e.token[I])return 1}if("comment"===e.types[ie]){do{ie+=1}while(ie<L&&"comment"===e.types[ie]);if(void 0===e.token[ie])return 1}if(!0===f){if(0===e.token[I].indexOf("@import")||0===e.token[ie].indexOf("@import"))return I<ie?-1:1;if(e.types[I]!==e.types[ie]){if("function"===e.types[I])return 1;if("variable"===e.types[I])return-1;if("selector"===e.types[I])return 1;if("property"===e.types[I]&&"variable"!==e.types[ie]||"mixin"===e.types[I]&&"property"!==e.types[ie]&&"variable"!==e.types[ie])return-1}}return e.token[I].toLowerCase()>e.token[ie].toLowerCase()?1:-1}),h=u.length,o=!1,i=0;do{if(n=u[i][1],!0===f&&(l=n,"comment"===e.types[l]&&(l-=1),t(e.token[l],125)?(n+=1,Y[0]="}",Y[1]="end"):(Y[0]=";",Y[1]="separator")),p=u[i][0],!0===f&&"end"!==e.types[n-1]&&"comment"===e.types[n]&&"comment"!==e.types[n+1]&&i<h-1&&(n+=1),p<n)do{!1===f&&i===h-1&&p===n-2&&t(e.token[p],44)&&"script"===e.lexer[p]&&"comment"===e.types[p+1]||r.push(G,{begin:e.begin[p],ender:e.begin[p],lexer:e.lexer[p],lines:e.lines[p],stack:e.stack[p],token:e.token[p],types:e.types[p]},d),x+=1,e.token[p]!==Y[0]||!0!==f&&e.begin[p]!==e.begin[u[i][0]]?e.token[p]!==Y[0]&&"comment"!==e.types[p]&&(o=!1):o=!0,p+=1}while(p<n);if(!1===o&&"x;"!==G.token[G.token.length-1]&&(!0===f||i<h-1)){if(p=G.types.length-1,"comment"===G.types[p])do{p-=1}while(p>0&&"comment"===G.types[p]);p+=1,r.splice({data:G,howmany:0,index:p,record:{begin:O,stack:b?"global":k,ender:r.count,lexer:G.lexer[p-1],lines:0,token:Y[0],types:Y[1]}}),x+=1}i+=1}while(i<h);r.splice({data:e,howmany:x,index:a+1}),r.lineOffset=c,r.concat(e,G)}}function Ft(e,a,i){return!1===Ae(e)?e:"normal"===a?Wt.call({array:e,recursive:i},e):"descend"===a?Et.call({recursive:i},e):Mt.call({recursive:i},e)}function zt(e,a){let i=e,p=-1,{data:x}=r,l=[],j=r.stack.length<2?[-1]:[r.stack[r.stack.length-2][1]];do{i>0&&x.types[i].indexOf("attribute")>-1&&x.types[i].indexOf("end")<0&&x.types[i-1].indexOf("start")<0&&x.types[i-1].indexOf("attribute")<0&&"markup"===x.lexer[i]&&j.push(i-1),i>0&&x.types[i-1].indexOf("attribute")>-1&&x.types[i].indexOf("attribute")<0&&"markup"===x.lexer[j[j.length-1]]&&x.types[j[j.length-1]].indexOf("start")<0&&j.pop(),x.begin[i]!==j[j.length-1]&&(x.begin[i]=j.length>0?j[j.length-1]:-1),x.types[i].indexOf("else")>-1&&(j.length>0?j[j.length-1]=i:j.push(i)),x.types[i].indexOf("end")>-1&&j.pop(),x.types[i].indexOf("start")>-1&&j.push(i),i+=1}while(i<a);i=a;do{i-=1,x.types[i].indexOf("end")>-1&&(l.push(i),p+=1),x.ender[i]=p>-1?l[p]:-1,x.types[i].indexOf("start")>-1&&(l.pop(),p-=1)}while(i>e)}function Mt(e){let a=0,i=e.length,p=e,x=p.map(s=>s[1]),l=()=>{let s=0,n=p.length;if(s<n)do{!0===Ae(p[s])&&(p[s]=Mt.apply(this,p[s])),s+=1}while(s<n)},j=(s=d)=>{let n=a,h=0,o=0,L=0,k=[],O=p[a];if(n<i)do{p[n]<O?(O=p[n],k=[n]):p[n]===O&&k.push(n),n+=1}while(n<i);if(o=k.length,n=a,h=o+a,n<h)do{O[1]=x[n],p[k[L]]=p[n],p[n]=O,L+=1,n+=1}while(n<h);return a+=o,a<i?j():(!0===this.recursive&&l(),e=p),s};return j(),e}function Et(e){let a=0,i=e.length,p=e,x=()=>{let j=p.length,s=0;if(s<j)do{Ae(p[s])&&(p[s]=Et.apply(this,p[s])),s+=1}while(s<j)},l=(j="")=>{let s=a,n=0,h=0,o=0,L=p[a],k=[],O=d,c=typeof L;if(s<i)do{O=typeof p[s],p[s]>L||O>c?(L=p[s],k=[s]):p[s]===L&&k.push(s),s+=1}while(s<i);if(h=k.length,s=a,n=h+a,s<n)do{p[k[o]]=p[s],p[s]=L,o+=1,s+=1}while(s<n);return a+=h,a<i?l():(!0===this.recursive&&x(),e=p),j};return l(),e}function Wt(e){let a=e,i=[e[0]],p=()=>{let l=0,j=a.length;if(l<j)do{Ae(a[l])&&(a[l]=Wt.apply(this,a[l])),l+=1}while(l<j)},x=l=>{let j=0,s=[],n=a.length;if(j<n)do{a[j]!==l&&s.push(a[j]),j+=1}while(j<n);a=s,s.length>0?(i.push(s[0]),x(s[0])):(!0===this.recursive&&p(),e=a)};return x(this.array[0]),e}var je=function(){let e=function fn(e={units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"],atrules:["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@supports"],webkit:{classes:["webkit-any","webkit-any-link*","webkit-autofill"],elements:["webkit-file-upload-button","webkit-inner-spin-button","webkit-input-placeholder","webkit-meter-bar","webkit-meter-even-less-good-value","webkit-meter-inner-element","webkit-meter-optimum-value","webkit-meter-suboptimum-value","webkit-outer-spin-button","webkit-progress-bar","webkit-progress-inner-element","webkit-progress-value","webkit-search-cancel-button","webkit-search-results-button","webkit-slider-runnable-track","webkit-slider-thumb"]},pseudo:{classes:["active","any-link","checked","default","defined","disabled","empty","enabled","first","first-child","first-of-type","fullscreen","focus","focus-visible","focus-within","host","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","modal","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","picture-in-picture","placeholder-shown","paused","playing","read-only","read-write","required","right","root","scope","target","valid","visited","where"],elements:["after","backdrop","before","cue","cue-region","first-letter","first-line","file-selector-button","marker","part","placeholder","selection","slotted"],functions:["after","before","first-letter","first-line","host","host-context","part","slotted","lang","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","where"]}}){let a=new Set(e.units),i=new Set(e.atrules),p=new Set(e.pseudo.classes),x=new Set(e.pseudo.elements),l=new Set(e.pseudo.functions),j=new Set(e.webkit.elements),s=new Set(e.webkit.classes);return{get grammar(){return e},get units(){return a},get pseudoClasses(){return p},get pseudoElements(){return x},get pseudoFunctions(){return l},get webkitElements(){return j},get webkitClasses(){return s},atrules:n=>i.has(n.slice(0,n.indexOf("(")).trim()),extend(n){for(let h in n){if(Ae(n[h]))for(let o of n[h])"units"!==h||a.has(o)?"atrules"===h&&!i.has(o)&&(e[h].push(o),i.add(o)):(e[h].push(o),a.add(o));if("object"==typeof n[h])for(let o in n[h])if(Ae(n[h][o]))for(let L of n[h][o])"webkit"===h?"elements"===o?(e[h][o].push(L),j.add(L)):"classes"===o&&(e[h][o].push(L),s.add(L)):"pseudo"===h&&("elements"===o?(e[h][o].push(L),x.add(L)):"classes"===o?(e[h][o].push(L),p.add(L)):"functions"===o&&(e[h][o].push(L),l.add(L)))}}}}(),a=function cn(e={embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["form","paginate","capture","case","comment","for","if","raw","tablerow","unless","schema","style","script","stylesheet","javascript"],control:["if","unless","case"],else:["else","elsif","when"],singletons:["include","layout","section","assign","liquid","break","continue","cycle","decrement","echo","increment","render"]}){let a=new Set(e.else),i=new Set(e.control),p=new Set(e.tags),x=new Set(e.singletons),l={};return j(e.embedded),{get grammar(){return e},get tags(){return p},get control(){return i},get else(){return a},get singleton(){return x},get embed(){return l},extend(s){for(let n in s)if(Ae(s[n]))for(let h of s[n])"tags"===n&&!1===p.has(h)?(e.tags.push(h),p.add(h)):"else"===n&&!1===a.has(h)?(e.else.push(h),a.add(h)):"control"===n&&i.has(h)?(e.control.push(h),i.add(h)):"singletons"===n&&!1===x.has(h)&&(e.singletons.push(h),x.add(h));else"embedded"===n&&"object"==typeof s[n]&&j(s[n])}};function j(s){for(let n in s)for(let{language:h,argument:o=null}of s[n])if(n in l||(l[n]={tag:n,language:h,args:new Map([[new Set,{tag:n,language:h}]])}),o)for(let[L]of l[n].args)if(null!==L)if(Ae(o))for(let k of o)L.has(k)||L.add(k);else{let k=new RegExp(o);if(L.size>0)for(let O of L)O instanceof RegExp&&O.source!==k.source&&L.add(k);else L.add(k)}}}(),i=function hn(e={keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]}){let a=new Set(e.keywords);return{get grammar(){return e},get keywords(){return a},extend(i){for(let p in i)if(Ae(i[p]))for(let x of i[p])"keywords"===p&&!a.has(x)&&(e[p].push(x),a.add(x))}}}(),p=function dn(e={embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],tags:["a","abbr","acronym","address","applet","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","fieldset","figcaption","figure","figure","font","footer","form","frame","frameset","h1","h6","head","header","html","i","iframe","ins","isindex","kbd","label","legend","fieldset","li","main","map","mark","marquee","menu","meter","nav","noframes","frame","noscript","object","ol","optgroup","option","output","p","object","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","picture","video","audio","span","strike","strong","style","sub","summary","details","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","audio","video","tt","u","ul","var","video"]}){let a=new Set(e.tags),i=new Set(e.voids),p={};return x(e.embedded),{get grammar(){return e},get tags(){return a},get voids(){return i},get embed(){return p},extend(l){for(let j in l)if(Ae(l[j]))for(let s of l[j])"tags"===j&&!1===a.has(s)?(e.tags.push(s),a.add(s)):"voids"===j&&!1===i.has(s)&&(e.voids.push(s),i.add(s));else"embedded"===j&&"object"==typeof l[j]&&x(l[j])}};function x(l){for(let j in l){j in p||(p[j]={tag:j,attr:new Map});for(let{language:s,attribute:n}of l[j])if("language"in p[j]||(p[j].language=s),p[j].attr.has(s)||p[j].attr.set(s,{tag:j,language:s,attr:new Map}),n){let h=p[j].attr.get(s);for(let o in n){h.attr.has(o)||h.attr.set(o,{tag:j,language:s,attr:o,value:new Set});let L=p[j].attr.get(s).attr.get(o);if(Ae(n[o]))for(let k of n[o])L.value.has(k)||L.value.add(k);else{let k=new RegExp(n[o]);if(L.value.size>0)for(let O of L.value)O instanceof RegExp&&O.source!==k.source&&L.value.add(k);else L.value.add(k)}}}}}}(),x=function pn(e={tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}){let a=new Set(e.tags);return{get grammar(){return e},get tags(){return a},extend(i){for(let p in i)if(Ae(i[p]))for(let x of i[p])"tags"===p&&!1===a.has(x)&&(e.tags.push(x),a.add(x))}}}();return{html:p,liquid:a,js:i,css:e,svg:x,extend(l){if("object"==typeof l)for(let j in l)"liquid"===j?a.extend(l.liquid):"html"===j?p.extend(l.html):"css"===j?e.extend(l.css):("js"===j||"svg"===j)&&i.extend(l.js);return{get html(){return p.grammar},get liquid(){return a.grammar},get js(){return i.grammar},get css(){return e.grammar},get svg(){return e.grammar}}}}}();function Ee(e,a=NaN,i){if(!1===bt(e))return d;if(P(e,60)&&P(e,123))return i||e;if(t(e,60)){let x=e.search(/[\s>]/),l=e.slice(t(e[1],47)?2:1,x);return t(l,63)&&Me(l,63)?"xml":isNaN(a)?l:l.slice(a)}let p=(t(e[2],45)?e.slice(3).trimStart():e.slice(2).trimStart()).split(/\s|-?[%}]}/).shift();return isNaN(a)?p:p.slice(a)}function Dt(e){return(a,i,p)=>{let x=e,l=e;return t(p[i-1],92)&&(x=a[0]),t(a[a.length-2],92)&&(l=a[a.length-1]),x+a.slice(1,-1)+l}}var ze={version:"0.5.5-beta.1",env:typeof process<"u"&&null!=process.versions?"node":"browser",lastUpdate:(new Date).toDateString(),cwd:null,reportStats:!0,editorConfig:!1,throwErrors:!0,persistRules:!0,logLevel:2,logColors:!0,resolveConfig:"package.json"};function Qe(e,a,i){i||(i=Ee(a));let p=Bt(e,i,r.lineNumber);p.language=Xe(r.language),r.error=kt(p.message,R,function kn(e=r.lineNumber){let a=[],i=r.source.split(R),p=e,x=`${p+1}`.length,l=p-1,j="";i.length>2&&(l=p-3),2===i.length&&(l=p-2);do{let s=`${l+1}`,n=x-s.length>0?` \x1b[90m${s} |`:`\x1b[90m${s} |`,h=i[l].trim();if(l>p)break;h?(l===p-1?0===h.length?a.push(`${" ".repeat(x+2)} ${Vt(j.length)}`):(a.push(`${n} \x1b[31m${h}\x1b[39m`),a.push(`${" ".repeat(x+2)} ${Vt(h.length)}`)):a.push(`${n} \x1b[90m${h||"\u2424"}`),l+=1,j=h):(a.push(`${n} \x1b[90m${h||"\u2424"}`),l+=1)}while(l<p);return a.join(R)}(),R,p.details,R,`Language: ${Xe(r.language)} `,`Location: ${r.lineNumber}:${r.lineColumn}`,`\xc6sthetic: Parse Failed (Code: ${p})`)}function Jt(e,a,i){i||(i=Ee(a.token));let p=Bt(e,i,a.line);p.language=Xe(r.language),r.error=kt(p.message,R,function gn(e){let a=e.line-r.get(e.index).lines,i=0,p="",x=r.source.split(R).slice(a,e.line),l=`${e.line+1}`.length,j=[],{indentSize:s,indentChar:n}=r.rules;do{let h=`${a+1}`,o=l-h.length>0?` \x1b[90m${h} |`:`\x1b[90m${h} |`;if(p=x[i],0===i){if(He(x[i])){j.push(`${o} \x1b[31m${e.token}\x1b[39m`);break}p=x[i].trimStart(),j.push(`${o} \x1b[31m${p}\x1b[39m`)}else{let L=p.match(/^\s*/);null!==L&&L[0].length>s?(p=n.repeat(s)+p.trimStart(),j.push(`${o} \x1b[31m${p}\x1b[39m`)):j.push(`${o} \x1b[31m${p}\x1b[39m`)}i+=1,a+=1}while(i<x.length);return j.join(R)}(a),R,p.details,R,Oe(`Language: ${Xe(r.language)}`),Oe(`Location: ${a.line}`),Oe(`\xc6sthetic: Parse Failed (Code: ${e})`))}function Ce(e){return kt(`Rule Error: ${e.message}`,R,`Definition: ${e.option}`,`Provided: ${e.provided} `,`Expected: ${e.expected.join(", ")} `)}var Vt=e=>`\x1b[93m${"^".repeat(e)}\x1b[39m`;function Oe(...e){return ze.logColors?`${e.join(R)}`.replace(/"(.*?)"/g,"\x1b[31m$1\x1b[39m"):e.join(R)}function Bt(e,a,i=r.lineNumber){return{105:{code:e,message:Oe(`Syntax Error (line ${i}): Missing HTML "${a}" end tag`),details:Oe(`The "<${a}>" tag type has an incomplete HTML syntactic structure resulting in a parse error.`,`To resolve the issue check that you have a closing "</${a}>" tag. For more information`,"see: https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags")},112:{code:e,message:Oe(`Syntax Error (line ${i}): Missing Liquid "end${a}" tag`),details:Oe(`The Liquid "${a}" is a tag block type which requires an end tag be provided.`,"For more information, see: https://shopify.dev/api/liquid/tags")},104:{code:e,message:Oe(`Syntax Error (line ${i}): Missing HTML start "${a}" tag`),details:Oe("There is an incorrect placement or an incomplete structure resulting in a parse error.",`To resolve the issue, you may need to provide a start \`<${a}>\` tag type or correct the placement. `)},110:{code:e,message:Oe(`Syntax Error (line ${i}): Missing Liquid start "${a}" tag`),details:Oe("The Liquid tag has incorrect placement or an incomplete structure resulting in a parse error.","To resolve the issue, you may need to provide a start tag type or correct the placement. ")},111:{code:e,message:Oe(`Syntax Error (line ${i}): Missing Close Delimiter "%}" or "}}" on liquid tag`),details:Oe("The Liquid tag is missing its closing delimiter resulting in malformed syntax.")},106:{code:e,message:Oe(`Syntax Error (line ${i}): Missing HTML ">" delimiter on end tag`),details:Oe("The HTML tag is missing its closing delimiter resulting in malformed syntax.",'You can have Esthetic autofix syntax errors like this by setting the markup rule "correct" to true.')},107:{code:e,message:Oe(`Illegal Syntax (line ${i}): Invalid HTML Comment Attribute`),details:Oe("HTML comments are not allowed inside tags, start or end, at all.","To resolve the issue, remove the comment or place it above the tag.","For more information see: https://html.spec.whatwg.org/multipage/syntax.html#start-tags")},103:{code:e,message:Oe(`Syntax Error (line ${i}): Invalid quotation character`),details:Oe("Bad quotation character (\u201c, &#x201c) provided. Only single ' or double \"","quotations characters are valid in HTML (markup) languages. For more information see:","https://html.spec.whatwg.org/multipage/parsing.html#attribute-value-(double-quoted)-state")},108:{code:e,message:Oe(`Syntax Error (line ${i}): Invalid CDATA Termination Sequence`),details:Oe("The CDATA bracket state sequence provided is invalid resulting in a parse error.","For more information see: https://html.spec.whatwg.org/multipage/parsing.html#cdata-section-bracket-state")},114:{code:e,message:Oe(`Syntax Error (line ${i}): Invalid character sequence in "${a}" token`),details:Oe("An invalid sequence of characters defined")},101:{code:e,message:Oe(`Syntax Error (line ${i}): Unterminated String`),details:Oe("There is an unterminated string sequence resulting in a parse error.")}}[e]}var ut=/\S/,tt=/^\s+$/,nt=/\s+/g,ct=/^\s+/,Ne=/\s+$/,Ze=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/,Ht=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/,mn=/[\t\v\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/g,Zt=/^\n+/,bn=/({%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-(start|next|end)\b/,pt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-start\b/,Ut=/^\/\/\s*esthetic-ignore-start\b/,yn=/^\/\*{1,2}(?:\s*|\n\s*\*\s*)esthetic-ignore-start\b/,wn=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!--)\s*esthetic-ignore-next\b/,dt=/^<!--+/,ft=/--+>$/,xn=/{%-?|-?%}/g,vn=/^{%-?\s*#/,Gt=/(\/|\\|\||\*|\[|\]|\{|\})/g;function wt(e){let{rules:a}=r,i=[],p=[],x=e.begin.replace(Gt,Pt),l=t(e.begin[0],123)&&t(e.begin[1],37),j=new RegExp(`^(${x}\\s*esthetic-ignore-start)`),s=new RegExp(`(${x}\\s*)`),n=l?new RegExp(`\\s*${e.ender.replace(xn,g=>t(g,123)?"{%-?\\s*":"\\s*-?%}")}$`):new RegExp(e.ender.replace(Gt,Pt)),h=e.start,o=0,L=0,k=0,O=0,c=[],f=d,b=d,Y=!1,u=!1,G=!1,B=d,q=e.ender.length-1,E=e.ender.charAt(q),I=0;function ie(){if(tt.test(c[o+1])||c[o+1]===d)do{o+=1}while(o<O&&(tt.test(c[o+1])||c[o+1]===d));o<O-1&&p.push(d)}do{if(i.push(e.chars[h]),t(e.chars[h],10)&&(r.lineOffset=r.lines(h,r.lineOffset)),e.chars[h]===E&&e.chars.slice(h-q,h+1).join(d)===e.ender)break;h+=1}while(h<e.end);if(B=i.join(d),!0===j.test(B))return function oe(){let g=R;h+=1;do{if(i.push(e.chars[h]),"esthetic-ignore-end"===i.slice(i.length-19).join(d)){if(l){let A=e.chars.indexOf("{",h);if(t(e.chars[A+1],37)){let z=e.chars.slice(A,e.chars.indexOf("}",A+1)+1).join(d);n.test(z)&&(e.ender=z)}}h+=1;break}h+=1}while(h<e.end);o=h,q=e.begin.length-1,E=e.begin.charAt(q);do{if("/*"===e.begin&&t(e.chars[o-1],47)&&(t(e.chars[o],42)||t(e.chars[o],47))||"/*"!==e.begin&&e.chars[o]===E&&e.chars.slice(o-q,o+1).join(d)===e.begin)break;o-=1}while(o>e.start);if("/*"===e.begin&&t(e.chars[o],42)?g="*/":"/*"!==e.begin&&(g=e.ender),q=g.length-1,E=g.charAt(q),g!==R||e.chars[h]!==R)do{if(i.push(e.chars[h]),g===R&&e.chars[h+1]===R||e.chars[h]===E&&e.chars.slice(h-q,h+1).join(d)===g)break;h+=1}while(h<e.end);return e.chars[h]===R&&(h-=1),B=i.join(d).replace(Ht,d),[B,h]}();if(!0===l&&a.liquid.preserveComment||!1===l&&a.markup.preserveComment||"style"===r.lexer&&a.style.preserveComment||"script"===r.lexer&&a.style.preserveComment||a.wrap<1||h===e.end||B.length<=a.wrap&&B.indexOf(R)<0||"/*"===e.begin&&B.indexOf(R)>0&&B.replace(R,d).indexOf(R)>0&&!1===/\n(?!(\s*\*))/.test(B))return[B,h];if(o=e.start,o>0&&P(e.chars[o-1],10)&&ue(e.chars[o-1]))do{o-=1}while(o>0&&P(e.chars[o-1],10)&&ue(e.chars[o-1]));f=e.chars.slice(o,e.start).join(d);let S=new RegExp(R+f,"g");c=B.replace(/\r\n/g,R).replace(S,R).split(R),O=c.length,c[0]=c[0].replace(s,d),c[O-1]=c[O-1].replace(n,d),O<2&&(c=c[0].split(se)),c[0]===d?c[0]=e.begin:c.splice(0,0,e.begin),O=c.length,o=0;do{if(b=o<O-1?c[o+1].replace(Ze,d):d,!0===tt.test(c[o])||c[o]===d)ie();else if(c[o].replace(Ze,d).length>a.wrap&&c[o].replace(Ze,d).indexOf(se)>a.wrap)c[o]=c[o].replace(Ze,d),L=c[o].indexOf(se),p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),o-=1;else{if(I=o<1?a.wrap-e.begin.length+1:a.wrap,c[o]=("/*"===e.begin&&0!==c[o].indexOf("/*")?"   ":d)+c[o].replace(Ze,d).replace(Ht,d).replace(nt,se),k=c[o].replace(Ze,d).indexOf(se),L=c[o].length,L>I&&k>0&&k<I){L=I;do{if(L-=1,ue(c[o].charAt(L))&&L<=a.wrap)break}while(L>0);!0===/^\s*\d+\.\s/.test(c[o])&&!1===/^\s*\d+\.\s/.test(c[o+1])&&c.splice(o+1,0,"1. "),!0===tt.test(c[o+1])||c[o+1]===d?(p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),Y=!0,o-=1):/^\s*[*-]\s/.test(c[o+1])?(p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),u=!0,o-=1):/^\s*\d+\.\s/.test(c[o+1])?(p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),G=!0,o-=1):c[o].replace(Ze,d).indexOf(se)<a.wrap&&(c[o+1]=c[o].length>a.wrap?c[o].slice(L+1)+r.crlf+c[o+1]:c[o].slice(L+1)+se+c[o+1]),!1===Y&&!1===u&&!1===G&&(c[o]=c[o].slice(0,L))}else void 0!==c[o+1]&&(c[o].length+b.indexOf(se)>a.wrap&&b.indexOf(se)>0||c[o].length+b.length>a.wrap&&b.indexOf(se)<0)?(p.push(c[o]),o+=1):(void 0!==c[o+1]&&!1===tt.test(c[o+1])&&c[o+1]!==d&&/^\s*(?:[*-]|\d+\.)\s/.test(c[o+1]),p.push(c[o]),Y=!0);u=!1,G=!1}o+=1}while(o<O);return p.length>0?(p[p.length-1].length>a.wrap-(e.ender.length+1)||c.length-1>p.length&&c.slice(p.length+1).forEach(g=>{g===d&&p.push(g)}),p.push(e.ender),B=p.join(r.crlf)):(c[c.length-1]=c[c.length-1]+e.ender,B=c.join(r.crlf)),[B,h]}function Yt(e){let{wrap:a}=r.rules,{preserveComment:i}=r.rules[r.lexer],p=e.start,x=0,l=d,j=[];do{j.push(e.chars[p]),p+=1}while(p<e.end&&P(e.chars[p],10));if(p===e.end?e.chars.push(R):p-=1,l=j.join(d).replace(Ne,d),!0===Ut.test(l)){let h=R;p+=1;do{j.push(e.chars[p]),p+=1}while(p<e.end&&(P(e.chars[p-1],100)||t(e.chars[p-1],100)&&"esthetic-ignore-end"!==j.slice(j.length-19).join(d)));x=p;do{}while(x>e.start&&t(e.chars[x-1],47)&&(t(e.chars[x],42)||t(e.chars[x],47)));if(t(e.chars[x],42)&&(h="*/"),h!==R||P(e.chars[p],10))do{if(j.push(e.chars[p]),h===R&&t(e.chars[p+1],10))break;p+=1}while(p<e.end&&(h===R||"*/"===h&&(t(e.chars[p-1],42)||t(e.chars[p],47))));return e.chars[p]===R&&(p-=1),l=j.join(d).replace(Ne,d),[l,p]}return"//"===l||!0===i||(l=l.replace(/(\/\/\s*)/,"// "),a<1||p===e.end-1&&r.data.begin[r.count]<1||(x=p+1,function s(){let h=d;do{if(x+=1,t(e.chars[x+1],10))return}while(x<e.end&&ue(e.chars[x]));if(e.chars[x]+e.chars[x+1]==="//"){j=[];do{j.push(e.chars[x]),x+=1}while(x<e.end&&P(e.chars[x],10));h=j.join(d),!1===/^\/\/ (?:[*-]|\d+\.)/.test(h)&&!1===/^\/\/\s*$/.test(h)&&(l=`${l} ${h.replace(/(^\/\/\s*)/,d).replace(Ne,d)}`,p=x-1,s())}}(),function n(){let h=[],o={ender:-1,types:"comment",lexer:e.lexer,lines:r.lineOffset};r.count>-1?(o.begin=r.stack.index,o.stack=r.stack.token,o.token=r.data.token[r.count]):(o.begin=-1,o.stack="global",o.token=d);let L=0,k=0;if(l=l.replace(/\s+/g,se).replace(Ne,d),k=l.length,!(a>k)){do{if(L=a,P(l[L],32)){do{L-=1}while(L>0&&P(l[L],32));if(L<3){L=a;do{L+=1}while(L<k-1&&P(l[L],32))}}h.push(l.slice(0,L)),l=`// ${l.slice(L).replace(ct,d)}`,k=l.length}while(a<k);L=0,k=h.length;do{o.token=h[L],r.push(r.data,o,d),o.lines=2,r.lineOffset=2,L+=1}while(L<k)}}())),[l,p]}var De=Object.assign,jn={global:{preset:{description:"Use preset style guide as the base defaults",default:"default",type:"choice",values:[{rule:"default",description:"This is the default and the most unobtrusive."},{rule:"recommended",description:"This style guide is typically suited for most cases"},{rule:"strict",description:"This is a strict ruleset curated by the projects author."},{rule:"warrington",description:"This style guide preset is best suited for Shopify theme developers"},{rule:"prettier",description:"This preset replicates the Prettier style"}]},correct:{default:!1,description:"Automatically correct some sloppiness in code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},crlf:{description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},endNewline:{description:"Insert an empty line at the end of output.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},indentSize:{description:"The number of character values to comprise a single indentation.",type:"number",default:2,preset:{default:2,prettier:2,recommended:2,strict:2,warrington:2}},indentChar:{description:"The string characters to comprise a single indentation. Any string combination is accepted.",type:"string",default:" ",preset:{default:" ",prettier:" ",recommended:" ",strict:" ",warrington:" "}},indentLevel:{default:0,type:"number",description:"How much indentation padding should be applied to beautification? This is typically used internally",preset:{default:0,prettier:0,recommended:0,strict:0,warrington:0}},language:{description:"The language name",type:"choice",default:"auto",values:[{rule:"auto",description:"Detect Language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",type:"number",preset:{default:2,prettier:2,recommended:3,strict:1,warrington:3}},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",type:"number",preset:{default:0,prettier:80,recommended:120,strict:0,warrington:100}},wrapFraction:{default:0,description:"Wrap fraction is used on internal structures as a secondary point of control. By default, it will use a 75% metric according to `wrap` defined values.",type:"number",preset:{default:0,prettier:80,recommended:80,strict:80,warrington:0}}},liquid:{commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},delimiterTrims:{default:"preserve",description:"How delimiter whitespace trim dashes should handled on Liquid tokens. You should avoid setting this to force in order to avoid stripping whitespace between text content.",type:"choice",values:[{rule:"preserve",description:"All trim dash occurances of trims intact"},{rule:"never",description:"Removes all trim dash occurances for tags and output tokens"},{rule:"always",description:"Applies trime dashes to all tags and output tokens"},{rule:"tags",description:"Applies trim dashes to tags tokens only"},{rule:"outputs",description:"Applies trim dashes to output object tokens only"},{rule:"multiline",description:"Applies trim dashes to multline token expressions only"}],preset:{default:"preserve",prettier:"preserve",recommended:"preserve",strict:"multiline",warrington:"preserve"}},ignoreTagList:{default:[],description:"A list of liquid tag to ignore",type:"array",preset:{default:[],prettier:["javascript","capture"],recommended:["javascript"],strict:[],warrington:[]}},indentAttribute:{default:!1,description:"Whether or not markup tags with Liquid contained attributes should apply indentation",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!1,warrington:!0}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},normalizeSpacing:{default:!0,description:"Whether or not to normalize the distributed spacing contained in Liquid tokens.",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!0,warrington:!0}},lineBreakSeparator:{default:"default",description:"Controls the placement of Liquid tag separator type characters in newline structures.",type:"choice",values:[{rule:"preserve",description:"Leave line break character intace"},{rule:"before",description:"Place line break character at the start of expressions"},{rule:"after",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"after",recommended:"before",strict:"before",warrington:"after"}},dedentTagList:{default:[],description:"List of tags which will have their inner contents excluded from indentation",type:"array",preset:{default:[],prettier:["schema"],recommended:[],strict:[],warrington:[]}},forceArgument:{default:0,description:"Forces arguments onto newlines. When this value is `0` then arguments will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:3,strict:3,warrington:0}},forceFilter:{default:0,description:"Forces filter pipes onto newlines. When this value is `0` then filters will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:5,strict:4,warrington:0}},delimiterPlacement:{default:"preserve",description:"Controls the placement of Liquid delimiters",type:"choice",values:[{rule:"preserve",description:"Preserve delimiters"},{rule:"default",description:"Use defaults"},{rule:"consistent",description:"Place line break character at the start of expressions"},{rule:"inline",description:"Place line break character at the end of expressions"},{rule:"force-inline",description:"Place line break character at the end of expressions"},{rule:"force-multiline",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"default",recommended:"consistent",strict:"force-multiline",warrington:"consistent"}},preserveInternal:{default:!1,description:"Whether or not to preserve the inner contents of tokens",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"single",strict:"single",warrington:"single"}}},markup:{attributeSort:{default:!1,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",type:{array:"A list of attributes to begin sorting order with",boolean:"Whether or not to apply alphanumeric sorting"},preset:{default:!1,prettier:!1,recommended:!0,strict:["id","class","type","name","value"],warrington:!1}},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"choice",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}],preset:{default:"preserve",prettier:"preserve",recommended:"lowercase-name",strict:"lowercase-name",warrington:"preserve"}},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!1}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},delimiterTerminus:{description:"Whether or not ending HTML tag delimiters should be forced onto a newline. This will emulate the style of Prettier's singleAttributePerLine formatting option, wherein the last > delimiter character breaks itself onto a new line",default:"inline",type:"choice",values:[{rule:"inline",description:"Inline the ending delimiter"},{rule:"force",description:"Force the ending delimiter onto its own line"},{rule:"adapt",description:"adapt the delimiter in accordance with structure"}],preset:{default:"inline",prettier:"force",recommended:"adapt",strict:"adapt",warrington:"adapt"}},forceAttribute:{default:!1,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",type:{number:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact.",boolean:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."},preset:{default:!1,prettier:1,recommended:2,strict:2,warrington:2}},forceIndent:{default:!1,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},ignoreJS:{default:!0,description:"Whether to ignore embedded regions of tags identified to contain JavaScript",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!1,warrington:!1}},ignoreCSS:{default:!1,description:"Whether to ignore embedded regions of tags identified to contain CSS",type:"boolean",preset:{default:!1,prettier:!0,recommended:!1,strict:!1,warrington:!1}},ignoreJSON:{default:!1,description:"Whether HTML <script> tags annotated with a JSON identifiable attribute should be ignored from beautification.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveAttribute:{default:!1,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveText:{default:!1,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},lineBreakValue:{default:"preserve",description:"Determines how \xc6sthetic should handle line break occurance sequences within attribute values",type:"choice",values:[{rule:"preserve",description:"Preserve the supplied value structure sequences"},{rule:"align",description:"Align all line breaks to the starting point of attribute name"},{rule:"indent",description:"Indent all line breaks from the starting point of attribute name"},{rule:"force-preserve",description:"Force encapsulated values onto newlines but preserve inner contents"},{rule:"force-align",description:"Force encapsulated values onto newlines and apply aligned formatting"},{rule:"force-indent",description:"Force encapsulated values onto newlines and apply indentation formatting"}],preset:{default:"preserve",prettier:"indent",recommended:"force-indent",strict:"force-indent",warrington:"force-indent"}},selfCloseSpace:{default:!1,description:'Markup self-closing tags end will end with " />" instead of "/>".',type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},selfCloseSVG:{default:!0,description:"Whether or not SVG type tags should be converted to self closing void types.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},stripAttributeLines:{default:!1,description:"Whether or not newlines contained within tag attributes should be removed or preserved.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"double",strict:"double",warrington:"double"}}},style:{classPadding:{description:"Inserts new line characters between every CSS code block.",default:!1,type:"boolean"},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},sortSelectors:{default:!1,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code."},sortProperties:{description:"This option will alphabetically sort CSS properties contained within classes.",default:!1,type:"boolean"},noLeadZero:{description:"This will eliminate leading zeros from numbers expressed within values.",default:!1,type:"boolean"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},atRuleSpace:{default:!0,description:"Insert a single whitespace character betwen @ rules.",type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},json:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"}},script:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},braceNewline:{default:!1,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"choice",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},caseSpace:{default:!1,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code."},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},elseNewline:{default:!1,type:"boolean",description:'If keyword "else" is forced onto a new line.'},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"choice",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{default:!0,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{default:!0,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},ternaryLine:{description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:!1},neverFlatten:{default:!0,description:"If destructured lists in script should never be flattend.",type:"boolean"},noCaseIndent:{description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:!1,type:"boolean"},noSemicolon:{description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:!1,type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},variableList:{description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:!1}}};function xt(e,a,i){if("html"===a){if(!(e in je.html.embed))return!1;let p=je.html.embed[e];if(p.attr.size>0)for(let x of p.attr.values()){if(!i)return x;if(x.attr.has(i[0])&&x.attr.get(i[0]).value.has(i[1]))return x.attr.get(i[0])}return p.attr.has(i[0])?p.attr.get(i[0]).attr.has(i[1])?p.attr.get(i[0]).attr.get(i[1]):p.attr.get(i[0]):p}if("liquid"===a){if(!(e in je.liquid.embed))return!1;let p=je.liquid.embed[e];if(p.args.size>0&&i){let x=i.slice(i.indexOf(e)+e.length).match(/\s*(.*)(?=\s)/)[0];for(let[l,j]of p.args){if(l.has(x))return j;for(let s of l)if(s instanceof RegExp&&s.test(x))return j}}return p}}function On(e,a){let x,i=t(e[2],45)?3:2,p=e.slice(i);return x="never"===a.delimiterTrims?`{${e[1]}`:"always"===a.delimiterTrims||"outputs"===a.delimiterTrims&&t(e[1],123)||"tags"===a.delimiterTrims&&t(e[1],37)?`{${e[1]}-`:e.slice(0,i),"preserve"===a.delimiterPlacement?x+=/^\s*\n/.test(p)?R:se:"force"===a.delimiterPlacement?x+=R:"inline"===a.delimiterPlacement||"default"===a.delimiterPlacement||"force-multiline"===a.delimiterPlacement?x+=se:"consistent"===a.delimiterPlacement&&(/^\s*\n/.test(p)?x+=R:x+=se),x+p.trim()}function Qt(e,a,i){let l,s,[p,x]=Kt(e),j=e.slice(p,x);return"never"===i.delimiterTrims?(l=`{${e[1]}`,s=`${e[e.length-2]}}`):"always"===i.delimiterTrims||"outputs"===i.delimiterTrims&&t(e[1],123)||"tags"===i.delimiterTrims&&t(e[1],37)?(l=`{${e[1]}-`,s=`-${e[e.length-2]}}`):(l=e.slice(0,p),s=e.slice(x)),a||(a=j.trimStart().split(/\s/)[0]||""),"else"===a||"break"===a||"continue"===a||"increment"===a||"decrement"===a||a.startsWith("end")?(l+=se,s=se+s):"preserve"===i.delimiterPlacement?(l+=/^\s*\n/.test(j)?R:se,s=(/\s*\n\s*$/.test(j)?R:se)+s):"force"===i.delimiterPlacement?(l+=R,s=R+s):"inline"===i.delimiterPlacement||"default"===i.delimiterPlacement||"force-multiline"===i.delimiterPlacement?(l+=se,s=se+s):"consistent"===i.delimiterPlacement&&(/^\s*\n/.test(j)?(l+=R,s=R+s):(l+=se,s=se+s)),j=j.trim(),l+j+s}function Kt(e){return[t(e[2],45)?3:2,t(e[e.length-3],45)?e.length-3:e.length-2]}function Sn(e,a=!0){return a?new RegExp(`{%-?\\s*${e}\\s*-?%}`):new RegExp(`{%-?\\s*${e}`)}function _n(e){let a=e.indexOf("{");return t(e[a+1],123)}function Xt(e){let a=e.indexOf("{");if(t(e[a+1],37)){let i;return i=e.slice(a+(t(e[a+2],45)?3:2)).trimStart(),i=i.slice(0,i.search(/[\s=|!<>,.[]|-?[%}]}/)),!i.startsWith("end")&&je.liquid.else.has(i)}return!1}function Cn(e){let a=e.indexOf("=");return!!(a>-1&&(t(e[a+1],34)||t(e[a+1],39)))&&/{%-?\s*end[a-z]+/.test(e.slice(a,e.lastIndexOf(e[a+1])))}function Rt(e){return!!it(e)&&/{%-?\s*end\w+/.test(e)}function it(e,a=!1){let i;if(a)return!!(t(e[0],123)&&t(e[1],37)&&t(e[e.length-2],37)&&t(e[e.length-1],125))&&(i=e.slice(t(e[2],45)?3:2).trimStart(),!t(i,34)&&!t(i,39)&&(i=i.slice(0,i.search(/[\s=|!<"'>,.[]|-?[%}]}/)),!i.startsWith("end")&&je.liquid.tags.has(i)));let p=e.indexOf("{");if(-1===p)return!1;do{if(t(e[p+1],37))return i=e.slice(p+(t(e[p+2],45)?3:2)).trimStart(),i=i.slice(0,i.search(/[\s=|!<>,.[]|-?[%}]}/)),!i.startsWith("end")&&je.liquid.tags.has(i);p=e.indexOf("{",p+1)}while(p>-1);return!1}function vt(e){let a=e;Array.isArray(e)&&(a=e.join(d));let i=a.indexOf("{");return!!t(a[i+1],37)&&(t(a[i+2],45)?a.slice(i+3).trimStart().startsWith("end"):a.slice(i+2).trimStart().startsWith("end"))}function jt(e,a){if(1===a)return t(e[0],123)&&(t(e[1],37)||t(e[1],123));if(6===a)return t(e[0],123)&&t(e[1],37);if(7===a)return t(e[0],123)&&t(e[1],123);if(8===a)return t(e[e.length-2],37)&&t(e[e.length-1],125);if(9===a)return t(e[e.length-2],125)&&t(e[e.length-1],125);if(4===a)return/{[{%]/.test(e);if(5===a)return/{[{%]/.test(e)&&/[%}]}/.test(e);if(2===a){let i=e.length;return t(e[i-1],125)&&(t(e[i-2],37)||t(e[i-2],125))}if(3===a){let i=e.length;return t(e[0],123)&&(t(e[1],37)||t(e[1],123))&&t(e[i-1],125)&&(t(e[i-2],37)||t(e[i-2],125))}}function en(e){let L,{data:a,rules:i}=r,p=e||r.source,x="jsx"===r.language||"tsx"===r.language,l=new Set(i.liquid.ignoreTagList),j=Ae(i.markup.attributeSort)?i.markup.attributeSort.length:-1,s=Ae(p)?p:p.split(d),n=s.length,h={start:-1,tname:[],index:[]},o=0,k=!1,O=en?r.language:"html",c=0;function f(S,g=d,A){if(g===d&&void 0===A)r.push(a,S,d);else if(mt(g))De(S,g),r.push(a,S,d);else if(Ae(g))for(let z of g)De(S,z),r.push(a,S,d);else A?(De(S,A),r.push(a,S,g)):console.log("isssue")}function b(S,g=null){return"html"!==r.language&&"liquid"!==r.language&&!1===x||/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(S)||!jt(S,3)?S:Qt(S,g,i.liquid)}function Y(S,g=d){if(S<1)return g;let A=d,z=s.lastIndexOf(R,S);return z>-1&&(A=p.slice(z+1,S),A.length>0&&A.trim().length<1)?g?A+g:A:g}function u(S,g=s){let A=S,z=1;for(;t(g[A++],10);)z+=1;return z}function G(S,g=-1,A=!1){return!1===A?p.slice(S,g).trimStart():p.slice(S,g)}function B(S){let g=S;do{g-=1}while(t(s[g],92));return g=S-g,g%2==1}function E(S,g=!0){let A=S.indexOf("=");if(A>0){let z=S.indexOf($e);if(A<z&&z>0)return g?[S.slice(0,A),S.slice(A+1)]:[S.slice(0,A),S.slice(A+2,-1)];let V=S.indexOf(_e);if(A<V&&V>0)return g?[S.slice(0,A),S.slice(A+1)]:[S.slice(0,A),S.slice(A+2,-1)]}return[S,d]}function I(S){let g={lexer:"markup",lines:r.lineOffset,stack:"global"!==r.stack.token?r.stack.token:"global",begin:r.stack.index,token:d,types:d,ender:-1},A=d,z=d,V=d,ne=d,ye=d,xe=!1,_=!1,W=0,te=!1,H=!1,K=!1,fe=!1,D=[];function le(){return ae()}function w(){return fe&&!1===_&&"xml"!==V&&(je.html.voids.has(ne)?(g.types=V="singleton",P(A[A.length-2],47)&&(g.token=function q(S){return!1===i.correct||t(S[S.length-2],47)?S:/\/\s+>$/.test(S)?`${S.slice(0,S.lastIndexOf("/"))}${i.markup.selfCloseSpace?"/>":" />"}`:`${S.slice(0,-1)}${i.markup.selfCloseSpace?"/>":" />"}`}(A))):g.types=V=t(A[A.length-2],47)&&t(A[A.length-1],62)?"singleton":"start"),function Z(){if("svg"===ne&&(h.start=r.count+1),je.svg.tags.has(ne)&&h.start>0)if("start"===g.types)g.types="singleton",h.tname.push(ne),h.index.push(r.count+1);else if("end"===g.types){let v=h.tname.indexOf(ne),N=h.tname.lastIndexOf(ne);v>-1&&(N===v?(a.types[h.index[N]]="start",h.tname.splice(N,1),h.index.splice(N,1)):a.begin[r.count]===h.index[v]?(a.types[a.begin[r.count]]="start",h.tname.splice(v,1),h.index.splice(v,1)):a.types[h.index[N]]="start"),"svg"===ne&&(h.start=-1)}return function ve(){if(g.types.indexOf("liquid")<0)return le();if(g.token===d&&(g.token=A),t(A[0],123)&&t(A[1],37))if(je.liquid.else.has(ne))g.types=V="when"===ne?"liquid_when":"liquid_else";else if(je.liquid.tags.has(ne))g.types=V="liquid_start";else if(ne.startsWith("end")){let v=ne.slice(3);if(je.liquid.tags.has(v))g.types=V="liquid_end";else{g.stack=v,g.types=V="liquid_end";let N=0;do{if("liquid"===a.types[N]&&a.stack[N]===v){a.types[N]="liquid_start";break}N=a.stack.indexOf(v,N+1)}while(N>-1)}}else g.stack=ne;return"double"===i.liquid.quoteConvert?g.token=A=g.token.replace(/"[^']*?"/g,Dt($e)):"single"===i.liquid.quoteConvert&&(g.token=A=g.token.replace(/'[^"]*?'/g,Dt(_e))),le()}()}()}function Q(){if(r.count<1)return w();let v=d;if(wn.test(a.token[r.count])){if(je.html.voids.has(ne))return g.token=A.replace(">",D.map(([N])=>N).join(se)+">"),g.types="ignore",f(g);V.indexOf("liquid")>-1&&je.liquid.tags.has(ne)&&(v=`end${ne}`),_=!0,K=!1}else(function qn(e,a){return typeof a<"u"?e in je[a].embed:e in je.html.embed||e in je.liquid.embed})(ne,"liquid")&&l.has(ne)&&(v=null);if(null!==v&&!1===K&&!0===_&&(">"===S||"}}"===S||"%}"===S)){let N=[];if(K=!0,o+=1,o<n){"json_preserve"!==V&&"script_preserve"!==V&&"style_preserve"!==V&&"liquid_json_preserve"!==V&&"liquid_script_preserve"!==V&&"liquid_style_preserve"!==V&&(V="ignore");let T=d,F=0,U=-1,de=d,ce=0,ke=0,re=!1;do{if(t(s[o],10)&&r.lines(o),N.push(s[o]),T===d){if(T=t(s[o],34)?$e:t(s[o],39)?_e:d,t(s[o],123)&&(t(s[o+1],123)||t(s[o+1],37))){if(U=t(s[o+1],37)?s.indexOf("}",o)+1:s.indexOf("}",o)+2,de=G(t(s[o+2],45)?o+3:o+2,U),de.startsWith(ne))F+=1;else if(de.startsWith(v))if(F>0)F-=1;else if(t(s[o+1],123)&&(U+=1),t(s[U-2],37)){N.push(...s.slice(o+1,U)),V="liquid_ignore",o=U-1;break}}else if(t(s[o],60)&&!0===fe)re=t(s[o+1],47);else if(s[o]===z&&P(s[o-1],47))if(!0===re){if(W-=1,W<0)break}else W+=1}else if(t(s[o],T.charCodeAt(T.length-1))){if(ke=0,ce=T.length-1,t(T[ce],125)){if(G(o+(t(s[o+2],45)?3:2),s.indexOf("%",o+2)).startsWith(v))break}else if(ce>-1)do{if(P(s[o-ke],T.charCodeAt(ce)))break;ke+=1,ce-=1}while(ce>-1);ce<0&&(T=d)}o+=1}while(o<n)}if("ignore"===V){r.is("types","ignore")||(a.types[r.count]="ignore");let T=r.iterator+s.slice(r.iterator,o).join(d).search(ut),F=Y(T);F===d&&(F=a.token[r.count].search(ut)>0?at(a.token[r.count].search(ut)):d),D=[],A=F+s.slice(T,o-N.length+1).join(d)+N.join(d),g.types="ignore",g.token=A}else if("liquid_ignore"===V)r.is("types","ignore")||(a.types[r.count]="ignore"),A=Y(o-A.length-N.length+1,A)+N.join(d),V="ignore",g.types="ignore",g.token=A;else if(!V.startsWith("liquid_")){g.types="start",ae(!0);let T=N.lastIndexOf("<"),F=N.slice(0,T).join(d);return ut.test(F)?f(g,[{lexer:"markup",types:V,token:F},{lexer:"markup",types:"end",token:N.slice(T).join(d).trim()}]):f(g,[{lexer:"markup",types:"end",token:N.slice(T).join(d).trim()}]),k=!1,L=O,J()}}return w()}function X(){if(t(A,60)&&t(A[1],47))return Q();let v=D.length-1;if(t(A,60))if(v>-1)do{let N=xt(ne,"html",E(D[v][0],!1));if(!1!==N){if("json"===N.language&&i.markup.ignoreJSON){V="json_preserve",_=!0;break}if("javascript"===N.language&&i.markup.ignoreJS){V="script_preserve",_=!0;break}if("css"===N.language&&i.markup.ignoreCSS){V="style_preserve",_=!0;break}L=N.language,V="start",k=!0,_=!1;break}v-=1}while(v>-1);else{let N=xt(ne,"html");!1!==N&&("json"===N.language&&i.markup.ignoreJSON?(V="json_preserve",_=!0):"javascript"===N.language&&i.markup.ignoreJS?(V="script_preserve",_=!0):"css"===N.language&&i.markup.ignoreCSS?(V="style_preserve",_=!0):(L=N.language,V="start",k=!0,_=!1))}else if(it(A,!0)){let N=xt(ne,"liquid",A);if(!1!==N){if(l.has(ne))return _=!0,K=!1,Q();k=!0,L=N.language}}return Q()}function ae(v=!1){null!==v&&f(g);let N=r.count,T=ne.replace(/\/$/,d),F=i.markup.quoteConvert,U=0,de=0,ce=0,ke=d,re=d,ee=D.length;function Pe(){r.attributes.has(N)&&U+1===ee&&Nt(g.token,62)&&(g.token=g.token+">");let ge=g.types.indexOf("liquid_attribute")>-1;if(!0===_||"none"===F||g.types.indexOf("attribute")<0||!1===ge&&"single"===F&&g.token.indexOf($e)<0||!1===ge&&"double"===F&&g.token.indexOf(_e)<0)f(g);else{let qe=0,Fe=!1,we=g.token.split(d),pe=g.token.indexOf("="),ot=we.length-1;if(P(we[pe+1],34)&&P(we[we.length-1],34)&&"single"===F&&!1===ge)f(g);else if(P(we[pe+1],39)&&P(we[we.length-1],39)&&"double"===F&&!1===ge)f(g);else{if(qe=pe+2,!1===ge&&("double"===F?(g.token.slice(pe+2,ot).indexOf($e)>-1&&(Fe=!0),we[pe+1]=$e,we[we.length-1]=$e):"single"===F&&(g.token.slice(pe+2,ot).indexOf(_e)>-1&&(Fe=!0),we[pe+1]=_e,we[we.length-1]=_e)),!0===Fe||!0===ge){ge=!1;do{t(we[qe-1],123)&&(t(we[qe],37)||t(we[qe],123))?ge=!0:t(we[qe],125)&&(t(we[qe-1],37)||t(we[qe-1],125))&&(ge=!1),!0===ge?t(we[qe],34)&&"double"===F?we[qe]=_e:t(we[qe],39)&&"single"===F&&(we[qe]=$e):t(we[qe],39)&&"double"===F?we[qe]=$e:t(we[qe],34)&&"single"===F&&(we[qe]=_e),qe+=1}while(qe<ot)}g.token=we.join(d),f(g)}}}function Ie(){if(Rt(D[U][0]))g.types="liquid_attribute_chain",g.token=D[U][0];else if(vt(D[U][0]))g.token=D[U][0],g.types="liquid_attribute_end",g.ender=g.begin;else{if(it(D[U][0],!0))return g.types="liquid_attribute_start",g.begin=r.count,g.token=D[U][0],Pe(),!0;Xt(D[U][0])?(g.types="liquid_attribute_else",g.token=D[U][0]):(g.types="attribute",g.token=D[U][0])}return Pe(),!1}if(D.length<1)return!0!==v?void 0:J();if(t(D[D.length-1][0],47)&&(D.pop(),A=A.replace(/>$/,"/>")),de=D.length,ce=1,ce<de)do{ke=D[ce-1][0],t(ke[ke.length-1],61)&&D[ce][0].indexOf("=")<0&&(D[ce-1][0]=ke+D[ce][0],D.splice(ce,1),de-=1,ce-=1),ce+=1}while(ce<de);if((j>0||!0===i.markup.attributeSort)&&function me(){if(x||te||H)return;if(0===j)return void(D=Ft(D,d,!1));let ge=[];ce=0,de=0,ee=D.length;do{de=0;do{if(ke=D[de][0].split("=")[0],i.markup.attributeSort[ce]===ke){ge.push(D[de]),D.splice(de,1),ee-=1;break}de+=1}while(de<ee);ce+=1}while(ce<j);D=Ft(D,d,!1),D=ge.concat(D),ee=D.length}(),g.begin=N,g.stack=T,g.types="attribute",U<ee)do{if(void 0===D[U])break;g.lines=D[U][1],D[U][0]=D[U][0].replace(Ne,d),!0===x&&/^\/[/*]/.test(D[U][0])?(g.types="comment_attribute",g.token=D[U][0],Pe(),U+=1):D[U][1]<=1&&Rt(D[U][0])&&!Cn(D[U][0])?(g.types="liquid_attribute_chain",g.token=D[U][0],Pe(),U+=1):(de=D[U][0].indexOf("="),ce=D[U][0].indexOf($e),de<0?(vt(D[U][0])?(g.token=D[U][0],g.types="liquid_attribute_end",g.ender=g.begin):it(D[U][0],!0)?(g.types="liquid_attribute_start",g.begin=r.count,g.token=D[U][0]):Xt(D[U][0])?(g.types="liquid_attribute_else",g.token=D[U][0]):_n(D[U][0])?(g.types="liquid_attribute",g.token=D[U][0]):t(D[U][0],35)||t(D[U][0],91)||t(D[U][0],123)||t(D[U][0],40)||!0===x?g.token=D[U][0]:(g.types="liquid_attribute",g.token="preserve"===i.markup.attributeCasing?D[U][0]:D[U][0].toLowerCase()),Pe()):jt(D[U][0],6)?Ie():(ke=D[U][0].slice(0,de),re=!/\n/.test(D[U][0])||"force-preserve"!==i.markup.lineBreakValue&&"force-indent"!==i.markup.lineBreakValue&&"force-align"!==i.markup.lineBreakValue?D[U][0].slice(de+1):D[U][0][de+1]+R+D[U][0].slice(de+2,-1).trim()+R+D[U][0][D[U][0].length-1],"lowercase-name"===i.markup.attributeCasing?(ke=ke.toLowerCase(),D[U][0]=ke+"="+re):"lowercase-value"===i.markup.attributeCasing?(re=re.toLowerCase(),D[U][0]=ke+"="+re):("lowercase"===i.markup.attributeCasing&&(ke=ke.toLowerCase(),re=re.toLowerCase()),D[U][0]=ke+"="+re),!0===i.correct&&P(re,60)&&P(re,123)&&P(re,61)&&P(re,34)&&P(re,39)&&(re=$e+re+$e),!0===x&&/^\s*{/.test(re)?(f(g,"jsx_attribute",{token:`${ke}={`,types:"jsx_attribute_start"}),r.external("jsx",re.slice(1,re.length-1)),g.begin=r.count,/\s\}$/.test(re)?(re=re.slice(0,re.length-1),re=Ne.exec(re)[0],g.lines=re.indexOf("\n")<0?1:re.split("\n").length):g.lines=0,g.begin=r.stack.index,g.stack=r.stack.token,g.token="}",g.types="jsx_attribute_end",Pe(),g.types="attribute",g.begin=N,g.stack=T):jt(ke,6)?Ie():(g.types="attribute",g.token=D[U][0],Pe())),U+=1)}while(U<ee);return v?void 0:J()}function y(v){r.iterator=o;let N=wt({chars:s,end:n,lexer:"markup",begin:ye,start:o,ender:S});if(A=N[0],o=N[1],!bn.test(A)){if(t(A[0],123)&&t(A[1],37)&&!1===v){let T=A.indexOf("%}",2)+2,F=A.lastIndexOf("{%");A=b(A.slice(0,T),ne)+A.slice(T,F)+b(A.slice(F),ne)}return g.token=A,g.types="comment",X()}if(pt.test(A)){let T;T=A.startsWith("\x3c!--")?A.indexOf("--\x3e")+3:vn.test(A)?A.indexOf("%}")+2:A.indexOf("%}",A.indexOf("%}")+2)+2,f(g,[{token:Y(r.iterator,A.slice(0,T)),types:"ignore"},{token:A.slice(T).replace(Zt,d),types:"ignore",lines:u(T,A)}])}else f(g,{token:Y(r.iterator,A),types:"ignore"}),r.iterator=o+1}function m(v){let N=o,T=o+v;do{if(t(s[T],62))return o=T,p.slice(N,T+1);T+=1}while(T<n)}function J(){if(i.wrap>0&&!0===x){let v=0,N=r.count,T=0;if(a.types[N].indexOf("attribute")>-1){do{v=v+a.token[N].length+1,N-=1}while("markup"!==a.lexer[N]||a.types[N].indexOf("attribute")>-1);1===a.lines[N]&&(v=v+a.token[N].length+1)}else 1===a.lines[N]&&(v=a.token[N].length+1);if(T=N-1,v>0&&"script_end"!==a.types[T])if(a.types[T].indexOf("attribute")>-1){do{v=v+a.token[T].length+1,T-=1}while("markup"!==a.lexer[T]||a.types[T].indexOf("attribute")>-1);1===a.lines[T]&&(v=v+a.token[T].length+1)}else 1===a.lines[T]&&(v=a.token[T].length+1)}r.lineOffset=0}return function C(){if("---"===S)ye="---",V="ignore",K=!0;else if(t(s[o],60)){if(t(s[o+1],123)&&(t(s[o+2],123)||t(s[o+2],37))){let v=m(3);return xe=!0,r.stack.push(["liquid_bad",r.count]),void f(g,{token:v,types:"liquid_start_bad"})}if(t(s[o+1],47)){if(t(s[o+2],123)&&(t(s[o+3],123)||t(s[o+3],37))){let v=m(3);return void f(g,{token:v,types:"liquid_end_bad"})}V="end",S=">"}else t(s[o+1],33)?(t(s[o+2],100)||t(s[o+2],68))&&(t(s[o+3],111)||t(s[o+3],79))&&(t(s[o+4],99)||t(s[o+4],67))&&(t(s[o+5],116)||t(s[o+5],84))&&(t(s[o+6],121)||t(s[o+6],89))&&(t(s[o+7],112)||t(s[o+7],80))&&(t(s[o+8],101)||t(s[o+8],69))?(S=">",V="doctype",K=!0):t(s[o+2],45)&&t(s[o+3],45)?(S="--\x3e",ye="\x3c!--",V="comment"):t(s[o+2],91)&&67===s[o+3].charCodeAt(0)&&68===s[o+4].charCodeAt(0)&&65===s[o+5].charCodeAt(0)&&84===s[o+6].charCodeAt(0)&&65===s[o+7].charCodeAt(0)&&t(s[o+8],91)&&(S="]]>",V="cdata",K=!0):t(s[o+1],63)?(S="?>",120===s[o+2].charCodeAt(0)&&109===s[o+3].charCodeAt(0)&&109===s[o+4].charCodeAt(0)?(V="xml",fe=!0):(K=!0,V="liquid")):t(s[o+1],112)&&t(s[o+2],114)&&t(s[o+3],101)&&(t(s[o+4],62)||ue(s[o+4]))?(S="</pre>",V="ignore",K=!0):(fe=!0,S=">")}else if(t(s[o],123)){if(x)return k=!0,xe=!0,r.stack.push(["script",r.count]),void f(g,{token:"{",types:"script_start"});if(t(s[o+1],123))K=!0,S="}}",V="liquid";else if(t(s[o+1],37)){K=!0,S="%}",V="liquid";let v=s.indexOf("}",o+2);if(t(s[v-1],37)){let N=p.slice(o+2,v-1);if(t(N,45)?(ye="{%-",N=N.slice(1).trimStart()):(ye="{%",N=N.trimStart()),ne=N.slice(0,N.search(/[\s%}-]/)),t(N[N.length-1],45)?(S="-%}",N=N.slice(0,N.length-1).trimEnd()):(S="%}",N=N.trimEnd()),function $(v,N){if("comment"===(v=v.trimStart().split(/\s/)[0])||l.has(v)){let T=p.indexOf("{%",N),F=T;45===s[T+1].charCodeAt(0)&&(F=T+1),F=p.indexOf(`end${v}`,F),F>0&&(F=s.indexOf("}",F),F>0&&37===s[F-1].charCodeAt(0)&&("comment"!==v?(V="ignore",_=!0,ye=p.slice(o,N+1),S=p.slice(T,F+1)):(V="comment",ye=p.slice(o,N+1),T=p.lastIndexOf("{%",F),S=p.slice(T,F+1))))}}(N,v),t(N,35))return V="comment",z=(S="%}").charAt(S.length-1),y(!0)}else K=!0,S="%}",V="liquid"}else K=!0,S=s[o+1]+"}",V="liquid"}return!0!==K&&!0===i.markup.preserveAttribute&&(K=!0),xe?X():(z=S.charAt(S.length-1),"comment"===V&&(t(s[o],60)||t(s[o],123)&&t(s[o+1],37))?y():o<n?function he(){let v=[],N={pipes:[],fargs:[],targs:[],logic:[]},T=0,F=0,U=d,de=0,ce=0,ke=0,re=0,ee=d,Pe=d,me=0,be=!1,Ie=!1,ge=!1,qe=!1,Fe=!1,we=NaN,pe=[];function ot(){if(Me(v,44)){if("when"===ne&&N.logic.push(v.length-1),!0===i.correct&&/^,\s*-?[%}]}/.test(p.slice(o)))return v.pop(),o+=1,!0;44===we?N.fargs[N.fargs.length-1].push(v.length-1):58===we?(N.fargs[N.fargs.length-1][0]+=1,N.fargs[N.fargs.length-1].push(v.length-1),we=44):N.targs.push(v.length-1)}else Me(v,124)?(N.pipes.push(v.length-1),we=124):Me(v,58)&&124===we&&(N.fargs.push([v.length-1]),we=58);if(t(s[o],10)&&"liquid"!==ne&&!1===Ie&&!1===i.liquid.preserveInternal&&v.length>3&&!(t(s[o+1],45)&&t(s[o+2],37)&&t(s[o+3],125)||t(s[o+1],37)&&t(s[o+2],125))?v.pop():!0===i.liquid.normalizeSpacing&&(P(s[o],32)&&(Ge(v,39)||Ge(v,34))?P(s[o],44)&&P(s[o],93)?(v.splice(v.length-1,1,se,s[o]),P(s[o+1],32)&&P(s[o+1],61)&&P(s[o+1],125)&&v.push(se)):P(s[o+1],32)&&v.push(se):t(s[o],32)&&t(s[o-1],93)?v.pop():v.length>3&&t(s[o+1],10)&&P(s[o+2],32)?v.push(se):t(s[o],32)&&t(s[o+1],32)?v.pop():Ge(v,93)&&P(s[o],32)&&P(s[o],44)&&P(s[o],46)?v.splice(v.length-1,1,se,s[o]):Ge(v,32)&&t(s[o],32)&&t(s[o+1],32)?v.pop():t(s[o],44)&&P(s[o+1],32)||t(s[o],58)&&P(s[o+1],32)?v.push(se):t(s[o],32)&&Ge(v,46)||function un(e,...a){let i=e.length-1,p=a.length;for(;p--;)if(!1===t(e[i--],a[p]))return!1;return!0}(v,91,32)?v.pop():P(s[o],32)&&t(s[o+1],124)||t(s[o],124)&&P(s[o+1],32)?v.push(se):t(s[o],32)&&(t(s[o+1],46)||t(s[o+1],93)||t(s[o+1],91)||t(s[o+1],58)||t(s[o+1],44))?v.pop():("assign"===ne&&(P(s[o],32)&&t(s[o+1],61)||t(s[o],61)&&P(s[o+1],32))||("if"===ne||"unless"===ne||"elsif"===ne)&&((P(s[o],32)||t(s[o],10))&&(t(s[o+1],33)||t(s[o+1],60)||t(s[o+1],62)||t(s[o+1],61)&&t(s[o+2],61))||t(s[o],61)&&(P(s[o+1],32)||t(s[o+1],10))&&(t(s[o-1],61)||t(s[o-1],60)||t(s[o-1],62)||t(s[o-1],33))||P(s[o+1],32)&&P(s[o+1],61)&&(t(s[o],60)||t(s[o],62))))&&v.push(se)),ue(s[o-1]))if(U=p.slice(o),"if"===ne||"elsif"===ne||"unless"===ne){if(ue(s[o+2])&&U.startsWith("or"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,2)),o+=2,!0;if(ue(s[o+3])&&U.startsWith("and"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,3)),o+=3,!0;if(ue(s[o+8])&&U.startsWith("contains"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,8)),o+=8,!0}else if("when"===ne&&ue(s[o+2])&&U.startsWith("or"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,2)),o+=2,!0;if(t(v[v.length-1],44)&&t(v[v.length-2],44))return Qe(114,v.join(d),Ee(v.join(d)));Ie=!1}function Ve(an){let ht,Se=d;if(!0===an?(Se=pe.join(d),ht=E(Se),ee=d,"data-esthetic-ignore"===ht[0]&&(_=!0)):(Se=pe.join(d),(!1===x||x&&Nt(Se,125))&&(Se=Se.replace(nt,se)),ht=E(Se),"data-esthetic-ignore"===ht[0]&&(_=!0),x&&t(pe[0],123)&&t(pe[pe.length-1],125)&&(me=0)),t(Se[0],123)&&t(Se[1],37)&&(H=!0),Se=Se.replace(/^\u0020/,d).replace(/\u0020$/,d),pe=Se.replace(/\r\n/g,R).split(R),pe.length<1&&(pe[0]=pe[0].replace(Ne,d)),Se=b(pe.join(r.crlf),ne),!0===i.markup.stripAttributeLines&&re>=1&&(re=1),D.length>0){let Be=D.length-1;0===c&&(t(Se,61)||t(Se,45))&&(D[Be][0]=D[Be][0]+Se,D[Be][1]=re,Se=d)}if(!1===an&&(it(Se)&&(c+=1),vt(Se)&&(c-=1)),Se!==d&&Se!==se&&D.push([Se,re]),D.length>0){let[Be]=D[D.length-1];if(Be.indexOf("=\u201c")>0||Be.indexOf("=\u201d")>0)return Qe(103,Be)}pe=[],re=t(s[o],10)?1:0}if(!r.error){do{if(t(s[o],10)&&(re=r.lines(o,re)),"---"!==ye||"---"!==S||"ignore"!==V){if(!0===K||!1===ue(s[o])&&P(ee,125)||t(ee,125)){if(v.push(s[o]),!1===be&&t(s[o-1],123)&&(t(s[o],123)||t(s[o],37)))be=!0;else if(!0===be&&t(s[o],125)){if(t(s[o-1],125)||t(s[o-1],37))be=!1;else if((t(s[o-2],125)||t(s[o-2],37))&&ue(s[o-1]))return Qe(111,v.join(d))}else if(!0===be&&t(s[o],10)&&!1===i.liquid.preserveInternal&&("preserve"===i.liquid.delimiterPlacement||"consistent"===i.liquid.delimiterPlacement))if(t(s[o-1],45)&&t(s[o-3],123)&&(t(s[o-2],123)||t(s[o-2],37))||t(s[o-2],123)&&(t(s[o-1],123)||t(s[o-1],37)))Ie=!0;else if(!0===/^\s*-?[%}]}/.test(p.slice(o))){for(;!0===ue(s[o]);)o+=1,t(s[o],10)&&(re=r.lines(o,re));v.push(s[o]),Ie=!0}if("end"===V&&v.length>2&&t(v[0],60)&&t(v[1],47)&&(t(v[v.length-1],47)||t(v[v.length-1],60))){if(!i.correct)return Qe(106,v.join(d));v.pop(),v.push(">");break}if(t(v[0],60)&&t(v[1],62)&&t(S,62))return f(g,"(empty)",{token:"<>",types:"start"});if(t(v[0],60)&&t(v[1],47)&&t(v[2],62)&&t(S,62))return g.token="</>",g.token="end",f(g)}if("cdata"===V&&t(s[o],62)&&t(s[o-1],93)&&P(s[o-2],93))return Qe(103,v.join(d));if("comment"===V){if(ee=d,s[o]===z&&v.length>S.length+1){if(F=v.length,T=S.length-1,T>-1)do{if(F-=1,P(v[F],S.charCodeAt(T)))break;T-=1}while(T>-1);if(T<0)break}}else if(ee===d){if(t(v[0],60)&&t(v[1],33)&&"cdata"!==V){if("doctype"===V&&t(s[o],62))break;if(t(s[o],91)){if(t(s[o+1],60)){V="start";break}if(ue(s[o+1]))do{o+=1,t(s[o],10)&&(re=r.lines(o,re))}while(o<n-1&&ue(s[o+1]));if(t(s[o+1],60)){V="start";break}}}if(x&&(t(s[o],123)?me+=1:t(s[o],125)&&(me-=1)),t(s[o],60)&&!0===fe&&!1===K&&v.length>1&&!1===/>{2,3}/.test(S)){r.error=`Invalid structure detected ${s.slice(o,o+8).join(d)}`;break}if(!1===ue(s[o])&&!0===ge&&s[o]!==z){if(W=0,ge=!1,ee=Pe,v.pop(),o<n)do{if(t(s[o],10)&&!1===Fe&&(re=r.lines(o,re)),!0===i.markup.preserveAttribute?v.push(s[o]):pe.push(s[o]),(P(ee,34)||P(ee,39))&&(t(s[o-1],123)&&(t(s[o],37)||t(s[o],123))?be=!0:t(s[o],125)&&(t(s[o-1],125)||t(s[o-1],37))&&(be=!1)),!1===x&&!1===Fe&&!0===be&&!1===i.markup.preserveAttribute)for(;o<n;){if(o+=1,t(s[o],10)&&(re=r.lines(o,re)),t(pe[0],61)&&(t(pe[1],123)||t(pe[1],37))&&(t(pe[pe.length-2],125)||t(pe[pe.length-2],37))&&t(pe[pe.length-1],125)){be=!1,ee=d,Ve(!1);break}if(t(pe[0],61)&&P(pe[1],123)){be=!1,ee=d,Ve(!1);break}if(pe.push(s[o]),t(pe[0],61)&&t(s[o+1],62)){be=!1,D[D.length-1][0]+=pe.join(d),pe=[],ee=d;break}if(P(pe[0],61)&&t(s[o],125)&&(t(s[o-1],125)||t(s[o-1],37))){be=!1,ee=d,Ve(!1);break}}if(!1!==x||!t(s[o],60)&&!t(s[o],62)||ee!==d&&!t(ee,62))if(ee===d){if(s[o+1]===z){(Me(pe,47)||Me(pe,63)&&"xml"===V)&&(pe.pop(),!1===K||v.pop(),o-=1),pe.length>0&&Ve(!1);break}if(!1===x&&t(s[o],123)&&t(s[o-1],61)?ee="}":t(s[o],34)||t(s[o],39)?(ee=s[o],!1===Fe&&!1===be&&(Fe=!0),t(s[o-1],61)&&(t(s[o+1],60)||t(s[o+1],123)&&t(s[o+2],37)||ue(s[o+1])&&P(s[o-1],61))&&(W=o)):t(s[o],40)?(ee=")",ke=1):x?(t(s[o-1],61)||ue(s[o-1]))&&t(s[o],123)?(ee="}",ce=1):t(s[o],47)&&(t(s[o+1],42)?ee="*/":t(s[o+1],47)&&(ee=R)):t(v[0],123)&&t(s[o],123)&&(t(s[o+1],123)||t(s[o+1],37))&&(ee=t(s[o+1],123)?"}}":s[o+1]+"}"),ue(s[o])&&ee===d){if(t(pe[pe.length-2],61)&&(T=o+1,T<n))do{if(!1===ue(s[T])){(t(s[T],34)||t(s[T],39))&&(o=T-1,qe=!0,pe.pop());break}T+=1}while(T<n);if(!0===qe)qe=!1;else if(0===me||1===me&&t(pe[0],123)){pe.pop(),pe.length>0&&Ve(!1),ge=!0;break}}}else if(t(s[o],40)&&t(ee,41))ke+=1;else if(t(s[o],41)&&t(ee,41)){if(ke-=1,0===ke&&(ee=d,t(s[o+1],S.charCodeAt(0)))){Ve(!1);break}}else if(!0===x&&(t(ee,125)||t(ee,10)&&t(s[o],10)||t(ee,42)&&t(s[o-1],42)&&t(s[o],47))){if(t(s[o],96)){o+=1;do{if(pe.push(s[o]),t(s[o],96))break;o+=1}while(o<s.length)}if(!t(ee,125)){Pe=d,te=!0,A=pe.join(d),A!==se&&D.push([A,re]),pe=[],re=t(ee,10)?2:1,ee=d;break}if(t(s[o],125)&&s[o]!==ee)ce+=1;else if(s[o]===ee&&(ce-=1,0===ce)){me=0,ee=d,A=pe.join(d),!1===i.markup.preserveAttribute&&(x?/^\s*$/.test(A)||D.push([A,re]):(A=A.replace(nt,se),A!==se&&D.push([A,re]))),pe=[],re=1;break}}else if(t(s[W-1],61)&&t(s[o],123)&&t(s[o+1],37)&&(t(ee,34)||t(ee,39)))ee+="{%",W=0;else if(t(s[o-1],37)&&t(s[o],125)&&('"{%'===ee||"'{%"===ee))ee=ee[0],W=0;else if(t(s[o],60)&&t(S,62)&&t(s[W-1],61)&&(t(ee,34)||t(ee,39)))ee+="<",W=0;else if(!t(s[o],62)||'"<'!==ee&&"'<"!==ee)if(0===W&&P(ee,62)&&(ee.length<2||P(ee,34)&&P(ee,39))){if(F=0,T=ee.length-1,T>-1)do{if(P(s[o-F],ee.charCodeAt(T)))break;F+=1,T-=1}while(T>-1);if(T<0&&!1===be&&!0===Fe&&(Fe=!1,Ve(!0),s[o+1]===z))break;0===T&&t(s[o],62)}else W>0&&!1===ue(s[o])&&(W=0);else ee=ee.charAt(0),W=0;else if(ee===d&&t(s[o],60))ee=">",de=1;else if(t(ee,62))if(t(s[o],60))de+=1;else if(t(s[o],62)&&(de-=1,0===de)){ee=d,W=0,Ve(!1);break}o+=1}while(o<n)}else if(!1===t(S,10)&&(t(s[o],34)||t(s[o],39)))ee=s[o];else if(o>0&&!0===be&&P(ee,34)&&P(ee,39)){if(!0===ot())continue}else if("comment"!==V&&P(S,10)&&t(s[o],60)&&t(s[o+1],33)&&t(s[o+2],45)&&t(s[o+3],45)&&"conditional"!==a.types[r.count])ee="--\x3e";else if(t(s[o],123)&&P(v[0],123)&&P(S,10)&&(t(s[o+1],123)||t(s[o+1],37))){if(t(s[o+1],123))ee="}}";else if(ee=s[o+1]+"}",pe.length<1&&(D.length<1||ue(s[o-1]))){v.pop();do{t(s[o],10)&&(re+=1),pe.push(s[o]),o+=1}while(o<n&&s[o-1]+s[o]!==ee);pe.push("}"),D.push([pe.join(d),re]),pe=[],re=1,ee=d}ee===S&&(ee=d)}else if(fe&&P(S,10)&&P(s[o-1],60)&&ue(s[o]))ge=!0;else if(fe&&x&&t(s[o],47)&&(t(s[o+1],42)||t(s[o+1],47)))ge=!0,v[v.length-1]=se,Pe=t(s[o+1],42)?"*/":R,pe.push(s[o]);else if(!1===be&&(s[o]===z||t(S,10)&&t(s[o+1],60))&&(v.length>S.length+1||t(v[0],93))&&(!1===x||0===me)){if(t(S,10)){if(ue(v[v.length-1]))do{v.pop(),o-=1}while(ue(v[v.length-1]));break}if(F=v.length,T=S.length-1,T>-1)do{if(F-=1,v[F]!==S.charAt(T))break;T-=1}while(T>-1);if(T<0){t(v[F],62)&&t(s[o],62)&&t(s[o-1],125)&&ue(s[o+1])&&D.length>0&&0===D[D.length-1][1]&&(D[D.length-1][1]=t(s[o+1],32)?1:2);break}}}else if(t(s[o],ee.charCodeAt(ee.length-1))&&P(s[o-1],92)&&(!0===x&&t(S,125)&&!1===B(o)||!1===x||P(S,125))){if(F=0,T=ee.length-1,T>-1)do{if(P(s[o-F],ee.charCodeAt(T)))break;F+=1,T-=1}while(T>-1);T<0&&(ee=d)}o+=1}else{if(v.push(s[o]),o>3&&t(s[o],45)&&t(s[o-1],45)&&t(s[o-2],45))break;o+=1}}while(o<n);if(W=0,ne||(ne=Ee(v.join(d))),!1===_)if("liquid"===V){if(A=function $n(e,a,i,{wrapFraction:p,liquid:{forceFilter:x,forceArgument:l,lineBreakSeparator:j,delimiterTrims:s,delimiterPlacement:n,preserveInternal:h}}){let k,O,[o,L]=Kt(e);if("never"===s?(k=`{${e[1]}`,O=`${e[e.length-2]}}`):"always"===s||"outputs"===s&&t(e[1],123)||"tags"===s&&t(e[1],37)?(k=`{${e[1]}-`,O=`-${e[e.length-2]}}`):"preserve"===s?(k=e.slice(0,o).join(d),O=e.slice(L).join(d)):(k=`{${e[1]}`,O=`${e[e.length-2]}}`),"else"===a||"break"===a||"continue"===a||"increment"===a||"decrement"===a||a.startsWith("end"))return k+=se,O=se+O,k+e.slice(o,L).join(d).trim()+O;if("preserve"===n?(k+=t(e[o],10)?R:se,O=(t(e[L-1],10)?R:se)+O):"force"===n?(k+=R,O=R+O):"inline"===n||"default"===n?(k+=se,O=se+O):"consistent"===n&&t(e[o],10)?(k+=R,O=R+O):(k+=se,O=se+O),"liquid"===a||!0===h)return k+e.slice(o,L).join(d).trim()+O;if(p>0&&e.length>=p&&i.logic.length>0&&("if"===a||"elsif"===a||"unless"===a||"when"===a)){"multiline"===s&&(k=`{${e[1]}-`+k[k.length-1],O=O[0]+`-${e[e.length-2]}}`),"force-multiline"===n&&(k=k.trimEnd()+R,O=R+O.trimStart());let f=i.logic.length;for(let b=0;b<f;b++){let Y=i.logic[b];e[Y]=R+e[Y],t(e[Y-1],32)&&(e[Y-1]=d)}return k+e.slice(o,L).join(d).trim()+O}let c=i.pipes.length;if(c>0){if(x>0&&c>x||0===x&&p>0&&e.length>p){"multiline"===s&&(k=`{${e[1]}-`+k[k.length-1],O=O[0]+`-${e[e.length-2]}}`),"force-multiline"===n&&(k=k.trimEnd()+R,O=R+O.trimStart());for(let f=0;f<c;f++){let b=i.pipes[f];if(t(e[b-1],32)&&(e[b-1]=d),e[b]=R+e[b],0===f){let Y=b-1;if(t(e[Y-1],32))do{e[Y--]=d}while(t(e[Y],32))}if(i.fargs[f]&&(l>0&&i.fargs[f].length>l||0===l&&p>0&&e.slice(i.fargs[f][0],i.fargs[f][i.fargs[f].length-1]).length>p)){let Y=i.fargs[f].length;for(let u=0;u<Y;u++){let G=i.fargs[f][u];"after"===j?e[t(e[G-1],44)?G-1:G]=0===u?R+"  ":We+R+" ":"before"===j?t(e[G-1],44)?e[G-1]=0===u?"  "+R:R+"  "+We:e[G]=0===u?R+"  ":R+"  "+We:e[G]=R+"  "+e[G]}}}}return k+e.slice(o,L).join(d).trim()+O}if(i.targs.length>=l){"multiline"===s&&(k=`{${e[1]}-`+k[k.length-1],O=O[0]+`-${e[e.length-2]}}`);for(let f=0;f<i.targs.length;f++){let b=i.targs[f];"after"===j?(t(e[b+1],32)&&(e[b+1]=d),t(e[b-1],32)&&(e[b-1]=d),e[b]=t(e[b],44)?We+R:R):"before"===j&&(t(e[b-1],44)?e[b-1]=R+We:e[b]=R+We)}}return k+e.slice(o,L).join(d).trim()+O}(v,ne,N,i),"liquid"===ne)return function M(){let v=A.indexOf("liquid")+6,N=d,T=d,F=1;f(g,{token:On(A.slice(0,v),i.liquid),types:"liquid_start",stack:"liquid"});let U=A.slice(v).split(R),de=U.pop().trim(),ce=t(de[de.length-3],45)?de.length-3:de.length-2,ke=de.slice(0,ce),re=de.slice(ce);0!==ke.length&&U.push(ke),v=0;do{N=U[v].trim(),T=N.split(/\s/)[0],T.startsWith("end")?(g.token=N,g.types="liquid_end",g.lines=F,f(g),F=1):T.startsWith("#")?(g.token=N,g.types="liquid",g.lines=F<=1?2:F,f(g),F=1):T.startsWith("comment")||je.liquid.tags.has(T)?(g.token=N,g.types="liquid_start",g.lines=F,f(g),F=1):je.liquid.else.has(T)?(g.token=N,g.types="when"===T?"liquid_when":"liquid_else",g.lines=F,f(g),F=1):je.liquid.singleton.has(T)?(g.token=N,g.types="liquid",g.lines=F<=1?2:F,f(g),F=1):N.trim().length>0&&(g.token=N,g.types="content",g.lines=F,f(g),F=1),v+=1,F+=1}while(v<U.length);f(g,{token:re,types:"liquid_end",lines:2})}()}else A=v.join(d);else A=v.join(d);return"xml"===ne?O="xml":O===d&&"html"===ne&&(O="html"),g.token=A,g.types=V,!1===K&&!1===x&&(A=A.replace(nt,se)),X()}}():X())}()}function ie(){let S=[],g=o,A=!0===x&&t(a.token[r.count],123),V=d,ne=r.lineOffset,ye=d;!0===k&&(ye=!0===A?"script":Ee(r.stack.index>-1?a.token[r.stack.index]:a.token[a.begin[r.count]]));let xe={begin:r.stack.index,ender:-1,lexer:"markup",lines:ne,stack:Ee(r.stack.token)||"global",token:d,types:"content"};function W(){let te=o-1,H=0;if(P(s[o-1],92))return!1;if(te>-1)do{if(P(s[te],92))break;H+=1,te-=1}while(te>-1);return H%2==1}if(o<n){let te=d,H=d,K=d,fe=0;do{if(t(s[o],10)&&(ne=r.lines(o,ne)),!0===k){if("liquid_start"===a.types[r.count]){let D=`end${ye}`,le=p.indexOf(`end${ye}`,o);if(le>-1){let ve=le;do{if(!1===ue(s[ve])&&t(s[ve],37)&&t(s[ve-1],123)){ve-=2;break}}while(s[ve--]);if(te=s.slice(ve+1,s.indexOf("%",le+D.length)+2).join(d),Sn(D).test(te)){ne=1,K=s.slice(o,ve).join(d).replace(Ne,d),o=ve+te.length,r.external(L,K);do{t(s[ve],10)&&(ne+=1)}while(ue(s[ve--]));f(xe,{token:b(te),types:"liquid_end",lines:ne});break}}}if(H===d){if(t(s[o],47))t(s[o+1],42)?H="*":t(s[o+1],47)?H="/":!x&&"script"===ye&&P(s[o-1],60)&&"([{!=,;.?:&<>".indexOf(s[o-1])>-1&&(H="r");else if(!1===W()&&(t(s[o],34)||t(s[o],39)||t(s[o],96)))H=s[o];else if(t(s[o],123)&&!0===A)fe+=1;else if(t(s[o],125)&&!0===A){if(0===fe){K=S.join(d).replace(ct,d).replace(Ne,d),r.external(L,K),r.stack.update(r.stack.index+1),"end"===a.types[r.count]&&"script"===a.lexer[a.begin[r.count]-1]&&(f(xe,{lexer:"script",types:"separator",token:!0===i.correct?";":"x;"}),xe.lexer="markup"),f(xe,{token:"}",types:"script_end"}),r.stack.pop();break}fe-=1}if("script"===ye){if(te=s.slice(o+1,o+9).join(d).toLowerCase(),"</script"===te){if(K=S.join(d).trimEnd(),S.length<1)break;dt.test(K)&&ft.test(K)?(f(xe,{token:"\x3c!--",types:"comment"}),K=K.replace(dt,d).replace(ft,d),r.external("javascript",K),f(xe,{token:"--\x3e"})):r.external(L,K);break}}else if("style"===ye&&t(s[o+1],60)&&t(s[o+2],47)&&(te=s.slice(o+1,o+8).join(d).toLowerCase(),"</style"===te)){if(K=S.join(d).trimEnd(),S.length<1)break;dt.test(K)&&ft.test(K)?(f(xe,{token:"\x3c!--",types:"comment"}),K=K.replace(dt,d).replace(ft,d),r.external("css",K),f(xe,{token:"--\x3e"})):r.external(L,K);break}}else H===s[o]&&!1===W()&&(t(H,34)||t(H,39)||t(H,96)||t(H,42)&&t(s[o+1],47))?H=d:t(H,96)&&t(s[o],36)&&t(s[o+1],123)&&!1===W()?H="}":t(H,125)&&t(s[o],125)&&!1===W()?H="`":t(H,47)&&(t(s[o],10)||t(s[o],13))||"r"===H&&t(s[o],47)&&!1===W()?H=d:t(H,47)&&t(s[o],62)&&t(s[o-1],45)&&t(s[o-2],45)&&(te=p.slice(o+1,o+11).toLowerCase(),te=te.slice(0,te.length-2),"script"===ye&&"</script"===te&&(H=d),te=te.slice(0,te.length-1),"style"===ye&&"</style"===te&&(H=d))}if(1==("liquid_start"===a.types[r.count]&&0===a.token[r.count].indexOf("<!")&&a.token[r.count].indexOf("<![")<0&&91===a.token[r.count].charCodeAt(a.token[r.count].length-1))&&t(s[o],93)){o-=1,ne=0,V=S.join(d).replace(Ne,d),f(xe,{token:V});break}if(!1===k&&S.length>0&&(t(s[o],60)&&P(s[o+1],61)&&!1===Te(s[o+1])&&!1===ue(s[o+1])||t(s[o],91)&&t(s[o+1],37)||t(s[o],123)&&(!0===x||t(s[o+1],123)||t(s[o+1],37)))){if(o-=1,ne=0,V="comment"===r.stack.token?S.join(d):S.join(d).replace(Ne,d),xe.token=V,i.wrap>0&&!1===i.markup.preserveText){let D=function(){if(t(V[le],32))return M.push(V.slice(0,le)),V=V.slice(le+1),ve=V.length,void(le=i.wrap);do{le-=1}while(le>0&&P(V[le],32));if(le>0)M.push(V.slice(0,le)),V=V.slice(le+1),ve=V.length,le=i.wrap;else{le=i.wrap;do{le+=1}while(le<ve&&P(V[le],32));M.push(V.slice(0,le)),V=V.slice(le+1),ve=V.length,le=i.wrap}},le=i.wrap,ve=V.length,M=[];if("<a>"===a.token[a.begin[r.count]]&&"<li>"===a.token[a.begin[a.begin[r.count]]]&&0===a.lines[a.begin[r.count]]&&0===r.lineOffset&&V.length<i.wrap){f(xe);break}if(ve<i.wrap){f(xe);break}if(r.lineOffset<1&&r.count>-1){let Z=r.count;do{if(le-=a.token[Z].length,a.types[Z].indexOf("attribute")>-1&&(le-=1),a.lines[Z]>0&&a.types[Z].indexOf("attribute")<0)break;Z-=1}while(Z>0&&le>0);le<1&&(le=V.indexOf(se))}V=S.join(d).replace(ct,d).replace(Ne,d).replace(nt,se);do{D()}while(le<ve);V!==d&&P(V,32)&&M.push(V),V=M.join(r.crlf),V=d+V+d}else{let D=V.indexOf(R);D>-1&&(f(xe,{token:V.slice(0,D)}),V=V.slice(D),Zt.test(V)?xe.lines=1:(xe.lines=2,V=V.replace(ct,d)))}ne=0,f(xe,{token:V});break}S.push(s[o]),o+=1}while(o<n)}if(o>g&&o<n)if(ue(s[o])){let te=o;r.lineOffset=r.lineOffset+1;do{t(s[te],10)&&(r.lineNumber=r.lineNumber+1,r.lineOffset=r.lineOffset+1),te-=1}while(te>g&&ue(s[te]))}else r.lineOffset=0;else(o!==g||o===g&&!1===k)&&(V=S.join(d).replace(Ne,d),ne=0,xe.token!==V&&(f(xe,{token:V}),r.lineOffset=0));k=!1}function oe(){r.lineOffset=1;do{if(t(s[o],10)&&(r.lineIndex=o,r.lineOffset=r.lineOffset+1,r.lineNumber=r.lineNumber+1),!1===ue(s[o+1]))break;o+=1}while(o<n)}("html"===r.language||"liquid"===r.language)&&(O="html");do{if(r.error)return a;if(ue(s[o])?oe():t(s[o],60)||t(s[o],123)&&(x||t(s[o+1],123)||t(s[o+1],37))?I(d):t(s[o],45)&&t(s[o+1],45)&&t(s[o+2],45)?I("---"):ie(),o+=1,o===n&&r.pairs.size>0&&r.pairs.has(r.stack.index)){console.log(r.pairs);let S=r.pairs.get(r.stack.index);2===S.type&&Jt(105,S)}}while(o<n);return a}function tn(e){return 1===e?en():3===e?function In(){let{data:e,rules:a,source:i}=r,p=i.split(d),x=i.length,l=[],j=[],s=0,n=d,h=d;function o(B){r.push(e,{begin:r.stack.index,ender:-1,lexer:"style",lines:r.lineOffset,stack:r.stack.token,token:h,types:n},B)}function L(B){let q=B;do{B-=1}while(t(p[B],92)&&B>0);return(q-B)%2==1}function k(B){let q=B.replace(/\s*!important/," !important").split(d),E=/-?transition$/.test(e.token[r.count-2]),I=[],ie=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g,oe=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g,S=0,g=0,A=d,z=q.length,V=[];function xe(H){return!0===a.style.noLeadZero?H.replace(/^-?\D0+(\.|\d)/,K=>K.replace(/0+/,d)):/0*\./.test(H)?H.replace(/0*\./,"0."):/0+/.test(/\d+/.exec(H)[0])?/^\D*0+\D*$/.test(H)?H.replace(/0+/,"0"):H.replace(/\d+/.exec(H)[0],/\d+/.exec(H)[0].replace(/^0+/,d)):H}function _(H){return H.replace(",",", ")}function W(H){return`${H} `}function te(){let H=S-1,K=H;if(H<1)return!0;do{K-=1}while(K>0&&t(q[K],92));return(H-K)%2==1}if(S<z)do{V.push(q[S]),(P(q[S-1],92)||!1===te())&&(A===d?t(q[S],34)?(A=$e,g+=1):t(q[S],39)?(A=_e,g+=1):t(q[S],40)?(A=")",g+=1):t(q[S],91)&&(A="]",g+=1):t(q[S],40)&&t(A,41)||t(q[S],91)&&t(A,93)?g+=1:q[S]===A&&(g-=1,0===g&&(A=d))),A===d&&t(q[S],32)&&(V.pop(),I.push(V.join(d)),V=[]),S+=1}while(S<z);if(I.push(V.join(d)),z=I.length,S=0,S<z)do{!0===a.style.noLeadZero&&!0===/^-?0+\.\d+[a-z]/.test(I[S])?I[S]=I[S].replace(/0+\./,"."):!1===a.style.noLeadZero&&/^-?\.\d+[a-z]/.test(I[S])?I[S]=I[S].replace(".","0."):ie.test(I[S])||oe.test(I[S])?I[S]=I[S].replace(ie,xe).replace(oe,xe):/^(0+([a-z]{2,3}|%))$/.test(I[S])&&!1===E?I[S]="0":/^(0+)/.test(I[S])?(I[S]=I[S].replace(/0+/,"0"),/\d/.test(I[S].charAt(1))&&(I[S]=I[S].substr(1))):/^url\((?!('|"))/.test(I[S])&&41===I[S].charCodeAt(I[S].length-1)&&(A=I[S].charAt(I[S].indexOf("url(")+4),"@"!==A&&P(A,40)&&P(A,60)&&(I[S]="double"===a.style.quoteConvert?I[S].replace(/url\(/,'url("').replace(/\)$/,'")'):I[S].replace(/url\(/,"url('").replace(/\)$/,"')"))),/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(I[S])&&(je.css.units.has(I[S].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,d))||(I[S]=I[S].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,W))),/^\w+\(/.test(I[S])&&")"===I[S].charAt(I[S].length-1)&&(0!==I[S].indexOf("url(")||0===I[S].indexOf("url(")&&I[S].indexOf(se)>0)&&(I[S]=I[S].replace(/,\S/g,_)),S+=1}while(S<z);return A=I.join(se),A.charAt(0)+A.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,function ye(H){return H=H.replace(/\s*/g,d),/\/\d/.test(H)&&0===B.indexOf("url(")?H:` ${H.charAt(0)} ${H.charAt(1)}`})}function O(){let B=[],q=[],E=a.style.quoteConvert,I=s,ie=0,oe=d,S=null,g=!1;function A(){if(q.push(p[I]),ue(p[I+1]))do{I+=1}while(I<x&&ue(p[I+1]))}if(I<x)do{if(t(p[I],34)||t(p[I],39)?(null===S&&(S=!1),B[B.length-1]!==p[I]||!P(p[I-1],92)&&!1!==L(I-1)?P(B[B.length-1],34)&&P(B[B.length-1],39)&&(P(p[I-1],92)||!1===L(I-1))?(B.push(p[I]),"double"===E?p[I]=$e:"single"===E&&(p[I]=_e)):t(p[I-1],92)&&"none"!==E?!0===L(I-1)&&("double"===E&&t(p[I],39)||"single"===E&&t(p[I],34))&&q.pop():"double"===E&&t(p[I],34)?p[I]='\\"':"single"===E&&t(p[I],39)&&(p[I]="\\'"):(B.pop(),"double"===E?p[I]=$e:"single"===E&&(p[I]=_e)),q.push(p[I])):P(p[I-1],92)||!1===L(I-1)?t(p[I],40)?(null===S&&(S=!0),B.push(")"),A()):t(p[I],91)?(S=!1,B.push("]"),A()):(t(p[I],35)||t(p[I],64))&&t(p[I+1],123)?(S=!1,q.push(p[I]),I+=1,B.push("}"),A()):p[I]===B[B.length-1]?(q.push(p[I]),B.pop()):q.push(p[I]):q.push(p[I]),"map"===r.stack.token&&0===B.length&&(t(p[I+1],44)||t(p[I+1],41))){if(!t(p[I+1],41)||!t(e.token[r.count],40))break;r.pop(e),r.stack.pop(),q.splice(0,0,"(")}if(t(p[I+1],58)){if(ie=I,ue(p[ie]))do{ie-=1}while(ue(p[ie]));oe=p.slice(ie-6,ie+1).join(d),(oe.indexOf("filter")===oe.length-6||oe.indexOf("progid")===oe.length-6)&&(oe="filter")}if(0===B.length){if(t(p[I+1],59)&&!0===L(I+1)||t(p[I+1],58)&&P(p[I],58)&&P(p[I+2],58)&&"filter"!==oe&&"progid"!==oe||t(p[I+1],123)||t(p[I+1],125)||t(p[I+1],47)&&(t(p[I+2],42)||t(p[I+2],47))){if(ie=q.length-1,ue(q[ie]))do{ie-=1,I-=1,q.pop()}while(ue(q[ie]));break}if(t(p[I+1],44))break}I+=1}while(I<x);s=I,"map"===r.stack.token&&t(q[0],40)&&(l[l.length-1]=l[l.length-1]-1),h=q.join(d).replace(/\s+/g,se).replace(/^\s/,d).replace(/\s$/,d),!0===S&&(je.css.atrules(h)&&!0===a.style.atRuleSpace?e.token[r.count]=e.token[r.count].replace(/\s*\(/g," (").replace(/\s*\)\s*/g,") ").replace(/,\(/g,", ("):h=h.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")),"colon"===n&&"start"===e.types[r.count-1]?je.css.pseudoClasses.has(h)&&(e.token[r.count]=h=":"+h,n="pseudo",g=!0):r.count>-1&&0===e.token[r.count].indexOf("extend(")?n="pseudo":!0===S&&!1===Te(h.charAt(0))&&!1===/^rgba?\(/.test(h)&&0!==h.indexOf("url(")&&(h.indexOf(se)<0||h.indexOf(se)>h.indexOf("("))&&")"===h.charAt(h.length-1)?(t(e.token[r.count],58)?n="value":(h=h.replace(/,\u0020?/g,", "),n="function"),h=k(h)):r.count>-1&&_e.indexOf(e.token[r.count].charAt(0))>-1&&"variable"===e.types[r.count]?n="item":t(q[0],64)||"$"===q[0]?("colon"!==e.types[r.count]||"css"!==a.language||"property"!==e.types[r.count-1]&&"variable"!==e.types[r.count-1]?r.count>-1&&(n="item",oe=e.token[r.count],I=oe.indexOf("("),t(oe[oe.length-1],41)&&I>0&&(oe=oe.slice(I+1,oe.length-1),e.token[r.count]=e.token[r.count].slice(0,I+1)+k(oe)+")")):n="value",h=k(h)):n="item",!1===g?o(d):g=!1}function c(B){let q=r.count,E=0,I=d,ie=[];function oe(){if(!(r.count<0)){if(q>0&&("comment"===e.types[q]||"ignore"===e.types[q]))do{q-=1,ie.push(e.token[q])}while(q>0&&"style"===e.lexer[q]&&("comment"===e.types[q]||"ignore"===e.types[q]));if(E=q-1,E>0&&("comment"===e.types[E]||"ignore"===e.types[E]))do{E-=1}while(E>0&&"style"===e.lexer[q]&&("comment"===e.types[E]||"ignore"===e.types[E]));E<0&&(E=0),q<0&&(q=0),I=e.token[q][0]}}function S(A){return A.replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ")}function g(A){let z=A,V=e.begin[z];if(e.token[A]=e.token[A].replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ").replace(/:\s+/g,": ").replace(/^\s+/,d).replace(/\s+$/,d).replace(/\s+::\s+/,"::"),P(e.token[z],44)&&"comment"!==e.types[z]&&(e.types[z]="selector"),t(e.token[z-1],44)||t(e.token[z-1],58)||"comment"===e.types[z-1]||"pseudo"===e.types[z-1])if("colon"!==e.types[z-1]||"selector"!==e.types[z]&&"at_rule"!==e.types[z]||"template"!==e.types[z-2]&&"liquid_start"!==e.types[z-2]&&"liquid_else"!==e.types[z-2]&&"liquid_end"!==e.types[z-2])if("pseudo"===e.types[z-1])e.token[z-1]=`${e.token[z-1]}${e.token[z]}`,e.types[z-1]="selector",r.splice({data:e,howmany:1,index:z});else if("comment"===e.types[z-2])e.token[z-1]=S(`${e.token[z-1]}${e.token[z]}`),e.types[z-1]="selector",r.splice({data:e,howmany:1,index:z});else do{if(z-=1,e.begin[z]!==V)break;if(t(e.token[z],59))break;P(e.token[z],44)&&"comment"!==e.types[z]&&(e.types[z]="selector"),":"===e.token[z]&&P(e.token[z-1],59)&&(e.token[z-1]=S(`${e.token[z-1]}:${e.token[z+1]}`),r.splice({data:e,howmany:2,index:z}))}while(z>0);else e.token[z-1]=":"+e.token[z]+se,e.types[z-1]="selector",r.splice({data:e,howmany:1,index:z});if(z=r.count,!0===a.style.sortSelectors&&t(e.token[z-1],44)){let ne=[e.token[z]];do{if(z-=1,"comment"===e.types[z]||"ignore"===e.types[z])do{z-=1}while(z>0&&("comment"===e.types[z]||"ignore"===e.types[z]));t(e.token[z],44)&&(z-=1),ne.push(e.token[z])}while(z>0&&(t(e.token[z-1],44)||"selector"===e.types[z-1]||"comment"===e.types[z-1]||"ignore"===e.types[z-1]));ne.sort(),z=r.count,e.token[z]=ne.pop();do{if(z-=1,"comment"===e.types[z]||"ignore"===e.types[z])do{z-=1}while(z>0&&("comment"===e.types[z]||"ignore"===e.types[z]));t(e.token[z],44)&&(z-=1),e.token[z]=ne.pop()}while(z>0&&(t(e.token[z-1],44)||"selector"===e.types[z-1]||"comment"===e.types[z-1]||"ignore"===e.types[z-1]))}q=r.count,oe()}oe(),"start"===B&&("value"===e.types[q]||"variable"===e.types[q])&&(e.types[q]="item"),"style"!==e.lexer[r.count-1]||E<0?"colon"===B?t(I,36)||t(I,64)?e.types[q]="variable":"global"!==e.stack[q]&&("comment"!==e.types[q]||"ignore"!==e.types[q])&&(e.types[q]="property"):"style"===e.lexer[q]&&(e.types[q]="selector",g(q)):"start"===B&&"function"===e.types[q]&&"style"===e.lexer[q]?(e.types[q]="selector",g(q)):"item"===e.types[q]&&"style"===e.lexer[q]&&("start"===B?(g(q),e.types[q]="selector",":"===e.token[q]&&(e.types[E]="selector"),e.token[q].indexOf("=\u201c")>0?r.error=`Invalid Quote (\u201c, \\201c) used on line number ${r.lineNumber}`:e.token[q].indexOf("=\u201d")>0&&(r.error=`Invalid Quote (\u201d, \\201d) used on line number ${r.lineNumber}`)):"end"===B?(e.types[q]=t(I,36)||t(I,64)?"variable":"value",e.token[q]=k(e.token[q])):"separator"===B?"colon"===e.types[E]||t(e.token[E],44)||t(e.token[E],123)?(P(p[s],59)&&("selector"===e.types[E]||"at_rule"===e.types[E]||t(e.token[E],123))?(e.types[q]="selector",g(q)):e.types[q]=t(e.token[q],36)||t(e.token[q],64)?"variable":"value",e.token[q]=k(e.token[q]),"\u201c"===e.token[q].charAt(0)?r.error=`Invalid Quote (\u201c, \\201c) used on line number ${r.lineNumber}`:"\u201d"===e.token[q].charAt(0)&&(r.error=`Invalid (\u201d, \\201d) used on line number ${r.lineNumber}`)):t(I,36)||t(I,64)?e.types[q]="variable":"value"===e.types[E]||"variable"===e.types[E]?(e.token[E]=e.token[E]+e.token[q],r.pop(e)):e.types[q]="value":"colon"===B?e.types[q]=t(I,36)||t(I,64)?"variable":"property":t(e.token[E],64)&&("variable"!==e.types[E-2]&&"property"!==e.types[E-2]||"separator"===e.types[E-1])?(e.types[E]="variable",n="variable",e.token[E]=k(e.token[E])):"comment"===B&&(t(I,46)||t(I,35))&&(e.types[q]="selector"))}function f(){let B=r.count;do{B-=1}while(B>0&&"comment"===e.types[B]);";"!==e.token[B]&&r.splice({data:e,howmany:0,index:B+1,record:{begin:r.stack.index,ender:-1,lexer:"style",lines:r.lineOffset,stack:r.stack.token,token:";",types:"separator"}})}function b(B,q){let E=[],I=d,ie=d,oe=0,S=B.length;function g(A){let z=r.count>0?e.types[r.count-1]:e.types[r.count];"item"===n&&("colon"===z?e.types[r.count]="value":c(z)),t(p[s+1],32),n=A,h=Qt(h,ie,a.liquid),n.indexOf("start")>-1||n.indexOf("else")>-1?o(h):o(d)}if(j[j.length-1]=!0,s<x)do{if(E.push(p[s]),I===d){if(t(p[s],34))I=$e;else if(t(p[s],39))I=_e;else if(t(p[s],47))t(p[s+1],47)?I="/":t(p[s+1],42)&&(I="*");else if(p[s+1]===q.charAt(0)){do{oe+=1,s+=1,E.push(p[s])}while(s<x&&oe<q.length&&p[s+1]===q.charAt(oe));if(oe===q.length){if(I=E.join(d),ue(I.charAt(S)))do{S+=1}while(ue(I.charAt(S)));oe=S;do{oe+=1}while(oe<q.length&&!ue(I.charAt(oe)));if(oe===I.length&&(oe-=q.length),"{%"===B&&(ie=Ee(I)),"item"===n&&"colon"===e.types[r.count-1]&&("property"===e.types[r.count-2]||"variable"===e.types[r.count-2]))return n="value",e.types[r.count]="value",void(e.token[r.count]=!0===Number.isNaN(Number(e.token[r.count]))&&")"!==e.token[r.count].charAt(e.token[r.count].length-1)?e.token[r.count]+I:e.token[r.count]+se+I);if(h=I,"{%"===B){let A=Array.from(je.liquid.tags),z=A.length-1;if(ie=ie.slice(0,ie.indexOf(se)),ie.indexOf("(")>0&&(ie=ie.slice(0,ie.indexOf("("))),je.liquid.else.has(ie))return void g("liquid_else");if(z=A.length-1,z>-1)do{if(ie===A[z])return void g("liquid_start");if(ie==="end"+A[z])return void g("liquid_end");z-=1}while(z>-1)}else if("{{"===B){let A=I.slice(2),z=A.length,V=0;do{V+=1}while(V<z&&!1===ue(A.charAt(V))&&40!==A.charCodeAt(S));if(A=A.slice(0,V),t(A[A.length-2],125)&&(A=A.slice(0,A.length-2)),"end"===A)return void g("liquid_end")}return void g("liquid")}oe=0}}else I===p[s]&&(t(I,34)||t(I,39)||t(I,47)&&(t(p[s],13)||t(p[s],10))||t(I,42)&&t(p[s+1],47))&&(I=d);s+=1}while(s<x)}function Y(B){let q;B?(q=Yt({chars:p,start:s,end:x,lexer:"style",begin:"//",ender:R}),h=q[0],n=Ut.test(h)?"ignore":"comment"):(q=wt({chars:p,start:s,end:x,lexer:"style",begin:"/*",ender:"*/"}),h=q[0],n=yn.test(h)?"ignore":"comment"),o(d),s=q[1]}function u(){let B=r.lineOffset,q={data:{margin:[d,d,d,d,!1],padding:[d,d,d,d,!1]},last:{margin:0,padding:0},removes:[]},E=r.stack.index;function I(g){if(e.token[oe-2]===g){let A=e.token[oe].replace(/\s*!important\s*/g,d).split(se),z=A.length;e.token[oe].indexOf("!important")>-1&&(q.data[g[4]]=!0),z>3?(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[1]),q.data[g][2]===d&&(q.data[g][2]=A[2]),q.data[g][3]===d&&(q.data[g][3]=A[3])):z>2?(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[1]),q.data[g][2]===d&&(q.data[g][2]=A[2]),q.data[g][3]===d&&(q.data[g][3]=A[1])):z>1?(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[1]),q.data[g][2]===d&&(q.data[g][2]=A[0]),q.data[g][3]===d&&(q.data[g][3]=A[1])):(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[0]),q.data[g][2]===d&&(q.data[g][2]=A[0]),q.data[g][3]===d&&(q.data[g][3]=A[0]))}else if(e.token[oe-2]===`${g}-bottom`)q.data[g][2]===d&&(q.data[g][2]=e.token[oe]);else if(e.token[oe-2]===`${g}-left`)q.data[g][3]===d&&(q.data[g][3]=e.token[oe]);else if(e.token[oe-2]===`${g}-right`)q.data[g][1]===d&&(q.data[g][1]=e.token[oe]);else{if(e.token[oe-2]!==`${g}-top`)return;q.data[g][0]===d&&(q.data[g][0]=e.token[oe])}q.removes.push([oe,g]),q.last[g]=oe}let oe=r.count,S=!1;do{oe-=1,e.begin[oe]===E?"value"===e.types[oe]&&"property"===e.types[oe-2]&&(0===e.token[oe-2].indexOf("margin")?I("margin"):0===e.token[oe-2].indexOf("padding")&&I("padding")):(S=!0,oe=e.begin[oe])}while(oe>E);(function ie(){let g=0,A=d,z=/^(0+([a-z]+|%))/,V=q.removes.length,ne=q.data.margin[0]!==d&&q.data.margin[1]!==d&&q.data.margin[2]!==d&&q.data.margin[3]!==d,ye=q.data.padding[0]!==d&&q.data.padding[1]!==d&&q.data.padding[2]!==d&&q.data.padding[3]!==d;function xe(_){if(!0===z.test(q.data[_][0])&&(q.data[_][0]="0"),!0===z.test(q.data[_][1])&&(q.data[_][1]="0"),!0===z.test(q.data[_][2])&&(q.data[_][2]="0"),!0===z.test(q.data[_][3])&&(q.data[_][3]="0"),A=q.data[_][0]===q.data[_][1]&&q.data[_][0]===q.data[_][2]&&q.data[_][0]===q.data[_][3]?q.data[_][0]:q.data[_][0]===q.data[_][2]&&q.data[_][1]===q.data[_][3]&&q.data[_][0]!==q.data[_][1]?`${q.data[_][0]} ${q.data[_][1]}`:q.data[_][1]===q.data[_][3]&&q.data[_][0]!==q.data[_][2]?`${q.data[_][0]} ${q.data[_][1]} ${q.data[_][2]}`:`${q.data[_][0]} ${q.data[_][1]} ${q.data[_][2]} ${q.data[_][3]}`,!0===q.data[_[4]]&&(A=`${A.replace(" !important",d)} !important`),q.last[_]>r.count){g=E<1?1:E+1;do{if(e.begin[g]===E&&"value"===e.types[g]&&0===e.token[g-2].indexOf(_)){q.last[_]=g;break}g+=1}while(g<r.count)}e.token[q.last[_]]=A,e.token[q.last[_]-2]=_}if(V>1&&(!0===ne||!0===ye))do{q.removes[g][0]!==q.last.margin&&q.removes[g][0]!==q.last.padding&&(!0===ne&&"margin"===q.removes[g][1]||!0===ye&&"padding"===q.removes[g][1])&&r.splice({data:e,howmany:"separator"===e.types[q.removes[g][0]+1]?4:3,index:q.removes[g][0]-2}),g+=1}while(g<V-1);!0===ne&&xe("margin"),!0===ye&&xe("padding"),!0===S&&(E<0?r.error="Brace mismatch. There appears to be more closing braces than starting braces.":zt(E,r.count+1))})(),r.lineOffset=B}function G(){r.lineOffset=1;do{if(t(p[s],10)&&(r.lineIndex=s,r.lineOffset=r.lineOffset+1,r.lineNumber=r.lineNumber+1),!1===ue(p[s+1]))break;s+=1}while(s<x)}do{ue(p[s])?G():t(p[s],47)&&t(p[s+1],42)?Y(!1):t(p[s],47)&&t(p[s+1],47)?Y(!0):t(p[s],123)&&t(p[s+1],37)?b("{%","%}"):t(p[s],123)&&t(p[s+1],123)?b("{{","}}"):t(p[s],123)||t(p[s],40)&&t(e.token[r.count],58)&&"variable"===e.types[r.count-1]?(c("start"),n="start",h=p[s],t(p[s],40)?(o("map"),l.push(0)):"at_rule"===e.types[r.count]||"selector"===e.types[r.count]||"variable"===e.types[r.count]?(t(e.token[r.count],64)&&(e.types[r.count]="at_rule"),o(e.token[r.count])):o("colon"===e.types[r.count]?e.token[r.count-1]:"block"),j.push(!1)):t(p[s],125)||")"===p[s]&&"map"===r.stack.token&&0===l[l.length-1]?t(p[s],125)&&t(e.token[r.count-1],123)&&"item"===e.types[r.count]&&void 0!==e.token[r.count-2]&&64===e.token[r.count-2].charCodeAt(e.token[r.count-2].length-1)?(e.token[r.count-2]=e.token[r.count-2]+"{"+e.token[r.count]+"}",r.pop(e),r.pop(e),r.stack.pop()):(t(p[s],41)&&l.pop(),c("end"),t(p[s],125)&&P(e.token[r.count],59)&&("value"===e.types[r.count]||"function"===e.types[r.count]||"variable"===e.types[r.count]&&(t(e.token[r.count-1],58)||t(e.token[r.count-1],59))?(h=!0===a.correct?";":"x;",n="separator",o(d)):"comment"===e.types[r.count]&&f()),j.pop(),h=p[s],n="end",t(p[s],125)&&u(),!0===a.style.sortProperties&&t(p[s],125)&&yt(e),o(d)):t(p[s],59)||t(p[s],44)?("selector"===e.types[r.count-1]||"at_rule"===e.types[r.count-1]||"function"!==e.types[r.count]&&t(e.token[r.count-1],125)?c("start"):c("separator"),"separator"!==e.types[r.count]&&!0===L(s)&&(h=p[s],n="separator",o(d))):r.count>-1&&t(p[s],58)&&"end"!==e.types[r.count]?(c("colon"),h=":",n="colon",o(d)):("map"===r.stack.token&&t(p[s],40)&&(l[l.length-1]=l[l.length-1]+1),O()),s+=1}while(s<x);return!0===a.style.sortProperties&&yt(e),e}():2===e?function An(){let E,I,ie,{data:e,references:a,rules:i,source:p}=r,x="json"===r.language?i.json:i.script,l=Ae(p)?p:p.split(d),j=l.length,s=[],n=[],h=[],o=[0,d],L=[!1],k={count:[],index:[],word:[]},O=-1,c=0,f=d,b=d,Y=[],u=0,G=-1,B=-1,q=[],oe=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];function S(){k.count.pop(),k.index.pop(),k.word.pop(),O-=1}function g($=d){r.push(e,{begin:r.stack.index,ender:-1,lexer:"script",lines:r.lineOffset,stack:r.stack.token,token:f,types:b},$)}function A($,y){let m=!0===y?c:c+1,C=d;if(("number"!=typeof $||$<1)&&($=1),t(l[c],47)&&(t(l[c+1],47)?C=R:t(l[c+1],42)&&(C="/")),m<j)do{if(!1===ue(l[m])){if(t(l[m],47)&&(C===d?t(l[m+1],47)?C=R:t(l[m+1],42)&&(C="/"):t(C,47)&&t(l[m-1],42)&&(C=d)),C===d&&l[m-1]+l[m]!=="*/")return l.slice(m,m+$).join(d)}else t(C,10)&&t(l[m],10)&&(C=d);m+=1}while(m<j);return d}function z($){let y=$;do{$-=1}while(t(l[$],92)&&$>0);return(y-$)%2==1}function V($){let y=A(1,!1),m=0===r.stack.length?d:r.stack.token,C={begin:e.begin[r.count],ender:e.begin[r.count],lexer:e.lexer[r.count],lines:e.lines[r.count],stack:e.stack[r.count],token:e.token[r.count],types:e.types[r.count]};if(pt.test(f)||"start"===b||"type_start"===b||"json"===r.language||t(y,123)||t(C.token,59)||t(C.token,44)||"class"===C.stack||"map"===C.stack||"attribute"===C.stack||"generic"===e.types[C.begin-1]||"initializer"===m||t(C.token,125)&&"global"===e.stack[C.begin-1]&&"operator"!==e.types[C.begin-1]&&C.stack===e.stack[r.count-1]||"array"===C.stack&&P(C.token,93)||t(e.token[e.begin[r.count]],123)&&"data_type"===C.stack||void 0!==C.types&&C.types.indexOf("liquid")>-1&&C.types.indexOf("template_string")<0||t(y,59)&&!1===$||"script"!==e.lexer[r.count-1]&&(c<j&&j===p.length-1||j<p.length-1))return;let J=0;if(t(C.token,125)&&("function"===C.stack||"if"===C.stack||"else"===C.stack||"for"===C.stack||"do"===C.stack||"while"===C.stack||"switch"===C.stack||"class"===C.stack||"try"===C.stack||"catch"===C.stack||"finally"===C.stack||"block"===C.stack)){if("function"!==C.stack||"data_type"!==e.stack[C.begin-1]&&"type"!==e.types[C.begin-1])J=e.begin[C.begin-1];else{J=C.begin;do{J-=1}while(J>0&&P(e.token[J],41)&&"arguments"!==e.stack[J]);J=e.begin[J]}if(!t(e.token[J],40))return;if(J-=1,"function"===e.token[J-1]&&(J-=1),"object"===e.stack[J-1]||"switch"===e.stack[J-1]||P(e.token[J-1],61)&&P(e.token[J-1],58)&&"return"!==e.token[J-1])return}if(!("comment"===C.types||"method"===m||"paren"===m||"expression"===m||"array"===m||"object"===m||"switch"===m&&"method"!==C.stack&&t(e.token[e.begin[r.count]],40)&&"return"!==e.token[e.begin[r.count]-1]&&"operator"!==e.types[e.begin[r.count]-1]||"expression"===e.stack[r.count]&&("while"!==e.token[e.begin[r.count]-1]||"while"===e.token[e.begin[r.count]-1]&&"do"!==e.stack[e.begin[r.count]-2])||y!==d&&"=<>+*?|^:&%~,.()]".indexOf(y)>-1&&!1===$)){if("comment"===C.types){J=r.count;do{J-=1}while(J>0&&"comment"===e.types[J]);if(J<1)return;C.token=e.token[J],C.types=e.types[J],C.stack=e.stack[J]}void 0===C.token||"start"===C.types||"separator"===C.types||"operator"===C.types&&"++"!==C.token&&"--"!==C.token||"x}"===C.token||"var"===C.token||"let"===C.token||"const"===C.token||"else"===C.token||0===C.token.indexOf("#!/")||"instanceof"===C.token||"method"===C.stack&&("function"===e.token[C.begin-1]||"function"===e.token[C.begin-2])||("list"===x.variableList&&(k.index[O]=r.count),f=!0===i.correct?";":"x;",b="separator",J=r.lineOffset,r.lineOffset=0,g(),r.lineOffset=J,ve())}}function ne(){let $=r.count;if("comment"===e.types[$])do{$-=1}while($>0&&"comment"===e.types[$]);"from"===e.token[$]&&($-=2),"x;"===e.token[$]&&r.splice({data:e,howmany:1,index:$})}function ye(){let $=r.count;do{$-=1}while($>-1&&"x}"===e.token[$]);if("else"===e.stack[$])return g();$+=1,r.splice({data:e,howmany:0,index:$,record:{begin:e.begin[$],ender:-1,lexer:"script",lines:r.lineOffset,stack:e.stack[$],token:f,types:b}}),g()}function te(){let $=[l[c]],y=0,m=t($[0],46),C=/zz/;if(c<j-2&&"0"===l[c]&&("x"===l[c+1]?C=/[0-9a-fA-F]/:"o"===l[c+1]?C=/[0-9]/:"b"===l[c+1]&&(C=/0|1/),C.test(l[c+2]))){$.push(l[c+1]),y=c+1;do{y+=1,$.push(l[y])}while(C.test(l[y+1]));return c=y,$.join(d)}if(y=c+1,y<j)do{if(!(Te(l[y])||t(l[y],46)&&!1===m))break;$.push(l[y]),t(l[y],46)&&(m=!0),y+=1}while(y<j);if(y<j-1&&(Te(l[y-1])||Te(l[y-2])&&(t(l[y-1],45)||t(l[y-1],43)))&&("e"===l[y]||"E"===l[y])&&($.push(l[y]),(t(l[y+1],45)||t(l[y+1],43))&&($.push(l[y+1]),y+=1),m=!1,y+=1,y<j))do{if(!(Te(l[y])||t(l[y],46)&&!1===m))break;$.push(l[y]),t(l[y],46)&&(m=!0),y+=1}while(y<j);return c=y-1,$.join(d)}function H(){let $=0,y=0,m=j,C=d,J=["=","<",">","+","*","?","|","^",":","&","%","~"],he=J.length;if(G>-1&&X(),t(l[c],47)&&r.count>-1&&("word"!==b&&"reference"!==b||"typeof"===f||"return"===f||"else"===f)&&"number"!==b&&"string"!==b&&"end"!==b)return"return"===f||"typeof"===f||"else"===f||"word"!==b?(f=function W(){let $=0,y=0,m=c+1,C=!1,J=j,he=["/"];if(m<J)do{if(he.push(l[m]),(P(l[m-1],92)||t(l[m-2],92))&&(t(l[m],91)&&(C=!0),t(l[m],93)&&(C=!1)),t(l[m],47)&&!1===C){if(!t(l[m-1],92))break;if(y=0,$=m-1,$>0)do{if(!t(l[$],92))break;y+=1,$-=1}while($>0);if(y%2==0)break}m+=1}while(m<J);return"g"===l[m+1]||"i"===l[m+1]||"m"===l[m+1]||"y"===l[m+1]||"u"===l[m+1]?(he.push(l[m+1]),l[m+2]===l[m+1]||"g"!==l[m+2]&&"i"!==l[m+2]&&"m"!==l[m+2]&&"y"!==l[m+2]&&"u"!==l[m+2]?c=m+1:(he.push(l[m+2]),l[m+3]===l[m+1]||l[m+3]===l[m+2]||"g"!==l[m+3]&&"i"!==l[m+3]&&"m"!==l[m+3]&&"y"!==l[m+3]&&"u"!==l[m+3]?c=m+2:(he.push(l[m+3]),l[m+4]===l[m+1]||l[m+4]===l[m+2]||l[m+4]===l[m+3]||"g"!==l[m+4]&&"i"!==l[m+4]&&"m"!==l[m+4]&&"y"!==l[m+4]&&"u"!==l[m+4]?c=m+3:(he.push(l[m+4]),l[m+5]===l[m+1]||l[m+5]===l[m+2]||l[m+5]===l[m+3]||l[m+5]===l[m+4]||"g"!==l[m+5]&&"i"!==l[m+5]&&"m"!==l[m+5]&&"y"!==l[m+5]&&"u"!==l[m+5]?c=m+4:(he.push(l[m+4]),c=m+5))))):c=m,he.join(d)}(),b="regex"):(f="/",b="operator"),g(),"regex";if(t(l[c],63)&&("+-*/.?".indexOf(l[c+1])>-1||t(l[c+1],58)&&J.join(d).indexOf(l[c+2])<0)&&(t(l[c+1],46)&&!1===Te(l[c+2])?C="?.":t(l[c+1],63)&&(C="??"),C===d))return"?";if(t(l[c],58)&&"+-*/".indexOf(l[c+1])>-1)return":";if(c<j-1){if(P(l[c],60)&&t(l[c+1],60))return l[c];if(t(l[c],33)&&t(l[c+1],47))return"!";if(t(l[c],45)&&(L[L.length-1]=!1,t(l[c+1],45)?C="--":t(l[c+1],61)?C="-=":t(l[c+1],62)&&(C="->"),C===d))return"-";if(t(l[c],43)&&(L[L.length-1]=!1,t(l[c+1],43)?C="++":t(l[c+1],61)&&(C="+="),C===d))return"+";if(t(l[c],61)&&P(l[c+1],61)&&P(l[c+1],33)&&P(l[c+1],62))return L[L.length-1]=!1,"="}if(t(l[c],59))if("typescript"===r.language)if("arguments"===e.stack[r.count])"?"===e.token[r.count]&&(r.pop(e),C="?:",c-=1),L[L.length-1]=!0;else if(!t(f,41)||"function"!==e.token[e.begin[r.count]-1]&&"function"!==e.token[e.begin[r.count]-2]){if("reference"===b){$=r.count;let v=!1;do{if(e.begin[$]===e.begin[r.count]){if($<r.count&&":"===e.token[$]&&"type"!==e.types[$+1]&&(v=!0),"?"===e.token[$]&&!1===v||";"===e.token[$]||"x;"===e.token[$])break;if("var"===e.token[$]||"let"===e.token[$]||"const"===e.token[$]||"type"===e.types[$]){L[L.length-1]=!0;break}}else{if("type_end"===e.types[$]){L[L.length-1]=!0;break}$=e.begin[$]}$-=1}while($>e.begin[r.count])}}else L[L.length-1]=!0;else"["===e.token[r.count-1]&&("word"===e.types[r.count]||"reference"===e.types[r.count])&&(r.stack.update("attribute"),e.stack[r.count]="attribute");if(C===d)if(t(l[c+1],43)&&t(l[c+2],43)||t(l[c+1],45)&&t(l[c+2],45))C=l[c];else{let v=[l[c]];if($=c+1,$<m)do{if(t(l[$],43)&&t(l[$+1],43)||t(l[$],45)&&t(l[$+1],45))break;if(y=0,y<he)do{if(l[$]===J[y]){v.push(J[y]);break}y+=1}while(y<he);if(y===he)break;$+=1}while($<m);C=v.join(d)}if(c+=C.length-1,"=>"===C&&t(f,41)){$=r.count,m=e.begin[$];do{e.begin[$]===m&&(e.stack[$]="method"),$-=1}while($>m-1)}return C}function K(){let $=[l[c]];if(c+=1,c<j)do{if($.push(l[c]),t(l[c],96)&&(P(l[c-1],92)||!z(c-1))||t(l[c-1],36)&&t(l[c],123)&&(P(l[c-2],92)||!z(c-2)))break;c+=1}while(c<j);return $.join(d)}function fe(){let $=0,y=!1,m=!1,C=0,J=0,he=0,v=d,N=d,T=d,F=[],U=L[L.length-1],de="0123456789=<>+-*?|^:&.,;%(){}[]~";function ce(){t(f,40)&&r.stack.update("paren",r.count),r.external("html",F.join(d))}if(G>-1&&X(),N=r.count>0?e.token[r.count-1]:d,T=r.count>0?e.types[r.count-1]:d,v=A(1,!1),"jsx"!==r.language&&"tsx"!==r.language&&!1===Te(v)&&("function"===f||"=>"===N||"void"===N||"."===N||"return"===f||"operator"===b||"arguments"===e.stack[r.count]||"type"===b&&"type"===N||"reference"===b&&("operator"===T||"function"===N||"class"===N||"new"===N)||"type"===b&&"operator"===T)){let ke=[],re=0,ee=0;$=c;do{if(ke.push(l[$]),t(l[$],60))re+=1;else if(t(l[$],62)&&(re-=1,re<1))break;$+=1}while($<j);if(ee=c,c=$,v=A(1,!1),t(l[$],62)&&(!0===U||"=>"===N||"."===N||"operator"!==T||"operator"===T&&(t(v,40)||t(v,61))))return b="generic",f=ke.join(d).replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", "),void g();c=ee}if($=r.count,"comment"===e.types[$])do{$-=1}while($>0&&"comment"===e.types[$]);if(!1===U&&">"!==A(1,!1)&&(P(l[c],60)&&de.indexOf(l[c+1])>-1||"++"===e.token[$]||"--"===e.token[$]||!0===ue(l[c+1])||!0===Te(l[c+1])&&("operator"===b||"string"===b||"number"===b||"reference"===b||"word"===b&&"return"!==f)))return b="operator",f=H(),g();if("typescript"!==r.language&&("return"===e.token[$]||"operator"===e.types[$]||"start"===e.types[$]||"separator"===e.types[$]||"jsx_attribute_start"===e.types[$]||t(e.token[$],125)&&"global"===r.stack.token)){b="markup",r.language="jsx";do{if(F.push(l[c]),t(l[c],123))J+=1,y=!0;else if(t(l[c],125))J-=1,0===J&&(y=!1);else if(t(l[c],60)&&!1===y){if(t(l[c+1],60))do{F.push(l[c]),c+=1}while(c<j&&t(l[c+1],60));C+=1,t(A(1,!1),47)&&(m=!0)}else if(t(l[c],62)&&!1===y){if(t(l[c+1],62))do{F.push(l[c]),c+=1}while(t(l[c+1],62));if(C-=1,!0===m?he-=1:P(l[c-1],47)&&(he+=1),0===C&&0===J&&he<1){if(v=A(2,!1),P(v,60))return ce();if(!(t(v,60)&&de.indexOf(v.charAt(1))<0&&!1===ue(v.charAt(1))))return ce();$=c+1;do{if($+=1,t(l[$],62)||ue(l[$-1])&&de.indexOf(l[$])<0)break;if(de.indexOf(l[$])>-1)return ce()}while($<j)}m=!1}c+=1}while(c<j);return ce()}b="operator",f=H(),g()}function D(){let $=!0,y="+",m=d,C=d,J=d,he=d,v=0,N=0,T=0,F=[];function U(){N=e.begin[N]-1,"end"===e.types[N]?U():t(e.token[N-1],46)&&de()}function de(){N-=2,"end"===e.types[N]?U():t(e.token[N-1],46)&&de()}function ce(){let re=0;if(re<F.length)do{r.push(e,F[re],d),re+=1}while(re<F.length)}function ke(re){return{begin:e.begin[re],ender:e.ender[re],lexer:e.lexer[re],lines:e.lines[re],stack:e.stack[re],token:e.token[re],types:e.types[re]}}if(m=e.token[r.count],C=e.token[r.count-1],J=e.token[r.count-2],"++"!==m&&"--"!==m&&"++"!==C&&"--"!==C&&(N=r.count,"end"===e.types[N]?U():t(e.token[N-1],46)&&de()),"++"===e.token[N-1]||"--"===e.token[N-1]){if("startendoperator".indexOf(e.types[N-2])>-1)return;if(T=N,T<r.count+1){do{F.push(ke(T)),T+=1}while(T<r.count+1);r.splice({data:e,howmany:r.count-N,index:N})}}else{if(!1===i.correct||"++"!==m&&"--"!==m&&"++"!==C&&"--"!==C)return;if(he=A(1,!1),"++"!==m&&"--"!==m||!(t(l[c],59)||t(he,59)||t(l[c],125)||t(he,125)||t(l[c],41)||t(he,41))){if(!(t(J,91)||t(J,59)||t(J,123)||t(J,125)||t(J,40)||t(J,41)||t(J,44)||"return"===J||"x;"===J))return;if("++"===m||"--"===m){if(t(J,91)||t(J,40)||t(J,44)||"return"===J)return;"--"===m&&(y="-"),$=!1}else("--"===C||"--"===m)&&(y="-")}else{if(y=e.stack[r.count],"array"===y||"method"===y||"object"===y||"paren"===y||"notation"===y||"while"===e.token[e.begin[r.count]-1]&&"while"!==y)return;T=r.count;do{if(T-=1,"return"===e.token[T])return;if("end"===e.types[T])do{T=e.begin[T]-1}while("end"===e.types[T]&&T>0)}while(T>0&&(t(e.token[T],46)||"word"===e.types[T]||"reference"===e.types[T]||"end"===e.types[T]));if(t(e.token[T],44)&&P(l[c],59)&&P(he,59)&&P(l[c],125)&&P(he,125)&&P(l[c],41)&&P(he,41))return;if("operator"===e.types[T]){if("switch"!==e.stack[T]||!t(e.token[T],58))return;do{if(T-=1,"start"===e.types[T]){if(v-=1,v<0)break}else"end"===e.types[T]&&(v+=1);if(t(e.token[T],63)&&0===v)return}while(T>0)}$=!1,y="--"===m?"-":"+"}if(!1===$&&(E=r.pop(e)),N=r.count,"end"===e.types[N]?U():t(e.token[N-1],46)&&de(),T=N,T<r.count+1)do{F.push(ke(T)),T+=1}while(T<r.count+1)}!0===$?(r.splice({data:e,howmany:1,index:N-1}),f="=",b="operator",g(),ce(),f=y,b="operator",g(),f="1",b="number",g()):(f="=",b="operator",g(),ce(),f=y,b="operator",g(),f="1",b="number",g()),f=e.token[r.count],b=e.types[r.count],t(he,125)&&P(l[c],59)&&V(!1)}function le($,y,m){let N,C=0,J=!1,he=!1,v=[$],T=y.split(d),F=T.length,U=c,de=c+$.length,ce=x.quoteConvert;function ke(){let ee=0;if(v=[],b=m,C=c,"string"===m&&ue(l[C+1])){ee=1;do{C+=1,t(l[C],10)&&(ee+=1)}while(C<j&&!0===ue(l[C+1]));r.lineOffset=ee}}function re(){let ee=d;if(t($,34)&&"single"===ce?(v[0]=_e,v[v.length-1]=_e):t($,39)&&"double"===ce?(v[0]=$e,v[v.length-1]=$e):!0===J&&(ee=v[v.length-1],v.pop(),v.pop(),v.push(ee)),c=C,y===R&&(c-=1,v.pop()),f=v.join(d),(t($,34)||t($,39)||"{{"===$||"{%"===$)&&(f=function Pe(me){if("javascript"!==r.language&&"typescript"!==r.language&&"jsx"!==r.language&&"tsx"!==r.language){let be=ge=>ge.replace(/\s*$/," "),Ie=ge=>ge.replace(/^\s*/," ");return/\{(#|\/|(%>)|(%\]))/.test(me)||/\}%(>|\])/.test(me)||(me=(me=me.replace(/\{((\{+)|%-?)\s*/g,be)).replace(/\s*((\}\}+)|(-?%\}))/g,Ie)),me}return me}(f)),"{%"===$||"{{"===$)return N=function Q($){let y=2,m=0,C=d,J=$.slice(0,2),he=$.length;if(t($[2],45)&&(y+=1),!0===ue($.charAt(y)))do{y+=1}while(!0===ue($.charAt(y))&&y<he);m=y;do{m+=1}while(!1===ue($.charAt(m))&&"("!==$.charAt(m)&&m<he);if(m===he&&(m=$.length-2),C=$.slice(y,m),"else"===C||"{%"===J&&("elseif"===C||"when"===C||"elif"===C||"elsif"===C))return["liquid_else",`liquid_${C}`];if("{{"===J)return"end"===C?["liquid_end",d]:"define"===C||"form"===C||"if"===C||"unless"===C||"range"===C||"with"===C?["liquid_start",`liquid_${C}`]:["liquid",d];if(m=oe.length-1,m>-1)do{if(C===oe[m]&&"block"!==C)return["liquid_start",`liquid_${C}`];if(C==="end"+oe[m])return["liquid_end",d];m-=1}while(m>-1);return["liquid",d]}(f),b=N[0],void g(N[1]);if("string"===m){if(b="string","json"===r.language)f=f.replace(/\\u[\dA-F]{4}/gi,me=>String.fromCharCode(parseInt(me.replace(/\\u/g,""),16)));else if(0===$.indexOf("#!"))f=f.slice(0,f.length-1),r.lineOffset=2;else if(("object"!==r.stack.token||"object"===r.stack.token&&P(A(1,!1),58)&&P(e.token[r.count],44)&&P(e.token[r.count],123))&&(f.length>i.wrap&&i.wrap>0||0!==i.wrap&&t(e.token[r.count],43)&&(t(e.token[r.count-1],46)||t(e.token[r.count-1],39)))){let me=f,be=d,Ie="double"===ce?$e:"single"===ce?_e:me.charAt(0),ge=i.wrap,qe=/u[0-9a-fA-F]{4}/,Fe=/x[0-9a-fA-F]{2}/;if(me=me.slice(1,me.length-1),t(e.token[r.count],43)&&(t(e.token[r.count-1],46)||t(e.token[r.count-1],39))&&(r.pop(e),Ie=e.token[r.count].charAt(0),me=e.token[r.count].slice(1,e.token[r.count].length-1)+me,r.pop(e)),me.length>ge&&ge>0)do{be=me.slice(0,ge),t(be[ge-5],92)&&qe.test(me.slice(ge-4,ge+1))?be=be.slice(0,ge-5):t(be[ge-4],92)&&qe.test(me.slice(ge-3,ge+2))?be=be.slice(0,ge-4):t(be[ge-3],92)&&(qe.test(me.slice(ge-2,ge+3))||Fe.test(me.slice(ge-2,ge+1)))?be=be.slice(0,ge-3):t(be[ge-2],92)&&(qe.test(me.slice(ge-1,ge+4))||Fe.test(me.slice(ge-1,ge+2)))?be=be.slice(0,ge-2):t(be[ge-1],92)&&(be=be.slice(0,ge-1)),be=Ie+be+Ie,me=me.slice(be.length-2),f=be,b="string",g(d),r.lineOffset=0,f="+",b="operator",g(d)}while(me.length>ge);f=me===d?Ie+Ie:Ie+me+Ie,b="string"}}else b=/\{\s*\?>$/.test(f)?"liquid_start":m;f.length>0&&g(d)}if(G>-1&&X(),t(l[c-1],92)&&!0===z(c-1)&&(t(l[c],34)||t(l[c],39))){if(r.pop(e),!t(e.token[0],123))return t(l[c],34)?(v=['\\"'],void re()):(v=["\\'"],void re());t(l[c],34)?($=$e,y='\\"',v=[$e]):($=_e,y="\\'",v=[_e]),J=!0}if(C=de,C<j)do{if(P(e.token[0],123)&&P(e.token[0],91)&&"none"!==ce&&(t(l[C],34)||t(l[C],39))?(t(l[C-1],92)?!0===z(C-1)&&("double"===ce&&t(l[C],39)||"single"===ce&&t(l[C],34))&&v.pop():"double"===ce&&t(l[C],34)&&t(l[c],39)?l[C]=$e:"single"===ce&&t(l[C],39)&&t(l[c],34)&&(l[C]=_e),v.push(l[C])):C>U?(he=!0,t(l[C],123)&&t(l[C+1],37)&&l[C+2]!==$?(re(),le("{%","%}","liquid"),ke()):t(l[C],123)&&t(l[C+1],123)&&l[C+2]!==$?(re(),le("{{","}}","liquid"),ke()):(he=!1,v.push(l[C]))):v.push(l[C]),"json"!==r.language&&"javascript"!==r.language&&(t($,34)||t($,39))&&(!0===he||C>U)&&P(l[C-1],92)&&P(l[C],34)&&P(l[C],39)&&(t(l[C],10)||C===j-1)){r.error="Unterminated string in script on line number "+r.lineNumber;break}if(l[C]===T[F-1]&&(P(l[C-1],92)||!1===z(C-1))&&(1===F||v[C-de]===T[0]&&v.slice(C-de-F+2).join(d)===y))break;C+=1}while(C<j);re()}function ve(){let $=d,y=A(5,!1),m=r.count,C=r.lineOffset;if(!("json"===r.language||n.length<1||"x"!==n[n.length-1].charAt(0)||!1===/^x?(;|\}|\))$/.test(f)||"do"===e.stack[r.count]&&"while"===y&&t(e.token[r.count],125))){if(t(f,59)&&"x{"===e.token[m-1])return $=e.token[e.begin[m-2]-1],"do"===e.token[m-2]||t(e.token[m-2],41)&&"ifforwhilecatch".indexOf($)>-1?(E=r.pop(e),f=!0===i.correct?"}":"x}",b="end",I=r.stack.entry,g(),n.pop(),void(r.lineOffset=C)):(E=r.pop(e),f=!0===i.correct?"}":"x}",b="end",I=r.stack.entry,g(),n.pop(),f=";",b="end",r.push(e,E,d),void(r.lineOffset=C));if(f=!0===i.correct?"}":"x}",b="end","x}"!==e.token[r.count]){if("else"===y&&"if"===e.stack[r.count]&&(t(e.token[r.count],59)||"x;"===e.token[r.count]))return I=r.stack.entry,g(),n.pop(),void(r.lineOffset=C);do{if(I=r.stack.entry,g(),n.pop(),"do"===e.stack[r.count])break}while("x{"===n[n.length-1]);r.lineOffset=C}}}function M(){let $=r.count;if("object"===e.stack[$]&&!0===x.objectSort)f=",",b="separator",ne(),g();else{do{$-=1}while($>0&&"comment"===e.types[$-1]);r.splice({data:e,howmany:0,index:$,record:{begin:e.begin[$],ender:-1,lexer:"script",lines:r.lineOffset,stack:e.stack[$],token:",",types:"separator"}}),g()}}function Z($){let y=!1,m=!1,C=A(1,!1),J=t(e.token[r.count],40)?r.count:e.begin[r.count];if(G>-1&&X(),h.length>0&&(0===h[h.length-1]?h.pop():h[h.length-1]=h[h.length-1]-1),(t($,41)||"x)"===$||t($,93))&&(!0===i.correct&&D(),ne()),(t($,41)||"x)"===$)&&V(!1),O>-1&&(t($,125)&&("list"===x.variableList&&0===k.count[O]||"x;"===e.token[r.count]&&"each"===x.variableList)&&S(),k.count[O]=k.count[O]-1,k.count[O]<0&&S()),t(f,44)&&"initializer"!==e.stack[r.count]&&(t($,93)&&t(e.token[r.count-1],91)||t($,125))&&(E=r.pop(e)),t($,41)||"x)"===$?(f=$,s.length>0&&(Y=s[s.length-1],Y.length>1&&P(C,123)&&("if"===Y[0]||"for"===Y[0]||"with"===Y[0]||"while"===Y[0]&&void 0!==e.stack[Y[1]-2]&&"do"!==e.stack[Y[1]-2])&&(y=!0))):t($,93)?f="]":t($,125)&&(P(f,44)&&!0===i.correct&&D(),r.stack.length>0&&"object"!==r.stack.token&&V(!0),!0===x.objectSort&&"object"===r.stack.token&&yt(e),"comment"===b&&(f=e.token[r.count],b=e.types[r.count]),f="}"),b="data_type"===r.stack.token?"type_end":"end",s.pop(),I=r.stack.entry,t($,41)&&!0===i.correct&&J-r.count<2&&(t(e.token[r.count],40)||"number"===e.types[r.count])&&("Array"===e.token[J-1]||"Object"===e.token[J-1])&&"new"===e.token[J-2]&&(function he(){let v=0,N="Array"===e.token[J-1],T=N?"[":"{",F=N?"]":"}",U=N?"array":"object";if(!0===N&&"number"===e.types[r.count]&&(v=Number(e.token[r.count]),E=r.pop(e)),E=r.pop(e),E=r.pop(e),E=r.pop(e),r.stack.pop(),f=T,b="start",g(U),v>0){f=",",b="separator";do{g(),v-=1}while(v>0)}f=F,b="end",g()}(),m=!0),"x{"===n[n.length-1]&&t($,125)?(ve(),n.pop(),"try"!==e.stack[r.count]&&P(C,58)&&P(C,59)&&"?"!==e.token[e.begin[c]-1]&&ve(),f="}"):n.pop(),void 0!==x.endComma&&"none"!==x.endComma&&"array"===r.stack.token||"object"===r.stack.token||"data_type"===r.stack.token)if("always"===x.endComma&&P(e.token[r.count],44)){let v=r.stack.index,N=r.count;do{if(e.begin[N]===v){if(t(e.token[N],44))break}else N=e.begin[N];N-=1}while(N>v);if(N>v){let T=b,F=f;f=",",b="separator",g(),f=F,b=T}}else"never"===x.endComma&&t(e.token[r.count],44)&&r.pop(e);!1===m&&(g(),t(f,125)&&"object"!==e.stack[r.count]&&"class"!==e.stack[r.count]&&"data_type"!==e.stack[r.count]&&(a.pop(),ve())),!0===y&&(f=!0===i.correct?"{":"x{",b="start",g(Y[0]),n.push("x{"),Y[1]=r.count),L.pop(),"data_type"!==r.stack.token&&(L[L.length-1]=!1)}function w($){let y=r.count,m=d,C=d,J=d,he=!1;if(n.push($),!t($,123)||"type"!==e.types[r.count]&&"type_end"!==e.types[r.count]&&"generic"!==e.types[r.count])t($,91)&&"type_end"===e.types[r.count]?L.push(!0):L.push(L[L.length-1]);else{let v=0;"type_end"===e.types[r.count]&&(y=e.begin[r.count]),v=y;do{if(y-=1,e.begin[y]!==v&&-1!==e.begin[y]||t(e.token[y],58))break}while(y>e.begin[y]);t(e.token[y],58)&&"arguments"===e.stack[y-1]?(L.push(!1),he=!0):L.push(L[L.length-1]),y=r.count}if(G>-1&&(X(),y=r.count),O>-1&&(k.count[O]=k.count[O]+1),s.push("function"===e.token[y-1]?["function",y+1]:[f,y+1]),f=$,b=!0===L[L.length-1]?"type_start":"start",t($,40)||"x("===$?ne():t($,91)&&(B>-1?(e.begin[B-1]===e.begin[e.begin[y]-1]||"x("===e.token[e.begin[y]])&&(B=-1,Z(!0===i.correct?")":"x)"),ne(),f="{",b="start"):t(f,41)&&ne(),"comment"===b&&t(e.token[y-1],41)&&(f=e.token[y],e.token[y]="{",b=e.types[y],e.types[y]="start")),m=(()=>{let v=r.count;if("comment"===e.types[v])do{v-=1}while(v>0&&"comment"===e.types[v]);return e.token[v]})(),C=void 0===e.stack[y]?d:(()=>{let v=r.count;if("comment"===e.types[v])do{v-=1}while(v>0&&"comment"===e.types[v]);return e.token[e.begin[v]-1]})(),t(f,123)&&("word"===e.types[y]||t(e.token[y],93))){let v=y;if(t(e.token[v],93))do{v=e.begin[v]-1}while(t(e.token[v],93));do{if("start"===e.types[v]||"end"===e.types[v]||"operator"===e.types[v])break;v-=1}while(v>0);t(e.token[v],58)&&"arguments"===e.stack[v-1]&&(J="function",a.push(q),q=[])}if("type_start"===b)J="data_type";else if(J!==d||!t(f,123)&&"x{"!==f)t(f,91)?J="array":(t(f,40)||"x("===f)&&(J="function"===m||"function"===e.token[y-1]||"function*"===e.token[y-1]||"function"===e.token[y-2]?"arguments":t(e.token[y-1],46)||t(e.token[e.begin[y]-2],46)||"generic"===e.types[y]||t(e.token[y],125)&&"function"===e.stack[y]?"method":"if"===m||"for"===m||"class"===m||"while"===m||"catch"===m||"finally"===m||"switch"===m||"with"===m?"expression":"word"===e.types[y]||"property"===e.types[y]||"reference"===e.types[y]?"method":"paren");else{if("else"===m||"do"===m||"try"===m||"finally"===m||"switch"===m)J=m;else if(0===h[h.length-1]&&"return"!==m)h.pop(),J="class";else if("class"===e.token[y-1])J="class";else if(t(e.token[y],93)&&t(e.token[y-1],91))J="array";else if("word"!==e.types[y]&&"reference"!==e.types[y]||"word"!==e.types[y-1]&&"reference"!==e.types[y-1]&&("?"!==e.token[y-1]||"word"!==e.types[y-2]&&"reference"!==e.types[y-2])||"in"===e.token[y]||"export"===e.token[y-1]||"import"===e.token[y-1])if("method"!==e.stack[y]||"end"!==e.types[y]||"word"!==e.types[e.begin[y]-1]&&"reference"!==e.types[e.begin[y]-1]||"new"!==e.token[e.begin[y]-2])if(!t(f,123)||!t(m,41)&&"x)"!==m||"word"!==e.types[e.begin[y]-1]&&"reference"!==e.types[e.begin[y]-1]&&"]"!==e.token[e.begin[y]-1])if(t(f,123)&&(t(m,59)||"x;"===m))J="block";else if(t(f,123)&&t(e.token[y],58)&&"switch"===e.stack[y])J="block";else if("import"===e.token[y-1]||"import"===e.token[y-2]||"export"===e.token[y-1]||"export"===e.token[y-2])J="object";else if(!t(m,41)||"function"!==Y[0]&&"if"!==Y[0]&&"for"!==Y[0]&&"class"!==Y[0]&&"while"!==Y[0]&&"switch"!==Y[0]&&"catch"!==Y[0])if("notation"===e.stack[y])J="function";else if("number"!==e.types[y]&&"string"!==e.types[y]&&"word"!==e.types[y]&&"reference"!==e.types[y]||"word"!==e.types[y-1]&&"reference"!==e.types[y-1]||"for"===e.token[e.begin[y]-1])if(r.stack.length>0&&P(e.token[y],58)&&"object"===r.stack.token&&(t(e.token[e.begin[y]-2],123)||t(e.token[e.begin[y]-2],44)))J="function";else if("markup"===e.types[Y[1]-1]&&"function"===e.token[Y[1]-3])J="function";else if("=>"===m)J="function";else if(!0===he||"type_end"===e.types[r.count]&&"arguments"===e.stack[e.begin[r.count]-2])J="function";else if(!t(m,41)||"method"!==e.stack[y]||"word"!==e.types[e.begin[y]-1]&&"property"!==e.types[e.begin[y]-1]&&"reference"!==e.types[e.begin[y]-1])if(t(f,123)&&"word"===e.types[y]&&"return"!==e.token[y]&&"in"!==e.token[y]&&"import"!==e.token[y]&&"const"!==e.token[y]&&"let"!==e.token[y]&&e.token[y]!==d)J="block";else if(t(f,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(e.stack[y])>-1&&("x}"===e.token[y]||t(e.token[y],125)))J="block";else if("arguments"===e.stack[y])J="function";else if("generic"===e.types[y])do{if(y-=1,"function"===e.token[y]||"arguments"===e.stack[y]){J="function";break}if("interface"===e.token[y]){J="map";break}if(t(e.token[y],59)){J="object";break}}while(y>e.begin[r.count]);else J="object";else J="function";else J="function";else J=Y[0];else J="if"===C?"if":"for"===C?"for":"while"===C?"while":"class"===C?"class":"switch"===C||"switch"===e.token[e.begin[y]-1]?"switch":"catch"===C?"catch":"function";else J="initializer";else J="map";"object"!==J&&"class"!==J&&("function"===J?(a.push(q),q=[]):a.push([]))}g(J),h.length>0&&(h[h.length-1]=h[h.length-1]+1)}function X(){let $=G,y=1,m=d,C=d,J=f,he=b,v=[];function N(){n.push("x{"),r.splice({data:e,howmany:1,index:r.count-3})}function T(F,U,de){let ce=e.begin[F],ke=0;do{if(e.token[F]===U&&"word"===e.types[F])if(!0===de)e.types[F]="reference";else if(e.begin[F]>ce&&"{"===e.token[e.begin[F]]&&"object"!==e.stack[F]&&"class"!==e.stack[F]&&"data_type"!==e.stack[F])if("function"===e.stack[F])e.types[F]="reference";else{ke=e.begin[F];do{if("function"===e.stack[ke]){e.types[F]="reference";break}ke=e.begin[ke]}while(ke>ce)}F-=1}while(F>ce)}do{v.push(l[$]),t(l[$],92),$+=1}while($<c);if("\u201c"===f.charAt(0)?r.error=`Quote looking character (\u201c, \\u201c) used instead of actual quotes on line number ${r.lineNumber}`:"\u201d"===f.charAt(0)&&(r.error=`Quote looking character (\u201d, \\u201d) used instead of actual quotes on line number ${r.lineNumber}`),m=v.join(d),G=-1,r.count>0&&"function"===m&&t(e.token[r.count],40)&&(t(e.token[r.count-1],123)||"x{"===e.token[r.count-1])&&(e.types[r.count]="start"),r.count>1&&"function"===m&&t(f,40)&&(t(e.token[r.count-1],125)||"x}"===e.token[r.count-1]))if(t(e.token[r.count-1],125)){if($=r.count-2,$>-1)do{if("end"===e.types[$]?y+=1:("start"===e.types[$]||"end"===e.types[$])&&(y-=1),0===y)break;$-=1}while($>-1);if(t(e.token[$],123)&&t(e.token[$-1],41)){if(y=1,$-=2,$>-1)do{if("end"===e.types[$]?y+=1:("start"===e.types[$]||"end"===e.types[$])&&(y-=1),0===y)break;$-=1}while($>-1);"function"!==e.token[$-1]&&"function"!==e.token[$-2]&&(e.types[r.count]="start")}}else e.types[r.count]="start";if(!0===i.correct&&("Object"===m||"Array"===m)&&t(l[c+1],40)&&t(l[c+2],41)&&t(e.token[r.count-1],61)&&"new"===e.token[r.count])"Object"===m?(e.token[r.count]="{",f="}",e.stack[r.count]="object",r.stack.update("object")):(e.token[r.count]="[",f="]",e.stack[r.count]="array",r.stack.update("array")),e.types[r.count]="start",b="end",l[c+1]=d,l[c+2]=d,c+=2;else{if(y=r.count,$=y,"none"===x.variableList||"var"!==m&&"let"!==m&&"const"!==m)O>-1&&m!==k.word[O]&&r.count===k.index[O]&&t(e.token[k.index[O]],59)&&f!==k.word[O]&&"list"===x.variableList&&S();else{if("comment"===e.types[y])do{y-=1}while(y>0&&"comment"===e.types[y]);if("list"===x.variableList&&O>-1&&k.index[O]===y&&m===k.word[O])return f=",",b="separator",e.token[y]=f,e.types[y]=b,k.count[O]=0,k.index[O]=y,void(k.word[O]=m);O+=1,k.count.push(0),k.index.push(y),k.word.push(m),y=$}if("from"===m&&"x;"===e.token[r.count]&&t(e.token[r.count-1],125)&&ne(),"while"===m&&"x;"===e.token[r.count]&&t(e.token[r.count-1],125)){let F=0,U=r.count-2;if(U>-1)do{if("end"===e.types[U]?F+=1:"start"===e.types[U]&&(F-=1),F<0)return void(t(e.token[U],123)&&"do"===e.token[U-1]&&ne());U-=1}while(U>-1)}if("comment"===he){let F=r.count;do{F-=1}while(F>0&&"comment"===e.types[F]);he=e.types[F],J=e.token[F]}if(C=A(2,!1),"void"===m)b=":"===J&&"arguments"===e.stack[r.count-1]?"type":"word";else if("object"!==r.stack.token&&"class"!==r.stack.token&&"data_type"!==r.stack.token||!(t(e.token[r.count],123)||t(e.token[e.begin[r.count]],123)&&t(e.token[r.count],44)||"liquid_end"===e.types[r.count]&&(t(e.token[e.begin[r.count]-1],123)||t(e.token[e.begin[r.count]-1],44))))if(!0===L[L.length-1]||("typescript"===r.language||"flow"===r.language)&&"type"===J)b="type";else if(a.length>0&&("function"===J||"class"===J||"const"===J||"let"===J||"var"===J||"new"===J||"void"===J))b="reference",a[a.length-1].push(m),T(r.count,m,("javascript"===r.language||"jsx"===r.language||"typescript"===r.language||"tsx"===r.language)&&("var"===J||"function"===J&&"operator"!==e.types[r.count-1]&&"start"!==e.types[r.count-1]&&"end"!==e.types[r.count-1]));else if("arguments"===r.stack.token&&"operator"!==b)b="reference",q.push(m);else if(!t(J,44)||"method"===e.stack[r.count]||"expression"===e.stack[r.count]&&"for"!==e.token[e.begin[r.count]-1])if("object"!==r.stack.token||"object"===r.stack.token&&","!==f&&"{"!==f){let F=a.length,U=0;if(F>0){do{if(F-=1,U=a[F].length,U>0){do{if(U-=1,m===a[F][U])break}while(U>0);if(m===a[F][U])break}}while(F>0);b=a[F][U]===m&&"."!==J?"reference":"word"}else b="word"}else b="word";else{let F=r.count,U=r.stack.index;do{if(e.begin[F]===U){if(";"===e.token[F]||"var"===e.token[F]||"let"===e.token[F]||"const"===e.token[F]||"type"===e.token[F])break}else"end"===e.types[F]&&(F=e.begin[F]);F-=1}while(F>U);a.length>0&&"var"===e.token[F]?(b="reference",a[a.length-1].push(m),T(F,m,"javascript"===r.language||"jsx"===r.language||"typescript"===r.language||"tsx"===r.language)):a.length>0&&("let"===e.token[F]||"const"===e.token[F]||"type"===e.token[F]&&("typescript"===r.language||"tsx"===r.language))?(b="reference",a[a.length-1].push(m),T(F,m,!1)):b="word"}else b="return"===m||"break"===m?"word":"property";f=m,"from"===m&&"}"===e.token[r.count]&&ne()}if(g(),"class"===m&&h.push(0),"do"===m&&(C=A(1,!0),"{"!==C&&(f=!0===i.correct?"{":"x{",b="start",n.push("x{"),g("do"))),"else"===m){C=A(2,!0);let F=r.count-1;if("comment"===e.types[F])do{F-=1}while(F>0&&"comment"===e.types[F]);"x}"===e.token[F]&&("else"===e.token[r.count]?"if"!==e.stack[r.count-1]&&"comment"!==e.types[r.count-1]&&"else"!==e.stack[r.count-1]?(n.pop(),r.splice({data:e,howmany:0,index:r.count-1,record:{begin:e.begin[e.begin[e.begin[r.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:!0===i.correct?"}":"x}",types:"end"}}),r.stack.length>1&&(r.stack.splice(r.stack.length-2,1),r.stack.update(r.count))):("x}"===e.token[r.count-2]&&"if"!==I[0]&&"else"===e.stack[r.count]||"}"===e.token[r.count-2]&&"if"===e.stack[r.count-2]&&"if"===I[0]&&"if"!==e.token[I[1]-1]&&"x{"===e.token[e.begin[r.count-1]])&&N():"x}"===e.token[r.count]&&"if"===e.stack[r.count]&&N()),"if"!==C&&P(C,123)&&(f=!0===i.correct?"{":"x{",b="start",n.push("x{"),g("else"))}("for"===m||"if"===m||"switch"===m||"catch"===m)&&"."!==e.token[r.count-1]&&(C=A(1,!0),"("!==C&&(B=r.count,w(!0===i.correct?"(":"x(")))}function ae(){r.lineOffset=1;do{if(t(l[c],10)&&(r.lineIndex=c,r.lineOffset=r.lineOffset+1,r.lineNumber=r.lineNumber+1),!1===ue(l[c+1]))break;c+=1}while(c<j)}do{ue(l[c])?(G>-1&&X(),ae(),r.lineOffset>1&&u<r.count&&P(l[c+1],59)&&P(l[c+1],125)&&(V(!1),u=r.count)):t(l[c],123)&&t(l[c+1],37)?le("{%","%}","liquid"):t(l[c],123)&&t(l[c+1],123)?le("{{","}}","liquid"):t(l[c],60)&&t(l[c+1],33)&&t(l[c+2],45)&&t(l[c+3],45)?le("\x3c!--","--\x3e","comment"):t(l[c],60)?fe():t(l[c],47)&&(c===j-1||t(l[c+1],42))?(V(!1),G>-1&&X(),ie=wt({chars:l,end:j,lexer:"script",begin:"/*",start:c,ender:"*/"}),c=ie[1],"var"===e.token[r.count]||"let"===e.token[r.count]||"const"===e.token[r.count]?(E=r.pop(e),g(),r.push(e,E,d),0===e.lines[r.count-2]&&(e.lines[r.count-2]=e.lines[r.count]),e.lines[r.count]=0):ie[0]!==d&&(f=ie[0],b=pt.test(f)?"ignore":"comment",2===f.indexOf("# sourceMappingURL=")&&(o[0]=r.count+1,o[1]=f),r.push(e,{begin:r.stack.index,ender:-1,lexer:"script",lines:r.lineOffset,stack:r.stack.token,token:f,types:b},d)),/\/\*\s*global\s+/.test(e.token[r.count])&&e.types.indexOf("word")<0&&(a[0]=e.token[r.count].replace(/\/\*\s*global\s+/,d).replace("*/",d).replace(/,\s+/g,",").split(","))):(r.count<0||e.lines[r.count]>0)&&t(l[c],35)&&t(l[c+1],33)&&(t(l[c+2],47)||t(l[c+3],91))?le("#!"+l[c+2],R,"string"):t(l[c],47)&&(c===j-1||t(l[c+1],47))?(V(!1),ve(),G>-1&&X(),ie=Yt({chars:l,end:j,lexer:"script",begin:"//",start:c,ender:R}),c=ie[1],ie[0]!==d&&(f=ie[0],b=pt.test(f)?"ignore":"comment",2===f.indexOf("# sourceMappingURL=")&&(o[0]=r.count+1,o[1]=f),r.push(e,{begin:r.stack.index,ender:-1,lexer:"script",lines:r.lineOffset,stack:r.stack.token,token:f,types:b},d))):t(l[c],96)||t(l[c],125)&&"template_string"===r.stack.token?(G>-1&&X(),f=K(),t(f,125)&&"${"===f.slice(f.length-2)?(b="template_string_else",g("template_string")):"${"===f.slice(f.length-2)?(b="template_string_start",g("template_string")):t(f[0],125)?(b="template_string_end",g()):(b="string",g())):t(l[c],34)||t(l[c],39)?le(l[c],l[c],"string"):t(l[c],45)&&c<j-1&&P(l[c+1],61)&&P(l[c+1],45)&&("number"===b||"word"===b||"reference"===b)&&"return"!==f&&("word"===b||"reference"===b||"number"===b||t(f,41)||t(f,93))?(G>-1&&X(),f="-",b="operator",g()):-1===G&&("0"!==l[c]||"0"===l[c]&&"b"!==l[c+1])&&(Te(l[c])||c!==j-2&&t(l[c],45)&&t(l[c+1],46)&&Te(l[c+2])||c!==j-1&&(t(l[c],45)||t(l[c],46))&&Te(l[c+1]))?(G>-1&&X(),"end"===b&&t(l[c],45)?(f="-",b="operator"):(f=te(),b="number"),g()):t(l[c],58)&&t(l[c+1],58)?(G>-1&&X(),!0===i.correct&&D(),ne(),c+=1,f="::",b="separator",g()):t(l[c],44)?(G>-1&&X(),!0===i.correct&&D(),!0===L[L.length-1]&&e.stack[r.count].indexOf("type")<0&&(L[L.length-1]=!1),"comment"===b?M():O>-1&&0===k.count[O]&&"each"===x.variableList?(ne(),f=";",b="separator",g(),f=k.word[O],b="word",g(),k.index[O]=r.count):(f=",",b="separator",ne(),g())):t(l[c],46)?(G>-1&&X(),L[L.length-1]=!1,t(l[c+1],46)&&t(l[c+2],46)?(f="...",b="operator",c+=2):(ne(),f=".",b="separator"),ue(l[c-1])&&(r.lineOffset=1),g()):t(l[c],59)?(G>-1&&X(),!0===L[L.length-1]&&e.stack[r.count].indexOf("type")<0&&(L[L.length-1]=!1),0===h[h.length-1]&&h.pop(),O>-1&&0===k.count[O]&&("each"===x.variableList?S():k.index[O]=r.count+1),!0===i.correct&&D(),f=";",b="separator","x}"===e.token[r.count]?ye():g(),ve()):t(l[c],40)||t(l[c],91)||t(l[c],123)?w(l[c]):t(l[c],41)||t(l[c],93)||t(l[c],125)?Z(l[c]):G<0&&"object"===e.stack[r.count]&&t(l[c],42)&&P(l[c+1],61)&&!1===Te(l[c+1])&&!1===ue(l[c+1])?G=c:t(l[c],61)||t(l[c],38)||t(l[c],60)||t(l[c],62)||t(l[c],43)||t(l[c],45)||t(l[c],42)||t(l[c],47)||t(l[c],33)||t(l[c],63)||t(l[c],124)||t(l[c],94)||t(l[c],58)||t(l[c],37)||t(l[c],94)?(f=H(),"regex"===f?f=e.token[r.count]:t(f,42)&&"function"===e.token[r.count]?e.token[r.count]="function*":(b="operator",P(f,33)&&"++"!==f&&"--"!==f&&ne(),g())):G<0&&l[c]!==d&&(G=c),O>-1&&r.count===k.index[O]+1&&t(e.token[k.index[O]],59)&&f!==k.word[O]&&"comment"!==b&&"list"===x.variableList&&S(),c+=1}while(c<j);return G>-1&&X(),(P(e.token[r.count],125)&&t(e.token[0],123)||P(e.token[0],123))&&(P(e.token[r.count],93)&&t(e.token[0],91)||P(e.token[0],91))&&V(!1),o[0]===r.count&&(f=R+o[1],b="string",g()),"x;"===e.token[r.count]&&(t(e.token[r.count-1],125)||t(e.token[r.count-1],93))&&0===e.begin[r.count-1]&&r.pop(e),x.objectSort&&e.begin.length>0&&zt(0,r.count+1),e}():void 0}function nn(e){return 1===e?function Ln(){let{rules:e}=r,{lineBreakValue:a}=e.markup,i=r.start,p=-1,x=0,l=0,j=isNaN(e.indentLevel)?0:e.indentLevel,s=r.data,n=r.ender<1||r.ender>s.token.length?s.token.length:r.ender+1,h={},o="jsx"===e.language||"tsx"===e.language,L=new Map,k=r.start>0?Array(r.start).fill(0,0,r.start):[],O=function ne(){do{"markup"===s.lexer[i]?(b(i,"doctype")&&(k[i-1]=j),u(i,"attribute")>-1?V():b(i,"comment")?(p<0&&(p=i),S()):!1===b(i,"comment")&&(x=E(),(b(x,"end")||b(x,"liquid_end"))&&(j>-1&&(j-=1),b(x,"liquid_end")&&b(i,"liquid_else")&&j>-1&&(j-=1),(Y(i,"</ol>")||Y(i,"</ul>")||Y(i,"</dl>"))&&oe()),b(i,"script_end")&&b(x,"end")?k.push(s.lines[x]<1?-20:s.lines[x]>1?j:-10):(!1===e.markup.forceIndent||!0===e.markup.forceIndent&&b(x,"script_start"))&&(b(i,"content")||b(i,"singleton")||b(i,"liquid"))?(l+=s.token[i].length,s.lines[x]>0&&b(x,"script_start")?k.push(-10):e.wrap>0&&!1===b(i,"singleton")&&(u(i,"liquid")<0||x<n&&u(i,"liquid")>-1&&u(x,"liquid")<0)?g():x<n&&(u(x,"end")>-1||u(x,"start")>-1)&&(s.lines[x]>0||u(i,"liquid_")>-1)?k.push(j):k.push(0===s.lines[x]?-20:1===s.lines[x]?-10:j)):b(i,"start")||b(i,"liquid_start")?(j+=1,b(x,"liquid_when")&&!1===e.liquid.dedentTagList.includes("case")&&(j+=1),!0===o&&Y(i+1,"{")?k.push(0===s.lines[x]?-20:s.lines[x]>1?j:-10):b(i,"start")&&b(x,"end")||b(i,"liquid_start")&&b(x,"liquid_end")?"liquid"===s.stack[i]||u(x-1,"comment")>-1?k.push(j):k.push(-20):b(i,"start")&&b(x,"script_start")?k.push(-10):!0===e.markup.forceIndent?k.push(j):0===s.lines[x]&&(b(x,"content")||b(x,"singleton")||b(i,"start")&&b(x,"liquid"))?k.push(-20):k.push(j)):!1===e.markup.forceIndent&&0===s.lines[x]&&(b(x,"content")||b(x,"singleton"))||b(i+2,"script_end")?k.push(-20):b(i,"liquid_else")||b(i,"liquid_when")?(k[i-1]=j-1,b(x,"liquid_end")&&(k[i-1]=j-1),k.push(j)):!0===e.markup.forceIndent&&(b(i,"content")&&(b(x,"liquid")||b(x,"content"))||b(i,"liquid")&&(b(x,"content")||b(x,"liquid")))?k.push(s.lines[x]<1?-20:s.lines[x]>1?j:-10):b(i,"liquid_start_bad")?(j+=1,k.push(j)):b(x,"liquid_end_bad")?(j-=1,k.push(j)):Y(i,"{% endcase %}")&&!1===e.liquid.dedentTagList.includes("case")?(k[i-1]--,j-=1):k.push(j)),!1===b(i,"content")&&!1===b(i,"singleton")&&!1===b(i,"liquid")&&!1===b(i,"attribute")&&(l=0)):(l=0,A()),i+=1}while(i<n);return k}(),c=function q(){let _=[e.indentChar],W=e.indentSize-1,te=0;if(te<W)do{_.push(e.indentChar),te+=1}while(te<W);return _.join(d)}(),f=[];function b(_,W){return s.types[_]===W}function Y(_,W){return s.token[_]===W}function u(_,W){return _>-1&&(s.types[_]||d).indexOf(W)}function G(_,W=!0){let te=[],K=Math.min(s.lines[i+1]-1,e.preserveLine+1),fe=0;if(_<0&&(_=0),W)do{te.push(r.crlf),fe+=1}while(fe<K);if(_>0){fe=0;do{te.push(c),fe+=1}while(fe<_)}return te.join(d)}function B(){let _,W=s.lines[i+1];_=b(i,"comment")&&(t(s.token[i][1],37)&&!1===e.liquid.preserveComment||P(s.token[i][1],37)&&!1===e.markup.preserveComment)?s.token[i].split(r.crlf).map(D=>D.trimStart()):s.token[i].split(r.crlf);let te=b(i,"attribute"),H=_.length-1,K=O[i-1]>-1?te?O[i-1]+1:O[i-1]:(()=>{let D=i-1,le=D>-1&&u(D,"start")>-1;if(O[i]>-1&&b(i,"attribute"))return O[i]+1;do{if(D-=1,O[D]>-1)return b(i,"content")&&!1===le?O[D]:O[D]+1;u(D,"start")>-1&&(le=!0)}while(D>0);return-2===D?0:1})(),fe=0;s.lines[i+1]=0;do{b(i,"comment")?(0===fe&&(t(s.token[i][1],37)&&!0===e.liquid.commentNewline||!1===t(s.token[i][1],37)&&!0===e.markup.commentNewline)&&(0===e.preserveLine||f.length>0&&f[f.length-1].lastIndexOf(R)+1<2)&&f.push(G(K)),_[fe]!==d?(fe>0&&(t(s.token[i][1],37)&&!0===e.liquid.commentIndent||!1===t(s.token[i][1],37)&&!0===e.markup.commentIndent)&&f.push(c),_[fe+1].trimStart()!==d?f.push(_[fe],G(K)):f.push(_[fe],R)):_[fe+1].trimStart()===d?f.push(R):f.push(G(K))):te?"align"===a||"force-align"===a?f.push(_[fe].trim(),G(O[i])):"indent"===a||"force-indent"===a?f.push(_[fe].trim(),G(fe+1===H?O[i]:K)):(f.push(_[fe]),f.push("force-preserve"!==a||fe+1!==H&&0!==fe?r.crlf:G(O[i]))):f.push(_[fe],G(K)),fe+=1}while(fe<H);if(te&&P(_[H],60)&&L.get(i-1)>=2&&Me(_[H],62)&&"inline"!==e.markup.delimiterTerminus){L.delete(i-1);let D=G(O[i-1]-1);f[f.length-1]===D&&f.push(e.indentChar.repeat(e.indentSize)),b(i-1,"singleton")&&Ge(_[H],47)?f.push(_[H].slice(0,-2),D,"/>"):f.push(_[H].slice(0,-1),D,">")}else f.push(_[H]);s.lines[i+1]=W,b(i,"comment")&&(b(i+1,"liquid_end")||b(i-1,"liquid_end"))?f.push(G(O[i])):f.push(-10===O[i]?se:G(O[i]))}function E(){let _=i+1,W=0;if(b(_,void 0))return _-1;if(b(_,"comment")||i<n-1&&u(_,"attribute")>-1)do{if(b(_,"jsx_attribute_start")){W=_;do{if(b(_,"jsx_attribute_end")&&s.begin[_]===W)break;_+=1}while(_<n)}else if(!1===b(_,"comment")&&u(_,"attribute")<0)return _;_+=1}while(_<n);return _}function I(){let _=/(?!=)\/?>$/,W=s.token[i],te=_.exec(W);if(null===te)return;let H=i+1,K=!1,fe=!0===e.markup.selfCloseSpace&&"/>"===te[0]?se:d;s.token[i]=W.replace(_,d);do{if(b(H,"jsx_attribute_end")&&s.begin[s.begin[H]]===i)K=!1;else if(s.begin[H]===i){if(b(H,"jsx_attribute_start"))K=!0;else if(u(H,"attribute")<0&&!1===K)break}else if(!1===K&&(s.begin[H]<i||u(H,"attribute")<0))break;H+=1}while(H<n);b(H-1,"comment_attribute")&&(fe=G(O[H-2]-1)),s.token[H-1]=`${s.token[H-1]}${fe}${te[0]}`,b(H,"comment")&&s.lines[i+1]<2&&(O[i]=-10)}function ie(){if(!1===b(i,"end")&&P(s.token[i],60)&&L.get(s.begin[i])>=2&&Me(s.token[i],62)){L.delete(s.begin[i]);let _=G(O[i-1]-1).replace(/\n+/,R),W=`${s.token[i].slice(0,-1)}${_}>`;s.token[i]=b(s.begin[i],"singleton")&&t(s.token[i][s.token[i].length-2],47)?`${s.token[i].slice(0,-2)}${_}/>`:W}}function oe(){let _=s.begin[i],W=i;do{if(W-=1,!Y(W,"</li>")||!Y(W-1,"</a>")||s.begin[s.begin[W]]!==_||s.begin[W-1]!==s.begin[W]+1)return;W=s.begin[W]}while(W>_+1);W=i;do{W-=1,b(W+1,"attribute")?k[W]=-10:!1===Y(W,"</li>")&&(k[W]=-20)}while(W>_+1)}function S(){let _=i,W=!1;if(0===s.lines[i+1]&&!1===e.markup.forceIndent){do{if(s.lines[_]>0){W=!0;break}_-=1}while(_>p);_=i}else W=!0;if(!0===W){b(s.begin[_]-1,"liquid")&&(k[s.begin[_]-1]=j);let te=b(x,"end")||b(x,"liquid_end")?j+1:j;do{k.push(te),_-=1}while(_>p);te===j+1&&(k[i]=j),(b(_,"attribute")||b(_,"liquid_attribute")||b(_,"jsx_attribute_start"))&&(console.log(s.token[_],te),k[s.begin[_]]=te,k[_]=te)}else{do{k.push(-20),_-=1}while(_>p);k[_]=-20}p=-1}function g(){let _=j;if(!0!==e.markup.forceIndent&&!0!==e.markup.forceAttribute){if(x<n&&(u(x,"end")>-1||u(x,"start")>-1)&&s.lines[x]>0?(k.push(j),_+=1,i>0&&b(i,"singleton")&&u(i-1,"attribute")>-1&&b(s.begin[i-1],"singleton")&&(k[i-1]=s.begin[i]<0||b(s.begin[i-1],"singleton")&&s.begin[s.ender[i]-1]!==i?j:j+1)):i>0&&b(i,"singleton")&&u(i-1,"attribute")>-1?(k[i-1]=j,l=s.token[i].length,k.push(-10)):0===s.lines[x]?k.push(-20):(0===e.wrap||i<n-2&&void 0!==s.token[i]&&void 0!==s.token[i+1]&&void 0!==s.token[i+2]&&s.token[i].length+s.token[i+1].length+s.token[i+2].length+1>e.wrap&&u(i+2,"attribute")>-1||void 0!==s.token[i]&&void 0!==s.token[i+1]&&s.token[i].length+s.token[i+1].length>e.wrap)&&(b(i+1,"singleton")||b(i+1,"liquid"))?k.push(j):(l+=1,k.push(-10)),i>0&&u(i-1,"attribute")>-1&&s.lines[i]<1&&(k[i-1]=-20),l>e.wrap){let W=i,te=Math.max(s.begin[i],0);if(b(i,"content")&&!1===e.markup.preserveText){let H=0,K=s.token[i].replace(/\s+/g,se).split(se);do{if(W-=1,!(k[W]<0))break;H+=s.token[W].length,-10===k[W]&&(H+=1)}while(W>0);W=0,te=K.length;do{K[W].length+H>e.wrap?(K[W]=r.crlf+K[W],H=K[W].length):(K[W]=` ${K[W]}`,H+=K[W].length),W+=1}while(W<te);t(K[0],32)?s.token[i]=K.join(d).slice(1):(k[i-1]=_,s.token[i]=K.join(d).replace(r.crlf,d)),s.token[i].indexOf(r.crlf)>0&&(l=s.token[i].length-s.token[i].lastIndexOf(r.crlf))}else{do{if(W-=1,k[W]>-1)return l=s.token[i].length,void(s.lines[i+1]>0&&(l+=1));if(u(W,"start")>-1)return void(l=0);if(s.lines[W+1]>0&&(!1===b(W,"attribute")||b(W,"attribute")&&b(W+1,"attribute"))&&(!1===b(W,"singleton")||b(W,"attribute")&&b(W+1,"attribute"))){l=s.token[i].length,s.lines[i+1]>0&&(l+=1);break}}while(W>te);k[W]=_}}}else k.push(j)}function A(){let _=i;"script_start"===s.types[_-1]&&t(s.token[_-1],123)&&(k[_-1]=-20);do{if("markup"===s.lexer[i+1]&&s.begin[i+1]<_&&!1===b(i+1,"start")&&!1===b(i+1,"singleton"))break;k.push(0),i+=1}while(i<n);h[_]=i,k.push("script_end"===s.types[i+1]&&"}"===s.token[i+1]?-20:j-1),x=E(),"markup"===s.lexer[x]&&s.stack[i].indexOf("attribute")<0&&("end"===s.types[x]||"liquid_end"===s.types[x])&&(j-=1)}function z(_){let W=s.token[_].replace(/\s+/g,se).split(se),te=W.length,H=1,K=W[0].length;do{K+W[H].length>e.wrap?(K=W[H].length,W[H]=r.crlf+W[H]):(W[H]=` ${W[H]}`,K+=W[H].length),H+=1}while(H<te);s.token[_]=W.join(d)}function V(){let _=i-1,W=i,te=!1,H=!1,K=u(_+1,"end"),fe=s.token[_].length+1,D=0,le=(()=>{if(u(i,"start")>0){let M=i;do{if(b(M,"end")&&s.begin[M]===i&&M<n-1&&u(M+1,"attribute")>-1){te=!0;break}M+=1}while(M<n)}else i<n-1&&u(i+1,"attribute")>-1&&(te=!0);return b(x,"end")||b(x,"liquid_end")?b(_,"singleton")?j+2:j+1:b(_,"singleton")?j+1:j})();if(!1===te&&b(i,"comment_attribute"))return k.push(j),void(k[_]="singleton"===s.types[_]?j+1:j);function ve(M){!1===e.markup.forceAttribute?k.push(-10):!0===e.markup.forceAttribute||M>=e.markup.forceAttribute?!0===e.liquid.indentAttribute?(b(i-1,"liquid_attribute_start")&&(k[i-1]=le+D),k.push(le+D)):k.push(le):k.push(-10)}le<1&&(le=1),K=0;do{K+=1}while(u(i+K,"attribute")>-1&&(!1===b(i+K,"end")||!1===b(i+K,"singleton")||!1===b(i+K,"start")||!1===b(i+K,"comment")));("force-preserve"===a||"force-align"===a||"force-indent"===a)&&(et(e.markup.forceAttribute)&&!1===e.markup.forceAttribute||lt(e.markup.forceAttribute)&&K<=e.markup.forceAttribute)&&(K=1/0);do{if(l=l+s.token[i].length+1,s.types[i].indexOf("attribute")>0)b(i,"comment_attribute")?k.push(le):u(i,"start")>0&&u(i,"liquid")<0?(H=!0,i<n-2&&s.types[i+2].indexOf("attribute")>0?(k.push(-20),i+=1,h[i]=i):(k.push(_===i-1&&!1===te?o?-20:le:o?-20:le+1),"markup"!==s.lexer[i+1]&&(i+=1,A()))):!0===e.liquid.indentAttribute?b(i,"liquid_attribute_start")?(k.push(D>0?le+D:le),D+=1):b(i,"liquid_attribute_else")?k[i-1]=le+D-1:b(i,"liquid_attribute_end")?(D-=1,k[i-1]=le+D):ve(K):u(i,"end")>0&&!1===b(i,"liquid_attribute_end")?(-20!==k[i-1]&&(k[i-1]=k[s.begin[i]]-1),k.push("markup"!==s.lexer[i+1]?-20:le)):u(i,"liquid_attribute")>-1?(fe=fe+s.token[i].length+1,!0===e.markup.preserveAttribute?k.push(-10):!0===e.markup.forceAttribute||e.markup.forceAttribute>=1||!0===H||i<n-1&&u(i+1,"attribute")>-1?ve(K):k.push(-10)):k.push(le);else if(b(i,"attribute"))fe=fe+s.token[i].length+1,!0===e.markup.preserveAttribute?k.push(-10):!0===e.markup.forceAttribute||e.markup.forceAttribute>=1||!0===H||i<n-1&&u(i+1,"attribute")>-1?ve(K):k.push(-10);else if(s.begin[i]<_+1)break;i+=1}while(i<n);if(i-=1,u(i,"liquid")<0&&u(i,"end")>-1&&u(i,"attribute")>0&&!1===b(_,"singleton")&&k[i-1]>0&&!0===te&&(k[i-1]=k[i-1]-1),-20!==k[i]&&(!0===o&&u(_,"start")>-1&&b(i+1,"script_start")?k[i]=le:Y(i,"/")&&10!==k[i-1]?k[i-1]=-10:k[i]=k[_]),!0===e.markup.forceAttribute)l=0,k[_]=le,K>=2&&"force"===e.markup.delimiterTerminus&&L.set(_,K);else if(e.markup.forceAttribute>=1)if(K>=e.markup.forceAttribute){k[_]=le;let M=i-1;do{(b(M,"liquid")&&-10===k[M]||b(M,"attribute")&&-10===k[M])&&(k[M]=le),M-=1}while(M>_);("force"===e.markup.delimiterTerminus&&K>=2||"adapt"===e.markup.delimiterTerminus&&K===1/0)&&L.set(_,K)}else k[_]=-10;else k[_]=-10;if(!0===e.markup.preserveAttribute||Y(_,"<%xml%>")||Y(_,"<?xml?>"))l=0;else if(W=i,W>_+1){if(!1===e.markup.selfCloseSpace&&(fe-=1),fe>e.wrap&&e.wrap>0&&!1===e.markup.forceAttribute){k[_]=le,l=s.token[i].length,W-=1;do{s.token[W].length>e.wrap&&ue(s.token[W])&&z(W),(u(W,"liquid")>-1&&-10===k[W]||b(W,"attribute")&&-10===k[W])&&(k[W]=le),W-=1}while(W>_)}}else e.wrap>0&&b(i,"attribute")&&s.token[i].length>e.wrap&&ue(s.token[i])&&z(i)}function ye(){let _=s.token[i].split(R),W=_.length,te=0,H=R;H+=G(O[i-1],!1)+"  ";do{if(0===te){if(te+1===W-1&&(2===_[te+1].length||3===_[te+1].length)){H.length>1&&(H=H.slice(0,-2)),f.push(_[te],H,_[te+1]);break}f.push(_[te],H)}else te===W-1?f.push(_[te]):(te+1===W-1&&(2===_[te+1].length||3===_[te+1].length)&&(H=H.slice(0,-2)),f.push(_[te],H));te+=1}while(te<W)}return function xe(){i=r.start;let _=e.indentLevel;do{if("markup"===s.lexer[i])(b(i,"start")||b(i,"singleton")||b(i,"xml"))&&i<n-1&&u(i,"attribute")<0&&!1===He(s.types[i+1])&&u(i+1,"attribute")>-1&&I(),!1===He(s.token[i])&&s.token[i].indexOf(r.crlf)>0&&(b(i,"content")&&!1===e.markup.preserveText||b(i,"comment")||b(i,"attribute"))?B():b(i,"comment")&&(t(s.token[i][1],37)&&!1===e.liquid.preserveComment&&!0===e.liquid.commentNewline||!1===t(s.token[i][1],37)&&!1===e.markup.preserveComment&&!0===e.markup.commentNewline)&&(0===e.preserveLine||f.length>0&&f[f.length-1].lastIndexOf(R)+1<2)?f.push(G(O[i]),s.token[i],G(O[i])):u(i,"_preserve")>-1?f.push(s.token[i]):b(i+1,"ignore")&&b(i+2,"ignore")?(f.push(s.token[i],G(O[i]).replace(mn,d),s.token[i+1],at(s.lines[i+2]-1==0?1:s.lines[i+2]-1,R)),i+=1):(_=O[i],"force"===e.markup.delimiterTerminus&&ie(),/\n/.test(s.token[i])&&u(i,"liquid")>-1&&!b(i,"liquid_end")?ye():f.push(s.token[i]),-10===O[i]&&i<n-1?f.push(se):O[i]>-1&&u(i+1,"_preserve")<0&&f.push(G(O[i])));else{r.start=i,r.ender=h[i],_>0&&e.liquid.dedentTagList.includes(s.stack[i])&&(f.splice(f.length-1,1,G(O[i]-1)),_-=1);let W=r.external(_);"jsx"!==e.language||"template_string_end"!==s.types[i-1]&&"jsx_attribute_start"!==s.types[i-1]&&"script_start"!==s.types[i-1]?(f.push(W),(e.markup.forceIndent||O[r.iterator]>-1&&i in h&&h[i]>i)&&(i=r.iterator,f.push(G(O[i])))):f.push(W),i!==r.iterator&&(i=r.iterator)}i+=1}while(i<n);return r.iterator=n-1,(f[0]===r.crlf||t(f[0],32))&&(f[0]=d),!0===e.endNewline?f.join(d).replace(/\s*$/,r.crlf):f.join(d).trimEnd()}()}():3===e?function Nn(){let e=[],{data:a,rules:i,crlf:p}=r,x=r.ender>0?r.ender+1:a.token.length,l=i.preserveLine+1,j=i.indentChar.repeat(i.indentSize),s=i.indentLevel,n=r.start,h=[d,d];function o(k,O){return a.types[k]===O}function L(k){let O=[],c=n===x-1?1:a.lines[n+1]-1>l?l:a.lines[n+1]>1?a.lines[n+1]-1:1,f=0;k<0&&(k=0);do{O.push(p),f+=1}while(f<c);if(k>0){f=0;do{O.push(j),f+=1}while(f<k)}e.push(O.join(d))}do{(o(n+1,"end")||o(n+1,"liquid_end")||o(n+1,"liquid_else"))&&(s-=1),o(n,"liquid")&&a.lines[n]>0?(e.push(a.token[n]),P(a.token[n+1],59)&&!1===je.css.units.has(a.token[n+1])&&L(s)):o(n-1,"selector")&&o(n,"liquid")&&o(n+1,"selector")?(e.push(a.token[n]),Me(a.token[n-1],45)&&(t(a.token[n+1],46)||t(a.token[n+1],35)||t(a.token[n+1],38))&&e.push(se)):o(n,"liquid_else")?(e.push(a.token[n]),s+=1,L(s)):o(n,"start")||o(n,"liquid_start")?(s+=1,e.push(a.token[n]),!1===o(n+1,"end")&&!1===o(n+1,"liquid_end")&&L(s)):t(a.token[n],59)||o(n,"end")||o(n,"liquid_end")||o(n,"comment")?(e.push(a.token[n]),o(n+1,"value")?1===a.lines[n+1]?e.push(se):a.lines[n+1]>1&&L(s):!1===o(n+1,"separator")?!1===o(n+1,"comment")||o(n+1,"comment")&&a.lines[n+1]>1?L(s):e.push(se):o(n,"comment")&&!1===o(n+1,"comment")&&a.lines[n]>1&&L(s)):t(a.token[n],58)?(e.push(a.token[n]),!1===o(n+1,"selector")&&P(a.token[n+1],44)&&e.push(se)):o(n,"selector")||o(n,"at_rule")?(!0===i.style.classPadding&&o(n-1,"end")&&a.lines[n]<3&&L(s),a.token[n].indexOf("and(")>0?(a.token[n]=a.token[n].replace(/and\(/,"and ("),e.push(a.token[n])):a.token[n].indexOf("when(")>0?(h=a.token[n].split("when("),e.push(h[0].replace(/\s+$/,d)),L(s+1),e.push(`when (${h[1]}`)):e.push(a.token[n]),o(n+1,"start")&&e.push(se)):t(a.token[n],44)?(o(n+1,"value")&&L(s),e.push(a.token[n]),o(n+1,"selector")||o(n+1,"property")?L(s):e.push(se)):"map"===a.stack[n]&&t(a.token[n+1],41)&&n-a.begin[n]>5?(e.push(a.token[n]),L(s)):"x;"===a.token[n]?L(s):(o(n,"variable")||o(n,"function"))&&!0===i.style.classPadding&&o(n-1,"end")&&a.lines[n]<3?(e.push(p),e.push(a.token[n])):P(a.token[n],59)&&e.push(a.token[n]),n+=1}while(n<x);return r.iterator=x-1,(e[0]===r.crlf||t(e[0],32))&&(e[0]=d),!0===i.endNewline?e.join(d).replace(/\s*$/,r.crlf):e.join(d).replace(/\s+$/,d)}():2===e?function Tn(){let{data:e,rules:a}=r,i="json"===r.language?a.json:a.script,p=0,x={},l="script",j=r.ender<1||r.ender>e.token.length?e.token.length:r.ender+1,s=(()=>{let n=r.start,h=a.indentLevel,o=!1,L=!1,k=d,O=d,c=e.types[0],f=e.token[0],b=[-1],Y=[],u=r.start>0?Array(r.start).fill(0,0,r.start):[],G=[],B=[[]],q=[],E=[],I=[],ie=[!1],oe=[],S=[];function g(){A(!1,!1);let M=!0===i.commentIndent?h:0;if(!1===o&&/\/\u002a\s*global\s/.test(e.token[n])){let Z=e.token[n].replace(/\/\u002a\s*global\s+/,d).replace(/\s*\u002a\/$/,d).split(","),w=Z.length;do{w-=1,Z[w]=Z[w].replace(/\s+/g,d),Z[w]!==d&&r.stack.push([Z[w],-1])}while(w>0)}if("comment"===e.types[n-1]||"comment"===e.types[n+1])u[n-1]=M;else{if(e.lines[n]<2){let Z=n+1;if("comment"===e.types[Z])do{Z+=1}while(Z<j&&"comment"===e.types[Z]);if(n<j-1&&"block"!==e.stack[Z]&&(t(e.token[Z],123)||"x{"===e.token[Z])){let w=r.stack.length;if(e.begin.splice(n,0,e.begin[Z]),e.ender.splice(n,0,e.ender[Z]),e.lexer.splice(n,0,e.lexer[Z]),e.lines.splice(n,0,e.lines[Z]),e.stack.splice(n,0,e.stack[Z]),e.token.splice(n,0,e.token[Z]),e.types.splice(n,0,e.types[Z]),w>0)do{if(w-=1,r.stack[w][1]===Z)r.stack[w][1]=n;else if(r.stack[w][1]<n)break}while(w>0);Z+=1,e.begin.splice(Z,1),e.ender.splice(Z,1),e.lexer.splice(Z,1),e.lines.splice(Z,1),e.stack.splice(Z,1),e.token.splice(Z,1),e.types.splice(Z,1),w=n+1;do{e.begin[w]=n,e.stack[w]=e.stack[Z],w+=1}while(w<Z);w+=1;do{if(e.begin[w]===e.begin[Z]&&(e.begin[w]=n,"end"===e.types[w]))break;w+=1}while(w<j-1);e.begin[Z]=n,n-=1}else u[n-1]=-10,u.push("paren"===e.stack[n]||"method"===e.stack[n]?h+2:h),!0===i.commentIndent&&u[n]>-1&&e.lines[n]<3&&(e.lines[n]=3);return void("comment"!==e.types[n+1]&&(o=!0))}u[n-1]=t(e.token[n-1],44)?M:t(f,61)&&"comment"!==e.types[n-1]&&!0===/^\/\*{2}\s*@[A-Za-z_]+/.test(O)?-10:t(f,123)&&"comment"!==e.types[n-1]&&e.lines[0]<2?"function"===e.stack[n]||/\n/.test(O)?M:-10:M}"comment"!==e.types[n+1]&&(o=!0),t(e.token[e.begin[n]],40)?u.push(h+1):u.push(h),u[n]>-1&&e.lines[n]<3&&(e.lines[n]="comment"===e.types[n-1]&&O.startsWith("//")?2:3),!0===i.commentNewline&&!1===O.startsWith("//")&&e.lines[n]>=3&&(e.lines[n]=2)}function A(M,Z){let w=n-1,Q=!0===M?0:1,X=void 0===B[B.length-1]?[]:B[B.length-1],ae=!1===Z&&"array"===e.stack[n]&&!0===M&&P(O,91);if(!(!1===E[E.length-1]||"array"===e.stack[n]&&"inline"===i.arrayFormat||"object"===e.stack[n]&&"inline"===i.objectIndent)){E[E.length-1]=!1;do{if("end"===e.types[w]?Q+=1:"start"===e.types[w]&&(Q-=1),"global"===e.stack[w])break;if(0===Q){if("class"===e.stack[n]||"map"===e.stack[n]||!1===ae&&(!1===M&&"("!==e.token[w]&&"x("!==e.token[w]||!0===M&&t(e.token[w],44)))u[w]="liquid_start"===e.types[w+1]?e.lines[w]<1?-20:h-1:X.length>0&&X[X.length-1]>-1?h-1:h;else if("array"===e.stack[n]&&"operator"===e.types[n]&&(t(e.token[w],44)&&(u[w]=h),w===e.begin[n]))break;if(!1===M)break}if(Q<0){u[w]="liquid_start"===e.types[w+1]||"template_string_start"===e.types[w+1]?e.lines[w]<1?-20:h-1:X.length>0&&X[X.length-1]>-1?h-1:h;break}w-=1}while(w>-1)}}function z(){let M=He(B[B.length-1])?[]:B[B.length-1];function Z(){let w=n,Q=!1,X=e.begin[w];do{if(w-=1,"markup"===e.lexer[w]){Q=!0;break}e.begin[w]!==X&&(w=e.begin[w])}while(w>X);if(!0===Q){w=n;do{w-=1,e.begin[w]!==X?w=e.begin[w]:t(e.token[w],44)&&(u[w]=h+1)}while(w>X);u[X]=h+1,u[n-1]=h}else u[n-1]=-20}if(t(O,41)&&t(e.token[n+1],46)&&P(e.token[M[0]],58)&&M[M.length-1]>-1){let w=e.begin[n],Q=!1,X=!1;do{w-=1}while(w>0&&u[w]<-9);Q=u[w]===h,w=n+1;do{if(w+=1,t(e.token[w],123)){X=!0;break}if(e.begin[w]===e.begin[n+1]&&("separator"===e.types[w]||"end"===e.types[w]))break}while(w<j);!1===Q&&!0===X&&B.length>1&&(B[B.length-2].push(e.begin[n]),h+=1)}if("separator"!==c&&ye(),t(e.token[n+1],58)&&("object"===e.stack[n]||"array"===e.stack[n])&&A(!0,!1),t(e.token[e.begin[n]-1],44)&&(t(e.token[n+1],125)||t(e.token[n+1],93))&&("object"===e.stack[n]||"array"===e.stack[n])&&A(!0,!1),"attribute"!==e.stack[n]&&(P(O,41)&&"x)"!==O&&("markup"!==e.lexer[n-1]||"markup"===e.lexer[n-1]&&"return"!==e.token[n-2])&&(h-=1),t(O,125)&&"switch"===e.stack[n]&&!1===i.noCaseIndent&&(h-=1)),t(O,125)||"x}"===O){if("comment"!==e.types[n-1]&&"{"!==f&&"x{"!==f&&"end"!==c&&"string"!==c&&"number"!==c&&"separator"!==c&&"++"!==f&&"--"!==f&&(n<2||";"!==e.token[n-2]||"x;"!==e.token[n-2]||"break"===f||"return"===f)){let w=n-1,Q=!1,X=e.begin[n],ae=Y.length;do{if(e.begin[w]===X){if((t(e.token[w],61)||t(e.token[w],59)||"x;"===e.token[w])&&(Q=!0),t(e.token[w],46)&&u[w-1]>-1){E[E.length-1]=!1,u[X]=h+1,u[n-1]=h;break}if(w>0&&"return"===e.token[w]&&(")"===e.token[w-1]||"x)"===e.token[w-1]||"{"===e.token[w-1]||"x{"===e.token[w-1]||"}"===e.token[w-1]||"x}"===e.token[w-1]||";"===e.token[w-1]||"x;"===e.token[w-1])){h-=1,u[n-1]=h;break}if(t(e.token[w],58)&&0===G.length||t(e.token[w],44)&&!1===Q)break;if(0===w||"{"===e.token[w-1]||"x{"===e.token[w-1]||"for"===e.token[w]||"if"===e.token[w]||"do"===e.token[w]||"function"===e.token[w]||"while"===e.token[w]||"var"===e.token[w]||"let"===e.token[w]||"const"===e.token[w]||"with"===e.token[w]){!1===Y[ae-1]&&ae>1&&(n===j-1||")"!==e.token[n+1]&&"x)"!==e.token[n+1])&&"object"!==e.stack[n]&&(h-=1);break}}else w=e.begin[w];w-=1}while(w>X)}b.pop()}if(!1===i.bracePadding&&"}"!==O&&"markup"!==c&&"liquid"!==c&&(u[n-1]=-20),!0===i.bracePadding&&"start"!==c&&";"!==f&&(u[e.begin[n]]<-9||!0===E[E.length-1]))u[e.begin[n]]=-10,u[n-1]=-10,u.push(-20);else if("attribute"===e.stack[n])u[n-1]=-20,u.push(h);else if("array"===e.stack[n]&&(M.length>0||!0===q[q.length-1]))V(),E[E.length-1]=!1,u[e.begin[n]]=h+1,u[n-1]=h,u.push(-20);else if(M.length>0&&("object"===e.stack[n]||0===e.begin[n]&&t(O,125)))V(),E[E.length-1]=!1,u[e.begin[n]]=h+1,u[n-1]=h,u.push(-20);else if(")"===O||"x)"===O){let w=")"===O&&P(f,40)&&S.length>0?S.pop()+1:0,Q="if"===e.token[e.begin[n]-1]?(()=>{let X=n;do{if(X-=1,")"===e.token[X]&&u[X-1]>-1)return w}while(X>e.begin[n]);return w+5})():w;if(w>0&&("jsx"!==r.language||"jsx"===r.language&&"render"!==e.token[e.begin[n]-1])){let ae=e.begin[n],$=S.length,y=n-2;if(Q>a.wrap){u[e.begin[n]]=h+1,u[n-1]=h;do{e.begin[y]===ae?"&&"===e.token[y]||"||"===e.token[y]?u[y]=h+1:u[y]>-1&&"comment"!==e.types[y]&&"."!==e.token[y+1]&&(u[y]=u[y]+1):u[y]>-1&&"."!==e.token[y+1]&&(u[y]=u[y]+1),y-=1}while(y>ae)}else $>0&&(S[$-1]=S[$-1]+w)}else if(")"===O&&n>e.begin[n]+2&&e.lexer[e.begin[n]+1]===l&&"function"!==e.token[e.begin[n]+1]){let X=e.begin[n]<0?0:e.begin[n],ae=a.wrap,$=M.length,y=0,m=0,C=0,J=0,he=0,v=!1,N=!1,T=h+1,F=!1,U=!1,de=!1;if(u[X]<-9){m=X;do{m+=1}while(m<n&&u[m]<-9);J=m;do{y+=e.token[m].length,-10===u[m]&&(y+=1),"("===e.token[m]&&C>0&&C<ae-1&&J===n&&(C=-1),")"===e.token[m]?he-=1:"("===e.token[m]&&(he+=1),m===X&&he>0&&(C=y),m-=1}while(m>X&&u[m]<-9);if("."===e.token[m+1]&&(T=u[m]+1),y>ae-1&&ae>0&&P(f,40)&&-1!==C&&!1===E[E.length-2]&&("if"===e.token[X-1]&&!0===Y[Y.length-1]||"if"!==e.token[X-1])&&(u[X]=T,"for"===e.token[X-1])){m=X;do{m+=1,t(e.token[m],59)&&e.begin[m]===X&&(u[m]=T)}while(m<n)}}m=n,y=0;do{m-=1,"function"===e.stack[m]?m=e.begin[m]:e.begin[m]===X?(t(e.token[m],63)?de=!0:t(e.token[m],44)&&!1===v?(v=!0,y>=ae&&ae>0&&(F=!0)):"markup"===e.types[m]&&!1===U&&(U=!0),u[m]>-9&&P(e.token[m],44)&&"markup"!==e.types[m]?y=0:(-10===u[m]&&(y+=1),y+=e.token[m].length,y>=ae&&ae>0&&(!0===v||!0===U)&&(F=!0))):u[m]>-9?y=0:(y+=e.token[m].length,y>=ae&&ae>0&&(!0===v||!0===U)&&(F=!0))}while(m>X&&!1===F);if(!1===v&&t(e.token[e.begin[n]+1],96))u[e.begin[n]]=-20,u[n-1]=-20;else if((!0===v||!0===U)&&y>=ae&&ae>0||u[X]>-9){if(!0===de){if(T=u[X],t(e.token[X-1],91)){m=n;do{if(m+=1,"end"===e.types[m]||t(e.token[m],44)||t(e.token[m],59))break}while(m<j);t(e.token[m],93)&&(T-=1,N=!0)}}else $>0&&M[$-1]>m&&(T-=$);E[E.length-1]=!1,m=n;do{if(m-=1,e.begin[m]===X)if(e.token[m].indexOf("=")>-1&&"operator"===e.types[m]&&e.token[m].indexOf("!")<0&&e.token[m].indexOf("==")<0&&"<="!==e.token[m]&&e.token[m].indexOf(">")<0){y=m;do{if(y-=1,e.begin[y]===X&&(";"===e.token[y]||","===e.token[y]||y===X))break}while(y>X)}else t(e.token[m],44)?u[m]=T:u[m]>-9&&!1===N&&("for"!==e.token[X-1]||"?"===e.token[m+1]||":"===e.token[m+1])&&("("!==e.token[e.begin[n]]||"+"!==e.token[m])&&(u[m]=u[m]+1);else u[m]>-9&&!1===N&&(u[m]=u[m]+1)}while(m>X);u[X]=T,u[n-1]=T-1}else u[n-1]=-20;"+"===e.token[e.begin[n]-1]&&u[e.begin[n]]>-9&&(u[e.begin[n]-1]=-10)}else"jsx"===r.language||"tsx"===r.language?Z():u[n-1]=-20;u.push(-20)}else if(!0===E[E.length-1])t(O,93)&&e.begin[n]-1>0&&"["===e.token[e.begin[e.begin[n]-1]]&&(E[E.length-2]=!1),e.begin[n]<u.length&&(u[e.begin[n]]=-20),"jsx"===r.language||"tsx"===r.language?Z():u[n-1]=t(O,93)&&u[e.begin[n]]>-1?u[e.begin[n]]-1:-20,u.push(-20);else if("comment"===e.types[n-1]&&"//"===e.token[n-1].substring(0,2))"x}"===e.token[n-2]&&(u[n-3]=h+1),u[n-1]=h,u.push(-20);else if(c.indexOf("liquid")<0&&"comment"!==e.types[n-1]&&(t(f,123)&&t(O,125)||t(f,91)&&t(O,93)))u[n-1]=-20,u.push(-20);else if(t(O,93)){if(!0===Y[Y.length-1]&&!1===E[E.length-1]&&"inline"!==i.arrayFormat||t(f,93)&&u[n-2]===h+1?(u[n-1]=h,u[e.begin[n]]=h+1):-10===u[n-1]&&(u[n-1]=-20),"function"===e.token[e.begin[n]+1])u[n-1]=h;else if(!1===Y[Y.length-1]){(t(f,125)||"x}"===f)&&(u[n-1]=h);let w=n-1,Q=1;do{if(t(e.token[w],93)&&(Q+=1),t(e.token[w],91)&&(Q-=1,0===Q)){if(w>0&&(t(e.token[w+1],123)||t(e.token[w+1],91)||"x{"===e.token[w+1])){u[w]=h+1;break}if(P(e.token[w+1],91)||!1===L){u[w]=-20;break}break}1===Q&&"+"===e.token[w]&&u[w]>1&&(u[w]=u[w]-1),w-=1}while(w>-1)}else("jsx"===r.language||"tsx"===r.language)&&Z();if("inline"===i.arrayFormat){let w=n,Q=e.begin[n];do{if(w-=1,"end"===e.types[w])break}while(w>Q);w>Q?(u[e.begin[n]]=h+1,u[n-1]=h):(u[e.begin[n]]=-20,u[n-1]=-20)}else u[e.begin[n]]>-1&&(u[n-1]=u[e.begin[n]]-1);u.push(-20)}else t(O,125)||"x}"===O||!0===Y[Y.length-1]?(t(O,125)&&"x}"===f&&"else"===e.token[n+1]?(u[n-2]=h+2,u.push(-20)):u.push(h),u[n-1]=h):u.push(-20);"comment"===e.types[n-1]&&(u[n-1]=h),V(),L=Y[Y.length-1],Y.pop(),B.pop(),q.pop(),I.pop(),oe.pop(),E.pop(),ie.pop()}function V(){let M=0,Z=B[B.length-1];if(void 0!==Z){if(M=Z.length-1,M<1&&Z[M]<0&&(t(O,59)||"x;"===O||t(O,41)||"x)"===O||t(O,125)||"x}"===O))return void Z.pop();if(!(M<0||Z[M]<0)){if(t(O,58)){if(P(e.token[Z[M]],63))do{Z.pop(),M-=1,h-=1}while(M>-1&&Z[M]>-1&&P(e.token[Z[M]],63));Z[M]=n,u[n-1]=h}else do{Z.pop(),M-=1,h-=1}while(M>-1&&Z[M]>-1);("array"===e.stack[n]||t(O,44))&&Z.length<1&&Z.push(-1)}}}function ne(){let M=n;do{if(e.lexer[n+1]===l&&e.begin[n+1]<M||"return"===e.token[M-1]&&"end"===e.types[n]&&e.begin[n]===M)break;u.push(0),n+=1}while(n<j);x[M]=n,u.push(h-1)}function ye(){let M=n-1,Z=e.begin[n];if(!(h<1))do{if(Z!==e.begin[M])M=e.begin[M];else if("separator"===e.types[M]||"operator"===e.types[M]){"."===e.token[M]&&u[M-1]>0&&(h-="if"===e.token[Z-1]?2:1);break}M-=1}while(M>0&&M>Z)}function _(){let M=He(B[B.length-1])?[]:B[B.length-1];function Z(){let w=e.token[n+1],Q=0,X=0,ae=n,$="+"===O?h+2:h,y=0;if(a.wrap<1)u.push(-10);else{do{if(ae-=1,t(e.token[e.begin[n]],40)&&(ae===e.begin[n]&&(y=Q),t(e.token[ae],44)&&e.begin[ae]===e.begin[n]&&!0===Y[Y.length-1])||Q>a.wrap-1||u[ae]>-9||"operator"===e.types[ae]&&"="!==e.token[ae]&&"+"!==e.token[ae]&&e.begin[ae]===e.begin[n]||(Q+=e.token[ae].length,ae===e.begin[n]&&"["===e.token[ae]&&Q<a.wrap-1)||"."===e.token[ae]&&u[ae]>-9)break;-10===u[ae]&&(Q+=1)}while(ae>0);if(y>0&&(y+=w.length),Q+=w.length,X=ae,Q>a.wrap-1&&u[ae]<-9)do{X-=1}while(X>0&&u[X]<-9);if("."===e.token[X+1]&&e.begin[n]<=e.begin[X]?$+=1:"operator"===e.types[X]&&($=u[X]),X=w.length,!(Q+X<a.wrap))return!t(e.token[e.begin[n]],40)||":"!==e.token[M[0]]&&"?"!==e.token[M[0]]?"method"===e.stack[n]?(u[e.begin[n]]=h,$=!0===Y[Y.length-1]?h+3:h+1):("object"===e.stack[n]||"array"===e.stack[n])&&A(!0,!1):$=h+3,("var"===e.token[ae]||"let"===e.token[ae]||"const"===e.token[ae])&&(Q-=a.indentSize*a.indentChar.length*2),ae=y>0?a.wrap-y:a.wrap-Q,ae>0&&ae<5?(u.push($),void(('"'===e.token[n].charAt(0)||"'"===e.token[n].charAt(0))&&(n+=1,u.push(-10)))):"("!==e.token[e.begin[n]]||y>a.wrap-1||0===y?(y>0&&(Q=y),Q-w.length<a.wrap-1&&('"'===w.charAt(0)||"'"===w.charAt(0))?(n+=1,Q+=3,Q-w.length>a.wrap-4?void u.push($):void u.push(-10)):void u.push($)):void u.push(-10);u.push(-10)}}if(ye(),M.length>0&&M[M.length-1]>-1&&"array"===e.stack[n]&&(q[q.length-1]=!0),":"!==O&&("("!==e.token[e.begin[n]]&&"x("!==e.token[e.begin[n]]&&E.length>0&&A(!0,!1),"?"!==O&&"."===e.token[M[M.length-1]])){let w=0,Q=n,X=e.begin[Q];do{if(e.begin[Q]===X){if("{"===e.token[Q+1]||"["===e.token[Q+1]||"function"===e.token[Q])break;if(t(e.token[Q],44)||t(e.token[Q],59)||"end"===e.types[Q]||t(e.token[Q],58)){M.pop(),h-=1;break}if("?"===e.token[Q]||t(e.token[Q],58)){"."===e.token[M[M.length-1]]&&w<2&&(M[M.length-1]=X+1);break}"."===e.token[Q]&&(w+=1)}Q+=1}while(Q<j)}if("!"===O||"..."===O)return(t(f,125)||"x}"===f)&&(u[n-1]=h),void u.push(-20);if(";"===f||"x;"===f)return"for"!==e.token[e.begin[n]-1]&&(u[n-1]=h),void u.push(-20);if("*"===O)return u[n-1]="function"===f||"yield"===f?-20:-10,void u.push(-10);if("?"!==O){if(":"===O){if("map"===e.stack[n]||"type"===e.types[n+1]||"type_start"===e.types[n+1])return u[n-1]=-20,void u.push(-10);if(G.length>0&&e.begin[G[G.length-1]]===e.begin[n]){let w=n,Q=e.begin[n];do{if(w-=1,e.begin[w]===Q){if(t(e.token[w],44)||t(e.token[w],59)){u[n-1]=-20;break}if("?"===e.token[w])return G.pop(),V(),!0===i.ternaryLine&&(u[n-1]=-10),void u.push(-10)}else"end"===e.types[w]&&(w=e.begin[w])}while(w>Q)}return"where"===e.token[n-2]&&e.stack[n-2]===e.stack[n]?(u[n-1]=-10,void u.push(-10)):"reference"===c&&"("!==e.token[e.begin[n]]&&"x("!==e.token[e.begin[n]]?(u[n-1]=-20,void u.push(-10)):!t(f,41)&&"x)"!==f||"function"!==e.token[e.begin[n-1]-2]?"attribute"===e.stack[n]||"("!==e.token[e.begin[n]]&&"x("!==e.token[e.begin[n]]&&("reference"===c||t(f,41)||t(f,93)||"?"===f)&&("map"===e.stack[n]||"class"===e.stack[n]||"reference"===e.types[n+1])&&(0===G.length||G[G.length-1]<e.begin[n])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[n])>-1||"word"===e.types[n-2]&&"switch"!==e.stack[n])?(u[n-1]=-20,void u.push(-10)):"switch"===e.stack[n]&&(G.length<1||G[G.length-1]<e.begin[n])?(u[n-1]=-20,void u.push(!0===i.caseSpace?-10:h)):(u[n-1]="object"===e.stack[n]?-20:G.length>0?h:-10,void u.push(-10)):(u[n-1]=-20,void u.push(-10))}if("++"!==O&&"--"!==O){if("+"===O){if(u[n-1]="start"===c?-20:-10,a.wrap<1||"x("===e.token[e.begin[n]])return void u.push(-10);let w=e.token[n+1];if(void 0===w)return void u.push(-10);if("operator"===e.types[n-1]||"start"===e.types[n-1]){if("reference"===e.types[n+1]||"("===w||"["===w)return void u.push(-20);if(Number(w.slice(1,-1))>-1&&(!0===/\d/.test(w.charAt(1))||"."===w.charAt(1)||"-"===w.charAt(1)||"+"===w.charAt(1)))return void u.push(-20)}return Z()}if("comment"!==e.types[n-1]&&(t(f,40)?u[n-1]=-20:"*"===O&&"object"===e.stack[n]&&"reference"===e.types[n+1]&&(t(f,123)||t(f,44))?u[n-1]=h:("?"!==O||0===G.length)&&(u[n-1]=-10)),O.indexOf("=")>-1&&"=="!==O&&"==="!==O&&"!="!==O&&"!=="!==O&&">="!==O&&"<="!==O&&"=>"!==O&&"method"!==e.stack[n]&&"object"!==e.stack[n]){let w=n+1,Q=0,X=!1,ae=d;if((t(e.token[e.begin[n]],40)||"x("===e.token[e.begin[n]])&&"function"!==e.token[n+1])return;do{if("start"===e.types[w]){if(!0===X&&"["!==e.token[w]){!0===ie[ie.length-1]&&(ie[ie.length-1]=!1);break}Q+=1}if("end"===e.types[w]&&(Q-=1),Q<0){!0===ie[ie.length-1]&&(ie[ie.length-1]=!1);break}if(0===Q){if(ae=e.token[w],!0===X){if("operator"===e.types[w]||t(e.token[w],59)||"x;"===e.token[w]||"?"===e.token[w]||"var"===e.token[w]||"let"===e.token[w]||"const"===e.token[w]){void 0!==ae&&("?"===ae||ae.indexOf("=")>-1&&"=="!==ae&&"==="!==ae&&"!="!==ae&&"!=="!==ae&&">="!==ae&&"<="!==ae)&&!1===ie[ie.length-1]&&(ie[ie.length-1]=!0),(";"===ae||"x;"===ae||"var"===ae||"let"===ae||"const"===ae)&&!0===ie[ie.length-1]&&(ie[ie.length-1]=!1);break}!0===ie[ie.length-1]&&("return"===ae||"break"===ae||"continue"===ae||"throw"===ae)&&(ie[ie.length-1]=!1)}(";"===ae||"x;"===ae||","===ae)&&(X=!0)}w+=1}while(w<j);u.push(-10)}else if("-"===O&&"return"===f||t(f,61))u.push(-20);else{if("operator"!==c||"reference"!==e.types[n+1]||"--"===f||"++"===f||"&&"===O||"||"===O)return Z();u.push(-20)}}else"number"===c||"reference"===c?(u[n-1]=-20,u.push(-10)):u.push(n<j-1&&("number"===e.types[n+1]||"reference"===e.types[n+1])?-20:-10)}else{if(0===e.lines[n]&&"word"===e.types[n-2]&&"return"!==e.token[n-2]&&"in"!==e.token[n-2]&&"instanceof"!==e.token[n-2]&&"typeof"!==e.token[n-2]&&("reference"===c||"word"===c)&&("word"===e.types[n+1]||"reference"===e.types[n+1]||(t(e.token[n+1],40)||"x("===e.token[n+1])&&"new"===e.token[n-2]))return u[n-1]=-20,"word"===e.types[n+1]||"reference"===e.types[n+1]?void u.push(-10):void u.push(-20);if(":"===e.token[n+1])return u[n-1]=-20,void u.push(-20);if(G.push(n),!0===i.ternaryLine)u[n-1]=-10;else{let w=n-1;do{w-=1}while(w>-1&&u[w]<-9);if(M.push(n),h+=1,u[w]===h&&":"!==e.token[w+1]&&(h+=1,M.push(n)),u[n-1]=h,t(e.token[e.begin[n]],40)&&(M.length<2||M[0]===M[1])){E[E.length-1]=!1,u[e.begin[n]]=n-2===e.begin[n]?h-1:h,w=n-2;do{if("end"===e.types[w]&&u[w-1]>-1)break;u[w]>-1&&(u[w]=u[w]+1),w-=1}while(w>e.begin[n])}}u.push(-10)}}function W(){let M=()=>{let Z=e.begin[n];if(Z<0)r.stack.push([e.token[n],-1]);else{if("function"!==e.stack[Z+1])do{Z=e.begin[Z]}while(Z>-1&&"function"!==e.stack[Z+1]);r.stack.push([e.token[n],Z])}};if("comment"===e.types[n-1]?u[n-1]=h:"end"===c&&")"!==f&&")"!==e.token[e.begin[n-1]-1]?u[n-1]=-10:"separator"!==c&&"start"!==c&&"end"!==c&&c.indexOf("template_string")<0&&(u[n-1]="word"===c||"operator"===c||"property"===c||"type"===c||"reference"===c?-10:-20),"var"===f&&e.lexer[n-1]===l)M();else if("function"===f)r.stack.push([e.token[n],n]);else if("let"===f||"const"===f)r.stack.push([e.token[n],n]);else if("arguments"===e.stack[n])r.stack.push([e.token[n],n]);else if(t(f,44)){let Z=n;do{Z-=1}while(Z>e.begin[n]&&"var"!==e.token[Z]&&"let"!==e.token[Z]&&"const"!==e.token[Z]);"var"===e.token[Z]?M():("let"===e.token[Z]||"const"===e.token[Z])&&r.stack.push([e.token[n],n])}u.push(-10)}function te(){let M=He(B[B.length-1])?[]:B[B.length-1],Z=()=>{if(i.methodChain>0){let w=n,Q=e.begin[n],X=[n],ae="if"===e.token[Q-1];do{if(w-=1,"end"===e.types[w]&&(w=e.begin[w]),e.begin[w]===Q){if("string"===e.types[w]&&e.token[w].indexOf("${")===e.token[w].length-2)break;if("."===e.token[w]){if(u[w-1]>0)return void(u[n-1]=!0===ae?h+1:h);X.push(w)}else if(";"===e.token[w]||","===e.token[w]||"operator"===e.types[w]||("word"===e.types[w]||"reference"===e.types[w])&&("word"===e.types[w-1]||"reference"===e.types[w-1]))break}}while(w>Q);if(X.length<i.methodChain)return void(u[n-1]=-20);w=0,Q=X.length;do{u[X[w]-1]=!0===ae?h+1:h,w+=1}while(w<Q);w=X[X.length-1]-1;do{u[w]>-1&&(u[w]=u[w]+1),w+=1}while(w<n);h=!0===ae?h+2:h+1}u[n-1]=h};if("::"===O)return u[n-1]=-20,void u.push(-20);if("."===O)return"("!==e.token[e.begin[n]]&&"x("!==e.token[e.begin[n]]&&M.length>0&&A("object"===e.stack[n]||"array"===e.stack[n],!1),0===i.methodChain?u[n-1]=-20:i.methodChain<0?e.lines[n]>0?Z():u[n-1]=-20:Z(),void u.push(-20);if(","===O){if(ye(),!1===Y[Y.length-1]&&("object"===e.stack[n]||"array"===e.stack[n]||"paren"===e.stack[n]||"expression"===e.stack[n]||"method"===e.stack[n])&&(Y[Y.length-1]=!0,t(e.token[e.begin[n]],40))){let w=n;do{w-=1,e.begin[w]===e.begin[n]&&"+"===e.token[w]&&u[w]>-9&&(u[w]=u[w]+2)}while(w>e.begin[n])}if("array"===e.stack[n]&&"indent"===i.arrayFormat)return u[n-1]=-20,void u.push(h);if("array"===e.stack[n]&&"inline"===i.arrayFormat)return u[n-1]=-20,void u.push(-10);if("object"===e.stack[n]&&"indent"===i.objectIndent)return u[n-1]=-20,void u.push(h);if("object"===e.stack[n]&&"inline"===i.objectIndent)return u[n-1]=-20,void u.push(-10);if(M.length>0)return M[M.length-1]>-1&&V(),u[n-1]=-20,void u.push(h);if(":"===e.token[n-2]&&"where"===e.token[n-4])return u[n-1]=-20,void u.push(-10);if(u[n-1]=-20,"end"!==e.types[n+1]&&(I[I.length-1]=I[I.length-1]+1),(t(e.token[e.begin[n]],40)||"x("===e.token[e.begin[n]])&&"jsx"!==r.language&&"global"!==e.stack[n]&&("string"!==e.types[n-1]&&"number"!==e.types[n-1]||"+"!==e.token[n-2]||"string"===e.types[n-1]&&"number"!==e.types[n-1]&&t(e.token[n-2],43)&&"string"!==e.types[n-3]&&"number"!==e.types[n-3]))return void u.push(-10);if("reference"===c&&"word"===e.types[n-2]&&"var-let-const-from".indexOf(e.token[n-2])<0&&("end"===e.types[n-3]||";"===e.token[n-3]))return oe[oe.length-1]=!0,void u.push(-10);if(!0===oe[oe.length-1]||"notation"===e.stack[n])return void u.push(-10);if(I[I.length-1]>3&&("array"===e.stack[n]||"object"===e.stack[n])){if(!0===E[E.length-1]&&A(!0,!0),u[n-1]=-20,!0===q[q.length-1])return void u.push(h);let w=e.begin[n],Q=n;do{"end"===e.types[Q]?Q=e.begin[Q]:t(e.token[Q],44)&&"comment"!==e.types[Q+1]&&(u[Q]=h),Q-=1}while(Q>w);return u[w]=h,void(q[q.length-1]=!0)}if("object"===e.stack[n]&&!0===E[E.length-1]&&"word"!==e.types[e.begin[n]-1]&&"reference"!==e.types[e.begin[n]-1]&&"("!==e.token[e.begin[n]-1]&&"x("!==e.token[e.begin[n]-1]){let w=e.begin[n],Q=n-1;do{if(e.begin[Q]===w){if(t(e.token[Q],44))break;if(t(e.token[Q],58)){A(!0,!1);break}}Q-=1}while(Q>w)}if(!1===E[E.length-1]||t(e.token[n-2],43)&&("string"===c||"number"===c)&&u[n-2]>0&&(t(f,34)||t(f,39))){if("method"===e.stack[n]){if(t(e.token[n-2],43)&&(t(f,34)||t(f,39))&&('"'===e.token[n-3].charAt(0)||"'"===e.token[n-3].charAt(0)))return void u.push(h+2);if("+"!==e.token[n-2])return void u.push(-10)}return void u.push(h)}return!0===E[E.length-1]&&"object"!==e.stack[n]||I[I.length-1]<4&&("array"===e.stack[n]||"object"===e.stack[n])?void u.push(-10):void u.push(h)}if(t(O,59)||"x;"===O){if(ye(),void 0!==e.token[n+1]&&e.types[n+1].indexOf("attribute")>0&&e.types[n+1].indexOf("end")>0)return u[n-1]=-20,void u.push(h-1);if(b[b.length-1]>-1&&"expression"!==e.stack[b[b.length-1]]){let w=n;do{if(w-=1,t(e.token[w],59))break;if(t(e.token[w],44)){h-=1;break}"end"===e.types[w]&&(w=e.begin[w])}while(w>0&&w>e.begin[n])}return b[b.length-1]=-1,V(),"for"!==e.token[e.begin[n]-1]&&A(!1,!1),oe[oe.length-1]=!1,u[n-1]=-20,e.begin[n]>0&&"for"===e.token[e.begin[n]-1]&&"for"!==e.stack[n]?void u.push(-10):void u.push(h)}u.push(-20)}function H(){let M=e.stack[n+1],Z=0===n?e.stack[n]:e.stack[n-1];if((t(f,41)||P(f,93)&&("object"===Z||"array"===Z))&&("method"!==M||"method"===M&&P(e.token[n+1],41)&&P(e.token[n+2],41))&&(t(f,41)&&("function"!==M||t(e.token[e.begin[e.begin[n-1]-1]],40)||"x("===e.token[e.begin[e.begin[n-1]-1]])?A(!1,!1):"end"!==e.types[n+1]&&"end"!==e.types[n+2]&&A(!0,!1)),Y.push(!1),B.push([]),ie.push(!1),q.push(!1),oe.push(!1),I.push(0),!0===i.neverFlatten||"attribute"===M||"generic"===c||"indent"===i.arrayFormat&&"array"===M||"class"===M&&P(f,40)&&"x("!==f||t(O,91)&&"function"===e.token[n+1]?E.push(!1):"expression"===M||"method"===M||("object"===M||"class"===M)&&(t(f,40)||"x("===f||"word"===c||"reference"===c)||"array"===M||t(O,40)||"x("===O||t(O,123)&&"object"===M&&"operator"!==c&&"start"!==c&&"string"!==c&&"number"!==c&&"object"!==Z&&"array"!==Z&&n>0?E.push(!0):E.push(!1),P(O,40)&&"x("!==O&&"attribute"!==e.stack[n+1]&&(h+=1),t(O,123)||"x{"===O){if(b.push(-1),"comment"!==e.types[n-1]&&("markup"===c?u[n-1]=h:!0===i.braceAllman&&"operator"!==c&&"return"!==f?u[n-1]=h-1:"block"!==e.stack[n+1]&&("function"===M||t(f,41)||"x)"===f||t(f,44)||t(f,125)||"markup"===c)?u[n-1]=-10:(t(f,123)||"x{"===f||t(f,91)||t(f,125)||"x}"===f)&&(u[n-1]=h-1)),"object"===M){if("indent"===i.objectIndent)return E[E.length-1]=!1,void u.push(h);if("inline"===i.objectIndent)return E[E.length-1]=!0,void u.push(-20)}return"switch"===M?!0===i.noCaseIndent?void u.push(h-1):(h+=1,void u.push(h)):!0===E[E.length-1]&&"word"!==c&&"reference"!==c?void u.push(-20):void u.push(h)}if(t(O,40)||"x("===O)return a.wrap>0&&t(O,40)&&")"!==e.token[n+1]&&S.push(1),t(f,45)&&(t(e.token[n-2],40)||"x("===e.token[n-2])&&(u[n-2]=-20),"end"===c&&"if"!==Z&&"for"!==Z&&"catch"!==Z&&"else"!==Z&&"do"!==Z&&"try"!==Z&&"finally"!==Z&&"catch"!==Z&&(u[n-1]="comment"===e.types[n-1]?h:-20),"async"===f?u[n-1]=-10:("method"===M||"function"===e.token[n-2]&&"reference"===c)&&("import"===f||"in"===f||!0===i.functionNameSpace?u[n-1]=-10:t(f,125)&&"function"===e.stack[n-1]||"word"===c||"reference"===c||"property"===c?u[n-1]=-20:"method"!==Z&&"method"!==M&&(u[n-1]=h)),t(f,43)&&(t(e.token[n-2],34)||t(e.token[n-2],39))?void u.push(h):(t(f,125)||"x}"===f||(t(f,45)&&(n<2||P(e.token[n-2],41)&&P(e.token[n-2],93)&&"x)"!==e.token[n-2]&&"reference"!==e.types[n-2]&&"string"!==e.types[n-2]&&"number"!==e.types[n-2])||!1===i.functionSpace&&"function"===f)&&(u[n-1]=-20),void u.push(-20));if(t(O,91)){if(t(f,91)&&(Y[Y.length-2]=!0),"return"===f||"var"===f||"let"===f||"const"===f?u[n-1]=-10:"comment"===e.types[n-1]||"attribute"===e.stack[n-1]||"end"!==c&&"word"!==c&&"reference"!==c?(t(f,91)||t(f,123)||"x{"===f)&&(u[n-1]=h-1):u[n-1]=-20,"attribute"===e.stack[n])return void u.push(-20);if("indent"===i.arrayFormat)return E[E.length-1]=!1,void u.push(h);if("inline"===i.arrayFormat)return E[E.length-1]=!0,void u.push(-20);if("method"===M||!0===E[E.length-1])return void u.push(-20);let w=n+1;do{if(t(e.token[w],93))return void u.push(-20);if(t(e.token[w],44))return void u.push(h);w+=1}while(w<j);u.push(-20)}}function ve(){if((t(f,41)||"x)"===f)&&"class"===e.stack[n]&&("static"===e.token[e.begin[n-1]-1]||"final"===e.token[e.begin[n-1]-1]||"void"===e.token[e.begin[n-1]-1])&&(u[n-1]=-10,u[e.begin[n-1]-1]=-10),t(f,93)&&(u[n-1]=-10),"else"===O&&t(f,125)&&("x}"===e.token[n-2]&&(u[n-3]=u[n-3]-1),(!0===i.braceAllman||!0===i.elseNewline)&&(u[n-1]=h)),"new"===O&&je.js.keywords.has(e.token[n+1])&&(p+=1),"from"===O&&"end"===c&&n>0&&("import"===e.token[e.begin[n-1]-1]||t(e.token[e.begin[n-1]-1],44))&&(u[n-1]=-10),"function"===O)return!1===i.functionSpace&&n<j-1&&(t(e.token[n+1],40)||"x("===e.token[n+1])?void u.push(-20):void u.push(-10);if(t(f,45)&&n>1)"operator"===e.types[n-2]||t(e.token[n-2],44)?u[n-1]=-20:"start"===e.types[n-2]&&(u[n-2]=-20,u[n-1]=-20);else if("while"!==O||!t(f,125)&&"x}"!==f){if("in"===O||(t(f,125)||"x}"===f)&&("catch"===O||"else"===O&&!1===i.elseNewline&&!1===i.braceAllman))u[n-1]=-10;else if("var"===O||"let"===O||"const"===O){if(b[b.length-1]=n,"end"===c&&(u[n-1]=h),"for"!==e.token[e.begin[n]-1]){let M=n+1,Z=0;do{if("end"===e.types[M]&&(Z-=1),"start"===e.types[M]&&(Z+=1),Z<0||0===Z&&(t(e.token[M],59)||t(e.token[M],44)))break;M+=1}while(M<j);t(e.token[M],44)&&(h+=1)}return void u.push(-10)}}else{let M=n-1,Z=0;do{if((t(e.token[M],125)||"x}"===e.token[M])&&(Z+=1),(t(e.token[M],123)||"x{"===e.token[M])&&(Z-=1),0===Z){if("do"===e.token[M-1]){u[n-1]=-10;break}u[n-1]=h;break}M-=1}while(M>-1)}return"word"===c||"switch"!==e.stack[n]||"default"!==O&&"case"!==O?"catch"===O&&"."===f?(u[n-1]=-20,void u.push(-20)):"catch"===O||"finally"===O?(u[n-1]=-10,void u.push(-10)):void(!1===i.bracePadding&&n<j-1&&t(e.token[n+1],125)?u.push(-20):"object"!==e.stack[n]||!t(f,123)&&!t(f,44)||!t(e.token[n+1],40)&&"x("!==e.token[n+1]?("comment"===e.types[n-1]&&t(e.token[e.begin[n]],40)&&(u[n-1]=h+1),!0===a.script.inlineReturn&&"return"===O&&"start"===c&&"if"===e.stack[n]&&"x{"===f?(u[n-1]=-20,u.push(-20),console.log(f,c,O,k,u[n],h)):u.push(-10)):u.push(-20)):(u[n-1]=h-1,void u.push(-10))}do{e.lexer[n]===l?(k=e.types[n],O=e.token[n],"comment"===k?g():"regex"===k?u.push(-20):"string"===k?(1===O.length?(u.push(-20),0===e.lines[n]&&(u[n-1]=-20)):0===O.indexOf("#!/")?u.push(h):"liquid"!==c&&"liquid"!==e.types[n+1]&&u.push(-10),(t(f,44)||"start"===c)&&("object"===e.stack[n]||"array"===e.stack[n])&&!1===E[E.length-1]&&n>0&&(u[n-1]=h)):0===k.indexOf("template_string")?("template_string_start"===k?(h+=1,u.push(h)):"template_string_else"===k?(ye(),u[n-1]=h-1,u.push(h)):(ye(),h-=1,u[n-1]=h,u.push(-10)),n>2&&("template_string_else"===e.types[n-2]||"template_string_start"===e.types[n-2])&&(!0===i.bracePadding?(u[n-2]=-10,u[n-1]=-10):(u[n-2]=-20,u[n-1]=-20))):"separator"===k?te():"start"===k?H():"end"===k?z():"type"===k||"type_start"===k||"type_end"===k?(u[n-1]=t(e.token[n-1],44)||t(e.token[n-1],58)&&"data_type"!==e.stack[n-1]?-10:-20,("type"===e.types[n]||"type_end"===e.types[n])&&u.push(-10),"type_start"===e.types[n]&&u.push(-20)):"operator"===k?_():"word"===k?ve():"reference"===k?W():"markup"===k?((","!==e.token[n+1]&&O.indexOf("/>")!==O.length-2||","===e.token[n+1]&&"React"!==e.token[e.begin[n]-3])&&A(!1,!1),"return"===f||"?"===f||":"===f?(u[n-1]=-10,u.push(-20)):u.push("start"===c||"return"===e.token[n-2]&&"method"===e.stack[n-1]?h:-20)):0===k.indexOf("liquid")?"liquid_else"===k?"string"===c?(e.lines[n-1]<=1&&(u[n-1]=-20),e.lines[n]>0?(h-=1,u.push(h)):u.push(-20)):(u[n-1]=h-1,u.push(h)):"liquid_start"===k?"string"===c?(e.lines[n-1]<=1&&(u[n-1]=-20),e.lines[n]>0?(h+=1,u.push(h)):u.push(-20)):(h+=1,e.lines[n-1]<1&&(u[n-1]=-20),u.push(e.lines[n]>0?h:-20)):"liquid_end"===k?"string"===c?(e.lines[n-1]<=1&&(u[n-1]=-20),e.lines[n]>1&&(u[n-1]=h-1,u.push(h))):(h-=1,u[n-1]="liquid_start"===c||e.lines[n-1]<1?-20:h,u.push(e.lines[n]>0?h:-20)):"liquid"===k&&(t(f,58)&&-10===u[n-2]&&(u[n-2]=-20),u.push(e.lines[n]>0?h:-20)):"generic"===k?(P(f,35)&&"return"!==f&&"operator"!==c&&"public"!==f&&"private"!==f&&"static"!==f&&"final"!==f&&"implements"!==f&&"class"!==f&&"void"!==f&&(u[n-1]=-20),t(e.token[n+1],40)||"x("===e.token[n+1]?u.push(-20):u.push(-10)):u.push(-10),"comment"!==k&&(c=k,f=O),S.length>0&&P(e.token[n],41)&&("comment"===e.types[n]&&S[S.length-1]>-1?S[S.length-1]=a.wrap+1:u[n]>-1||t(e.token[n],96)&&e.token[n].indexOf(R)>0?S[S.length-1]=-1:S[S.length-1]>-1&&(S[S.length-1]=S[S.length-1]+e.token[n].length,-10===u[n]&&(S[S.length-1]=S[S.length-1]+1)))):ne(),n+=1}while(n<j);return u})();return(()=>{let n=[],h=a.indentChar.repeat(a.indentSize),o=a.preserveLine+1,L=["x;","x}","x{","x(","x)"],k=r.start,O=a.indentLevel;function c(f){return r.crlf.repeat(k===j-1?1:e.lines[k+1]-1>o?o:e.lines[k+1]>1?e.lines[k+1]-1:1)+h.repeat(f)}if(!0===i.vertical){let f=function(b){let Y=0,u=0,G=b-1,B=0,q=0,E=e.begin[k],I=[];do{if((e.begin[G]===E||t(e.token[G],93)||t(e.token[G],41))&&(t(e.token[G+1],61)||t(e.token[G+1],59)&&"object"===e.stack[G])){B=G,u=0;do{if(e.begin[B]===E){if(t(e.token[B],58)||t(e.token[B],59)||"x;"===e.token[B]||s[B]>-1&&"comment"!==e.types[B]){t(e.token[B+1],46)&&(u+=a.indentSize*a.indentChar.length);break}}else if(s[B]>-1)break;"comment"!==e.types[B]&&(-10===s[B-1]&&(u+=1),u=e.token[B].length+u),B-=1}while(B>E);if(q=B,t(e.token[q],44)&&t(e.token[G+1],61))do{if("end"===e.types[q]&&(q=e.begin[q]),e.begin[q]===E){if(t(e.token[q],59)||"x;"===e.token[q])break;if("var"===e.token[q]||"const"===e.token[q]||"let"===e.token[q]){u+=a.indentSize*a.indentChar.length;break}}q-=1}while(q>E);u>Y&&(Y=u),I.push([G,u]),G=B}else"end"===e.types[G]&&(G=e.begin[G]);G-=1}while(G>E);if(G=I.length,G>0)do{if(G-=1,B=I[G][1],B<Y)do{e.token[I[G][0]]=e.token[I[G][0]]+se,B+=1}while(B<Y)}while(G>0)};k=j;do{k-=1,"script"===e.lexer[k]&&t(e.token[k],125)&&P(e.token[k-1],123)&&s[e.begin[k]]>0?f(k):k=e.begin[k]}while(k>0)}k=r.start;do{if(e.lexer[k]===l){if("comment"===e.types[k]&&!0===i.commentIndent&&/\n/.test(e.token[k])){let f=e.begin[k]>-1?t(e.token[k][2],42)?at(s[k],h)+a.indentChar:at(s[k],h):a.indentChar,b=e.token[k].split(/\n/),Y=1;do{b[Y]=f+b[Y].trimStart(),Y+=1}while(Y<b.length);e.token.splice(k,1,b.join(R))}L.indexOf(e.token[k])<0&&(P(e.token[k],59)||!1===i.noSemicolon?n.push(e.token[k]):s[k]<0&&"comment"!==e.types[k+1]&&n.push(";")),k<j-1&&e.lexer[k+1]!==l&&e.begin[k]===e.begin[k+1]&&e.types[k+1].indexOf("end")<0&&P(e.token[k],44)?n.push(se):s[k]>-1?((s[k]>-1&&t(e.token[k],123)||s[k]>-1&&t(e.token[k+1],125))&&e.lines[k]<3&&!0===i.braceNewline&&e.lines[k+1]<3&&n.push(c(0)),2===r.mode?r.ender!==k&&n.push(c(s[k])):k!==j-1&&n.push(c(s[k])),O=s[k]):-10===s[k]&&(n.push(se),e.lexer[k+1]!==l&&(O+=1))}else if(x[k]===k)n.push(e.token[k]);else{r.ender=x[k],r.start=k;let f=r.external(O);n.push(f),k=r.iterator,-10===s[k]?n.push(se):s[k]>-1&&n.push(c(s[k]))}k+=1}while(k<j);return r.iterator=j-1,n.join(d)})()}():void 0}var rn={crlf:!1,correct:!1,preset:"default",language:"auto",endNewline:!1,indentChar:" ",indentLevel:0,indentSize:2,preserveLine:2,wrap:0,wrapFraction:0,liquid:{commentNewline:!1,commentIndent:!0,delimiterTrims:"preserve",delimiterPlacement:"preserve",forceFilter:0,forceArgument:0,ignoreTagList:[],indentAttribute:!1,lineBreakSeparator:"before",normalizeSpacing:!0,preserveComment:!1,preserveInternal:!1,dedentTagList:[],quoteConvert:"none"},markup:{attributeCasing:"preserve",attributeSort:!1,commentNewline:!1,commentIndent:!0,delimiterTerminus:"inline",forceAttribute:3,forceAttributeValue:!0,forceIndent:!1,ignoreCSS:!1,ignoreJS:!0,ignoreJSON:!1,lineBreakValue:"preserve",preserveComment:!1,preserveText:!1,preserveAttribute:!1,selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!1,quoteConvert:"none"},json:{arrayFormat:"default",braceAllman:!1,bracePadding:!1,objectIndent:"default",objectSort:!1,braceStyle:"none",caseSpace:!1,commentIndent:!1,commentNewline:!1,correct:!1,elseNewline:!1,functionNameSpace:!1,functionSpace:!1,methodChain:4,neverFlatten:!1,noCaseIndent:!1,preserveComment:!1,styleGuide:"none",ternaryLine:!1,variableList:"none",quoteConvert:"double",endComma:"never",noSemicolon:!0,vertical:!1},style:{commentIndent:!1,commentNewline:!1,atRuleSpace:!0,classPadding:!1,noLeadZero:!1,preserveComment:!1,sortSelectors:!1,sortProperties:!1,quoteConvert:"none"},script:{arrayFormat:"default",braceNewline:!1,bracePadding:!1,braceStyle:"none",braceAllman:!1,caseSpace:!1,commentIndent:!1,commentNewline:!1,elseNewline:!1,endComma:"never",functionNameSpace:!1,functionSpace:!1,inlineReturn:!0,methodChain:4,neverFlatten:!1,noCaseIndent:!1,noSemicolon:!1,objectSort:!1,objectIndent:"default",preserveComment:!1,quoteConvert:"none",styleGuide:"none",ternaryLine:!1,variableList:"none",vertical:!1}},Pn=class extends Array{get entry(){return this[this.length-1]}get token(){return this[this.length-1][0]}get index(){return this[this.length-1][1]}update(e,a){let i=this.length-1;return i>0?(void 0===a?"string"==typeof e?this[i][0]=e:this[i][1]=e:(this[i][0]=e,this[i][1]=a),this[i]):(this.push([e,a]),this[i+1])}pop(){let e=this.length-1,a=this[e];return e>0&&this.splice(e,1),a}},Ue=class{constructor(){this.hooks={parse:null,format:null},this.start=0,this.ender=0,this.iterator=0,this.attributes=new Map,this.regions=new Map,this.pairs=new Map,this.error=null,this.crlf="\n",this.references=[[]],this.count=-1,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineOffset=0,this.lineIndex=0,this.rules=rn,this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]}}get source(){return 2===this.mode?Ue.region:"node"===ze.env&&Buffer.isBuffer(Ue.input)?Ue.input.toString():Ue.input}set source(e){Ue.input="node"!==ze.env||Buffer.isBuffer(e)?e:Buffer.from(e)}get current(){return{begin:this.data.begin[this.count],ender:this.data.ender[this.count],lexer:this.data.lexer[this.count],lines:this.data.lines[this.count],stack:this.data.stack[this.count],token:this.data.token[this.count],types:this.data.types[this.count]}}reset(){this.error=null,this.count=-1,this.start=0,this.ender=0,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineIndex=0,this.lineOffset=0,this.data.begin=[],this.data.ender=[],this.data.lexer=[],this.data.lines=[],this.data.stack=[],this.data.token=[],this.data.types=[],this.references=[[]],this.stack=new Pn(["global",-1]),this.mode=1,this.pairs.size>0&&this.pairs.clear(),this.attributes.size>0&&this.attributes.clear(),this.regions.size>0&&this.regions.clear()}get(e){return{begin:this.data.begin[e],ender:this.data.ender[e],lexer:this.data.lexer[e],lines:this.data.lines[e],stack:this.data.stack[e],token:this.data.token[e],types:this.data.types[e]}}document(e,a=3){return this.reset(),tn(e),1===a?this.data:(this.mode=3,nn(e))}external(e,a){if(1!==this.mode){if(0===this.regions.size)return this.source;let{id:i,lexer:p}=this.regions.get(this.start);this.mode=2,this.language=i,this.rules.indentLevel=e;let x=nn(p);return this.mode=3,this.rules.indentLevel=0,this.language=this.rules.language,this.lexer=Le(this.language),x}{this.mode=2;let i=gt(e);Ue.region=a,this.language=e,this.lexer=Le(this.language),this.regions.set(this.count+1,{lexer:i,id:this.language}),tn(i),this.mode=1,this.lexer=Le(this.rules.language),this.language=this.rules.language}}final(e){let a=this.count,i=e.begin[a];if(!("style"===e.lexer[a]&&this.rules.style.sortProperties||"script"===e.lexer[a]&&(this.rules.script.objectSort||this.rules.json.objectSort))){do{e.begin[a]===i||e.begin[e.begin[a]]===i&&e.types[a].indexOf("attribute")>-1&&e.types[a].indexOf("attribute_end")<0?e.ender[a]=this.count:a=e.begin[a],a-=1}while(a>i);a>-1&&(e.ender[a]=this.count)}}syntactic(e,a){if("liquid_start"===e.types||"start"===e.types)this.pairs.set(this.count,{index:this.count,line:this.lineNumber,token:e.token,type:"start"===e.types?2:3,stack:a});else if(this.pairs.has(this.stack.index)&&("end"===e.types||"liquid_end"===e.types)){let i=this.pairs.get(this.stack.index);3===i.type?e.token.indexOf(`end${i.stack}`)>-1?this.pairs.delete(this.stack.index):Jt(112,i):2===i.type&&`</${i.stack}>`===e.token&&this.pairs.delete(this.stack.index)}}push(e,a,i=d){if(e.begin.push(a.begin),e.ender.push(a.ender),e.lexer.push(a.lexer),e.stack.push(a.stack),e.token.push(a.token),e.types.push(a.types),e.lines.push(a.lines),e===this.data){if(this.count=this.count+1,"style"!==a.lexer&&i.replace(/[{}<>%]/g,d)===d&&(i="else"===a.types?"else":Ee(a.token)),this.lineOffset=0,"start"===a.types||a.types.indexOf("_start")>0)this.stack.push([i,this.count]),this.lineDepth=this.lineDepth+this.rules.indentSize;else if("end"===a.types||a.types.indexOf("_end")>0){let p=0,x=this.stack.length;x>2&&("else"===e.types[this.stack[x-1][1]]||e.types[this.stack[x-1][1]].indexOf("_else")>0)&&("start"===e.types[this.stack[x-2][1]]||e.types[this.stack[x-2][1]].indexOf("_start")>0)&&("else"===e.types[this.stack[x-2][1]+1]||e.types[this.stack[x-2][1]+1].indexOf("_else")>0)&&(this.stack.pop(),e.begin[this.count]=this.stack.index,e.stack[this.count]=this.stack.token,e.ender[this.count-1]=this.count,p=e.ender[e.begin[this.count]+1]),this.final(e),p>0&&(e.ender[e.begin[this.count]+1]=p),this.stack.pop(),this.lineDepth=this.lineDepth-this.rules.indentSize}else("else"===a.types||a.types.indexOf("_else")>0)&&(i===d&&(i="else"),this.count>0&&("start"===e.types[this.count-1]||e.types[this.count-1].indexOf("_start")>0)?this.stack.push([i,this.count]):(this.final(e),this.stack.update(i===d?"else":i,this.count)));null!==this.hooks.parse&&this.hooks.parse[0].call({line:this.lineNumber,stack:this.stack.entry,language:this.language},a,this.count)}}pop(e){return e===this.data&&(this.count=this.count-1),{begin:e.begin.pop(),ender:e.ender.pop(),lexer:e.lexer.pop(),lines:e.lines.pop(),stack:e.stack.pop(),token:e.token.pop(),types:e.types.pop()}}concat(e,a){e.begin=e.begin.concat(a.begin),e.ender=e.ender.concat(a.ender),e.lexer=e.lexer.concat(a.lexer),e.stack=e.stack.concat(a.stack),e.token=e.token.concat(a.token),e.types=e.types.concat(a.types),e.lines=e.lines.concat(a.lines),e===this.data&&(this.count=e.token.length-1)}splice(e){let a=this.data.begin[this.count],i=this.data.token[this.count];void 0!==e.record&&e.record.token!==d?(e.data.begin.splice(e.index,e.howmany,e.record.begin),e.data.ender.splice(e.index,e.howmany,e.record.ender),e.data.token.splice(e.index,e.howmany,e.record.token),e.data.lexer.splice(e.index,e.howmany,e.record.lexer),e.data.stack.splice(e.index,e.howmany,e.record.stack),e.data.types.splice(e.index,e.howmany,e.record.types),e.data.lines.splice(e.index,e.howmany,e.record.lines),e.data===this.data&&(this.count=this.count-e.howmany+1,(a!==this.data.begin[this.count]||i!==this.data.token[this.count])&&(this.lineOffset=0))):(e.data.begin.splice(e.index,e.howmany),e.data.ender.splice(e.index,e.howmany),e.data.token.splice(e.index,e.howmany),e.data.lexer.splice(e.index,e.howmany),e.data.stack.splice(e.index,e.howmany),e.data.types.splice(e.index,e.howmany),e.data.lines.splice(e.index,e.howmany),e.data===this.data&&(this.count=this.count-e.howmany,this.lineOffset=0))}is(e,a){return this.count>0&&this.data[e][this.count]===a}lines(e,a){return this.lineNumber=this.lineNumber+1,this.lineIndex=e,a+1}spacer(e){this.lineOffset=1;do{if(e.array[e.index]===R&&(this.lineOffset=this.lineOffset+1,this.lineNumber=this.lineNumber+1),!1===ue(e.array[e.index+1]))break;e.index=e.index+1}while(e.index<e.end);return e.index}},qt=Ue;qt.input=d,qt.region=d;var r=new qt;function Fn(e){let a=[],i=0,p=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)&&!1===/@import/.test(e),x=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(e);function j(){let n=1,h=d,o=!1,L=!1,k=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(e);if(n<i)do{!1===o?t(a[n],42)&&t(a[n-1],47)?(a[n-1]=d,o=!0):!1===L&&n<i-6&&102===a[n].charCodeAt(0)&&105===a[n+1].charCodeAt(0)&&108===a[n+2].charCodeAt(0)&&116===a[n+3].charCodeAt(0)&&101===a[n+4].charCodeAt(0)&&114===a[n+5].charCodeAt(0)&&t(a[n+6],58)&&(L=!0):!0===o&&t(a[n],42)&&n!==i-1&&t(a[n+1],47)?(o=!1,a[n]=d,a[n+1]=d):!0===L&&t(a[n],59)&&(L=!1,a[n]=d),(!0===o||!0===L)&&(a[n]=d),n+=1}while(n<i);return h=a.join(d),!1===/\s\/\//.test(e)&&!1===/\/\/\s/.test(e)&&!0===/^(\s*(\{|\[)(?!%))/.test(e)&&/((\]|\})\s*)$/.test(e)&&-1!==e.indexOf(",")?{language:"json",lexer:"script"}:!0!==/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)||!0!==p&&!0!==k&&!0!==/console\.log\(/.test(e)&&!0!==/export\s+default\s+class\s+/.test(e)&&!0!==/export\s+(const|var|let|class)s+/.test(e)&&!0!==/document\.get/.test(e)&&!0!==/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)&&-1!==e.indexOf("{")&&!0!==/^(\s*if\s+\()/.test(e)?e.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(e)||/^(\s*\/(\*|\/))/.test(e)||/^(\s*\*\s*\{)/.test(e))&&!1===/^(\s*if\s*\()/.test(e)&&!1===/=\s*(\{|\[|\()/.test(h)&&(!1===/(\+|-|=|\?)=/.test(h)||/\/\/\s*=+/.test(h)||/=+('|")?\)/.test(e)&&/;\s*base64/.test(e))&&!1===/function(\s+\w+)*\s*\(/.test(h)?function c(){return/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(e)||/(?:public|private)\s+/.test(e)||/(?:export|declare)\s+type\s+\w+\s*=/.test(e)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(e)||/(?:typeof|keyof|as)\s+\w+/.test(e)||/\w+\s+as\s+\w+/.test(e)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(e)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(e)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(e)?{language:"typescript",lexer:"script"}:!1===/\s(class|var|const|let)\s+\w/.test(e)&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(e)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(e)&&(/\s?\{%/.test(e)||/{{/.test(e))?{language:"liquid",lexer:"markup"}:!1===/^(\s*[$@])/.test(e)&&/([}\]];?\s*)$/.test(e)&&(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(e)||/module\.export\s+=\s+/.test(e)||/export\s+default\s+\{/.test(e)||/[?:]\s*[{[]/.test(e)||/^(?:\s*return;?(?:\s+[{[])?)/.test(e))?{language:"javascript",lexer:"script"}:/{%/.test(e)&&/{{/.test(e)&&/<\w/.test(e)?{language:"liquid",lexer:"markup"}:/{\s*(?:\w|\.|@|#)+\s*\{/.test(e)?{language:"less",lexer:"style"}:/\$(\w|-)/.test(e)?{language:"scss",lexer:"style"}:!0===/[;{:]\s*@\w/.test(e)?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}}():e.indexOf("{%")>-1?{language:"liquid",lexer:"markup"}:{language:"unknown",lexer:"text"}:function O(){return e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1?!0===x||/\w<\w+(,\s+\w+)*>/.test(e)||/(?:var|let|const)\s+\w+\s*:/.test(e)||/=\s*<\w+/.test(e)?{language:"typescript",lexer:"script"}:{language:"javascript",lexer:"script"}:{language:"unknown",lexer:"text"}}()}function s(){return/^(\s*<!doctype\s+html>)/i.test(e)||/^(\s*<html)/i.test(e)||/<form\s/i.test(e)&&/<label\s/i.test(e)&&/<input\s/i.test(e)||/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(e)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(e)||/<ul\s/i.test(e)&&/<li\s/i.test(e)&&/<\/li>/i.test(e)&&/<\/ul>/i.test(e)||/<head\s*>/.test(e)&&/<\/head>/.test(e)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)&&!1===/XHTML\s+1\.1/.test(e)&&!1===/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)?function n(){return/{%-?\s*(schema|for|if|unless|render|include)/.test(e)||/{%-?\s*end\w+/.test(e)||/{{-?\s*content_for/.test(e)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(e)||/{%/.test(e)&&/%}/.test(e)&&/{{/.test(e)&&/}}/.test(e)?{language:"liquid",lexer:"markup"}:{language:"html",lexer:"markup"}}():/\s?{[{%]-?/.test(e)?{language:"liquid",lexer:"markup"}:{language:"xml",lexer:"markup"}}return null===e||e.replace(/\s+/g,d)===d?{language:"unknown",lexer:"text"}:(/\n\s*#{1,6}\s+/.test(e)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(e))&&(/\[( |x|X)\]/.test(e)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(e)||/\n\s*```[a-zA-Z]*?\s+/.test(e)||/-+\|(-+\|)+/.test(e))?{language:"markdown",lexer:"text"}:/^(\s*<!DOCTYPE\s+html>)/i.test(e)?s():/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(e)||!1===x&&!1===/=(>|=|-|\+|\*)/.test(e)&&!1===/^(?:\s*((if)|(for)|(function))\s*\()/.test(e)&&!1===/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(e)&&!1===p&&!1===/return\s*\w*\s*(;|\})/.test(e)&&(void 0===e||/^(?:\s*#(?!(!\/)))/.test(e)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(e)&&!1===/>\s*<\w/.test(e)||/^\s*:root\s*\{/.test(e)||/-{2}\w+\s*\{/.test(e)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(e))?function l(){return/\n\s*#+\s+/.test(e)||/^#+\s+/.test(e)?{language:"markdown",lexer:"markup"}:/\$[a-zA-Z]/.test(e)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(e)&&!1===/:\s*@[a-zA-Z];/.test(e)?{language:"scss",lexer:"style"}:/@[a-zA-Z]:/.test(e)||/\.[a-zA-Z]\(\);/.test(e)?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}}():(a=e.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,d).split(d),i=a.length,/^(\s*({{|{%|<))/.test(e)?s():!0===x||!1===/^(?:[\s\w-]*<)/.test(e)&&!1===/(?:>[\s\w-]*)$/.test(e)?j():(/^(?:\s*<\?xml)/.test(e)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(e)||/^\s*</.test(e)&&/<\/\w+(\w|\d)+>\s*$/.test(e))&&(/^(?:[\s\w]*<)/.test(e)||/(?:>[\s\w]*)$/.test(e))||/^(?:\s*<s((cript)|(tyle)))/i.test(e)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(e)?!1===/^(?:[\s\w]*<)/.test(e)||!1===/(?:>[\s\w]*)$/.test(e)?j():s():{language:"unknown",lexer:"text"})}function Ot(e,a,i){if("global"===e)switch(a){case"indentChar":return function zn(e,a,i){if("string"==typeof i)return!0;throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:"global"===e?a:`${e} \u2192 ${a}`,provided:i,expected:["string"]})}(e,a,i);case"preset":case"language":return Je(e,a,i);case"crlf":case"correct":case"endNewline":return Ke(e,a,i);case"indentLevel":case"indentSize":case"preserveLine":case"wrap":case"wrapFraction":return $t(e,a,i);default:return!1}else if("liquid"===e)switch(a){case"commentNewline":case"commentIndent":case"indentAttribute":case"normalizeSpacing":case"preserveComment":case"preserveInternal":return Ke(e,a,i);case"forceArgument":case"forceFilter":return $t(e,a,i);case"ignoreTagList":case"dedentTagList":return sn(e,a,i);case"lineBreakSeparator":case"delimiterPlacement":case"delimiterTrims":case"quoteConvert":return Je(e,a,i)}else if("markup"===e)switch(a){case"forceAttribute":if(lt(i))return $t(e,a,i);if(et(i))return Ke(e,a,i);throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["boolean","number"]});case"attributeSort":if(et(i))return Ke(e,a,i);if(Ae(i))return sn(e,a,i);throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["boolean","number"]});case"commentNewline":case"commentIndent":case"forceIndent":case"forceAttributeValue":case"ignoreCSS":case"ignoreJS":case"ignoreJSON":case"preserveComment":case"preserveText":case"preserveAttribute":case"selfCloseSpace":case"selfCloseSVG":case"stripAttributeLines":return Ke(e,a,i);case"attributeCasing":case"delimiterTerminus":case"lineBreakValue":case"quoteConvert":return Je(e,a,i)}else if("style"===e)switch(a){case"correct":case"atRuleSpace":case"classPadding":case"noLeadZero":case"sortSelectors":case"sortProperties":return et(i);case"quoteConvert":return Je(e,a,i)}else if("json"===e)switch(a){case"arrayFormat":case"objectIndent":return Je(e,a,i);case"allowComments":case"braceAllman":case"bracePadding":case"objectSort":return Ke(e,a,i)}}function sn(e,a,i){if(Ae(i)){if(0===i.length)return!0;for(let p=0;p<i.length;p++)if(!1===bt(i[p]))throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a} (index: ${p})`,provided:i,expected:["string"]});return!0}throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:"global"===e?a:`${e} \u2192 ${a}`,provided:i,expected:["string[]"]})}function $t(e,a,i){if(lt(i)&&!1===isNaN(i))return!0;throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:"global"===e?a:`${e} \u2192 ${a}`,provided:i,expected:["number"]})}function Ke(e,a,i){if(lt(i))return 0!==i;if(et(i))return!0;throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:"global"===e?a:`${e} \u2192 ${a}`,provided:i,expected:["boolean"]})}function Je(e,a,i){if(!1===bt(i))throw Ce({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["string"]});if("language"===a){switch(i){case"text":case"markup":case"html":case"liquid":case"xml":case"javascript":case"typescript":case"jsx":case"tsx":case"json":case"less":case"scss":case"sass":case"css":return!0}throw Ce({message:`Unsupported "${a}" identifier provided`,option:e===`${a} (global)`?a:`${e} \u2192 ${a}`,provided:i,expected:["text","auto","markup","html","liquid","xml","javascript","typescript","jsx","tsx","json","less","scss","sass","css"]})}if("preset"===a){switch(i){case"default":case"strict":case"recommended":case"warrington":case"prettier":return!0}throw Ce({message:`Unsupported "${a}" provided`,option:e===`${a} (global)`?a:`${e} \u2192 ${a}`,provided:i,expected:["default","strict","recommended","warrington","prettier"]})}if("attributeCasing"===a)switch(i){case"preserve":case"lowercase":case"lowercase-name":case"lowercase-value":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","lowercase","lowercase-name","lowercase-value"]})}else if("delimiterTrims"===a)switch(i){case"preserve":case"never":case"always":case"tags":case"outputs":case"multiline":case"linebreak":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","never","always","tags","outputs","multiline","linebreak"]})}else if("delimiterPlacement"===a)switch(i){case"default":case"inline":case"preserve":case"consistent":case"force":case"force-multiline":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["default","inline","preserve","consistent","force","force-multiline"]})}else if("lineBreakSeparator"===a)switch(i){case"preserve":case"before":case"after":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","before","after"]})}else if("delimiterTerminus"===a)switch(i){case"force":case"inline":case"adapt":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["force","inline","adapt"]})}else if("lineBreakValue"===a)switch(i){case"preserve":case"align":case"indent":case"force-preserve":case"force-align":case"force-indent":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","align","indent","force-preserve","force-align","force-indent"]})}else if("quoteConvert"===a)switch(i){case"none":case"double":case"single":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["none","double","single"]})}else if("objectIndent"===a||"arrayFormat"===a)switch(i){case"default":case"indent":case"inline":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["default","indent","inline"]})}else if("endComma"===a)switch(i){case"none":case"always":case"never":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["none","always","never"]})}else if("variableList"===a)switch(i){case"none":case"each":case"list":return!0;default:throw Ce({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["none","each","list"]})}}var St={preset:"recommended",language:"auto",preserveLine:2,wrap:120,wrapFraction:90,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,commentNewline:!0,delimiterTrims:"tags",lineBreakSeparator:"after",quoteConvert:"double",delimiterPlacement:"consistent"},markup:{attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:2,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0}},_t={preset:"strict",language:"auto",preserveLine:1,wrap:0,wrapFraction:80,liquid:{ignoreTagList:[],commentNewline:!0,delimiterTrims:"never",lineBreakSeparator:"before",quoteConvert:"double",forceArgument:3,forceFilter:4,delimiterPlacement:"consistent"},markup:{attributeSort:["id","class","type","name","value","href","src"],attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,ignoreJS:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent",objectSort:!0},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0,sortSelectors:!0}},Ct={preset:"warrington",language:"auto",preserveLine:2,wrap:0,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}},At={preset:"prettier",language:"auto",preserveLine:1,wrap:80,wrapFraction:60,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",dedentTagList:["schema"],quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"force",forceAttribute:1,forceIndent:!0,ignoreJS:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}},rt=["correct","crlf","endNewline","indentChar","indentLevel","indentSize","preserveLine","wrap","wrapFraction"],st=["liquid","markup","style","json","script"];var on=new class{constructor(){this.language="auto",this.lexer="auto",this.stats=null,this.events={format:[],error:[],rules:[],parse:[]},"node"===ze.env&&(ze.cwd=process.cwd()),"browser"===ze.env&&(window.esthetic=on)}get table(){return r.data}get definitions(){return jn}get detect(){return Fn}grammar(e){return e?(je.extend(e),this):je.extend()}config(e){if(!e)return ze;for(let a in e)a in ze&&(ze[a]=e[a]);return this}on(e,a){return this.events[e].push(a),this}hook(e,a){r.hooks[e]=[a]}format(e,a){if(r.source=e,mt(a)&&"language"in a&&this.language!==a.language&&Je("global","language",a.language)&&(this.language=r.language=r.rules.language=a.language,this.lexer=r.lexer=Le(r.language)),this.rules(a),"auto"===this.lexer){let j=this.detect(r.source);this.language=r.language=r.rules.language=j.language,this.lexer=r.lexer=Le(j.language)}let i=gt(this.language),p=ze.reportStats?Tt(this.language,this.lexer):null,x=r.document(i);if(null!==r.error){if(this.events.error.length>0){for(let j of this.events.error)j(r.error);return e}if(ze.throwErrors)throw r.error;return e}let l=null===p?this.stats:this.stats=p(x.length);if(this.events.format.length>0)for(let j of this.events.format)if(!1===j.call({get data(){return r.data}},{get output(){return e},get stats(){return l},get rules(){return r.rules}}))return e;return x}parse(e,a){if(r.source=e,mt(a)&&("language"in a&&this.language!==a.language&&Je("global","language",a.language)&&(this.language=r.language=r.rules.language=a.language,this.lexer=r.lexer=Le(r.language)),this.rules(a)),"auto"===this.lexer){let j=this.detect(r.source);this.language=r.language=r.rules.language=j.language,this.lexer=r.lexer=Le(j.language)}let i=gt(this.language),p=Tt(this.language,this.lexer),x=r.document(i,1),l=this.stats=p(r.count);if(this.events.parse.length>0)for(let j of this.events.parse)if(!1===j({get data(){return r.data},get stats(){return l},get rules(){return r.rules}}))return e;if(null!==r.error){if(this.events.error.length>0)for(let j of this.events.error)j(r.error);return[]}return x}rules(e){if(He(e))return r.rules;let{language:a}=function En(e,a){let p,i=Re(e);a.rules.length>0&&(p={}),"preset"in e&&function Mn(e){if(e.preset!==r.rules.preset&&Je("global","preset",e.preset)){if(r.rules=De({},rn),r.rules.preset=e.preset,"default"===e.preset)return;let a;switch(e.preset){case"strict":a=Re(_t);for(let i of rt)a(i)&&(r.rules[i]=_t[i]);for(let i of st)a(i)&&De(r.rules[i],_t[i]);break;case"recommended":a=Re(St);for(let i of rt)a(i)&&(r.rules[i]=St[i]);for(let i of st)a(i)&&De(r.rules[i],St[i]);break;case"warrington":a=Re(Ct);for(let i of rt)a(i)&&(r.rules[i]=Ct[i]);for(let i of st)a(i)&&De(r.rules[i],Ct[i]);break;case"prettier":a=Re(At);for(let i of rt)a(i)&&(r.rules[i]=At[i]);for(let i of st)a(i)&&De(r.rules[i],At[i])}}}(e),i("language")&&Ot("global","language",e.language)&&r.language!==e.language&&(r.language=r.rules.language=e.language);for(let x of rt)!1!==i(x)&&r.rules[x]!==e[x]&&Ot("global",x,e[x])&&(p&&(p[x]={from:r.rules[x],to:e[x]}),"crlf"===x&&(r.crlf=e[x]?"\r\n":R),"wrap"===x&&e[x]>0&&(!1===i("wrapFraction")||i("wrapFraction")&&e.wrapFraction<=0)&&(r.rules.wrapFraction=e[x]-e[x]/4),r.rules[x]=e[x]);for(let x of st)if(!1!==i(x)&&r.rules[x]!==e[x]){p&&(p[x]={});for(let l in e[x])Ot(x,l,e[x][l])&&(p&&(p[x][l]={old:r.rules[x][l],now:e[x][l]}),r.rules[x][l]=e[x][l])}if(a.rules.length>0)for(let x of a.rules)x(p,r.rules);return r.rules}(e,this.events);return this.language=a,this.lexer=r.lexer=Le(a),this}liquid(e,a){return this.language=r.language=r.rules.language="liquid",this.lexer=r.lexer=Le(r.language),this.format(e,a)}html(e,a){return this.language=r.language=r.rules.language="html",this.lexer=r.lexer=Le(r.language),this.format(e,a)}xml(e,a){return this.language=r.language=r.rules.language="xml",this.lexer=r.lexer=Le(r.language),this.format(e,a)}css(e,a){return this.language=r.language=r.rules.language="css",this.lexer=r.lexer=Le(r.language),this.format(e,a)}json(e,a){return this.language=r.language=r.rules.language="json",this.lexer=r.lexer=Le(r.language),this.format(e,a)}js(e,a){return this.language=r.language=r.rules.language="javascript",this.lexer=r.lexer=Le(r.language),this.format(e,a)}ts(e,a){return this.language=r.language=r.rules.language="typescript",this.lexer=r.lexer=Le(r.language),this.format(e,a)}}}}]);