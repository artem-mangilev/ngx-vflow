import"./chunk-P2VZOJAX.js";var d="",Se='"',Je=",",Ce="'",se=" ",ee=`
`,sn=`\r
`;function ot(e){switch(e){case"text":return"Plain Text";case"html":return"HTML";case"liquid":return"Liquid";case"xml":return"XML";case"json":return"JSON";case"jsx":return"JSX";case"tsx":return"TSX";case"typescript":return"TypeScript";case"javascript":return"JavaScript";case"less":return"LESS";case"scss":return"SCSS";case"sass":return"SASS";case"css":return"CSS"}}function Le(e){switch(e){case"text":return"ignore";case"auto":return"auto";case"markup":case"html":case"liquid":case"xml":return"markup";case"json":case"jsx":case"tsx":case"typescript":case"javascript":return"script";case"less":case"scss":case"sass":case"css":return"style"}}function qt(e){switch(e){case"auto":return 5;case"markup":case"html":case"liquid":case"xml":return 1;case"json":case"jsx":case"tsx":case"typescript":case"javascript":return 2;case"less":case"scss":case"sass":case"css":return 3}return 4}function Lt(e,a){let i={lexer:a,language:ot(e),chars:0,time:""},p=Date.now();return x=>{let l=+(Date.now()-p).toFixed(0);return i.time=l>1e3?`${l}s`:`${l}ms`,i.chars=x,i}}function _t(...e){return e.join(ee)}function ft(e,a=se){if(e<=0)return a;let i=d,p=1;do i+=a;while(p++<e);return i}function t(e,a){return e?e.charCodeAt(0)===a:!1}function Me(e,a){return t(e[e.length-1],a)}function on(e,...a){let i=e.length-1,p=a.length;for(;p--;)if(t(e[i--],a[p])===!1)return!1;return!0}function Qe(e,a,i=2){return t(e[e.length-i],a)}function F(e,a){return t(e,a)===!1}function Tt(e,a){return Me(e,a)===!1}function ue(e){return/\s/.test(e)}function Pe(e){return/\d/.test(e)}function Nt(e){return`\\${e}`}var{toString:Ke}=Object.prototype;function et(e){return a=>a in e}function Ae(e){return Ke.call(e).slice(8,-1)==="Array"}function Ot(e){return Ke.call(e).slice(8,-1)==="Object"}function Ct(e){return Ke.call(e).slice(8,-1)==="String"}function st(e){return Ke.call(e).slice(8,-1)==="Boolean"}function ht(e){return Ke.call(e).slice(8,-1)==="Number"}function Ue(e){return Ke.call(e).slice(8,-1)==="Undefined"}function $t(e){let a=r.count,i=r.stack.index,p=0,x=0,l=0,j=0,s=0,n=0,h=0,o=!0,{count:L}=r,k=r.stack.token,O=r.stack.index,c=r.lineOffset,f=e.lexer[L]==="style",b=f&&k==="global",Y=f?[";","separator"]:[",","separator"],u=[],G={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};function B(q,E){let I=q[0],ie=E[0];if(e.types[I]==="comment"){do I=I+1;while(I<L&&e.types[I]==="comment");if(e.token[I]===void 0)return 1}if(e.types[ie]==="comment"){do ie=ie+1;while(ie<L&&e.types[ie]==="comment");if(e.token[ie]===void 0)return 1}if(f===!0){if(e.token[I].indexOf("@import")===0||e.token[ie].indexOf("@import")===0)return I<ie?-1:1;if(e.types[I]!==e.types[ie]){if(e.types[I]==="function")return 1;if(e.types[I]==="variable")return-1;if(e.types[I]==="selector")return 1;if(e.types[I]==="property"&&e.types[ie]!=="variable"||e.types[I]==="mixin"&&e.types[ie]!=="property"&&e.types[ie]!=="variable")return-1}}return e.token[I].toLowerCase()>e.token[ie].toLowerCase()?1:-1}j=a;do{if(e.begin[a]===i||b&&a<j&&t(e.token[a],125)&&e.begin[e.begin[a]]===-1){if(e.types[a].indexOf("liquid")>-1)return;if(e.token[a]===Y[0]||f===!0&&t(e.token[a],125)&&F(e.token[a+1],59)?(o=!0,s=a+1):f===!0&&t(e.token[a-1],125)&&(o=!0,s=a),s===0&&e.types[0]==="comment")do s=s+1;while(e.types[s]==="comment");else e.types[s]==="comment"&&e.lines[s]<2&&(s=s+1);o===!0&&(e.token[a]===Y[0]||f===!0&&t(e.token[a-1],125))&&s<=j&&((f===!0&&"};".indexOf(e.token[j])<0||f===!1&&F(e.token[j],44))&&(j=j+1),u.push([s,j]),f===!0&&t(e.token[s],125)?j=s:j=s-1)}a=a-1}while(a>i);if(u.length>0&&u[u.length-1][0]>a+1){if(p=u[u.length-1][0]-1,e.types[p]==="comment"&&e.lines[p]>1){do p=p-1;while(p>0&&e.types[p]==="comment");u[u.length-1][0]=p+1}if(e.types[a+1]==="comment"&&a===-1)do a=a+1;while(e.types[a+1]==="comment");u.push([a+1,p])}if(u.length>1&&(f===!0||r.language==="json"||t(e.token[a-1],61)||t(e.token[a-1],58)||t(e.token[a-1],40)||t(e.token[a-1],91)||t(e.token[a-1],44)||e.types[a-1]==="word"||a===0)){u.sort(B),h=u.length,o=!1,i=0;do{if(n=u[i][1],f===!0&&(l=n,e.types[l]==="comment"&&(l=l-1),t(e.token[l],125)?(n=n+1,Y[0]="}",Y[1]="end"):(Y[0]=";",Y[1]="separator")),p=u[i][0],f===!0&&e.types[n-1]!=="end"&&e.types[n]==="comment"&&e.types[n+1]!=="comment"&&i<h-1&&(n=n+1),p<n)do f===!1&&i===h-1&&p===n-2&&t(e.token[p],44)&&e.lexer[p]==="script"&&e.types[p+1]==="comment"||r.push(G,{begin:e.begin[p],ender:e.begin[p],lexer:e.lexer[p],lines:e.lines[p],stack:e.stack[p],token:e.token[p],types:e.types[p]},d),x=x+1,e.token[p]===Y[0]&&(f===!0||e.begin[p]===e.begin[u[i][0]])?o=!0:e.token[p]!==Y[0]&&e.types[p]!=="comment"&&(o=!1),p=p+1;while(p<n);if(o===!1&&G.token[G.token.length-1]!=="x;"&&(f===!0||i<h-1)){if(p=G.types.length-1,G.types[p]==="comment")do p=p-1;while(p>0&&G.types[p]==="comment");p=p+1,r.splice({data:G,howmany:0,index:p,record:{begin:O,stack:b?"global":k,ender:r.count,lexer:G.lexer[p-1],lines:0,token:Y[0],types:Y[1]}}),x=x+1}i=i+1}while(i<h);r.splice({data:e,howmany:x,index:a+1}),r.lineOffset=c,r.concat(e,G)}}function Pt(e,a,i){return Ae(e)===!1?e:a==="normal"?Yt.call({array:e,recursive:i},e):a==="descend"?Gt.call({recursive:i},e):Ut.call({recursive:i},e)}function Zt(e,a){let i=e,p=-1,{data:x}=r,l=[],j=r.stack.length<2?[-1]:[r.stack[r.stack.length-2][1]];do i>0&&x.types[i].indexOf("attribute")>-1&&x.types[i].indexOf("end")<0&&x.types[i-1].indexOf("start")<0&&x.types[i-1].indexOf("attribute")<0&&x.lexer[i]==="markup"&&j.push(i-1),i>0&&x.types[i-1].indexOf("attribute")>-1&&x.types[i].indexOf("attribute")<0&&x.lexer[j[j.length-1]]==="markup"&&x.types[j[j.length-1]].indexOf("start")<0&&j.pop(),x.begin[i]!==j[j.length-1]&&(x.begin[i]=j.length>0?j[j.length-1]:-1),x.types[i].indexOf("else")>-1&&(j.length>0?j[j.length-1]=i:j.push(i)),x.types[i].indexOf("end")>-1&&j.pop(),x.types[i].indexOf("start")>-1&&j.push(i),i=i+1;while(i<a);i=a;do i=i-1,x.types[i].indexOf("end")>-1&&(l.push(i),p=p+1),x.ender[i]=p>-1?l[p]:-1,x.types[i].indexOf("start")>-1&&(l.pop(),p=p-1);while(i>e)}function Ut(e){let a=0,i=e.length,p=e,x=p.map(s=>s[1]),l=()=>{let s=0,n=p.length;if(s<n)do Ae(p[s])===!0&&(p[s]=Ut.apply(this,p[s])),s=s+1;while(s<n)},j=(s=d)=>{let n=a,h=0,o=0,L=0,k=[],O=p[a];if(n<i)do p[n]<O?(O=p[n],k=[n]):p[n]===O&&k.push(n),n=n+1;while(n<i);if(o=k.length,n=a,h=o+a,n<h)do O[1]=x[n],p[k[L]]=p[n],p[n]=O,L=L+1,n=n+1;while(n<h);return a=a+o,a<i?j():(this.recursive===!0&&l(),e=p),s};return j(),e}function Gt(e){let a=0,i=e.length,p=e,x=()=>{let j=p.length,s=0;if(s<j)do Ae(p[s])&&(p[s]=Gt.apply(this,p[s])),s=s+1;while(s<j)},l=(j="")=>{let s=a,n=0,h=0,o=0,L=p[a],k=[],O=d,c=typeof L;if(s<i)do O=typeof p[s],p[s]>L||O>c?(L=p[s],k=[s]):p[s]===L&&k.push(s),s=s+1;while(s<i);if(h=k.length,s=a,n=h+a,s<n)do p[k[o]]=p[s],p[s]=L,o=o+1,s=s+1;while(s<n);return a=a+h,a<i?l():(this.recursive===!0&&x(),e=p),j};return l(),e}function Yt(e){let a=e,i=[e[0]],p=()=>{let l=0,j=a.length;if(l<j)do Ae(a[l])&&(a[l]=Yt.apply(this,a[l])),l=l+1;while(l<j)},x=l=>{let j=0,s=[],n=a.length;if(j<n)do a[j]!==l&&s.push(a[j]),j=j+1;while(j<n);a=s,s.length>0?(i.push(s[0]),x(s[0])):(this.recursive===!0&&p(),e=a)};return x(this.array[0]),e}function an(e={embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["form","paginate","capture","case","comment","for","if","raw","tablerow","unless","schema","style","script","stylesheet","javascript"],control:["if","unless","case"],else:["else","elsif","when"],singletons:["include","layout","section","assign","liquid","break","continue","cycle","decrement","echo","increment","render"]}){let a=new Set(e.else),i=new Set(e.control),p=new Set(e.tags),x=new Set(e.singletons),l={};return j(e.embedded),{get grammar(){return e},get tags(){return p},get control(){return i},get else(){return a},get singleton(){return x},get embed(){return l},extend(s){for(let n in s)if(Ae(s[n]))for(let h of s[n])n==="tags"&&p.has(h)===!1?(e.tags.push(h),p.add(h)):n==="else"&&a.has(h)===!1?(e.else.push(h),a.add(h)):n==="control"&&i.has(h)?(e.control.push(h),i.add(h)):n==="singletons"&&x.has(h)===!1&&(e.singletons.push(h),x.add(h));else n==="embedded"&&typeof s[n]=="object"&&j(s[n])}};function j(s){for(let n in s)for(let{language:h,argument:o=null}of s[n])if(n in l||(l[n]={tag:n,language:h,args:new Map([[new Set,{tag:n,language:h}]])}),o){for(let[L]of l[n].args)if(L!==null)if(Ae(o))for(let k of o)L.has(k)||L.add(k);else{let k=new RegExp(o);if(L.size>0)for(let O of L)O instanceof RegExp&&O.source!==k.source&&L.add(k);else L.add(k)}}}}function ln(e={tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}){let a=new Set(e.tags);return{get grammar(){return e},get tags(){return a},extend(i){for(let p in i)if(Ae(i[p]))for(let x of i[p])p==="tags"&&a.has(x)===!1&&(e.tags.push(x),a.add(x))}}}function un(e={embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],tags:["a","abbr","acronym","address","applet","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","fieldset","figcaption","figure","figure","font","footer","form","frame","frameset","h1","h6","head","header","html","i","iframe","ins","isindex","kbd","label","legend","fieldset","li","main","map","mark","marquee","menu","meter","nav","noframes","frame","noscript","object","ol","optgroup","option","output","p","object","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","picture","video","audio","span","strike","strong","style","sub","summary","details","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","audio","video","tt","u","ul","var","video"]}){let a=new Set(e.tags),i=new Set(e.voids),p={};return x(e.embedded),{get grammar(){return e},get tags(){return a},get voids(){return i},get embed(){return p},extend(l){for(let j in l)if(Ae(l[j]))for(let s of l[j])j==="tags"&&a.has(s)===!1?(e.tags.push(s),a.add(s)):j==="voids"&&i.has(s)===!1&&(e.voids.push(s),i.add(s));else j==="embedded"&&typeof l[j]=="object"&&x(l[j])}};function x(l){for(let j in l){j in p||(p[j]={tag:j,attr:new Map});for(let{language:s,attribute:n}of l[j])if("language"in p[j]||(p[j].language=s),p[j].attr.has(s)||p[j].attr.set(s,{tag:j,language:s,attr:new Map}),n){let h=p[j].attr.get(s);for(let o in n){h.attr.has(o)||h.attr.set(o,{tag:j,language:s,attr:o,value:new Set});let L=p[j].attr.get(s).attr.get(o);if(Ae(n[o]))for(let k of n[o])L.value.has(k)||L.value.add(k);else{let k=new RegExp(n[o]);if(L.value.size>0)for(let O of L.value)O instanceof RegExp&&O.source!==k.source&&L.value.add(k);else L.value.add(k)}}}}}}function cn(e={units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"],atrules:["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@supports"],webkit:{classes:["webkit-any","webkit-any-link*","webkit-autofill"],elements:["webkit-file-upload-button","webkit-inner-spin-button","webkit-input-placeholder","webkit-meter-bar","webkit-meter-even-less-good-value","webkit-meter-inner-element","webkit-meter-optimum-value","webkit-meter-suboptimum-value","webkit-outer-spin-button","webkit-progress-bar","webkit-progress-inner-element","webkit-progress-value","webkit-search-cancel-button","webkit-search-results-button","webkit-slider-runnable-track","webkit-slider-thumb"]},pseudo:{classes:["active","any-link","checked","default","defined","disabled","empty","enabled","first","first-child","first-of-type","fullscreen","focus","focus-visible","focus-within","host","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","modal","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","picture-in-picture","placeholder-shown","paused","playing","read-only","read-write","required","right","root","scope","target","valid","visited","where"],elements:["after","backdrop","before","cue","cue-region","first-letter","first-line","file-selector-button","marker","part","placeholder","selection","slotted"],functions:["after","before","first-letter","first-line","host","host-context","part","slotted","lang","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","where"]}}){let a=new Set(e.units),i=new Set(e.atrules),p=new Set(e.pseudo.classes),x=new Set(e.pseudo.elements),l=new Set(e.pseudo.functions),j=new Set(e.webkit.elements),s=new Set(e.webkit.classes);return{get grammar(){return e},get units(){return a},get pseudoClasses(){return p},get pseudoElements(){return x},get pseudoFunctions(){return l},get webkitElements(){return j},get webkitClasses(){return s},atrules(n){return i.has(n.slice(0,n.indexOf("(")).trim())},extend(n){for(let h in n){if(Ae(n[h]))for(let o of n[h])h==="units"&&!a.has(o)?(e[h].push(o),a.add(o)):h==="atrules"&&!i.has(o)&&(e[h].push(o),i.add(o));if(typeof n[h]=="object"){for(let o in n[h])if(Ae(n[h][o]))for(let L of n[h][o])h==="webkit"?o==="elements"?(e[h][o].push(L),j.add(L)):o==="classes"&&(e[h][o].push(L),s.add(L)):h==="pseudo"&&(o==="elements"?(e[h][o].push(L),x.add(L)):o==="classes"?(e[h][o].push(L),p.add(L)):o==="functions"&&(e[h][o].push(L),l.add(L)))}}}}}function pn(e={keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]}){let a=new Set(e.keywords);return{get grammar(){return e},get keywords(){return a},extend(i){for(let p in i)if(Ae(i[p]))for(let x of i[p])p==="keywords"&&!a.has(x)&&(e[p].push(x),a.add(x))}}}var je=function(){let e=cn(),a=an(),i=pn(),p=un(),x=ln();return{html:p,liquid:a,js:i,css:e,svg:x,extend(l){if(typeof l=="object")for(let j in l)j==="liquid"?a.extend(l.liquid):j==="html"?p.extend(l.html):j==="css"?e.extend(l.css):(j==="js"||j==="svg")&&i.extend(l.js);return{get html(){return p.grammar},get liquid(){return a.grammar},get js(){return i.grammar},get css(){return e.grammar},get svg(){return e.grammar}}}}}();function Ee(e,a=NaN,i){if(Ct(e)===!1)return d;if(F(e,60)&&F(e,123))return i||e;if(t(e,60)){let x=e.search(/[\s>]/),l=e.slice(t(e[1],47)?2:1,x);return t(l,63)&&Me(l,63)?"xml":isNaN(a)?l:l.slice(a)}let p=(t(e[2],45)?e.slice(3).trimStart():e.slice(2).trimStart()).split(/\s|-?[%}]}/).shift();return isNaN(a)?p:p.slice(a)}function Ft(e){return(a,i,p)=>{let x=e,l=e;return t(p[i-1],92)&&(x=a[0]),t(a[a.length-2],92)&&(l=a[a.length-1]),x+a.slice(1,-1)+l}}var ze={version:"0.5.5-beta.1",env:typeof process<"u"&&process.versions!=null?"node":"browser",lastUpdate:new Date().toDateString(),cwd:null,reportStats:!0,editorConfig:!1,throwErrors:!0,persistRules:!0,logLevel:2,logColors:!0,resolveConfig:"package.json"};function Ge(e,a,i){i||(i=Ee(a));let p=Kt(e,i,r.lineNumber);p.language=ot(r.language),r.error=_t(p.message,ee,fn(),ee,p.details,ee,`Language: ${ot(r.language)} `,`Location: ${r.lineNumber}:${r.lineColumn}`,`\xC6sthetic: Parse Failed (Code: ${p})`)}function Qt(e,a,i){i||(i=Ee(a.token));let p=Kt(e,i,a.line);p.language=ot(r.language),r.error=_t(p.message,ee,dn(a),ee,p.details,ee,Oe(`Language: ${ot(r.language)}`),Oe(`Location: ${a.line}`),Oe(`\xC6sthetic: Parse Failed (Code: ${e})`))}function _e(e){return _t(`Rule Error: ${e.message}`,ee,`Definition: ${e.option}`,`Provided: ${e.provided} `,`Expected: ${e.expected.join(", ")} `)}var zt=e=>`\x1B[93m${"^".repeat(e)}\x1B[39m`;function dn(e){let a=e.line-r.get(e.index).lines,i=0,p="",x=r.source.split(ee).slice(a,e.line),l=`${e.line+1}`.length,j=[],{indentSize:s,indentChar:n}=r.rules;do{let h=`${a+1}`,o=l-h.length>0?` \x1B[90m${h} |`:`\x1B[90m${h} |`;if(p=x[i],i===0){if(Ue(x[i])){j.push(`${o} \x1B[31m${e.token}\x1B[39m`);break}p=x[i].trimStart(),j.push(`${o} \x1B[31m${p}\x1B[39m`)}else{let L=p.match(/^\s*/);L!==null&&L[0].length>s?(p=n.repeat(s)+p.trimStart(),j.push(`${o} \x1B[31m${p}\x1B[39m`)):j.push(`${o} \x1B[31m${p}\x1B[39m`)}i=i+1,a=a+1}while(i<x.length);return j.join(ee)}function fn(e=r.lineNumber){let a=[],i=r.source.split(ee),p=e,x=`${p+1}`.length,l=p-1,j="";i.length>2&&(l=p-3),i.length===2&&(l=p-2);do{let s=`${l+1}`,n=x-s.length>0?` \x1B[90m${s} |`:`\x1B[90m${s} |`,h=i[l].trim();if(l>p)break;if(!h){a.push(`${n} \x1B[90m${h||"\u2424"}`),l=l+1;continue}l===p-1?h.length===0?a.push(`${" ".repeat(x+2)} ${zt(j.length)}`):(a.push(`${n} \x1B[31m${h}\x1B[39m`),a.push(`${" ".repeat(x+2)} ${zt(h.length)}`)):a.push(`${n} \x1B[90m${h||"\u2424"}`),l=l+1,j=h}while(l<p);return a.join(ee)}function Oe(...e){return ze.logColors?`${e.join(ee)}`.replace(/"(.*?)"/g,"\x1B[31m$1\x1B[39m"):e.join(ee)}function Kt(e,a,i=r.lineNumber){return{105:{code:e,message:Oe(`Syntax Error (line ${i}): Missing HTML "${a}" end tag`),details:Oe(`The "<${a}>" tag type has an incomplete HTML syntactic structure resulting in a parse error.`,`To resolve the issue check that you have a closing "</${a}>" tag. For more information`,"see: https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags")},112:{code:e,message:Oe(`Syntax Error (line ${i}): Missing Liquid "end${a}" tag`),details:Oe(`The Liquid "${a}" is a tag block type which requires an end tag be provided.`,"For more information, see: https://shopify.dev/api/liquid/tags")},104:{code:e,message:Oe(`Syntax Error (line ${i}): Missing HTML start "${a}" tag`),details:Oe("There is an incorrect placement or an incomplete structure resulting in a parse error.",`To resolve the issue, you may need to provide a start \`<${a}>\` tag type or correct the placement. `)},110:{code:e,message:Oe(`Syntax Error (line ${i}): Missing Liquid start "${a}" tag`),details:Oe("The Liquid tag has incorrect placement or an incomplete structure resulting in a parse error.","To resolve the issue, you may need to provide a start tag type or correct the placement. ")},111:{code:e,message:Oe(`Syntax Error (line ${i}): Missing Close Delimiter "%}" or "}}" on liquid tag`),details:Oe("The Liquid tag is missing its closing delimiter resulting in malformed syntax.")},106:{code:e,message:Oe(`Syntax Error (line ${i}): Missing HTML ">" delimiter on end tag`),details:Oe("The HTML tag is missing its closing delimiter resulting in malformed syntax.",'You can have Esthetic autofix syntax errors like this by setting the markup rule "correct" to true.')},107:{code:e,message:Oe(`Illegal Syntax (line ${i}): Invalid HTML Comment Attribute`),details:Oe("HTML comments are not allowed inside tags, start or end, at all.","To resolve the issue, remove the comment or place it above the tag.","For more information see: https://html.spec.whatwg.org/multipage/syntax.html#start-tags")},103:{code:e,message:Oe(`Syntax Error (line ${i}): Invalid quotation character`),details:Oe(`Bad quotation character (\u201C, &#x201c) provided. Only single ' or double "`,"quotations characters are valid in HTML (markup) languages. For more information see:","https://html.spec.whatwg.org/multipage/parsing.html#attribute-value-(double-quoted)-state")},108:{code:e,message:Oe(`Syntax Error (line ${i}): Invalid CDATA Termination Sequence`),details:Oe("The CDATA bracket state sequence provided is invalid resulting in a parse error.","For more information see: https://html.spec.whatwg.org/multipage/parsing.html#cdata-section-bracket-state")},114:{code:e,message:Oe(`Syntax Error (line ${i}): Invalid character sequence in "${a}" token`),details:Oe("An invalid sequence of characters defined")},101:{code:e,message:Oe(`Syntax Error (line ${i}): Unterminated String`),details:Oe("There is an unterminated string sequence resulting in a parse error.")}}[e]}var lt=/\S/,Re=/^\s+$/,tt=/\s+/g,pt=/^\s+/,Fe=/\s+$/,He=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/,Mt=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/,hn=/[\t\v\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/g,Et=/^\n+/,gn=/({%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-(start|next|end)\b/,dt=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-start\b/,Xt=/^\/\/\s*esthetic-ignore-start\b/,kn=/^\/\*{1,2}(?:\s*|\n\s*\*\s*)esthetic-ignore-start\b/,mn=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!--)\s*esthetic-ignore-next\b/,ut=/^<!--+/,ct=/--+>$/,bn=/{%-?|-?%}/g,yn=/^{%-?\s*#/,Wt=/(\/|\\|\||\*|\[|\]|\{|\})/g;function At(e){let{rules:a}=r,i=[],p=[],x=e.begin.replace(Wt,Nt),l=t(e.begin[0],123)&&t(e.begin[1],37),j=new RegExp(`^(${x}\\s*esthetic-ignore-start)`),s=new RegExp(`(${x}\\s*)`),n=l?new RegExp(`\\s*${e.ender.replace(bn,g=>t(g,123)?"{%-?\\s*":"\\s*-?%}")}$`):new RegExp(e.ender.replace(Wt,Nt)),h=e.start,o=0,L=0,k=0,O=0,c=[],f=d,b=d,Y=!1,u=!1,G=!1,B=d,q=e.ender.length-1,E=e.ender.charAt(q),I=0;function ie(){if(Re.test(c[o+1])||c[o+1]===d)do o=o+1;while(o<O&&(Re.test(c[o+1])||c[o+1]===d));o<O-1&&p.push(d)}function oe(){let g=ee;h=h+1;do{if(i.push(e.chars[h]),i.slice(i.length-19).join(d)==="esthetic-ignore-end"){if(l){let A=e.chars.indexOf("{",h);if(t(e.chars[A+1],37)){let z=e.chars.slice(A,e.chars.indexOf("}",A+1)+1).join(d);n.test(z)&&(e.ender=z)}}h=h+1;break}h=h+1}while(h<e.end);o=h,q=e.begin.length-1,E=e.begin.charAt(q);do{if(e.begin==="/*"&&t(e.chars[o-1],47)&&(t(e.chars[o],42)||t(e.chars[o],47))||e.begin!=="/*"&&e.chars[o]===E&&e.chars.slice(o-q,o+1).join(d)===e.begin)break;o=o-1}while(o>e.start);if(e.begin==="/*"&&t(e.chars[o],42)?g="*/":e.begin!=="/*"&&(g=e.ender),q=g.length-1,E=g.charAt(q),g!==ee||e.chars[h]!==ee)do{if(i.push(e.chars[h]),g===ee&&e.chars[h+1]===ee||e.chars[h]===E&&e.chars.slice(h-q,h+1).join(d)===g)break;h=h+1}while(h<e.end);return e.chars[h]===ee&&(h=h-1),B=i.join(d).replace(Mt,d),[B,h]}do{if(i.push(e.chars[h]),t(e.chars[h],10)&&(r.lineOffset=r.lines(h,r.lineOffset)),e.chars[h]===E&&e.chars.slice(h-q,h+1).join(d)===e.ender)break;h=h+1}while(h<e.end);if(B=i.join(d),j.test(B)===!0)return oe();if(l===!0&&a.liquid.preserveComment||l===!1&&a.markup.preserveComment||r.lexer==="style"&&a.style.preserveComment||r.lexer==="script"&&a.style.preserveComment||a.wrap<1||h===e.end||B.length<=a.wrap&&B.indexOf(ee)<0||e.begin==="/*"&&B.indexOf(ee)>0&&B.replace(ee,d).indexOf(ee)>0&&/\n(?!(\s*\*))/.test(B)===!1)return[B,h];if(o=e.start,o>0&&F(e.chars[o-1],10)&&ue(e.chars[o-1]))do o=o-1;while(o>0&&F(e.chars[o-1],10)&&ue(e.chars[o-1]));f=e.chars.slice(o,e.start).join(d);let S=new RegExp(ee+f,"g");c=B.replace(/\r\n/g,ee).replace(S,ee).split(ee),O=c.length,c[0]=c[0].replace(s,d),c[O-1]=c[O-1].replace(n,d),O<2&&(c=c[0].split(se)),c[0]===d?c[0]=e.begin:c.splice(0,0,e.begin),O=c.length,o=0;do{if(b=o<O-1?c[o+1].replace(He,d):d,Re.test(c[o])===!0||c[o]===d)ie();else if(c[o].replace(He,d).length>a.wrap&&c[o].replace(He,d).indexOf(se)>a.wrap)c[o]=c[o].replace(He,d),L=c[o].indexOf(se),p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),o=o-1;else{if(I=o<1?a.wrap-e.begin.length+1:a.wrap,c[o]=(e.begin==="/*"&&c[o].indexOf("/*")!==0?"   ":d)+c[o].replace(He,d).replace(Mt,d).replace(tt,se),k=c[o].replace(He,d).indexOf(se),L=c[o].length,L>I&&k>0&&k<I){L=I;do if(L=L-1,ue(c[o].charAt(L))&&L<=a.wrap)break;while(L>0);/^\s*\d+\.\s/.test(c[o])===!0&&/^\s*\d+\.\s/.test(c[o+1])===!1&&c.splice(o+1,0,"1. "),Re.test(c[o+1])===!0||c[o+1]===d?(p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),Y=!0,o=o-1):/^\s*[*-]\s/.test(c[o+1])?(p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),u=!0,o=o-1):/^\s*\d+\.\s/.test(c[o+1])?(p.push(c[o].slice(0,L)),c[o]=c[o].slice(L+1),G=!0,o=o-1):c[o].replace(He,d).indexOf(se)<a.wrap&&(c[o+1]=c[o].length>a.wrap?c[o].slice(L+1)+r.crlf+c[o+1]:c[o].slice(L+1)+se+c[o+1]),Y===!1&&u===!1&&G===!1&&(c[o]=c[o].slice(0,L))}else c[o+1]!==void 0&&(c[o].length+b.indexOf(se)>a.wrap&&b.indexOf(se)>0||c[o].length+b.length>a.wrap&&b.indexOf(se)<0)?(p.push(c[o]),o=o+1):(c[o+1]!==void 0&&Re.test(c[o+1])===!1&&c[o+1]!==d&&/^\s*(?:[*-]|\d+\.)\s/.test(c[o+1]),p.push(c[o]),Y=!0);u=!1,G=!1}o=o+1}while(o<O);return p.length>0?(p[p.length-1].length>a.wrap-(e.ender.length+1)||c.length-1>p.length&&c.slice(p.length+1).forEach(g=>{g===d&&p.push(g)}),p.push(e.ender),B=p.join(r.crlf)):(c[c.length-1]=c[c.length-1]+e.ender,B=c.join(r.crlf)),[B,h]}function Rt(e){let{wrap:a}=r.rules,{preserveComment:i}=r.rules[r.lexer],p=e.start,x=0,l=d,j=[];function s(){let h=d;do if(x=x+1,t(e.chars[x+1],10))return;while(x<e.end&&ue(e.chars[x]));if(e.chars[x]+e.chars[x+1]==="//"){j=[];do j.push(e.chars[x]),x=x+1;while(x<e.end&&F(e.chars[x],10));h=j.join(d),/^\/\/ (?:[*-]|\d+\.)/.test(h)===!1&&/^\/\/\s*$/.test(h)===!1&&(l=`${l} ${h.replace(/(^\/\/\s*)/,d).replace(Fe,d)}`,p=x-1,s())}}function n(){let h=[],o={ender:-1,types:"comment",lexer:e.lexer,lines:r.lineOffset};r.count>-1?(o.begin=r.stack.index,o.stack=r.stack.token,o.token=r.data.token[r.count]):(o.begin=-1,o.stack="global",o.token=d);let L=0,k=0;if(l=l.replace(/\s+/g,se).replace(Fe,d),k=l.length,!(a>k)){do{if(L=a,F(l[L],32)){do L=L-1;while(L>0&&F(l[L],32));if(L<3){L=a;do L=L+1;while(L<k-1&&F(l[L],32))}}h.push(l.slice(0,L)),l=`// ${l.slice(L).replace(pt,d)}`,k=l.length}while(a<k);L=0,k=h.length;do o.token=h[L],r.push(r.data,o,d),o.lines=2,r.lineOffset=2,L=L+1;while(L<k)}}do j.push(e.chars[p]),p=p+1;while(p<e.end&&F(e.chars[p],10));if(p===e.end?e.chars.push(ee):p=p-1,l=j.join(d).replace(Fe,d),Xt.test(l)===!0){let h=ee;p=p+1;do j.push(e.chars[p]),p=p+1;while(p<e.end&&(F(e.chars[p-1],100)||t(e.chars[p-1],100)&&j.slice(j.length-19).join(d)!=="esthetic-ignore-end"));x=p;do;while(x>e.start&&t(e.chars[x-1],47)&&(t(e.chars[x],42)||t(e.chars[x],47)));if(t(e.chars[x],42)&&(h="*/"),h!==ee||F(e.chars[p],10))do{if(j.push(e.chars[p]),h===ee&&t(e.chars[p+1],10))break;p=p+1}while(p<e.end&&(h===ee||h==="*/"&&(t(e.chars[p-1],42)||t(e.chars[p],47))));return e.chars[p]===ee&&(p=p-1),l=j.join(d).replace(Fe,d),[l,p]}return l==="//"||i===!0?[l,p]:(l=l.replace(/(\/\/\s*)/,"// "),a<1||p===e.end-1&&r.data.begin[r.count]<1?[l,p]:(x=p+1,s(),n(),[l,p]))}var Ve=Object.assign,wn={global:{preset:{description:"Use preset style guide as the base defaults",default:"default",type:"choice",values:[{rule:"default",description:"This is the default and the most unobtrusive."},{rule:"recommended",description:"This style guide is typically suited for most cases"},{rule:"strict",description:"This is a strict ruleset curated by the projects author."},{rule:"warrington",description:"This style guide preset is best suited for Shopify theme developers"},{rule:"prettier",description:"This preset replicates the Prettier style"}]},correct:{default:!1,description:"Automatically correct some sloppiness in code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},crlf:{description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},endNewline:{description:"Insert an empty line at the end of output.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},indentSize:{description:"The number of character values to comprise a single indentation.",type:"number",default:2,preset:{default:2,prettier:2,recommended:2,strict:2,warrington:2}},indentChar:{description:"The string characters to comprise a single indentation. Any string combination is accepted.",type:"string",default:" ",preset:{default:" ",prettier:" ",recommended:" ",strict:" ",warrington:" "}},indentLevel:{default:0,type:"number",description:"How much indentation padding should be applied to beautification? This is typically used internally",preset:{default:0,prettier:0,recommended:0,strict:0,warrington:0}},language:{description:"The language name",type:"choice",default:"auto",values:[{rule:"auto",description:"Detect Language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",type:"number",preset:{default:2,prettier:2,recommended:3,strict:1,warrington:3}},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",type:"number",preset:{default:0,prettier:80,recommended:120,strict:0,warrington:100}},wrapFraction:{default:0,description:"Wrap fraction is used on internal structures as a secondary point of control. By default, it will use a 75% metric according to `wrap` defined values.",type:"number",preset:{default:0,prettier:80,recommended:80,strict:80,warrington:0}}},liquid:{commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},delimiterTrims:{default:"preserve",description:"How delimiter whitespace trim dashes should handled on Liquid tokens. You should avoid setting this to force in order to avoid stripping whitespace between text content.",type:"choice",values:[{rule:"preserve",description:"All trim dash occurances of trims intact"},{rule:"never",description:"Removes all trim dash occurances for tags and output tokens"},{rule:"always",description:"Applies trime dashes to all tags and output tokens"},{rule:"tags",description:"Applies trim dashes to tags tokens only"},{rule:"outputs",description:"Applies trim dashes to output object tokens only"},{rule:"multiline",description:"Applies trim dashes to multline token expressions only"}],preset:{default:"preserve",prettier:"preserve",recommended:"preserve",strict:"multiline",warrington:"preserve"}},ignoreTagList:{default:[],description:"A list of liquid tag to ignore",type:"array",preset:{default:[],prettier:["javascript","capture"],recommended:["javascript"],strict:[],warrington:[]}},indentAttribute:{default:!1,description:"Whether or not markup tags with Liquid contained attributes should apply indentation",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!1,warrington:!0}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},normalizeSpacing:{default:!0,description:"Whether or not to normalize the distributed spacing contained in Liquid tokens.",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!0,warrington:!0}},lineBreakSeparator:{default:"default",description:"Controls the placement of Liquid tag separator type characters in newline structures.",type:"choice",values:[{rule:"preserve",description:"Leave line break character intace"},{rule:"before",description:"Place line break character at the start of expressions"},{rule:"after",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"after",recommended:"before",strict:"before",warrington:"after"}},dedentTagList:{default:[],description:"List of tags which will have their inner contents excluded from indentation",type:"array",preset:{default:[],prettier:["schema"],recommended:[],strict:[],warrington:[]}},forceArgument:{default:0,description:"Forces arguments onto newlines. When this value is `0` then arguments will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:3,strict:3,warrington:0}},forceFilter:{default:0,description:"Forces filter pipes onto newlines. When this value is `0` then filters will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:5,strict:4,warrington:0}},delimiterPlacement:{default:"preserve",description:"Controls the placement of Liquid delimiters",type:"choice",values:[{rule:"preserve",description:"Preserve delimiters"},{rule:"default",description:"Use defaults"},{rule:"consistent",description:"Place line break character at the start of expressions"},{rule:"inline",description:"Place line break character at the end of expressions"},{rule:"force-inline",description:"Place line break character at the end of expressions"},{rule:"force-multiline",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"default",recommended:"consistent",strict:"force-multiline",warrington:"consistent"}},preserveInternal:{default:!1,description:"Whether or not to preserve the inner contents of tokens",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"single",strict:"single",warrington:"single"}}},markup:{attributeSort:{default:!1,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",type:{array:"A list of attributes to begin sorting order with",boolean:"Whether or not to apply alphanumeric sorting"},preset:{default:!1,prettier:!1,recommended:!0,strict:["id","class","type","name","value"],warrington:!1}},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"choice",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}],preset:{default:"preserve",prettier:"preserve",recommended:"lowercase-name",strict:"lowercase-name",warrington:"preserve"}},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!1}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},delimiterTerminus:{description:"Whether or not ending HTML tag delimiters should be forced onto a newline. This will emulate the style of Prettier's singleAttributePerLine formatting option, wherein the last > delimiter character breaks itself onto a new line",default:"inline",type:"choice",values:[{rule:"inline",description:"Inline the ending delimiter"},{rule:"force",description:"Force the ending delimiter onto its own line"},{rule:"adapt",description:"adapt the delimiter in accordance with structure"}],preset:{default:"inline",prettier:"force",recommended:"adapt",strict:"adapt",warrington:"adapt"}},forceAttribute:{default:!1,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",type:{number:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact.",boolean:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."},preset:{default:!1,prettier:1,recommended:2,strict:2,warrington:2}},forceIndent:{default:!1,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},ignoreJS:{default:!0,description:"Whether to ignore embedded regions of tags identified to contain JavaScript",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!1,warrington:!1}},ignoreCSS:{default:!1,description:"Whether to ignore embedded regions of tags identified to contain CSS",type:"boolean",preset:{default:!1,prettier:!0,recommended:!1,strict:!1,warrington:!1}},ignoreJSON:{default:!1,description:"Whether HTML <script> tags annotated with a JSON identifiable attribute should be ignored from beautification.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveAttribute:{default:!1,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveText:{default:!1,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},lineBreakValue:{default:"preserve",description:"Determines how \xC6sthetic should handle line break occurance sequences within attribute values",type:"choice",values:[{rule:"preserve",description:"Preserve the supplied value structure sequences"},{rule:"align",description:"Align all line breaks to the starting point of attribute name"},{rule:"indent",description:"Indent all line breaks from the starting point of attribute name"},{rule:"force-preserve",description:"Force encapsulated values onto newlines but preserve inner contents"},{rule:"force-align",description:"Force encapsulated values onto newlines and apply aligned formatting"},{rule:"force-indent",description:"Force encapsulated values onto newlines and apply indentation formatting"}],preset:{default:"preserve",prettier:"indent",recommended:"force-indent",strict:"force-indent",warrington:"force-indent"}},selfCloseSpace:{default:!1,description:'Markup self-closing tags end will end with " />" instead of "/>".',type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},selfCloseSVG:{default:!0,description:"Whether or not SVG type tags should be converted to self closing void types.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},stripAttributeLines:{default:!1,description:"Whether or not newlines contained within tag attributes should be removed or preserved.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"double",strict:"double",warrington:"double"}}},style:{classPadding:{description:"Inserts new line characters between every CSS code block.",default:!1,type:"boolean"},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},sortSelectors:{default:!1,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code."},sortProperties:{description:"This option will alphabetically sort CSS properties contained within classes.",default:!1,type:"boolean"},noLeadZero:{description:"This will eliminate leading zeros from numbers expressed within values.",default:!1,type:"boolean"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},atRuleSpace:{default:!0,description:"Insert a single whitespace character betwen @ rules.",type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},json:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"}},script:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},braceNewline:{default:!1,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"choice",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},caseSpace:{default:!1,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code."},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},elseNewline:{default:!1,type:"boolean",description:'If keyword "else" is forced onto a new line.'},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"choice",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{default:!0,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{default:!0,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},ternaryLine:{description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:!1},neverFlatten:{default:!0,description:"If destructured lists in script should never be flattend.",type:"boolean"},noCaseIndent:{description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:!1,type:"boolean"},noSemicolon:{description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:!1,type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},variableList:{description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each \u2014 Ensure each reference is a single declaration statement.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:!1}}};function gt(e,a,i){if(a==="html"){if(!(e in je.html.embed))return!1;let p=je.html.embed[e];if(p.attr.size>0)for(let x of p.attr.values()){if(!i)return x;if(x.attr.has(i[0])&&x.attr.get(i[0]).value.has(i[1]))return x.attr.get(i[0])}return p.attr.has(i[0])?p.attr.get(i[0]).attr.has(i[1])?p.attr.get(i[0]).attr.get(i[1]):p.attr.get(i[0]):p}else if(a==="liquid"){if(!(e in je.liquid.embed))return!1;let p=je.liquid.embed[e];if(p.args.size>0&&i){let x=i.slice(i.indexOf(e)+e.length).match(/\s*(.*)(?=\s)/)[0];for(let[l,j]of p.args){if(l.has(x))return j;for(let s of l)if(s instanceof RegExp&&s.test(x))return j}}return p}}function xn(e,a){return typeof a<"u"?e in je[a].embed:e in je.html.embed||e in je.liquid.embed}function vn(e,a){let i=t(e[2],45)?3:2,p=e.slice(i),x;return a.delimiterTrims==="never"?x=`{${e[1]}`:a.delimiterTrims==="always"||a.delimiterTrims==="outputs"&&t(e[1],123)||a.delimiterTrims==="tags"&&t(e[1],37)?x=`{${e[1]}-`:x=e.slice(0,i),a.delimiterPlacement==="preserve"?x+=/^\s*\n/.test(p)?ee:se:a.delimiterPlacement==="force"?x+=ee:a.delimiterPlacement==="inline"||a.delimiterPlacement==="default"||a.delimiterPlacement==="force-multiline"?x+=se:a.delimiterPlacement==="consistent"&&(/^\s*\n/.test(p)?x+=ee:x+=se),x+p.trim()}function en(e,a,i){let[p,x]=tn(e),l,j=e.slice(p,x),s;return i.delimiterTrims==="never"?(l=`{${e[1]}`,s=`${e[e.length-2]}}`):i.delimiterTrims==="always"||i.delimiterTrims==="outputs"&&t(e[1],123)||i.delimiterTrims==="tags"&&t(e[1],37)?(l=`{${e[1]}-`,s=`-${e[e.length-2]}}`):(l=e.slice(0,p),s=e.slice(x)),a||(a=j.trimStart().split(/\s/)[0]||""),a==="else"||a==="break"||a==="continue"||a==="increment"||a==="decrement"||a.startsWith("end")?(l+=se,s=se+s):i.delimiterPlacement==="preserve"?(l+=/^\s*\n/.test(j)?ee:se,s=(/\s*\n\s*$/.test(j)?ee:se)+s):i.delimiterPlacement==="force"?(l+=ee,s=ee+s):i.delimiterPlacement==="inline"||i.delimiterPlacement==="default"||i.delimiterPlacement==="force-multiline"?(l+=se,s=se+s):i.delimiterPlacement==="consistent"&&(/^\s*\n/.test(j)?(l+=ee,s=ee+s):(l+=se,s=se+s)),j=j.trim(),l+j+s}function jn(e,a,i,{wrapFraction:p,liquid:{forceFilter:x,forceArgument:l,lineBreakSeparator:j,delimiterTrims:s,delimiterPlacement:n,preserveInternal:h}}){let[o,L]=tn(e),k,O;if(s==="never"?(k=`{${e[1]}`,O=`${e[e.length-2]}}`):s==="always"||s==="outputs"&&t(e[1],123)||s==="tags"&&t(e[1],37)?(k=`{${e[1]}-`,O=`-${e[e.length-2]}}`):s==="preserve"?(k=e.slice(0,o).join(d),O=e.slice(L).join(d)):(k=`{${e[1]}`,O=`${e[e.length-2]}}`),a==="else"||a==="break"||a==="continue"||a==="increment"||a==="decrement"||a.startsWith("end"))return k+=se,O=se+O,k+e.slice(o,L).join(d).trim()+O;if(n==="preserve"?(k+=t(e[o],10)?ee:se,O=(t(e[L-1],10)?ee:se)+O):n==="force"?(k+=ee,O=ee+O):n==="inline"||n==="default"?(k+=se,O=se+O):n==="consistent"&&t(e[o],10)?(k+=ee,O=ee+O):(k+=se,O=se+O),a==="liquid"||h===!0)return k+e.slice(o,L).join(d).trim()+O;if(p>0&&e.length>=p&&i.logic.length>0&&(a==="if"||a==="elsif"||a==="unless"||a==="when")){s==="multiline"&&(k=`{${e[1]}-`+k[k.length-1],O=O[0]+`-${e[e.length-2]}}`),n==="force-multiline"&&(k=k.trimEnd()+ee,O=ee+O.trimStart());let f=i.logic.length;for(let b=0;b<f;b++){let Y=i.logic[b];e[Y]=ee+e[Y],t(e[Y-1],32)&&(e[Y-1]=d)}return k+e.slice(o,L).join(d).trim()+O}let c=i.pipes.length;if(c>0){if(x>0&&c>x||x===0&&p>0&&e.length>p){s==="multiline"&&(k=`{${e[1]}-`+k[k.length-1],O=O[0]+`-${e[e.length-2]}}`),n==="force-multiline"&&(k=k.trimEnd()+ee,O=ee+O.trimStart());for(let f=0;f<c;f++){let b=i.pipes[f];if(t(e[b-1],32)&&(e[b-1]=d),e[b]=ee+e[b],f===0){let Y=b-1;if(t(e[Y-1],32))do e[Y--]=d;while(t(e[Y],32))}if(i.fargs[f]&&(l>0&&i.fargs[f].length>l||l===0&&p>0&&e.slice(i.fargs[f][0],i.fargs[f][i.fargs[f].length-1]).length>p)){let Y=i.fargs[f].length;for(let u=0;u<Y;u++){let G=i.fargs[f][u];j==="after"?e[t(e[G-1],44)?G-1:G]=u===0?ee+"  ":Je+ee+" ":j==="before"?t(e[G-1],44)?e[G-1]=u===0?"  "+ee:ee+"  "+Je:e[G]=u===0?ee+"  ":ee+"  "+Je:e[G]=ee+"  "+e[G]}}}}return k+e.slice(o,L).join(d).trim()+O}if(i.targs.length>=l){s==="multiline"&&(k=`{${e[1]}-`+k[k.length-1],O=O[0]+`-${e[e.length-2]}}`);for(let f=0;f<i.targs.length;f++){let b=i.targs[f];j==="after"?(t(e[b+1],32)&&(e[b+1]=d),t(e[b-1],32)&&(e[b-1]=d),e[b]=t(e[b],44)?Je+ee:ee):j==="before"&&(t(e[b-1],44)?e[b-1]=ee+Je:e[b]=ee+Je)}}return k+e.slice(o,L).join(d).trim()+O}function tn(e){return[t(e[2],45)?3:2,t(e[e.length-3],45)?e.length-3:e.length-2]}function qn(e,a=!0){return a?new RegExp(`{%-?\\s*${e}\\s*-?%}`):new RegExp(`{%-?\\s*${e}`)}function On(e){let a=e.indexOf("{");return t(e[a+1],123)}function Dt(e){let a=e.indexOf("{");if(t(e[a+1],37)){let i;return i=e.slice(a+(t(e[a+2],45)?3:2)).trimStart(),i=i.slice(0,i.search(/[\s=|!<>,.[]|-?[%}]}/)),i.startsWith("end")?!1:je.liquid.else.has(i)}return!1}function $n(e){let a=e.indexOf("=");return a>-1&&(t(e[a+1],34)||t(e[a+1],39))?/{%-?\s*end[a-z]+/.test(e.slice(a,e.lastIndexOf(e[a+1]))):!1}function Jt(e){return nt(e)?/{%-?\s*end\w+/.test(e):!1}function nt(e,a=!1){let i;if(a)return t(e[0],123)&&t(e[1],37)&&t(e[e.length-2],37)&&t(e[e.length-1],125)?(i=e.slice(t(e[2],45)?3:2).trimStart(),t(i,34)||t(i,39)?!1:(i=i.slice(0,i.search(/[\s=|!<"'>,.[]|-?[%}]}/)),i.startsWith("end")?!1:je.liquid.tags.has(i))):!1;let p=e.indexOf("{");if(p===-1)return!1;do{if(t(e[p+1],37))return i=e.slice(p+(t(e[p+2],45)?3:2)).trimStart(),i=i.slice(0,i.search(/[\s=|!<>,.[]|-?[%}]}/)),i.startsWith("end")?!1:je.liquid.tags.has(i);p=e.indexOf("{",p+1)}while(p>-1);return!1}function kt(e){let a=e;Array.isArray(e)&&(a=e.join(d));let i=a.indexOf("{");return t(a[i+1],37)?t(a[i+2],45)?a.slice(i+3).trimStart().startsWith("end"):a.slice(i+2).trimStart().startsWith("end"):!1}function mt(e,a){if(a===1)return t(e[0],123)&&(t(e[1],37)||t(e[1],123));if(a===6)return t(e[0],123)&&t(e[1],37);if(a===7)return t(e[0],123)&&t(e[1],123);if(a===8)return t(e[e.length-2],37)&&t(e[e.length-1],125);if(a===9)return t(e[e.length-2],125)&&t(e[e.length-1],125);if(a===4)return/{[{%]/.test(e);if(a===5)return/{[{%]/.test(e)&&/[%}]}/.test(e);if(a===2){let i=e.length;return t(e[i-1],125)&&(t(e[i-2],37)||t(e[i-2],125))}else if(a===3){let i=e.length;return t(e[0],123)&&(t(e[1],37)||t(e[1],123))&&t(e[i-1],125)&&(t(e[i-2],37)||t(e[i-2],125))}}function nn(e){let{data:a,rules:i}=r,p=e||r.source,x=r.language==="jsx"||r.language==="tsx",l=new Set(i.liquid.ignoreTagList),j=Ae(i.markup.attributeSort)?i.markup.attributeSort.length:-1,s=Ae(p)?p:p.split(d),n=s.length,h={start:-1,tname:[],index:[]},o=0,L,k=!1,O=nn?r.language:"html",c=0;function f(S,g=d,A){if(g===d&&A===void 0)r.push(a,S,d);else if(Ot(g))Ve(S,g),r.push(a,S,d);else if(Ae(g))for(let z of g)Ve(S,z),r.push(a,S,d);else A?(Ve(S,A),r.push(a,S,g)):console.log("isssue")}function b(S,g=null){return r.language!=="html"&&r.language!=="liquid"&&x===!1||/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(S)||!mt(S,3)?S:en(S,g,i.liquid)}function Y(S,g=d){if(S<1)return g;let A=d,z=s.lastIndexOf(ee,S);return z>-1&&(A=p.slice(z+1,S),A.length>0&&A.trim().length<1)?g?A+g:A:g}function u(S,g=s){let A=S,z=1;for(;t(g[A++],10);)z=z+1;return z}function G(S,g=-1,A=!1){return A===!1?p.slice(S,g).trimStart():p.slice(S,g)}function B(S){let g=S;do g=g-1;while(t(s[g],92));return g=S-g,g%2===1}function q(S){return i.correct===!1||t(S[S.length-2],47)?S:/\/\s+>$/.test(S)?`${S.slice(0,S.lastIndexOf("/"))}${i.markup.selfCloseSpace?"/>":" />"}`:`${S.slice(0,-1)}${i.markup.selfCloseSpace?"/>":" />"}`}function E(S,g=!0){let A=S.indexOf("=");if(A>0){let z=S.indexOf(Se);if(A<z&&z>0)return g?[S.slice(0,A),S.slice(A+1)]:[S.slice(0,A),S.slice(A+2,-1)];let V=S.indexOf(Ce);if(A<V&&V>0)return g?[S.slice(0,A),S.slice(A+1)]:[S.slice(0,A),S.slice(A+2,-1)]}return[S,d]}function I(S){let g={lexer:"markup",lines:r.lineOffset,stack:r.stack.token!=="global"?r.stack.token:"global",begin:r.stack.index,token:d,types:d,ender:-1},A=d,z=d,V=d,ne=d,ye=d,xe=!1,_=!1,W=0,te=!1,H=!1,K=!1,fe=!1,D=[];function le(){return ae()}function ve(){if(g.types.indexOf("liquid")<0)return le();if(g.token===d&&(g.token=A),t(A[0],123)&&t(A[1],37))if(je.liquid.else.has(ne))g.types=V=ne==="when"?"liquid_when":"liquid_else";else if(je.liquid.tags.has(ne))g.types=V="liquid_start";else if(ne.startsWith("end")){let v=ne.slice(3);if(je.liquid.tags.has(v))g.types=V="liquid_end";else{g.stack=v,g.types=V="liquid_end";let N=0;do{if(a.types[N]==="liquid"&&a.stack[N]===v){a.types[N]="liquid_start";break}N=a.stack.indexOf(v,N+1)}while(N>-1)}}else g.stack=ne;return i.liquid.quoteConvert==="double"?g.token=A=g.token.replace(/"[^']*?"/g,Ft(Se)):i.liquid.quoteConvert==="single"&&(g.token=A=g.token.replace(/'[^"]*?'/g,Ft(Ce))),le()}function M(){let v=A.indexOf("liquid")+6,N=d,T=d,P=1;f(g,{token:vn(A.slice(0,v),i.liquid),types:"liquid_start",stack:"liquid"});let U=A.slice(v).split(ee),de=U.pop().trim(),ce=t(de[de.length-3],45)?de.length-3:de.length-2,ke=de.slice(0,ce),re=de.slice(ce);ke.length!==0&&U.push(ke),v=0;do N=U[v].trim(),T=N.split(/\s/)[0],T.startsWith("end")?(g.token=N,g.types="liquid_end",g.lines=P,f(g),P=1):T.startsWith("#")?(g.token=N,g.types="liquid",g.lines=P<=1?2:P,f(g),P=1):T.startsWith("comment")||je.liquid.tags.has(T)?(g.token=N,g.types="liquid_start",g.lines=P,f(g),P=1):je.liquid.else.has(T)?(g.token=N,g.types=T==="when"?"liquid_when":"liquid_else",g.lines=P,f(g),P=1):je.liquid.singleton.has(T)?(g.token=N,g.types="liquid",g.lines=P<=1?2:P,f(g),P=1):N.trim().length>0&&(g.token=N,g.types="content",g.lines=P,f(g),P=1),v=v+1,P=P+1;while(v<U.length);f(g,{token:re,types:"liquid_end",lines:2})}function Z(){if(ne==="svg"&&(h.start=r.count+1),je.svg.tags.has(ne)&&h.start>0){if(g.types==="start")g.types="singleton",h.tname.push(ne),h.index.push(r.count+1);else if(g.types==="end"){let v=h.tname.indexOf(ne),N=h.tname.lastIndexOf(ne);v>-1&&(N===v?(a.types[h.index[N]]="start",h.tname.splice(N,1),h.index.splice(N,1)):a.begin[r.count]===h.index[v]?(a.types[a.begin[r.count]]="start",h.tname.splice(v,1),h.index.splice(v,1)):a.types[h.index[N]]="start"),ne==="svg"&&(h.start=-1)}}return ve()}function w(){return fe&&_===!1&&V!=="xml"&&(je.html.voids.has(ne)?(g.types=V="singleton",F(A[A.length-2],47)&&(g.token=q(A))):t(A[A.length-2],47)&&t(A[A.length-1],62)?g.types=V="singleton":g.types=V="start"),Z()}function Q(){if(r.count<1)return w();let v=d;if(mn.test(a.token[r.count])){if(je.html.voids.has(ne))return g.token=A.replace(">",D.map(([N])=>N).join(se)+">"),g.types="ignore",f(g);V.indexOf("liquid")>-1&&je.liquid.tags.has(ne)&&(v=`end${ne}`),_=!0,K=!1}else xn(ne,"liquid")&&l.has(ne)&&(v=null);if(v!==null&&K===!1&&_===!0&&(S===">"||S==="}}"||S==="%}")){let N=[];if(K=!0,o=o+1,o<n){V!=="json_preserve"&&V!=="script_preserve"&&V!=="style_preserve"&&V!=="liquid_json_preserve"&&V!=="liquid_script_preserve"&&V!=="liquid_style_preserve"&&(V="ignore");let T=d,P=0,U=-1,de=d,ce=0,ke=0,re=!1;do{if(t(s[o],10)&&r.lines(o),N.push(s[o]),T===d){if(T=t(s[o],34)?Se:t(s[o],39)?Ce:d,t(s[o],123)&&(t(s[o+1],123)||t(s[o+1],37))){if(U=t(s[o+1],37)?s.indexOf("}",o)+1:s.indexOf("}",o)+2,de=G(t(s[o+2],45)?o+3:o+2,U),de.startsWith(ne))P=P+1;else if(de.startsWith(v)){if(P>0)P=P-1;else if(t(s[o+1],123)&&(U=U+1),t(s[U-2],37)){N.push(...s.slice(o+1,U)),V="liquid_ignore",o=U-1;break}}}else if(t(s[o],60)&&fe===!0)re=t(s[o+1],47);else if(s[o]===z&&F(s[o-1],47))if(re===!0){if(W=W-1,W<0)break}else W=W+1}else if(t(s[o],T.charCodeAt(T.length-1))){if(ke=0,ce=T.length-1,t(T[ce],125)){if(G(o+(t(s[o+2],45)?3:2),s.indexOf("%",o+2)).startsWith(v))break}else if(ce>-1)do{if(F(s[o-ke],T.charCodeAt(ce)))break;ke=ke+1,ce=ce-1}while(ce>-1);ce<0&&(T=d)}o=o+1}while(o<n)}if(V==="ignore"){r.is("types","ignore")||(a.types[r.count]="ignore");let T=r.iterator+s.slice(r.iterator,o).join(d).search(lt),P=Y(T);P===d&&(P=a.token[r.count].search(lt)>0?ft(a.token[r.count].search(lt)):d),D=[],A=P+s.slice(T,o-N.length+1).join(d)+N.join(d),g.types="ignore",g.token=A}else if(V==="liquid_ignore")r.is("types","ignore")||(a.types[r.count]="ignore"),A=Y(o-A.length-N.length+1,A)+N.join(d),V="ignore",g.types="ignore",g.token=A;else if(!V.startsWith("liquid_")){g.types="start",ae(!0);let T=N.lastIndexOf("<"),P=N.slice(0,T).join(d);return lt.test(P)?f(g,[{lexer:"markup",types:V,token:P},{lexer:"markup",types:"end",token:N.slice(T).join(d).trim()}]):f(g,[{lexer:"markup",types:"end",token:N.slice(T).join(d).trim()}]),k=!1,L=O,J()}}return w()}function X(){if(t(A,60)&&t(A[1],47))return Q();let v=D.length-1;if(t(A,60))if(v>-1)do{let N=gt(ne,"html",E(D[v][0],!1));if(N!==!1)if(N.language==="json"&&i.markup.ignoreJSON){V="json_preserve",_=!0;break}else if(N.language==="javascript"&&i.markup.ignoreJS){V="script_preserve",_=!0;break}else if(N.language==="css"&&i.markup.ignoreCSS){V="style_preserve",_=!0;break}else{L=N.language,V="start",k=!0,_=!1;break}v=v-1}while(v>-1);else{let N=gt(ne,"html");N!==!1&&(N.language==="json"&&i.markup.ignoreJSON?(V="json_preserve",_=!0):N.language==="javascript"&&i.markup.ignoreJS?(V="script_preserve",_=!0):N.language==="css"&&i.markup.ignoreCSS?(V="style_preserve",_=!0):(L=N.language,V="start",k=!0,_=!1))}else if(nt(A,!0)){let N=gt(ne,"liquid",A);if(N!==!1){if(l.has(ne))return _=!0,K=!1,Q();k=!0,L=N.language}}return Q()}function ae(v=!1){v!==null&&f(g);let N=r.count,T=ne.replace(/\/$/,d),P=i.markup.quoteConvert,U=0,de=0,ce=0,ke=d,re=d,R=D.length;function Te(){r.attributes.has(N)&&U+1===R&&Tt(g.token,62)&&(g.token=g.token+">");let ge=g.types.indexOf("liquid_attribute")>-1;if(_===!0||P==="none"||g.types.indexOf("attribute")<0||ge===!1&&P==="single"&&g.token.indexOf(Se)<0||ge===!1&&P==="double"&&g.token.indexOf(Ce)<0)f(g);else{let qe=0,Ne=!1,we=g.token.split(d),pe=g.token.indexOf("="),Xe=we.length-1;if(F(we[pe+1],34)&&F(we[we.length-1],34)&&P==="single"&&ge===!1)f(g);else if(F(we[pe+1],39)&&F(we[we.length-1],39)&&P==="double"&&ge===!1)f(g);else{if(qe=pe+2,ge===!1&&(P==="double"?(g.token.slice(pe+2,Xe).indexOf(Se)>-1&&(Ne=!0),we[pe+1]=Se,we[we.length-1]=Se):P==="single"&&(g.token.slice(pe+2,Xe).indexOf(Ce)>-1&&(Ne=!0),we[pe+1]=Ce,we[we.length-1]=Ce)),Ne===!0||ge===!0){ge=!1;do t(we[qe-1],123)&&(t(we[qe],37)||t(we[qe],123))?ge=!0:t(we[qe],125)&&(t(we[qe-1],37)||t(we[qe-1],125))&&(ge=!1),ge===!0?t(we[qe],34)&&P==="double"?we[qe]=Ce:t(we[qe],39)&&P==="single"&&(we[qe]=Se):t(we[qe],39)&&P==="double"?we[qe]=Se:t(we[qe],34)&&P==="single"&&(we[qe]=Ce),qe=qe+1;while(qe<Xe)}g.token=we.join(d),f(g)}}}function me(){if(!(!x&&!te&&!H))return;if(j===0){D=Pt(D,d,!1);return}let ge=[];ce=0,de=0,R=D.length;do{de=0;do{if(ke=D[de][0].split("=")[0],i.markup.attributeSort[ce]===ke){ge.push(D[de]),D.splice(de,1),R=R-1;break}de=de+1}while(de<R);ce=ce+1}while(ce<j);D=Pt(D,d,!1),D=ge.concat(D),R=D.length}function be(){f(g,"jsx_attribute",{token:`${ke}={`,types:"jsx_attribute_start"}),r.external("jsx",re.slice(1,re.length-1)),g.begin=r.count,/\s\}$/.test(re)?(re=re.slice(0,re.length-1),re=Fe.exec(re)[0],g.lines=re.indexOf(`
`)<0?1:re.split(`
`).length):g.lines=0,g.begin=r.stack.index,g.stack=r.stack.token,g.token="}",g.types="jsx_attribute_end",Te()}function Ie(){if(Jt(D[U][0]))g.types="liquid_attribute_chain",g.token=D[U][0];else if(kt(D[U][0]))g.token=D[U][0],g.types="liquid_attribute_end",g.ender=g.begin;else{if(nt(D[U][0],!0))return g.types="liquid_attribute_start",g.begin=r.count,g.token=D[U][0],Te(),!0;Dt(D[U][0])?(g.types="liquid_attribute_else",g.token=D[U][0]):(g.types="attribute",g.token=D[U][0])}return Te(),!1}if(D.length<1)return v!==!0?void 0:J();if(t(D[D.length-1][0],47)&&(D.pop(),A=A.replace(/>$/,"/>")),de=D.length,ce=1,ce<de)do ke=D[ce-1][0],t(ke[ke.length-1],61)&&D[ce][0].indexOf("=")<0&&(D[ce-1][0]=ke+D[ce][0],D.splice(ce,1),de=de-1,ce=ce-1),ce=ce+1;while(ce<de);if((j>0||i.markup.attributeSort===!0)&&me(),g.begin=N,g.stack=T,g.types="attribute",U<R)do{if(D[U]===void 0)break;if(g.lines=D[U][1],D[U][0]=D[U][0].replace(Fe,d),x===!0&&/^\/[/*]/.test(D[U][0])){g.types="comment_attribute",g.token=D[U][0],Te(),U=U+1;continue}if(D[U][1]<=1&&Jt(D[U][0])&&!$n(D[U][0])){g.types="liquid_attribute_chain",g.token=D[U][0],Te(),U=U+1;continue}de=D[U][0].indexOf("="),ce=D[U][0].indexOf(Se),de<0?(kt(D[U][0])?(g.token=D[U][0],g.types="liquid_attribute_end",g.ender=g.begin):nt(D[U][0],!0)?(g.types="liquid_attribute_start",g.begin=r.count,g.token=D[U][0]):Dt(D[U][0])?(g.types="liquid_attribute_else",g.token=D[U][0]):On(D[U][0])?(g.types="liquid_attribute",g.token=D[U][0]):t(D[U][0],35)||t(D[U][0],91)||t(D[U][0],123)||t(D[U][0],40)||x===!0?g.token=D[U][0]:(g.types="liquid_attribute",g.token=i.markup.attributeCasing==="preserve"?D[U][0]:D[U][0].toLowerCase()),Te()):mt(D[U][0],6)?Ie():(ke=D[U][0].slice(0,de),/\n/.test(D[U][0])&&(i.markup.lineBreakValue==="force-preserve"||i.markup.lineBreakValue==="force-indent"||i.markup.lineBreakValue==="force-align")?re=D[U][0][de+1]+ee+D[U][0].slice(de+2,-1).trim()+ee+D[U][0][D[U][0].length-1]:re=D[U][0].slice(de+1),i.markup.attributeCasing==="lowercase-name"?(ke=ke.toLowerCase(),D[U][0]=ke+"="+re):i.markup.attributeCasing==="lowercase-value"?(re=re.toLowerCase(),D[U][0]=ke+"="+re):(i.markup.attributeCasing==="lowercase"&&(ke=ke.toLowerCase(),re=re.toLowerCase()),D[U][0]=ke+"="+re),i.correct===!0&&F(re,60)&&F(re,123)&&F(re,61)&&F(re,34)&&F(re,39)&&(re=Se+re+Se),x===!0&&/^\s*{/.test(re)?(be(),g.types="attribute",g.begin=N,g.stack=T):mt(ke,6)?Ie():(g.types="attribute",g.token=D[U][0],Te())),U=U+1}while(U<R);if(!v)return J()}function $(v,N){if(v=v.trimStart().split(/\s/)[0],v==="comment"||l.has(v)){let T=p.indexOf("{%",N),P=T;s[T+1].charCodeAt(0)===45&&(P=T+1),P=p.indexOf(`end${v}`,P),P>0&&(P=s.indexOf("}",P),P>0&&s[P-1].charCodeAt(0)===37&&(v!=="comment"?(V="ignore",_=!0,ye=p.slice(o,N+1),S=p.slice(T,P+1)):(V="comment",ye=p.slice(o,N+1),T=p.lastIndexOf("{%",P),S=p.slice(T,P+1))))}}function y(v){r.iterator=o;let N=At({chars:s,end:n,lexer:"markup",begin:ye,start:o,ender:S});if(A=N[0],o=N[1],gn.test(A))if(dt.test(A)){let T;A.startsWith("<!--")?T=A.indexOf("-->")+3:yn.test(A)?T=A.indexOf("%}")+2:T=A.indexOf("%}",A.indexOf("%}")+2)+2,f(g,[{token:Y(r.iterator,A.slice(0,T)),types:"ignore"},{token:A.slice(T).replace(Et,d),types:"ignore",lines:u(T,A)}])}else f(g,{token:Y(r.iterator,A),types:"ignore"}),r.iterator=o+1;else{if(t(A[0],123)&&t(A[1],37)&&v===!1){let T=A.indexOf("%}",2)+2,P=A.lastIndexOf("{%");A=b(A.slice(0,T),ne)+A.slice(T,P)+b(A.slice(P),ne)}return g.token=A,g.types="comment",X()}}function m(v){let N=o,T=o+v;do{if(t(s[T],62))return o=T,p.slice(N,T+1);T=T+1}while(T<n)}function C(){if(S==="---")ye="---",V="ignore",K=!0;else if(t(s[o],60))if(t(s[o+1],123)&&(t(s[o+2],123)||t(s[o+2],37))){let v=m(3);xe=!0,r.stack.push(["liquid_bad",r.count]),f(g,{token:v,types:"liquid_start_bad"});return}else if(t(s[o+1],47))if(t(s[o+2],123)&&(t(s[o+3],123)||t(s[o+3],37))){let v=m(3);f(g,{token:v,types:"liquid_end_bad"});return}else V="end",S=">";else t(s[o+1],33)?(t(s[o+2],100)||t(s[o+2],68))&&(t(s[o+3],111)||t(s[o+3],79))&&(t(s[o+4],99)||t(s[o+4],67))&&(t(s[o+5],116)||t(s[o+5],84))&&(t(s[o+6],121)||t(s[o+6],89))&&(t(s[o+7],112)||t(s[o+7],80))&&(t(s[o+8],101)||t(s[o+8],69))?(S=">",V="doctype",K=!0):t(s[o+2],45)&&t(s[o+3],45)?(S="-->",ye="<!--",V="comment"):t(s[o+2],91)&&s[o+3].charCodeAt(0)===67&&s[o+4].charCodeAt(0)===68&&s[o+5].charCodeAt(0)===65&&s[o+6].charCodeAt(0)===84&&s[o+7].charCodeAt(0)===65&&t(s[o+8],91)&&(S="]]>",V="cdata",K=!0):t(s[o+1],63)?(S="?>",s[o+2].charCodeAt(0)===120&&s[o+3].charCodeAt(0)===109&&s[o+4].charCodeAt(0)===109?(V="xml",fe=!0):(K=!0,V="liquid")):t(s[o+1],112)&&t(s[o+2],114)&&t(s[o+3],101)&&(t(s[o+4],62)||ue(s[o+4]))?(S="</pre>",V="ignore",K=!0):(fe=!0,S=">");else if(t(s[o],123)){if(x){k=!0,xe=!0,r.stack.push(["script",r.count]),f(g,{token:"{",types:"script_start"});return}if(t(s[o+1],123))K=!0,S="}}",V="liquid";else if(t(s[o+1],37)){K=!0,S="%}",V="liquid";let v=s.indexOf("}",o+2);if(t(s[v-1],37)){let N=p.slice(o+2,v-1);if(t(N,45)?(ye="{%-",N=N.slice(1).trimStart()):(ye="{%",N=N.trimStart()),ne=N.slice(0,N.search(/[\s%}-]/)),t(N[N.length-1],45)?(S="-%}",N=N.slice(0,N.length-1).trimEnd()):(S="%}",N=N.trimEnd()),$(N,v),t(N,35))return V="comment",S="%}",z=S.charAt(S.length-1),y(!0)}else K=!0,S="%}",V="liquid"}else K=!0,S=s[o+1]+"}",V="liquid"}return K!==!0&&i.markup.preserveAttribute===!0&&(K=!0),xe?X():(z=S.charAt(S.length-1),V==="comment"&&(t(s[o],60)||t(s[o],123)&&t(s[o+1],37))?y():o<n?he():X())}function J(){if(i.wrap>0&&x===!0){let v=0,N=r.count,T=0;if(a.types[N].indexOf("attribute")>-1){do v=v+a.token[N].length+1,N=N-1;while(a.lexer[N]!=="markup"||a.types[N].indexOf("attribute")>-1);a.lines[N]===1&&(v=v+a.token[N].length+1)}else a.lines[N]===1&&(v=a.token[N].length+1);if(T=N-1,v>0&&a.types[T]!=="script_end")if(a.types[T].indexOf("attribute")>-1){do v=v+a.token[T].length+1,T=T-1;while(a.lexer[T]!=="markup"||a.types[T].indexOf("attribute")>-1);a.lines[T]===1&&(v=v+a.token[T].length+1)}else a.lines[T]===1&&(v=a.token[T].length+1)}r.lineOffset=0}function he(){let v=[],N={pipes:[],fargs:[],targs:[],logic:[]},T=0,P=0,U=d,de=0,ce=0,ke=0,re=0,R=d,Te=d,me=0,be=!1,Ie=!1,ge=!1,qe=!1,Ne=!1,we=NaN,pe=[];function Xe(){if(Me(v,44)){if(ne==="when"&&N.logic.push(v.length-1),i.correct===!0&&/^,\s*-?[%}]}/.test(p.slice(o)))return v.pop(),o=o+1,!0;we===44?N.fargs[N.fargs.length-1].push(v.length-1):we===58?(N.fargs[N.fargs.length-1][0]+=1,N.fargs[N.fargs.length-1].push(v.length-1),we=44):N.targs.push(v.length-1)}else Me(v,124)?(N.pipes.push(v.length-1),we=124):Me(v,58)&&we===124&&(N.fargs.push([v.length-1]),we=58);if(t(s[o],10)&&ne!=="liquid"&&Ie===!1&&i.liquid.preserveInternal===!1&&v.length>3&&!(t(s[o+1],45)&&t(s[o+2],37)&&t(s[o+3],125)||t(s[o+1],37)&&t(s[o+2],125))?v.pop():i.liquid.normalizeSpacing===!0&&(F(s[o],32)&&(Qe(v,39)||Qe(v,34))?F(s[o],44)&&F(s[o],93)?(v.splice(v.length-1,1,se,s[o]),F(s[o+1],32)&&F(s[o+1],61)&&F(s[o+1],125)&&v.push(se)):F(s[o+1],32)&&v.push(se):t(s[o],32)&&t(s[o-1],93)?v.pop():v.length>3&&t(s[o+1],10)&&F(s[o+2],32)?v.push(se):t(s[o],32)&&t(s[o+1],32)?v.pop():Qe(v,93)&&F(s[o],32)&&F(s[o],44)&&F(s[o],46)?v.splice(v.length-1,1,se,s[o]):Qe(v,32)&&t(s[o],32)&&t(s[o+1],32)?v.pop():t(s[o],44)&&F(s[o+1],32)||t(s[o],58)&&F(s[o+1],32)?v.push(se):t(s[o],32)&&Qe(v,46)||on(v,91,32)?v.pop():F(s[o],32)&&t(s[o+1],124)||t(s[o],124)&&F(s[o+1],32)?v.push(se):t(s[o],32)&&(t(s[o+1],46)||t(s[o+1],93)||t(s[o+1],91)||t(s[o+1],58)||t(s[o+1],44))?v.pop():(ne==="assign"&&(F(s[o],32)&&t(s[o+1],61)||t(s[o],61)&&F(s[o+1],32))||(ne==="if"||ne==="unless"||ne==="elsif")&&((F(s[o],32)||t(s[o],10))&&(t(s[o+1],33)||t(s[o+1],60)||t(s[o+1],62)||t(s[o+1],61)&&t(s[o+2],61))||t(s[o],61)&&(F(s[o+1],32)||t(s[o+1],10))&&(t(s[o-1],61)||t(s[o-1],60)||t(s[o-1],62)||t(s[o-1],33))||F(s[o+1],32)&&F(s[o+1],61)&&(t(s[o],60)||t(s[o],62))))&&v.push(se)),ue(s[o-1])){if(U=p.slice(o),ne==="if"||ne==="elsif"||ne==="unless"){if(ue(s[o+2])&&U.startsWith("or"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,2)),o=o+2,!0;if(ue(s[o+3])&&U.startsWith("and"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,3)),o=o+3,!0;if(ue(s[o+8])&&U.startsWith("contains"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,8)),o=o+8,!0}else if(ne==="when"&&ue(s[o+2])&&U.startsWith("or"))return N.logic.push(v.length-1),v.pop(),v.push(U.slice(0,2)),o=o+2,!0}if(t(v[v.length-1],44)&&t(v[v.length-2],44))return Ge(114,v.join(d),Ee(v.join(d)));Ie=!1}function We(It){let at,$e=d;if(It===!0?($e=pe.join(d),at=E($e),R=d,at[0]==="data-esthetic-ignore"&&(_=!0)):($e=pe.join(d),(x===!1||x&&Tt($e,125))&&($e=$e.replace(tt,se)),at=E($e),at[0]==="data-esthetic-ignore"&&(_=!0),x&&t(pe[0],123)&&t(pe[pe.length-1],125)&&(me=0)),t($e[0],123)&&t($e[1],37)&&(H=!0),$e=$e.replace(/^\u0020/,d).replace(/\u0020$/,d),pe=$e.replace(/\r\n/g,ee).split(ee),pe.length<1&&(pe[0]=pe[0].replace(Fe,d)),$e=b(pe.join(r.crlf),ne),i.markup.stripAttributeLines===!0&&re>=1&&(re=1),D.length>0){let De=D.length-1;c===0&&(t($e,61)||t($e,45))&&(D[De][0]=D[De][0]+$e,D[De][1]=re,$e=d)}if(It===!1&&(nt($e)&&(c=c+1),kt($e)&&(c=c-1)),$e!==d&&$e!==se&&D.push([$e,re]),D.length>0){let[De]=D[D.length-1];if(De.indexOf("=\u201C")>0||De.indexOf("=\u201D")>0)return Ge(103,De)}pe=[],re=t(s[o],10)?1:0}if(!r.error){do{if(t(s[o],10)&&(re=r.lines(o,re)),ye==="---"&&S==="---"&&V==="ignore"){if(v.push(s[o]),o>3&&t(s[o],45)&&t(s[o-1],45)&&t(s[o-2],45))break;o=o+1;continue}if(K===!0||ue(s[o])===!1&&F(R,125)||t(R,125)){if(v.push(s[o]),be===!1&&t(s[o-1],123)&&(t(s[o],123)||t(s[o],37)))be=!0;else if(be===!0&&t(s[o],125)){if(t(s[o-1],125)||t(s[o-1],37))be=!1;else if((t(s[o-2],125)||t(s[o-2],37))&&ue(s[o-1]))return Ge(111,v.join(d))}else if(be===!0&&t(s[o],10)&&i.liquid.preserveInternal===!1&&(i.liquid.delimiterPlacement==="preserve"||i.liquid.delimiterPlacement==="consistent")){if(t(s[o-1],45)&&t(s[o-3],123)&&(t(s[o-2],123)||t(s[o-2],37))||t(s[o-2],123)&&(t(s[o-1],123)||t(s[o-1],37)))Ie=!0;else if(/^\s*-?[%}]}/.test(p.slice(o))===!0){for(;ue(s[o])===!0;)o=o+1,t(s[o],10)&&(re=r.lines(o,re));v.push(s[o]),Ie=!0}}if(V==="end"&&v.length>2&&t(v[0],60)&&t(v[1],47)&&(t(v[v.length-1],47)||t(v[v.length-1],60))){if(i.correct)v.pop(),v.push(">");else return Ge(106,v.join(d));break}if(t(v[0],60)&&t(v[1],62)&&t(S,62))return f(g,"(empty)",{token:"<>",types:"start"});if(t(v[0],60)&&t(v[1],47)&&t(v[2],62)&&t(S,62))return g.token="</>",g.token="end",f(g)}if(V==="cdata"&&t(s[o],62)&&t(s[o-1],93)&&F(s[o-2],93))return Ge(103,v.join(d));if(V==="comment"){if(R=d,s[o]===z&&v.length>S.length+1){if(P=v.length,T=S.length-1,T>-1)do{if(P=P-1,F(v[P],S.charCodeAt(T)))break;T=T-1}while(T>-1);if(T<0)break}}else if(R===d){if(t(v[0],60)&&t(v[1],33)&&V!=="cdata"){if(V==="doctype"&&t(s[o],62))break;if(t(s[o],91)){if(t(s[o+1],60)){V="start";break}if(ue(s[o+1]))do o=o+1,t(s[o],10)&&(re=r.lines(o,re));while(o<n-1&&ue(s[o+1]));if(t(s[o+1],60)){V="start";break}}}if(x&&(t(s[o],123)?me=me+1:t(s[o],125)&&(me=me-1)),t(s[o],60)&&fe===!0&&K===!1&&v.length>1&&/>{2,3}/.test(S)===!1){r.error=`Invalid structure detected ${s.slice(o,o+8).join(d)}`;break}if(ue(s[o])===!1&&ge===!0&&s[o]!==z){if(W=0,ge=!1,R=Te,v.pop(),o<n)do{if(t(s[o],10)&&Ne===!1&&(re=r.lines(o,re)),i.markup.preserveAttribute===!0?v.push(s[o]):pe.push(s[o]),(F(R,34)||F(R,39))&&(t(s[o-1],123)&&(t(s[o],37)||t(s[o],123))?be=!0:t(s[o],125)&&(t(s[o-1],125)||t(s[o-1],37))&&(be=!1)),x===!1&&Ne===!1&&be===!0&&i.markup.preserveAttribute===!1)for(;o<n;){if(o=o+1,t(s[o],10)&&(re=r.lines(o,re)),t(pe[0],61)&&(t(pe[1],123)||t(pe[1],37))&&(t(pe[pe.length-2],125)||t(pe[pe.length-2],37))&&t(pe[pe.length-1],125)){be=!1,R=d,We(!1);break}if(t(pe[0],61)&&F(pe[1],123)){be=!1,R=d,We(!1);break}if(pe.push(s[o]),t(pe[0],61)&&t(s[o+1],62)){be=!1,D[D.length-1][0]+=pe.join(d),pe=[],R=d;break}if(F(pe[0],61)&&t(s[o],125)&&(t(s[o-1],125)||t(s[o-1],37))){be=!1,R=d,We(!1);break}}if(x===!1&&(t(s[o],60)||t(s[o],62))&&(R===d||t(R,62))){if(R===d&&t(s[o],60))R=">",de=1;else if(t(R,62)){if(t(s[o],60))de=de+1;else if(t(s[o],62)&&(de=de-1,de===0)){R=d,W=0,We(!1);break}}}else if(R===d){if(s[o+1]===z){(Me(pe,47)||Me(pe,63)&&V==="xml")&&(pe.pop(),K===!1||v.pop(),o=o-1),pe.length>0&&We(!1);break}if(x===!1&&t(s[o],123)&&t(s[o-1],61)?R="}":t(s[o],34)||t(s[o],39)?(R=s[o],Ne===!1&&be===!1&&(Ne=!0),t(s[o-1],61)&&(t(s[o+1],60)||t(s[o+1],123)&&t(s[o+2],37)||ue(s[o+1])&&F(s[o-1],61))&&(W=o)):t(s[o],40)?(R=")",ke=1):x?(t(s[o-1],61)||ue(s[o-1]))&&t(s[o],123)?(R="}",ce=1):t(s[o],47)&&(t(s[o+1],42)?R="*/":t(s[o+1],47)&&(R=ee)):t(v[0],123)&&t(s[o],123)&&(t(s[o+1],123)||t(s[o+1],37))&&(R=t(s[o+1],123)?"}}":s[o+1]+"}"),ue(s[o])&&R===d){if(t(pe[pe.length-2],61)&&(T=o+1,T<n))do{if(ue(s[T])===!1){(t(s[T],34)||t(s[T],39))&&(o=T-1,qe=!0,pe.pop());break}T=T+1}while(T<n);if(qe===!0)qe=!1;else if(me===0||me===1&&t(pe[0],123)){pe.pop(),pe.length>0&&We(!1),ge=!0;break}}}else if(t(s[o],40)&&t(R,41))ke=ke+1;else if(t(s[o],41)&&t(R,41)){if(ke=ke-1,ke===0&&(R=d,t(s[o+1],S.charCodeAt(0)))){We(!1);break}}else if(x===!0&&(t(R,125)||t(R,10)&&t(s[o],10)||t(R,42)&&t(s[o-1],42)&&t(s[o],47))){if(t(s[o],96)){o=o+1;do{if(pe.push(s[o]),t(s[o],96))break;o=o+1}while(o<s.length)}if(t(R,125)){if(t(s[o],125)&&s[o]!==R)ce=ce+1;else if(s[o]===R&&(ce=ce-1,ce===0)){me=0,R=d,A=pe.join(d),i.markup.preserveAttribute===!1&&(x?/^\s*$/.test(A)||D.push([A,re]):(A=A.replace(tt,se),A!==se&&D.push([A,re]))),pe=[],re=1;break}}else{Te=d,te=!0,A=pe.join(d),A!==se&&D.push([A,re]),pe=[],re=t(R,10)?2:1,R=d;break}}else if(t(s[W-1],61)&&t(s[o],123)&&t(s[o+1],37)&&(t(R,34)||t(R,39)))R=R+"{%",W=0;else if(t(s[o-1],37)&&t(s[o],125)&&(R==='"{%'||R==="'{%"))R=R[0],W=0;else if(t(s[o],60)&&t(S,62)&&t(s[W-1],61)&&(t(R,34)||t(R,39)))R=R+"<",W=0;else if(t(s[o],62)&&(R==='"<'||R==="'<"))R=R.charAt(0),W=0;else if(W===0&&F(R,62)&&(R.length<2||F(R,34)&&F(R,39))){if(P=0,T=R.length-1,T>-1)do{if(F(s[o-P],R.charCodeAt(T)))break;P=P+1,T=T-1}while(T>-1);if(T<0&&be===!1&&Ne===!0&&(Ne=!1,We(!0),s[o+1]===z))break;T===0&&t(s[o],62)}else W>0&&ue(s[o])===!1&&(W=0);o=o+1}while(o<n)}else if(t(S,10)===!1&&(t(s[o],34)||t(s[o],39)))R=s[o];else if(o>0&&be===!0&&F(R,34)&&F(R,39)){if(Xe()===!0)continue}else if(V!=="comment"&&F(S,10)&&t(s[o],60)&&t(s[o+1],33)&&t(s[o+2],45)&&t(s[o+3],45)&&a.types[r.count]!=="conditional")R="-->";else if(t(s[o],123)&&F(v[0],123)&&F(S,10)&&(t(s[o+1],123)||t(s[o+1],37))){if(t(s[o+1],123))R="}}";else if(R=s[o+1]+"}",pe.length<1&&(D.length<1||ue(s[o-1]))){v.pop();do t(s[o],10)&&(re=re+1),pe.push(s[o]),o=o+1;while(o<n&&s[o-1]+s[o]!==R);pe.push("}"),D.push([pe.join(d),re]),pe=[],re=1,R=d}R===S&&(R=d)}else if(fe&&F(S,10)&&F(s[o-1],60)&&ue(s[o]))ge=!0;else if(fe&&x&&t(s[o],47)&&(t(s[o+1],42)||t(s[o+1],47)))ge=!0,v[v.length-1]=se,Te=t(s[o+1],42)?"*/":ee,pe.push(s[o]);else if(be===!1&&(s[o]===z||t(S,10)&&t(s[o+1],60))&&(v.length>S.length+1||t(v[0],93))&&(x===!1||me===0)){if(t(S,10)){if(ue(v[v.length-1]))do v.pop(),o=o-1;while(ue(v[v.length-1]));break}if(P=v.length,T=S.length-1,T>-1)do{if(P=P-1,v[P]!==S.charAt(T))break;T=T-1}while(T>-1);if(T<0){t(v[P],62)&&t(s[o],62)&&t(s[o-1],125)&&ue(s[o+1])&&D.length>0&&D[D.length-1][1]===0&&(D[D.length-1][1]=t(s[o+1],32)?1:2);break}}}else if(t(s[o],R.charCodeAt(R.length-1))&&F(s[o-1],92)&&(x===!0&&t(S,125)&&B(o)===!1||x===!1||F(S,125))){if(P=0,T=R.length-1,T>-1)do{if(F(s[o-P],R.charCodeAt(T)))break;P=P+1,T=T-1}while(T>-1);T<0&&(R=d)}o=o+1}while(o<n);if(W=0,ne||(ne=Ee(v.join(d))),_===!1)if(V==="liquid"){if(A=jn(v,ne,N,i),ne==="liquid")return M()}else A=v.join(d);else A=v.join(d);return ne==="xml"?O="xml":O===d&&ne==="html"&&(O="html"),g.token=A,g.types=V,K===!1&&x===!1&&(A=A.replace(tt,se)),X()}}return C()}function ie(){let S=[],g=o,A=x===!0&&t(a.token[r.count],123),z="([{!=,;.?:&<>",V=d,ne=r.lineOffset,ye=d;k===!0&&(A===!0?ye="script":r.stack.index>-1?ye=Ee(a.token[r.stack.index]):ye=Ee(a.token[a.begin[r.count]]));let xe={begin:r.stack.index,ender:-1,lexer:"markup",lines:ne,stack:Ee(r.stack.token)||"global",token:d,types:"content"};function _(){return a.types[r.count]==="liquid_start"&&a.token[r.count].indexOf("<!")===0&&a.token[r.count].indexOf("<![")<0&&a.token[r.count].charCodeAt(a.token[r.count].length-1)===91}function W(){let te=o-1,H=0;if(F(s[o-1],92))return!1;if(te>-1)do{if(F(s[te],92))break;H=H+1,te=te-1}while(te>-1);return H%2===1}if(o<n){let te=d,H=d,K=d,fe=0;do{if(t(s[o],10)&&(ne=r.lines(o,ne)),k===!0){if(a.types[r.count]==="liquid_start"){let D=`end${ye}`,le=p.indexOf(`end${ye}`,o);if(le>-1){let ve=le;do if(ue(s[ve])===!1&&t(s[ve],37)&&t(s[ve-1],123)){ve=ve-2;break}while(s[ve--]);if(te=s.slice(ve+1,s.indexOf("%",le+D.length)+2).join(d),qn(D).test(te)){ne=1,K=s.slice(o,ve).join(d).replace(Fe,d),o=ve+te.length,r.external(L,K);do t(s[ve],10)&&(ne=ne+1);while(ue(s[ve--]));f(xe,{token:b(te),types:"liquid_end",lines:ne});break}}}if(H===d){if(t(s[o],47))t(s[o+1],42)?H="*":t(s[o+1],47)?H="/":!x&&ye==="script"&&F(s[o-1],60)&&z.indexOf(s[o-1])>-1&&(H="r");else if(W()===!1&&(t(s[o],34)||t(s[o],39)||t(s[o],96)))H=s[o];else if(t(s[o],123)&&A===!0)fe=fe+1;else if(t(s[o],125)&&A===!0){if(fe===0){K=S.join(d).replace(pt,d).replace(Fe,d),r.external(L,K),r.stack.update(r.stack.index+1),a.types[r.count]==="end"&&a.lexer[a.begin[r.count]-1]==="script"&&(f(xe,{lexer:"script",types:"separator",token:i.correct===!0?";":"x;"}),xe.lexer="markup"),f(xe,{token:"}",types:"script_end"}),r.stack.pop();break}fe=fe-1}if(ye==="script"){if(te=s.slice(o+1,o+9).join(d).toLowerCase(),te==="<\/script"){if(K=S.join(d).trimEnd(),S.length<1)break;ut.test(K)&&ct.test(K)?(f(xe,{token:"<!--",types:"comment"}),K=K.replace(ut,d).replace(ct,d),r.external("javascript",K),f(xe,{token:"-->"})):r.external(L,K);break}}else if(ye==="style"&&t(s[o+1],60)&&t(s[o+2],47)&&(te=s.slice(o+1,o+8).join(d).toLowerCase(),te==="</style")){if(K=S.join(d).trimEnd(),S.length<1)break;ut.test(K)&&ct.test(K)?(f(xe,{token:"<!--",types:"comment"}),K=K.replace(ut,d).replace(ct,d),r.external("css",K),f(xe,{token:"-->"})):r.external(L,K);break}}else H===s[o]&&W()===!1&&(t(H,34)||t(H,39)||t(H,96)||t(H,42)&&t(s[o+1],47))?H=d:t(H,96)&&t(s[o],36)&&t(s[o+1],123)&&W()===!1?H="}":t(H,125)&&t(s[o],125)&&W()===!1?H="`":t(H,47)&&(t(s[o],10)||t(s[o],13))||H==="r"&&t(s[o],47)&&W()===!1?H=d:t(H,47)&&t(s[o],62)&&t(s[o-1],45)&&t(s[o-2],45)&&(te=p.slice(o+1,o+11).toLowerCase(),te=te.slice(0,te.length-2),ye==="script"&&te==="<\/script"&&(H=d),te=te.slice(0,te.length-1),ye==="style"&&te==="</style"&&(H=d))}if(_()===!0&&t(s[o],93)){o=o-1,ne=0,V=S.join(d).replace(Fe,d),f(xe,{token:V});break}if(k===!1&&S.length>0&&(t(s[o],60)&&F(s[o+1],61)&&Pe(s[o+1])===!1&&ue(s[o+1])===!1||t(s[o],91)&&t(s[o+1],37)||t(s[o],123)&&(x===!0||t(s[o+1],123)||t(s[o+1],37)))){if(o=o-1,ne=0,V=r.stack.token==="comment"?S.join(d):S.join(d).replace(Fe,d),xe.token=V,i.wrap>0&&i.markup.preserveText===!1){let D=function(){if(t(V[le],32)){M.push(V.slice(0,le)),V=V.slice(le+1),ve=V.length,le=i.wrap;return}do le=le-1;while(le>0&&F(V[le],32));if(le>0)M.push(V.slice(0,le)),V=V.slice(le+1),ve=V.length,le=i.wrap;else{le=i.wrap;do le=le+1;while(le<ve&&F(V[le],32));M.push(V.slice(0,le)),V=V.slice(le+1),ve=V.length,le=i.wrap}},le=i.wrap,ve=V.length,M=[];if(a.token[a.begin[r.count]]==="<a>"&&a.token[a.begin[a.begin[r.count]]]==="<li>"&&a.lines[a.begin[r.count]]===0&&r.lineOffset===0&&V.length<i.wrap){f(xe);break}if(ve<i.wrap){f(xe);break}if(r.lineOffset<1&&r.count>-1){let Z=r.count;do{if(le=le-a.token[Z].length,a.types[Z].indexOf("attribute")>-1&&(le=le-1),a.lines[Z]>0&&a.types[Z].indexOf("attribute")<0)break;Z=Z-1}while(Z>0&&le>0);le<1&&(le=V.indexOf(se))}V=S.join(d).replace(pt,d).replace(Fe,d).replace(tt,se);do D();while(le<ve);V!==d&&F(V,32)&&M.push(V),V=M.join(r.crlf),V=d+V+d}else{let D=V.indexOf(ee);D>-1&&(f(xe,{token:V.slice(0,D)}),V=V.slice(D),Et.test(V)?xe.lines=1:(xe.lines=2,V=V.replace(pt,d)))}ne=0,f(xe,{token:V});break}S.push(s[o]),o=o+1}while(o<n)}if(o>g&&o<n)if(ue(s[o])){let te=o;r.lineOffset=r.lineOffset+1;do t(s[te],10)&&(r.lineNumber=r.lineNumber+1,r.lineOffset=r.lineOffset+1),te=te-1;while(te>g&&ue(s[te]))}else r.lineOffset=0;else(o!==g||o===g&&k===!1)&&(V=S.join(d).replace(Fe,d),ne=0,xe.token!==V&&(f(xe,{token:V}),r.lineOffset=0));k=!1}function oe(){r.lineOffset=1;do{if(t(s[o],10)&&(r.lineIndex=o,r.lineOffset=r.lineOffset+1,r.lineNumber=r.lineNumber+1),ue(s[o+1])===!1)break;o=o+1}while(o<n)}(r.language==="html"||r.language==="liquid")&&(O="html");do{if(r.error)return a;if(ue(s[o])?oe():t(s[o],60)||t(s[o],123)&&(x||t(s[o+1],123)||t(s[o+1],37))?I(d):t(s[o],45)&&t(s[o+1],45)&&t(s[o+2],45)?I("---"):ie(),o=o+1,o===n&&r.pairs.size>0&&r.pairs.has(r.stack.index)){console.log(r.pairs);let S=r.pairs.get(r.stack.index);S.type===2&&Qt(105,S)}}while(o<n);return a}function Sn(){let{data:e,references:a,rules:i,source:p}=r,x=r.language==="json"?i.json:i.script,l=Ae(p)?p:p.split(d),j=l.length,s=[],n=[],h=[],o=[0,d],L=[!1],k={count:[],index:[],word:[]},O=-1,c=0,f=d,b=d,Y=[],u=0,G=-1,B=-1,q=[],E,I,ie,oe=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];function S(){k.count.pop(),k.index.pop(),k.word.pop(),O=O-1}function g($=d){let y={begin:r.stack.index,ender:-1,lexer:"script",lines:r.lineOffset,stack:r.stack.token,token:f,types:b};r.push(e,y,$)}function A($,y){let m=y===!0?c:c+1,C=d;if((typeof $!="number"||$<1)&&($=1),t(l[c],47)&&(t(l[c+1],47)?C=ee:t(l[c+1],42)&&(C="/")),m<j)do{if(ue(l[m])===!1){if(t(l[m],47)&&(C===d?t(l[m+1],47)?C=ee:t(l[m+1],42)&&(C="/"):t(C,47)&&t(l[m-1],42)&&(C=d)),C===d&&l[m-1]+l[m]!=="*/")return l.slice(m,m+$).join(d)}else t(C,10)&&t(l[m],10)&&(C=d);m=m+1}while(m<j);return d}function z($){let y=$;do $=$-1;while(t(l[$],92)&&$>0);return(y-$)%2===1}function V($){let y=A(1,!1),m=r.stack.length===0?d:r.stack.token,C={begin:e.begin[r.count],ender:e.begin[r.count],lexer:e.lexer[r.count],lines:e.lines[r.count],stack:e.stack[r.count],token:e.token[r.count],types:e.types[r.count]};if(dt.test(f)||b==="start"||b==="type_start"||r.language==="json"||t(y,123)||t(C.token,59)||t(C.token,44)||C.stack==="class"||C.stack==="map"||C.stack==="attribute"||e.types[C.begin-1]==="generic"||m==="initializer"||t(C.token,125)&&e.stack[C.begin-1]==="global"&&e.types[C.begin-1]!=="operator"&&C.stack===e.stack[r.count-1]||C.stack==="array"&&F(C.token,93)||t(e.token[e.begin[r.count]],123)&&C.stack==="data_type"||C.types!==void 0&&C.types.indexOf("liquid")>-1&&C.types.indexOf("template_string")<0||t(y,59)&&$===!1||e.lexer[r.count-1]!=="script"&&(c<j&&j===p.length-1||j<p.length-1))return;let J=0;if(t(C.token,125)&&(C.stack==="function"||C.stack==="if"||C.stack==="else"||C.stack==="for"||C.stack==="do"||C.stack==="while"||C.stack==="switch"||C.stack==="class"||C.stack==="try"||C.stack==="catch"||C.stack==="finally"||C.stack==="block")){if(C.stack==="function"&&(e.stack[C.begin-1]==="data_type"||e.types[C.begin-1]==="type")){J=C.begin;do J=J-1;while(J>0&&F(e.token[J],41)&&e.stack[J]!=="arguments");J=e.begin[J]}else J=e.begin[C.begin-1];if(t(e.token[J],40)){if(J=J-1,e.token[J-1]==="function"&&(J=J-1),e.stack[J-1]==="object"||e.stack[J-1]==="switch"||F(e.token[J-1],61)&&F(e.token[J-1],58)&&e.token[J-1]!=="return")return}else return}if(!(C.types==="comment"||m==="method"||m==="paren"||m==="expression"||m==="array"||m==="object"||m==="switch"&&C.stack!=="method"&&t(e.token[e.begin[r.count]],40)&&e.token[e.begin[r.count]-1]!=="return"&&e.types[e.begin[r.count]-1]!=="operator")&&!(e.stack[r.count]==="expression"&&(e.token[e.begin[r.count]-1]!=="while"||e.token[e.begin[r.count]-1]==="while"&&e.stack[e.begin[r.count]-2]!=="do"))&&!(y!==d&&"=<>+*?|^:&%~,.()]".indexOf(y)>-1&&$===!1)){if(C.types==="comment"){J=r.count;do J=J-1;while(J>0&&e.types[J]==="comment");if(J<1)return;C.token=e.token[J],C.types=e.types[J],C.stack=e.stack[J]}C.token===void 0||C.types==="start"||C.types==="separator"||C.types==="operator"&&C.token!=="++"&&C.token!=="--"||C.token==="x}"||C.token==="var"||C.token==="let"||C.token==="const"||C.token==="else"||C.token.indexOf("#!/")===0||C.token==="instanceof"||C.stack==="method"&&(e.token[C.begin-1]==="function"||e.token[C.begin-2]==="function")||(x.variableList==="list"&&(k.index[O]=r.count),f=i.correct===!0?";":"x;",b="separator",J=r.lineOffset,r.lineOffset=0,g(),r.lineOffset=J,ve())}}function ne(){let $=r.count;if(e.types[$]==="comment")do $=$-1;while($>0&&e.types[$]==="comment");e.token[$]==="from"&&($=$-2),e.token[$]==="x;"&&r.splice({data:e,howmany:1,index:$})}function ye(){let $=r.count;do $=$-1;while($>-1&&e.token[$]==="x}");if(e.stack[$]==="else")return g();$=$+1,r.splice({data:e,howmany:0,index:$,record:{begin:e.begin[$],ender:-1,lexer:"script",lines:r.lineOffset,stack:e.stack[$],token:f,types:b}}),g()}function xe(){V(!1),G>-1&&X(),ie=At({chars:l,end:j,lexer:"script",begin:"/*",start:c,ender:"*/"}),c=ie[1],e.token[r.count]==="var"||e.token[r.count]==="let"||e.token[r.count]==="const"?(E=r.pop(e),g(),r.push(e,E,d),e.lines[r.count-2]===0&&(e.lines[r.count-2]=e.lines[r.count]),e.lines[r.count]=0):ie[0]!==d&&(f=ie[0],b=dt.test(f)?"ignore":"comment",f.indexOf("# sourceMappingURL=")===2&&(o[0]=r.count+1,o[1]=f),r.push(e,{begin:r.stack.index,ender:-1,lexer:"script",lines:r.lineOffset,stack:r.stack.token,token:f,types:b},d)),/\/\*\s*global\s+/.test(e.token[r.count])&&e.types.indexOf("word")<0&&(a[0]=e.token[r.count].replace(/\/\*\s*global\s+/,d).replace("*/",d).replace(/,\s+/g,",").split(","))}function _(){V(!1),ve(),G>-1&&X(),ie=Rt({chars:l,end:j,lexer:"script",begin:"//",start:c,ender:ee}),c=ie[1],ie[0]!==d&&(f=ie[0],b=dt.test(f)?"ignore":"comment",f.indexOf("# sourceMappingURL=")===2&&(o[0]=r.count+1,o[1]=f),r.push(e,{begin:r.stack.index,ender:-1,lexer:"script",lines:r.lineOffset,stack:r.stack.token,token:f,types:b},d))}function W(){let $=0,y=0,m=c+1,C=!1,J=j,he=["/"];if(m<J)do{if(he.push(l[m]),(F(l[m-1],92)||t(l[m-2],92))&&(t(l[m],91)&&(C=!0),t(l[m],93)&&(C=!1)),t(l[m],47)&&C===!1)if(t(l[m-1],92)){if(y=0,$=m-1,$>0)do{if(t(l[$],92))y=y+1;else break;$=$-1}while($>0);if(y%2===0)break}else break;m=m+1}while(m<J);return l[m+1]==="g"||l[m+1]==="i"||l[m+1]==="m"||l[m+1]==="y"||l[m+1]==="u"?(he.push(l[m+1]),l[m+2]!==l[m+1]&&(l[m+2]==="g"||l[m+2]==="i"||l[m+2]==="m"||l[m+2]==="y"||l[m+2]==="u")?(he.push(l[m+2]),l[m+3]!==l[m+1]&&l[m+3]!==l[m+2]&&(l[m+3]==="g"||l[m+3]==="i"||l[m+3]==="m"||l[m+3]==="y"||l[m+3]==="u")?(he.push(l[m+3]),l[m+4]!==l[m+1]&&l[m+4]!==l[m+2]&&l[m+4]!==l[m+3]&&(l[m+4]==="g"||l[m+4]==="i"||l[m+4]==="m"||l[m+4]==="y"||l[m+4]==="u")?(he.push(l[m+4]),l[m+5]!==l[m+1]&&l[m+5]!==l[m+2]&&l[m+5]!==l[m+3]&&l[m+5]!==l[m+4]&&(l[m+5]==="g"||l[m+5]==="i"||l[m+5]==="m"||l[m+5]==="y"||l[m+5]==="u")?(he.push(l[m+4]),c=m+5):c=m+4):c=m+3):c=m+2):c=m+1):c=m,he.join(d)}function te(){let $=[l[c]],y=0,m=t($[0],46),C=/zz/;if(c<j-2&&l[c]==="0"&&(l[c+1]==="x"?C=/[0-9a-fA-F]/:l[c+1]==="o"?C=/[0-9]/:l[c+1]==="b"&&(C=/0|1/),C.test(l[c+2]))){$.push(l[c+1]),y=c+1;do y=y+1,$.push(l[y]);while(C.test(l[y+1]));return c=y,$.join(d)}if(y=c+1,y<j)do{if(Pe(l[y])||t(l[y],46)&&m===!1)$.push(l[y]),t(l[y],46)&&(m=!0);else break;y=y+1}while(y<j);if(y<j-1&&(Pe(l[y-1])||Pe(l[y-2])&&(t(l[y-1],45)||t(l[y-1],43)))&&(l[y]==="e"||l[y]==="E")&&($.push(l[y]),(t(l[y+1],45)||t(l[y+1],43))&&($.push(l[y+1]),y=y+1),m=!1,y=y+1,y<j))do{if(Pe(l[y])||t(l[y],46)&&m===!1)$.push(l[y]),t(l[y],46)&&(m=!0);else break;y=y+1}while(y<j);return c=y-1,$.join(d)}function H(){let $=0,y=0,m=j,C=d,J=["=","<",">","+","*","?","|","^",":","&","%","~"],he=J.length;if(G>-1&&X(),t(l[c],47)&&r.count>-1&&(b!=="word"&&b!=="reference"||f==="typeof"||f==="return"||f==="else")&&b!=="number"&&b!=="string"&&b!=="end")return f==="return"||f==="typeof"||f==="else"||b!=="word"?(f=W(),b="regex"):(f="/",b="operator"),g(),"regex";if(t(l[c],63)&&("+-*/.?".indexOf(l[c+1])>-1||t(l[c+1],58)&&J.join(d).indexOf(l[c+2])<0)&&(t(l[c+1],46)&&Pe(l[c+2])===!1?C="?.":t(l[c+1],63)&&(C="??"),C===d))return"?";if(t(l[c],58)&&"+-*/".indexOf(l[c+1])>-1)return":";if(c<j-1){if(F(l[c],60)&&t(l[c+1],60))return l[c];if(t(l[c],33)&&t(l[c+1],47))return"!";if(t(l[c],45)&&(L[L.length-1]=!1,t(l[c+1],45)?C="--":t(l[c+1],61)?C="-=":t(l[c+1],62)&&(C="->"),C===d))return"-";if(t(l[c],43)&&(L[L.length-1]=!1,t(l[c+1],43)?C="++":t(l[c+1],61)&&(C="+="),C===d))return"+";if(t(l[c],61)&&F(l[c+1],61)&&F(l[c+1],33)&&F(l[c+1],62))return L[L.length-1]=!1,"="}if(t(l[c],59))if(r.language==="typescript"){if(e.stack[r.count]==="arguments")e.token[r.count]==="?"&&(r.pop(e),C="?:",c=c-1),L[L.length-1]=!0;else if(t(f,41)&&(e.token[e.begin[r.count]-1]==="function"||e.token[e.begin[r.count]-2]==="function"))L[L.length-1]=!0;else if(b==="reference"){$=r.count;let v=!1;do{if(e.begin[$]===e.begin[r.count]){if($<r.count&&e.token[$]===":"&&e.types[$+1]!=="type"&&(v=!0),e.token[$]==="?"&&v===!1||e.token[$]===";"||e.token[$]==="x;")break;if(e.token[$]==="var"||e.token[$]==="let"||e.token[$]==="const"||e.types[$]==="type"){L[L.length-1]=!0;break}}else{if(e.types[$]==="type_end"){L[L.length-1]=!0;break}$=e.begin[$]}$=$-1}while($>e.begin[r.count])}}else e.token[r.count-1]==="["&&(e.types[r.count]==="word"||e.types[r.count]==="reference")&&(r.stack.update("attribute"),e.stack[r.count]="attribute");if(C===d)if(t(l[c+1],43)&&t(l[c+2],43)||t(l[c+1],45)&&t(l[c+2],45))C=l[c];else{let v=[l[c]];if($=c+1,$<m)do{if(t(l[$],43)&&t(l[$+1],43)||t(l[$],45)&&t(l[$+1],45))break;if(y=0,y<he)do{if(l[$]===J[y]){v.push(J[y]);break}y=y+1}while(y<he);if(y===he)break;$=$+1}while($<m);C=v.join(d)}if(c=c+(C.length-1),C==="=>"&&t(f,41)){$=r.count,m=e.begin[$];do e.begin[$]===m&&(e.stack[$]="method"),$=$-1;while($>m-1)}return C}function K(){let $=[l[c]];if(c=c+1,c<j)do{if($.push(l[c]),t(l[c],96)&&(F(l[c-1],92)||!z(c-1))||t(l[c-1],36)&&t(l[c],123)&&(F(l[c-2],92)||!z(c-2)))break;c=c+1}while(c<j);return $.join(d)}function fe(){let $=0,y=!1,m=!1,C=0,J=0,he=0,v=d,N=d,T=d,P=[],U=L[L.length-1],de="0123456789=<>+-*?|^:&.,;%(){}[]~";function ce(){t(f,40)&&r.stack.update("paren",r.count),r.external("html",P.join(d))}if(G>-1&&X(),N=r.count>0?e.token[r.count-1]:d,T=r.count>0?e.types[r.count-1]:d,v=A(1,!1),r.language!=="jsx"&&r.language!=="tsx"&&Pe(v)===!1&&(f==="function"||N==="=>"||N==="void"||N==="."||f==="return"||b==="operator"||e.stack[r.count]==="arguments"||b==="type"&&N==="type"||b==="reference"&&(T==="operator"||N==="function"||N==="class"||N==="new")||b==="type"&&T==="operator")){let ke=[],re=0,R=0;$=c;do{if(ke.push(l[$]),t(l[$],60))re=re+1;else if(t(l[$],62)&&(re=re-1,re<1))break;$=$+1}while($<j);if(R=c,c=$,v=A(1,!1),t(l[$],62)&&(U===!0||N==="=>"||N==="."||T!=="operator"||T==="operator"&&(t(v,40)||t(v,61)))){b="generic",f=ke.join(d).replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", "),g();return}c=R}if($=r.count,e.types[$]==="comment")do $=$-1;while($>0&&e.types[$]==="comment");if(U===!1&&A(1,!1)!==">"&&(F(l[c],60)&&de.indexOf(l[c+1])>-1||e.token[$]==="++"||e.token[$]==="--"||ue(l[c+1])===!0||Pe(l[c+1])===!0&&(b==="operator"||b==="string"||b==="number"||b==="reference"||b==="word"&&f!=="return")))return b="operator",f=H(),g();if(r.language!=="typescript"&&(e.token[$]==="return"||e.types[$]==="operator"||e.types[$]==="start"||e.types[$]==="separator"||e.types[$]==="jsx_attribute_start"||t(e.token[$],125)&&r.stack.token==="global")){b="markup",r.language="jsx";do{if(P.push(l[c]),t(l[c],123))J=J+1,y=!0;else if(t(l[c],125))J=J-1,J===0&&(y=!1);else if(t(l[c],60)&&y===!1){if(t(l[c+1],60))do P.push(l[c]),c=c+1;while(c<j&&t(l[c+1],60));C=C+1,t(A(1,!1),47)&&(m=!0)}else if(t(l[c],62)&&y===!1){if(t(l[c+1],62))do P.push(l[c]),c=c+1;while(t(l[c+1],62));if(C=C-1,m===!0?he=he-1:F(l[c-1],47)&&(he=he+1),C===0&&J===0&&he<1){if(v=A(2,!1),F(v,60))return ce();if(t(v,60)&&de.indexOf(v.charAt(1))<0&&ue(v.charAt(1))===!1){$=c+1;do{if($=$+1,t(l[$],62)||ue(l[$-1])&&de.indexOf(l[$])<0)break;if(de.indexOf(l[$])>-1)return ce()}while($<j)}else return ce()}m=!1}c=c+1}while(c<j);return ce()}b="operator",f=H(),g()}function D(){let $=!0,y="+",m=d,C=d,J=d,he=d,v=0,N=0,T=0,P=[];function U(){N=e.begin[N]-1,e.types[N]==="end"?U():t(e.token[N-1],46)&&de()}function de(){N=N-2,e.types[N]==="end"?U():t(e.token[N-1],46)&&de()}function ce(){let re=0;if(re<P.length)do r.push(e,P[re],d),re=re+1;while(re<P.length)}function ke(re){return{begin:e.begin[re],ender:e.ender[re],lexer:e.lexer[re],lines:e.lines[re],stack:e.stack[re],token:e.token[re],types:e.types[re]}}if(m=e.token[r.count],C=e.token[r.count-1],J=e.token[r.count-2],m!=="++"&&m!=="--"&&C!=="++"&&C!=="--"&&(N=r.count,e.types[N]==="end"?U():t(e.token[N-1],46)&&de()),e.token[N-1]==="++"||e.token[N-1]==="--"){if("startendoperator".indexOf(e.types[N-2])>-1)return;if(T=N,T<r.count+1){do P.push(ke(T)),T=T+1;while(T<r.count+1);r.splice({data:e,howmany:r.count-N,index:N})}}else{if(i.correct===!1||m!=="++"&&m!=="--"&&C!=="++"&&C!=="--")return;if(he=A(1,!1),(m==="++"||m==="--")&&(t(l[c],59)||t(he,59)||t(l[c],125)||t(he,125)||t(l[c],41)||t(he,41))){if(y=e.stack[r.count],y==="array"||y==="method"||y==="object"||y==="paren"||y==="notation"||e.token[e.begin[r.count]-1]==="while"&&y!=="while")return;T=r.count;do{if(T=T-1,e.token[T]==="return")return;if(e.types[T]==="end")do T=e.begin[T]-1;while(e.types[T]==="end"&&T>0)}while(T>0&&(t(e.token[T],46)||e.types[T]==="word"||e.types[T]==="reference"||e.types[T]==="end"));if(t(e.token[T],44)&&F(l[c],59)&&F(he,59)&&F(l[c],125)&&F(he,125)&&F(l[c],41)&&F(he,41))return;if(e.types[T]==="operator")if(e.stack[T]==="switch"&&t(e.token[T],58))do{if(T=T-1,e.types[T]==="start"){if(v=v-1,v<0)break}else e.types[T]==="end"&&(v=v+1);if(t(e.token[T],63)&&v===0)return}while(T>0);else return;$=!1,y=m==="--"?"-":"+"}else if(t(J,91)||t(J,59)||t(J,123)||t(J,125)||t(J,40)||t(J,41)||t(J,44)||J==="return"||J==="x;")if(m==="++"||m==="--"){if(t(J,91)||t(J,40)||t(J,44)||J==="return")return;m==="--"&&(y="-"),$=!1}else(C==="--"||m==="--")&&(y="-");else return;if($===!1&&(E=r.pop(e)),N=r.count,e.types[N]==="end"?U():t(e.token[N-1],46)&&de(),T=N,T<r.count+1)do P.push(ke(T)),T=T+1;while(T<r.count+1)}$===!0?(r.splice({data:e,howmany:1,index:N-1}),f="=",b="operator",g(),ce(),f=y,b="operator",g(),f="1",b="number",g()):(f="=",b="operator",g(),ce(),f=y,b="operator",g(),f="1",b="number",g()),f=e.token[r.count],b=e.types[r.count],t(he,125)&&F(l[c],59)&&V(!1)}function le($,y,m){let C=0,J=!1,he=!1,v=[$],N,T=y.split(d),P=T.length,U=c,de=c+$.length,ce=x.quoteConvert;function ke(){let R=0;if(v=[],b=m,C=c,m==="string"&&ue(l[C+1])){R=1;do C=C+1,t(l[C],10)&&(R=R+1);while(C<j&&ue(l[C+1])===!0);r.lineOffset=R}}function re(){let R=d;function Te(me){if(r.language!=="javascript"&&r.language!=="typescript"&&r.language!=="jsx"&&r.language!=="tsx"){let be=ge=>ge.replace(/\s*$/," "),Ie=ge=>ge.replace(/^\s*/," ");return/\{(#|\/|(%>)|(%\]))/.test(me)||/\}%(>|\])/.test(me)||(me=me.replace(/\{((\{+)|%-?)\s*/g,be),me=me.replace(/\s*((\}\}+)|(-?%\}))/g,Ie)),me}return me}if(t($,34)&&ce==="single"?(v[0]=Ce,v[v.length-1]=Ce):t($,39)&&ce==="double"?(v[0]=Se,v[v.length-1]=Se):J===!0&&(R=v[v.length-1],v.pop(),v.pop(),v.push(R)),c=C,y===ee&&(c=c-1,v.pop()),f=v.join(d),(t($,34)||t($,39)||$==="{{"||$==="{%")&&(f=Te(f)),$==="{%"||$==="{{"){N=Q(f),b=N[0],g(N[1]);return}if(m==="string"){if(b="string",r.language==="json")f=f.replace(/\\u[\dA-F]{4}/gi,me=>String.fromCharCode(parseInt(me.replace(/\\u/g,""),16)));else if($.indexOf("#!")===0)f=f.slice(0,f.length-1),r.lineOffset=2;else if((r.stack.token!=="object"||r.stack.token==="object"&&F(A(1,!1),58)&&F(e.token[r.count],44)&&F(e.token[r.count],123))&&(f.length>i.wrap&&i.wrap>0||i.wrap!==0&&t(e.token[r.count],43)&&(t(e.token[r.count-1],46)||t(e.token[r.count-1],39)))){let me=f,be=d,Ie=ce==="double"?Se:ce==="single"?Ce:me.charAt(0),ge=i.wrap,qe=/u[0-9a-fA-F]{4}/,Ne=/x[0-9a-fA-F]{2}/;if(me=me.slice(1,me.length-1),t(e.token[r.count],43)&&(t(e.token[r.count-1],46)||t(e.token[r.count-1],39))&&(r.pop(e),Ie=e.token[r.count].charAt(0),me=e.token[r.count].slice(1,e.token[r.count].length-1)+me,r.pop(e)),me.length>ge&&ge>0)do be=me.slice(0,ge),t(be[ge-5],92)&&qe.test(me.slice(ge-4,ge+1))?be=be.slice(0,ge-5):t(be[ge-4],92)&&qe.test(me.slice(ge-3,ge+2))?be=be.slice(0,ge-4):t(be[ge-3],92)&&(qe.test(me.slice(ge-2,ge+3))||Ne.test(me.slice(ge-2,ge+1)))?be=be.slice(0,ge-3):t(be[ge-2],92)&&(qe.test(me.slice(ge-1,ge+4))||Ne.test(me.slice(ge-1,ge+2)))?be=be.slice(0,ge-2):t(be[ge-1],92)&&(be=be.slice(0,ge-1)),be=Ie+be+Ie,me=me.slice(be.length-2),f=be,b="string",g(d),r.lineOffset=0,f="+",b="operator",g(d);while(me.length>ge);f=me===d?Ie+Ie:Ie+me+Ie,b="string"}}else/\{\s*\?>$/.test(f)?b="liquid_start":b=m;f.length>0&&g(d)}if(G>-1&&X(),t(l[c-1],92)&&z(c-1)===!0&&(t(l[c],34)||t(l[c],39)))if(r.pop(e),t(e.token[0],123))t(l[c],34)?($=Se,y='\\"',v=[Se]):($=Ce,y="\\'",v=[Ce]),J=!0;else{if(t(l[c],34)){v=['\\"'],re();return}v=["\\'"],re();return}if(C=de,C<j)do{if(F(e.token[0],123)&&F(e.token[0],91)&&ce!=="none"&&(t(l[C],34)||t(l[C],39))?(t(l[C-1],92)?z(C-1)===!0&&(ce==="double"&&t(l[C],39)||ce==="single"&&t(l[C],34))&&v.pop():ce==="double"&&t(l[C],34)&&t(l[c],39)?l[C]=Se:ce==="single"&&t(l[C],39)&&t(l[c],34)&&(l[C]=Ce),v.push(l[C])):C>U?(he=!0,t(l[C],123)&&t(l[C+1],37)&&l[C+2]!==$?(re(),le("{%","%}","liquid"),ke()):t(l[C],123)&&t(l[C+1],123)&&l[C+2]!==$?(re(),le("{{","}}","liquid"),ke()):(he=!1,v.push(l[C]))):v.push(l[C]),r.language!=="json"&&r.language!=="javascript"&&(t($,34)||t($,39))&&(he===!0||C>U)&&F(l[C-1],92)&&F(l[C],34)&&F(l[C],39)&&(t(l[C],10)||C===j-1)){r.error="Unterminated string in script on line number "+r.lineNumber;break}if(l[C]===T[P-1]&&(F(l[C-1],92)||z(C-1)===!1)&&(P===1||v[C-de]===T[0]&&v.slice(C-de-P+2).join(d)===y))break;C=C+1}while(C<j);re()}function ve(){let $=d,y=A(5,!1),m=r.count,C=r.lineOffset;if(!(r.language==="json"||n.length<1||n[n.length-1].charAt(0)!=="x"||/^x?(;|\}|\))$/.test(f)===!1)&&!(e.stack[r.count]==="do"&&y==="while"&&t(e.token[r.count],125))){if(t(f,59)&&e.token[m-1]==="x{"){if($=e.token[e.begin[m-2]-1],e.token[m-2]==="do"||t(e.token[m-2],41)&&"ifforwhilecatch".indexOf($)>-1){E=r.pop(e),f=i.correct===!0?"}":"x}",b="end",I=r.stack.entry,g(),n.pop(),r.lineOffset=C;return}E=r.pop(e),f=i.correct===!0?"}":"x}",b="end",I=r.stack.entry,g(),n.pop(),f=";",b="end",r.push(e,E,d),r.lineOffset=C;return}if(f=i.correct===!0?"}":"x}",b="end",e.token[r.count]!=="x}"){if(y==="else"&&e.stack[r.count]==="if"&&(t(e.token[r.count],59)||e.token[r.count]==="x;")){I=r.stack.entry,g(),n.pop(),r.lineOffset=C;return}do if(I=r.stack.entry,g(),n.pop(),e.stack[r.count]==="do")break;while(n[n.length-1]==="x{");r.lineOffset=C}}}function M(){let $=r.count;if(e.stack[$]==="object"&&x.objectSort===!0)f=",",b="separator",ne(),g();else{do $=$-1;while($>0&&e.types[$-1]==="comment");r.splice({data:e,howmany:0,index:$,record:{begin:e.begin[$],ender:-1,lexer:"script",lines:r.lineOffset,stack:e.stack[$],token:",",types:"separator"}}),g()}}function Z($){let y=!1,m=!1,C=A(1,!1),J=t(e.token[r.count],40)?r.count:e.begin[r.count];function he(){let v=0,N=e.token[J-1]==="Array",T=N?"[":"{",P=N?"]":"}",U=N?"array":"object";if(N===!0&&e.types[r.count]==="number"&&(v=Number(e.token[r.count]),E=r.pop(e)),E=r.pop(e),E=r.pop(e),E=r.pop(e),r.stack.pop(),f=T,b="start",g(U),v>0){f=",",b="separator";do g(),v=v-1;while(v>0)}f=P,b="end",g()}if(G>-1&&X(),h.length>0&&(h[h.length-1]===0?h.pop():h[h.length-1]=h[h.length-1]-1),(t($,41)||$==="x)"||t($,93))&&(i.correct===!0&&D(),ne()),(t($,41)||$==="x)")&&V(!1),O>-1&&(t($,125)&&(x.variableList==="list"&&k.count[O]===0||e.token[r.count]==="x;"&&x.variableList==="each")&&S(),k.count[O]=k.count[O]-1,k.count[O]<0&&S()),t(f,44)&&e.stack[r.count]!=="initializer"&&(t($,93)&&t(e.token[r.count-1],91)||t($,125))&&(E=r.pop(e)),t($,41)||$==="x)"?(f=$,s.length>0&&(Y=s[s.length-1],Y.length>1&&F(C,123)&&(Y[0]==="if"||Y[0]==="for"||Y[0]==="with"||Y[0]==="while"&&e.stack[Y[1]-2]!==void 0&&e.stack[Y[1]-2]!=="do")&&(y=!0))):t($,93)?f="]":t($,125)&&(F(f,44)&&i.correct===!0&&D(),r.stack.length>0&&r.stack.token!=="object"&&V(!0),x.objectSort===!0&&r.stack.token==="object"&&$t(e),b==="comment"&&(f=e.token[r.count],b=e.types[r.count]),f="}"),r.stack.token==="data_type"?b="type_end":b="end",s.pop(),I=r.stack.entry,t($,41)&&i.correct===!0&&J-r.count<2&&(t(e.token[r.count],40)||e.types[r.count]==="number")&&(e.token[J-1]==="Array"||e.token[J-1]==="Object")&&e.token[J-2]==="new"&&(he(),m=!0),n[n.length-1]==="x{"&&t($,125)?(ve(),n.pop(),e.stack[r.count]!=="try"&&F(C,58)&&F(C,59)&&e.token[e.begin[c]-1]!=="?"&&ve(),f="}"):n.pop(),x.endComma!==void 0&&x.endComma!=="none"&&r.stack.token==="array"||r.stack.token==="object"||r.stack.token==="data_type")if(x.endComma==="always"&&F(e.token[r.count],44)){let v=r.stack.index,N=r.count;do{if(e.begin[N]===v){if(t(e.token[N],44))break}else N=e.begin[N];N=N-1}while(N>v);if(N>v){let T=b,P=f;f=",",b="separator",g(),f=P,b=T}}else x.endComma==="never"&&t(e.token[r.count],44)&&r.pop(e);m===!1&&(g(),t(f,125)&&e.stack[r.count]!=="object"&&e.stack[r.count]!=="class"&&e.stack[r.count]!=="data_type"&&(a.pop(),ve())),y===!0&&(f=i.correct===!0?"{":"x{",b="start",g(Y[0]),n.push("x{"),Y[1]=r.count),L.pop(),r.stack.token!=="data_type"&&(L[L.length-1]=!1)}function w($){let y=r.count,m=d,C=d,J=d,he=!1;if(n.push($),t($,123)&&(e.types[r.count]==="type"||e.types[r.count]==="type_end"||e.types[r.count]==="generic")){let v=0;e.types[r.count]==="type_end"&&(y=e.begin[r.count]),v=y;do if(y=y-1,e.begin[y]!==v&&e.begin[y]!==-1||t(e.token[y],58))break;while(y>e.begin[y]);t(e.token[y],58)&&e.stack[y-1]==="arguments"?(L.push(!1),he=!0):L.push(L[L.length-1]),y=r.count}else t($,91)&&e.types[r.count]==="type_end"?L.push(!0):L.push(L[L.length-1]);if(G>-1&&(X(),y=r.count),O>-1&&(k.count[O]=k.count[O]+1),e.token[y-1]==="function"?s.push(["function",y+1]):s.push([f,y+1]),f=$,L[L.length-1]===!0?b="type_start":b="start",t($,40)||$==="x("?ne():t($,91)&&(B>-1?(e.begin[B-1]===e.begin[e.begin[y]-1]||e.token[e.begin[y]]==="x(")&&(B=-1,i.correct===!0?Z(")"):Z("x)"),ne(),f="{",b="start"):t(f,41)&&ne(),b==="comment"&&t(e.token[y-1],41)&&(f=e.token[y],e.token[y]="{",b=e.types[y],e.types[y]="start")),m=(()=>{let v=r.count;if(e.types[v]==="comment")do v=v-1;while(v>0&&e.types[v]==="comment");return e.token[v]})(),C=e.stack[y]===void 0?d:(()=>{let v=r.count;if(e.types[v]==="comment")do v=v-1;while(v>0&&e.types[v]==="comment");return e.token[e.begin[v]-1]})(),t(f,123)&&(e.types[y]==="word"||t(e.token[y],93))){let v=y;if(t(e.token[v],93))do v=e.begin[v]-1;while(t(e.token[v],93));do{if(e.types[v]==="start"||e.types[v]==="end"||e.types[v]==="operator")break;v=v-1}while(v>0);t(e.token[v],58)&&e.stack[v-1]==="arguments"&&(J="function",a.push(q),q=[])}if(b==="type_start")J="data_type";else if(J===d&&(t(f,123)||f==="x{")){if(m==="else"||m==="do"||m==="try"||m==="finally"||m==="switch")J=m;else if(h[h.length-1]===0&&m!=="return")h.pop(),J="class";else if(e.token[y-1]==="class")J="class";else if(t(e.token[y],93)&&t(e.token[y-1],91))J="array";else if((e.types[y]==="word"||e.types[y]==="reference")&&(e.types[y-1]==="word"||e.types[y-1]==="reference"||e.token[y-1]==="?"&&(e.types[y-2]==="word"||e.types[y-2]==="reference"))&&e.token[y]!=="in"&&e.token[y-1]!=="export"&&e.token[y-1]!=="import")J="map";else if(e.stack[y]==="method"&&e.types[y]==="end"&&(e.types[e.begin[y]-1]==="word"||e.types[e.begin[y]-1]==="reference")&&e.token[e.begin[y]-2]==="new")J="initializer";else if(t(f,123)&&(t(m,41)||m==="x)")&&(e.types[e.begin[y]-1]==="word"||e.types[e.begin[y]-1]==="reference"||e.token[e.begin[y]-1]==="]"))C==="if"?J="if":C==="for"?J="for":C==="while"?J="while":C==="class"?J="class":C==="switch"||e.token[e.begin[y]-1]==="switch"?J="switch":C==="catch"?J="catch":J="function";else if(t(f,123)&&(t(m,59)||m==="x;"))J="block";else if(t(f,123)&&t(e.token[y],58)&&e.stack[y]==="switch")J="block";else if(e.token[y-1]==="import"||e.token[y-2]==="import"||e.token[y-1]==="export"||e.token[y-2]==="export")J="object";else if(t(m,41)&&(Y[0]==="function"||Y[0]==="if"||Y[0]==="for"||Y[0]==="class"||Y[0]==="while"||Y[0]==="switch"||Y[0]==="catch"))J=Y[0];else if(e.stack[y]==="notation")J="function";else if((e.types[y]==="number"||e.types[y]==="string"||e.types[y]==="word"||e.types[y]==="reference")&&(e.types[y-1]==="word"||e.types[y-1]==="reference")&&e.token[e.begin[y]-1]!=="for")J="function";else if(r.stack.length>0&&F(e.token[y],58)&&r.stack.token==="object"&&(t(e.token[e.begin[y]-2],123)||t(e.token[e.begin[y]-2],44)))J="function";else if(e.types[Y[1]-1]==="markup"&&e.token[Y[1]-3]==="function")J="function";else if(m==="=>")J="function";else if(he===!0||e.types[r.count]==="type_end"&&e.stack[e.begin[r.count]-2]==="arguments")J="function";else if(t(m,41)&&e.stack[y]==="method"&&(e.types[e.begin[y]-1]==="word"||e.types[e.begin[y]-1]==="property"||e.types[e.begin[y]-1]==="reference"))J="function";else if(t(f,123)&&e.types[y]==="word"&&e.token[y]!=="return"&&e.token[y]!=="in"&&e.token[y]!=="import"&&e.token[y]!=="const"&&e.token[y]!=="let"&&e.token[y]!==d)J="block";else if(t(f,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(e.stack[y])>-1&&(e.token[y]==="x}"||t(e.token[y],125)))J="block";else if(e.stack[y]==="arguments")J="function";else if(e.types[y]==="generic")do{if(y=y-1,e.token[y]==="function"||e.stack[y]==="arguments"){J="function";break}if(e.token[y]==="interface"){J="map";break}if(t(e.token[y],59)){J="object";break}}while(y>e.begin[r.count]);else J="object";J!=="object"&&J!=="class"&&(J==="function"?(a.push(q),q=[]):a.push([]))}else t(f,91)?J="array":(t(f,40)||f==="x(")&&(m==="function"||e.token[y-1]==="function"||e.token[y-1]==="function*"||e.token[y-2]==="function"?J="arguments":t(e.token[y-1],46)||t(e.token[e.begin[y]-2],46)||e.types[y]==="generic"||t(e.token[y],125)&&e.stack[y]==="function"?J="method":m==="if"||m==="for"||m==="class"||m==="while"||m==="catch"||m==="finally"||m==="switch"||m==="with"?J="expression":e.types[y]==="word"||e.types[y]==="property"||e.types[y]==="reference"?J="method":J="paren");g(J),h.length>0&&(h[h.length-1]=h[h.length-1]+1)}function Q($){let y=2,m=0,C=d,J=$.slice(0,2),he=$.length;if(t($[2],45)&&(y=y+1),ue($.charAt(y))===!0)do y=y+1;while(ue($.charAt(y))===!0&&y<he);m=y;do m=m+1;while(ue($.charAt(m))===!1&&$.charAt(m)!=="("&&m<he);if(m===he&&(m=$.length-2),C=$.slice(y,m),C==="else"||J==="{%"&&(C==="elseif"||C==="when"||C==="elif"||C==="elsif"))return["liquid_else",`liquid_${C}`];if(J==="{{")return C==="end"?["liquid_end",d]:C==="define"||C==="form"||C==="if"||C==="unless"||C==="range"||C==="with"?["liquid_start",`liquid_${C}`]:["liquid",d];if(m=oe.length-1,m>-1)do{if(C===oe[m]&&C!=="block")return["liquid_start",`liquid_${C}`];if(C==="end"+oe[m])return["liquid_end",d];m=m-1}while(m>-1);return["liquid",d]}function X(){let $=G,y=1,m=d,C=d,J=f,he=b,v=[];function N(){n.push("x{"),r.splice({data:e,howmany:1,index:r.count-3})}function T(P,U,de){let ce=e.begin[P],ke=0;do{if(e.token[P]===U&&e.types[P]==="word"){if(de===!0)e.types[P]="reference";else if(e.begin[P]>ce&&e.token[e.begin[P]]==="{"&&e.stack[P]!=="object"&&e.stack[P]!=="class"&&e.stack[P]!=="data_type")if(e.stack[P]==="function")e.types[P]="reference";else{ke=e.begin[P];do{if(e.stack[ke]==="function"){e.types[P]="reference";break}ke=e.begin[ke]}while(ke>ce)}}P=P-1}while(P>ce)}do v.push(l[$]),t(l[$],92),$=$+1;while($<c);if(f.charAt(0)==="\u201C"?r.error=`Quote looking character (\u201C, \\u201c) used instead of actual quotes on line number ${r.lineNumber}`:f.charAt(0)==="\u201D"&&(r.error=`Quote looking character (\u201D, \\u201d) used instead of actual quotes on line number ${r.lineNumber}`),m=v.join(d),G=-1,r.count>0&&m==="function"&&t(e.token[r.count],40)&&(t(e.token[r.count-1],123)||e.token[r.count-1]==="x{")&&(e.types[r.count]="start"),r.count>1&&m==="function"&&t(f,40)&&(t(e.token[r.count-1],125)||e.token[r.count-1]==="x}"))if(t(e.token[r.count-1],125)){if($=r.count-2,$>-1)do{if(e.types[$]==="end"?y=y+1:(e.types[$]==="start"||e.types[$]==="end")&&(y=y-1),y===0)break;$=$-1}while($>-1);if(t(e.token[$],123)&&t(e.token[$-1],41)){if(y=1,$=$-2,$>-1)do{if(e.types[$]==="end"?y=y+1:(e.types[$]==="start"||e.types[$]==="end")&&(y=y-1),y===0)break;$=$-1}while($>-1);e.token[$-1]!=="function"&&e.token[$-2]!=="function"&&(e.types[r.count]="start")}}else e.types[r.count]="start";if(i.correct===!0&&(m==="Object"||m==="Array")&&t(l[c+1],40)&&t(l[c+2],41)&&t(e.token[r.count-1],61)&&e.token[r.count]==="new")m==="Object"?(e.token[r.count]="{",f="}",e.stack[r.count]="object",r.stack.update("object")):(e.token[r.count]="[",f="]",e.stack[r.count]="array",r.stack.update("array")),e.types[r.count]="start",b="end",l[c+1]=d,l[c+2]=d,c=c+2;else{if(y=r.count,$=y,x.variableList!=="none"&&(m==="var"||m==="let"||m==="const")){if(e.types[y]==="comment")do y=y-1;while(y>0&&e.types[y]==="comment");if(x.variableList==="list"&&O>-1&&k.index[O]===y&&m===k.word[O]){f=",",b="separator",e.token[y]=f,e.types[y]=b,k.count[O]=0,k.index[O]=y,k.word[O]=m;return}O=O+1,k.count.push(0),k.index.push(y),k.word.push(m),y=$}else O>-1&&m!==k.word[O]&&r.count===k.index[O]&&t(e.token[k.index[O]],59)&&f!==k.word[O]&&x.variableList==="list"&&S();if(m==="from"&&e.token[r.count]==="x;"&&t(e.token[r.count-1],125)&&ne(),m==="while"&&e.token[r.count]==="x;"&&t(e.token[r.count-1],125)){let P=0,U=r.count-2;if(U>-1)do{if(e.types[U]==="end"?P=P+1:e.types[U]==="start"&&(P=P-1),P<0){t(e.token[U],123)&&e.token[U-1]==="do"&&ne();return}U=U-1}while(U>-1)}if(he==="comment"){let P=r.count;do P=P-1;while(P>0&&e.types[P]==="comment");he=e.types[P],J=e.token[P]}if(C=A(2,!1),m==="void")J===":"&&e.stack[r.count-1]==="arguments"?b="type":b="word";else if((r.stack.token==="object"||r.stack.token==="class"||r.stack.token==="data_type")&&(t(e.token[r.count],123)||t(e.token[e.begin[r.count]],123)&&t(e.token[r.count],44)||e.types[r.count]==="liquid_end"&&(t(e.token[e.begin[r.count]-1],123)||t(e.token[e.begin[r.count]-1],44))))m==="return"||m==="break"?b="word":b="property";else if(L[L.length-1]===!0||(r.language==="typescript"||r.language==="flow")&&J==="type")b="type";else if(a.length>0&&(J==="function"||J==="class"||J==="const"||J==="let"||J==="var"||J==="new"||J==="void"))b="reference",a[a.length-1].push(m),(r.language==="javascript"||r.language==="jsx"||r.language==="typescript"||r.language==="tsx")&&(J==="var"||J==="function"&&e.types[r.count-1]!=="operator"&&e.types[r.count-1]!=="start"&&e.types[r.count-1]!=="end")?T(r.count,m,!0):T(r.count,m,!1);else if(r.stack.token==="arguments"&&b!=="operator")b="reference",q.push(m);else if(t(J,44)&&e.stack[r.count]!=="method"&&(e.stack[r.count]!=="expression"||e.token[e.begin[r.count]-1]==="for")){let P=r.count,U=r.stack.index;do{if(e.begin[P]===U){if(e.token[P]===";"||e.token[P]==="var"||e.token[P]==="let"||e.token[P]==="const"||e.token[P]==="type")break}else e.types[P]==="end"&&(P=e.begin[P]);P=P-1}while(P>U);a.length>0&&e.token[P]==="var"?(b="reference",a[a.length-1].push(m),r.language==="javascript"||r.language==="jsx"||r.language==="typescript"||r.language==="tsx"?T(P,m,!0):T(P,m,!1)):a.length>0&&(e.token[P]==="let"||e.token[P]==="const"||e.token[P]==="type"&&(r.language==="typescript"||r.language==="tsx"))?(b="reference",a[a.length-1].push(m),T(P,m,!1)):b="word"}else if(r.stack.token!=="object"||r.stack.token==="object"&&f!==","&&f!=="{"){let P=a.length,U=0;if(P>0){do if(P=P-1,U=a[P].length,U>0){do if(U=U-1,m===a[P][U])break;while(U>0);if(m===a[P][U])break}while(P>0);a[P][U]===m&&J!=="."?b="reference":b="word"}else b="word"}else b="word";f=m,m==="from"&&e.token[r.count]==="}"&&ne()}if(g(),m==="class"&&h.push(0),m==="do"&&(C=A(1,!0),C!=="{"&&(f=i.correct===!0?"{":"x{",b="start",n.push("x{"),g("do"))),m==="else"){C=A(2,!0);let P=r.count-1;if(e.types[P]==="comment")do P=P-1;while(P>0&&e.types[P]==="comment");e.token[P]==="x}"&&(e.token[r.count]==="else"?e.stack[r.count-1]!=="if"&&e.types[r.count-1]!=="comment"&&e.stack[r.count-1]!=="else"?(n.pop(),r.splice({data:e,howmany:0,index:r.count-1,record:{begin:e.begin[e.begin[e.begin[r.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:i.correct===!0?"}":"x}",types:"end"}}),r.stack.length>1&&(r.stack.splice(r.stack.length-2,1),r.stack.update(r.count))):(e.token[r.count-2]==="x}"&&I[0]!=="if"&&e.stack[r.count]==="else"||e.token[r.count-2]==="}"&&e.stack[r.count-2]==="if"&&I[0]==="if"&&e.token[I[1]-1]!=="if"&&e.token[e.begin[r.count-1]]==="x{")&&N():e.token[r.count]==="x}"&&e.stack[r.count]==="if"&&N()),C!=="if"&&F(C,123)&&(f=i.correct===!0?"{":"x{",b="start",n.push("x{"),g("else"))}(m==="for"||m==="if"||m==="switch"||m==="catch")&&e.token[r.count-1]!=="."&&(C=A(1,!0),C!=="("&&(B=r.count,i.correct===!0?w("("):w("x(")))}function ae(){r.lineOffset=1;do{if(t(l[c],10)&&(r.lineIndex=c,r.lineOffset=r.lineOffset+1,r.lineNumber=r.lineNumber+1),ue(l[c+1])===!1)break;c=c+1}while(c<j)}do ue(l[c])?(G>-1&&X(),ae(),r.lineOffset>1&&u<r.count&&F(l[c+1],59)&&F(l[c+1],125)&&(V(!1),u=r.count)):t(l[c],123)&&t(l[c+1],37)?le("{%","%}","liquid"):t(l[c],123)&&t(l[c+1],123)?le("{{","}}","liquid"):t(l[c],60)&&t(l[c+1],33)&&t(l[c+2],45)&&t(l[c+3],45)?le("<!--","-->","comment"):t(l[c],60)?fe():t(l[c],47)&&(c===j-1||t(l[c+1],42))?xe():(r.count<0||e.lines[r.count]>0)&&t(l[c],35)&&t(l[c+1],33)&&(t(l[c+2],47)||t(l[c+3],91))?le("#!"+l[c+2],ee,"string"):t(l[c],47)&&(c===j-1||t(l[c+1],47))?_():t(l[c],96)||t(l[c],125)&&r.stack.token==="template_string"?(G>-1&&X(),f=K(),t(f,125)&&f.slice(f.length-2)==="${"?(b="template_string_else",g("template_string")):f.slice(f.length-2)==="${"?(b="template_string_start",g("template_string")):t(f[0],125)?(b="template_string_end",g()):(b="string",g())):t(l[c],34)||t(l[c],39)?le(l[c],l[c],"string"):t(l[c],45)&&c<j-1&&F(l[c+1],61)&&F(l[c+1],45)&&(b==="number"||b==="word"||b==="reference")&&f!=="return"&&(b==="word"||b==="reference"||b==="number"||t(f,41)||t(f,93))?(G>-1&&X(),f="-",b="operator",g()):G===-1&&(l[c]!=="0"||l[c]==="0"&&l[c+1]!=="b")&&(Pe(l[c])||c!==j-2&&t(l[c],45)&&t(l[c+1],46)&&Pe(l[c+2])||c!==j-1&&(t(l[c],45)||t(l[c],46))&&Pe(l[c+1]))?(G>-1&&X(),b==="end"&&t(l[c],45)?(f="-",b="operator"):(f=te(),b="number"),g()):t(l[c],58)&&t(l[c+1],58)?(G>-1&&X(),i.correct===!0&&D(),ne(),c=c+1,f="::",b="separator",g()):t(l[c],44)?(G>-1&&X(),i.correct===!0&&D(),L[L.length-1]===!0&&e.stack[r.count].indexOf("type")<0&&(L[L.length-1]=!1),b==="comment"?M():O>-1&&k.count[O]===0&&x.variableList==="each"?(ne(),f=";",b="separator",g(),f=k.word[O],b="word",g(),k.index[O]=r.count):(f=",",b="separator",ne(),g())):t(l[c],46)?(G>-1&&X(),L[L.length-1]=!1,t(l[c+1],46)&&t(l[c+2],46)?(f="...",b="operator",c=c+2):(ne(),f=".",b="separator"),ue(l[c-1])&&(r.lineOffset=1),g()):t(l[c],59)?(G>-1&&X(),L[L.length-1]===!0&&e.stack[r.count].indexOf("type")<0&&(L[L.length-1]=!1),h[h.length-1]===0&&h.pop(),O>-1&&k.count[O]===0&&(x.variableList==="each"?S():k.index[O]=r.count+1),i.correct===!0&&D(),f=";",b="separator",e.token[r.count]==="x}"?ye():g(),ve()):t(l[c],40)||t(l[c],91)||t(l[c],123)?w(l[c]):t(l[c],41)||t(l[c],93)||t(l[c],125)?Z(l[c]):G<0&&e.stack[r.count]==="object"&&t(l[c],42)&&F(l[c+1],61)&&Pe(l[c+1])===!1&&ue(l[c+1])===!1?G=c:t(l[c],61)||t(l[c],38)||t(l[c],60)||t(l[c],62)||t(l[c],43)||t(l[c],45)||t(l[c],42)||t(l[c],47)||t(l[c],33)||t(l[c],63)||t(l[c],124)||t(l[c],94)||t(l[c],58)||t(l[c],37)||t(l[c],94)?(f=H(),f==="regex"?f=e.token[r.count]:t(f,42)&&e.token[r.count]==="function"?e.token[r.count]="function*":(b="operator",F(f,33)&&f!=="++"&&f!=="--"&&ne(),g())):G<0&&l[c]!==d&&(G=c),O>-1&&r.count===k.index[O]+1&&t(e.token[k.index[O]],59)&&f!==k.word[O]&&b!=="comment"&&x.variableList==="list"&&S(),c=c+1;while(c<j);return G>-1&&X(),(F(e.token[r.count],125)&&t(e.token[0],123)||F(e.token[0],123))&&(F(e.token[r.count],93)&&t(e.token[0],91)||F(e.token[0],91))&&V(!1),o[0]===r.count&&(f=ee+o[1],b="string",g()),e.token[r.count]==="x;"&&(t(e.token[r.count-1],125)||t(e.token[r.count-1],93))&&e.begin[r.count-1]===0&&r.pop(e),x.objectSort&&e.begin.length>0&&Zt(0,r.count+1),e}function _n(){let{data:e,rules:a,source:i}=r,p=i.split(d),x=i.length,l=[],j=[],s=0,n=d,h=d;function o(B){r.push(e,{begin:r.stack.index,ender:-1,lexer:"style",lines:r.lineOffset,stack:r.stack.token,token:h,types:n},B)}function L(B){let q=B;do B=B-1;while(t(p[B],92)&&B>0);return(q-B)%2===1}function k(B){let q=B.replace(/\s*!important/," !important").split(d),E=/-?transition$/.test(e.token[r.count-2]),I=[],ie=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g,oe=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g,S=0,g=0,A=d,z=q.length,V=[],ne=H=>H;function ye(H){return H=H.replace(/\s*/g,d),/\/\d/.test(H)&&B.indexOf("url(")===0?H:` ${H.charAt(0)} ${H.charAt(1)}`}function xe(H){return a.style.noLeadZero===!0?H.replace(/^-?\D0+(\.|\d)/,K=>K.replace(/0+/,d)):/0*\./.test(H)?H.replace(/0*\./,"0."):/0+/.test(/\d+/.exec(H)[0])?/^\D*0+\D*$/.test(H)?H.replace(/0+/,"0"):H.replace(/\d+/.exec(H)[0],/\d+/.exec(H)[0].replace(/^0+/,d)):H}function _(H){return H.replace(",",", ")}function W(H){return`${H} `}function te(){let H=S-1,K=H;if(H<1)return!0;do K=K-1;while(K>0&&t(q[K],92));return(H-K)%2===1}if(S<z)do V.push(q[S]),(F(q[S-1],92)||te()===!1)&&(A===d?t(q[S],34)?(A=Se,g=g+1):t(q[S],39)?(A=Ce,g=g+1):t(q[S],40)?(A=")",g=g+1):t(q[S],91)&&(A="]",g=g+1):t(q[S],40)&&t(A,41)||t(q[S],91)&&t(A,93)?g=g+1:q[S]===A&&(g=g-1,g===0&&(A=d))),A===d&&t(q[S],32)&&(V.pop(),I.push(ne(V.join(d))),V=[]),S=S+1;while(S<z);if(I.push(ne(V.join(d))),z=I.length,S=0,S<z)do a.style.noLeadZero===!0&&/^-?0+\.\d+[a-z]/.test(I[S])===!0?I[S]=I[S].replace(/0+\./,"."):a.style.noLeadZero===!1&&/^-?\.\d+[a-z]/.test(I[S])?I[S]=I[S].replace(".","0."):ie.test(I[S])||oe.test(I[S])?I[S]=I[S].replace(ie,xe).replace(oe,xe):/^(0+([a-z]{2,3}|%))$/.test(I[S])&&E===!1?I[S]="0":/^(0+)/.test(I[S])?(I[S]=I[S].replace(/0+/,"0"),/\d/.test(I[S].charAt(1))&&(I[S]=I[S].substr(1))):/^url\((?!('|"))/.test(I[S])&&I[S].charCodeAt(I[S].length-1)===41&&(A=I[S].charAt(I[S].indexOf("url(")+4),A!=="@"&&F(A,40)&&F(A,60)&&(a.style.quoteConvert==="double"?I[S]=I[S].replace(/url\(/,'url("').replace(/\)$/,'")'):I[S]=I[S].replace(/url\(/,"url('").replace(/\)$/,"')"))),/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(I[S])&&(je.css.units.has(I[S].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,d))||(I[S]=I[S].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,W))),/^\w+\(/.test(I[S])&&I[S].charAt(I[S].length-1)===")"&&(I[S].indexOf("url(")!==0||I[S].indexOf("url(")===0&&I[S].indexOf(se)>0)&&(I[S]=I[S].replace(/,\S/g,_)),S=S+1;while(S<z);return A=I.join(se),A.charAt(0)+A.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,ye)}function O(){let B=[],q=[],E=a.style.quoteConvert,I=s,ie=0,oe=d,S=null,g=!1;function A(){if(q.push(p[I]),ue(p[I+1]))do I=I+1;while(I<x&&ue(p[I+1]))}if(I<x)do{if(t(p[I],34)||t(p[I],39)?(S===null&&(S=!1),B[B.length-1]===p[I]&&(F(p[I-1],92)||L(I-1)===!1)?(B.pop(),E==="double"?p[I]=Se:E==="single"&&(p[I]=Ce)):F(B[B.length-1],34)&&F(B[B.length-1],39)&&(F(p[I-1],92)||L(I-1)===!1)?(B.push(p[I]),E==="double"?p[I]=Se:E==="single"&&(p[I]=Ce)):t(p[I-1],92)&&E!=="none"?L(I-1)===!0&&(E==="double"&&t(p[I],39)||E==="single"&&t(p[I],34))&&q.pop():E==="double"&&t(p[I],34)?p[I]='\\"':E==="single"&&t(p[I],39)&&(p[I]="\\'"),q.push(p[I])):F(p[I-1],92)||L(I-1)===!1?t(p[I],40)?(S===null&&(S=!0),B.push(")"),A()):t(p[I],91)?(S=!1,B.push("]"),A()):(t(p[I],35)||t(p[I],64))&&t(p[I+1],123)?(S=!1,q.push(p[I]),I=I+1,B.push("}"),A()):p[I]===B[B.length-1]?(q.push(p[I]),B.pop()):q.push(p[I]):q.push(p[I]),r.stack.token==="map"&&B.length===0&&(t(p[I+1],44)||t(p[I+1],41)))if(t(p[I+1],41)&&t(e.token[r.count],40))r.pop(e),r.stack.pop(),q.splice(0,0,"(");else break;if(t(p[I+1],58)){if(ie=I,ue(p[ie]))do ie=ie-1;while(ue(p[ie]));oe=p.slice(ie-6,ie+1).join(d),(oe.indexOf("filter")===oe.length-6||oe.indexOf("progid")===oe.length-6)&&(oe="filter")}if(B.length===0){if(t(p[I+1],59)&&L(I+1)===!0||t(p[I+1],58)&&F(p[I],58)&&F(p[I+2],58)&&oe!=="filter"&&oe!=="progid"||t(p[I+1],123)||t(p[I+1],125)||t(p[I+1],47)&&(t(p[I+2],42)||t(p[I+2],47))){if(ie=q.length-1,ue(q[ie]))do ie=ie-1,I=I-1,q.pop();while(ue(q[ie]));break}if(t(p[I+1],44))break}I=I+1}while(I<x);s=I,r.stack.token==="map"&&t(q[0],40)&&(l[l.length-1]=l[l.length-1]-1),h=q.join(d).replace(/\s+/g,se).replace(/^\s/,d).replace(/\s$/,d),S===!0&&(je.css.atrules(h)&&a.style.atRuleSpace===!0?e.token[r.count]=e.token[r.count].replace(/\s*\(/g," (").replace(/\s*\)\s*/g,") ").replace(/,\(/g,", ("):h=h.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")),n==="colon"&&e.types[r.count-1]==="start"?je.css.pseudoClasses.has(h)&&(e.token[r.count]=h=":"+h,n="pseudo",g=!0):r.count>-1&&e.token[r.count].indexOf("extend(")===0?n="pseudo":S===!0&&Pe(h.charAt(0))===!1&&/^rgba?\(/.test(h)===!1&&h.indexOf("url(")!==0&&(h.indexOf(se)<0||h.indexOf(se)>h.indexOf("("))&&h.charAt(h.length-1)===")"?(t(e.token[r.count],58)?n="value":(h=h.replace(/,\u0020?/g,", "),n="function"),h=k(h)):r.count>-1&&Ce.indexOf(e.token[r.count].charAt(0))>-1&&e.types[r.count]==="variable"?n="item":t(q[0],64)||q[0]==="$"?(e.types[r.count]==="colon"&&a.language==="css"&&(e.types[r.count-1]==="property"||e.types[r.count-1]==="variable")?n="value":r.count>-1&&(n="item",oe=e.token[r.count],I=oe.indexOf("("),t(oe[oe.length-1],41)&&I>0&&(oe=oe.slice(I+1,oe.length-1),e.token[r.count]=e.token[r.count].slice(0,I+1)+k(oe)+")")),h=k(h)):n="item",g===!1?o(d):g=!1}function c(B){let q=r.count,E=0,I=d,ie=[];function oe(){if(!(r.count<0)){if(q>0&&(e.types[q]==="comment"||e.types[q]==="ignore"))do q=q-1,ie.push(e.token[q]);while(q>0&&e.lexer[q]==="style"&&(e.types[q]==="comment"||e.types[q]==="ignore"));if(E=q-1,E>0&&(e.types[E]==="comment"||e.types[E]==="ignore"))do E=E-1;while(E>0&&e.lexer[q]==="style"&&(e.types[E]==="comment"||e.types[E]==="ignore"));E<0&&(E=0),q<0&&(q=0),I=e.token[q][0]}}function S(A){return A.replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ")}function g(A){let z=A,V=e.begin[z];if(e.token[A]=e.token[A].replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ").replace(/:\s+/g,": ").replace(/^\s+/,d).replace(/\s+$/,d).replace(/\s+::\s+/,"::"),F(e.token[z],44)&&e.types[z]!=="comment"&&(e.types[z]="selector"),t(e.token[z-1],44)||t(e.token[z-1],58)||e.types[z-1]==="comment"||e.types[z-1]==="pseudo")if(e.types[z-1]==="colon"&&(e.types[z]==="selector"||e.types[z]==="at_rule")&&(e.types[z-2]==="template"||e.types[z-2]==="liquid_start"||e.types[z-2]==="liquid_else"||e.types[z-2]==="liquid_end"))e.token[z-1]=":"+e.token[z]+se,e.types[z-1]="selector",r.splice({data:e,howmany:1,index:z});else if(e.types[z-1]==="pseudo")e.token[z-1]=`${e.token[z-1]}${e.token[z]}`,e.types[z-1]="selector",r.splice({data:e,howmany:1,index:z});else if(e.types[z-2]==="comment")e.token[z-1]=S(`${e.token[z-1]}${e.token[z]}`),e.types[z-1]="selector",r.splice({data:e,howmany:1,index:z});else do if(z=z-1,e.begin[z]===V){if(t(e.token[z],59))break;F(e.token[z],44)&&e.types[z]!=="comment"&&(e.types[z]="selector"),e.token[z]===":"&&F(e.token[z-1],59)&&(e.token[z-1]=S(`${e.token[z-1]}:${e.token[z+1]}`),r.splice({data:e,howmany:2,index:z}))}else break;while(z>0);if(z=r.count,a.style.sortSelectors===!0&&t(e.token[z-1],44)){let ne=[e.token[z]];do{if(z=z-1,e.types[z]==="comment"||e.types[z]==="ignore")do z=z-1;while(z>0&&(e.types[z]==="comment"||e.types[z]==="ignore"));t(e.token[z],44)&&(z=z-1),ne.push(e.token[z])}while(z>0&&(t(e.token[z-1],44)||e.types[z-1]==="selector"||e.types[z-1]==="comment"||e.types[z-1]==="ignore"));ne.sort(),z=r.count,e.token[z]=ne.pop();do{if(z=z-1,e.types[z]==="comment"||e.types[z]==="ignore")do z=z-1;while(z>0&&(e.types[z]==="comment"||e.types[z]==="ignore"));t(e.token[z],44)&&(z=z-1),e.token[z]=ne.pop()}while(z>0&&(t(e.token[z-1],44)||e.types[z-1]==="selector"||e.types[z-1]==="comment"||e.types[z-1]==="ignore"))}q=r.count,oe()}oe(),B==="start"&&(e.types[q]==="value"||e.types[q]==="variable")&&(e.types[q]="item"),e.lexer[r.count-1]!=="style"||E<0?B==="colon"?t(I,36)||t(I,64)?e.types[q]="variable":e.stack[q]!=="global"&&(e.types[q]!=="comment"||e.types[q]!=="ignore")&&(e.types[q]="property"):e.lexer[q]==="style"&&(e.types[q]="selector",g(q)):B==="start"&&e.types[q]==="function"&&e.lexer[q]==="style"?(e.types[q]="selector",g(q)):e.types[q]==="item"&&e.lexer[q]==="style"&&(B==="start"?(g(q),e.types[q]="selector",e.token[q]===":"&&(e.types[E]="selector"),e.token[q].indexOf("=\u201C")>0?r.error=`Invalid Quote (\u201C, \\201c) used on line number ${r.lineNumber}`:e.token[q].indexOf("=\u201D")>0&&(r.error=`Invalid Quote (\u201D, \\201d) used on line number ${r.lineNumber}`)):B==="end"?(t(I,36)||t(I,64)?e.types[q]="variable":e.types[q]="value",e.token[q]=k(e.token[q])):B==="separator"?e.types[E]==="colon"||t(e.token[E],44)||t(e.token[E],123)?(F(p[s],59)&&(e.types[E]==="selector"||e.types[E]==="at_rule"||t(e.token[E],123))?(e.types[q]="selector",g(q)):t(e.token[q],36)||t(e.token[q],64)?e.types[q]="variable":e.types[q]="value",e.token[q]=k(e.token[q]),e.token[q].charAt(0)==="\u201C"?r.error=`Invalid Quote (\u201C, \\201c) used on line number ${r.lineNumber}`:e.token[q].charAt(0)==="\u201D"&&(r.error=`Invalid (\u201D, \\201d) used on line number ${r.lineNumber}`)):t(I,36)||t(I,64)?e.types[q]="variable":e.types[E]==="value"||e.types[E]==="variable"?(e.token[E]=e.token[E]+e.token[q],r.pop(e)):e.types[q]="value":B==="colon"?t(I,36)||t(I,64)?e.types[q]="variable":e.types[q]="property":t(e.token[E],64)&&(e.types[E-2]!=="variable"&&e.types[E-2]!=="property"||e.types[E-1]==="separator")?(e.types[E]="variable",n="variable",e.token[E]=k(e.token[E])):B==="comment"&&(t(I,46)||t(I,35))&&(e.types[q]="selector"))}function f(){let B=r.count;do B=B-1;while(B>0&&e.types[B]==="comment");e.token[B]!==";"&&r.splice({data:e,howmany:0,index:B+1,record:{begin:r.stack.index,ender:-1,lexer:"style",lines:r.lineOffset,stack:r.stack.token,token:";",types:"separator"}})}function b(B,q){let E=[],I=d,ie=d,oe=0,S=B.length;function g(A){let z=r.count>0?e.types[r.count-1]:e.types[r.count];n==="item"&&(z==="colon"?e.types[r.count]="value":c(z)),t(p[s+1],32),n=A,h=en(h,ie,a.liquid),n.indexOf("start")>-1||n.indexOf("else")>-1?o(h):o(d)}if(j[j.length-1]=!0,s<x)do{if(E.push(p[s]),I===d){if(t(p[s],34))I=Se;else if(t(p[s],39))I=Ce;else if(t(p[s],47))t(p[s+1],47)?I="/":t(p[s+1],42)&&(I="*");else if(p[s+1]===q.charAt(0)){do oe=oe+1,s=s+1,E.push(p[s]);while(s<x&&oe<q.length&&p[s+1]===q.charAt(oe));if(oe===q.length){if(I=E.join(d),ue(I.charAt(S)))do S=S+1;while(ue(I.charAt(S)));oe=S;do oe=oe+1;while(oe<q.length&&!ue(I.charAt(oe)));if(oe===I.length&&(oe=oe-q.length),B==="{%"&&(ie=Ee(I)),n==="item"&&e.types[r.count-1]==="colon"&&(e.types[r.count-2]==="property"||e.types[r.count-2]==="variable")){n="value",e.types[r.count]="value",Number.isNaN(Number(e.token[r.count]))===!0&&e.token[r.count].charAt(e.token[r.count].length-1)!==")"?e.token[r.count]=e.token[r.count]+I:e.token[r.count]=e.token[r.count]+se+I;return}if(h=I,B==="{%"){let A=Array.from(je.liquid.tags),z=A.length-1;if(ie=ie.slice(0,ie.indexOf(se)),ie.indexOf("(")>0&&(ie=ie.slice(0,ie.indexOf("("))),je.liquid.else.has(ie)){g("liquid_else");return}if(z=A.length-1,z>-1)do{if(ie===A[z]){g("liquid_start");return}if(ie==="end"+A[z]){g("liquid_end");return}z=z-1}while(z>-1)}else if(B==="{{"){let A=I.slice(2),z=A.length,V=0;do V=V+1;while(V<z&&ue(A.charAt(V))===!1&&A.charCodeAt(S)!==40);if(A=A.slice(0,V),t(A[A.length-2],125)&&(A=A.slice(0,A.length-2)),A==="end"){g("liquid_end");return}}g("liquid");return}oe=0}}else I===p[s]&&(t(I,34)||t(I,39)||t(I,47)&&(t(p[s],13)||t(p[s],10))||t(I,42)&&t(p[s+1],47))&&(I=d);s=s+1}while(s<x)}function Y(B){let q;B?(q=Rt({chars:p,start:s,end:x,lexer:"style",begin:"//",ender:ee}),h=q[0],n=Xt.test(h)?"ignore":"comment"):(q=At({chars:p,start:s,end:x,lexer:"style",begin:"/*",ender:"*/"}),h=q[0],n=kn.test(h)?"ignore":"comment"),o(d),s=q[1]}function u(){let B=r.lineOffset,q={data:{margin:[d,d,d,d,!1],padding:[d,d,d,d,!1]},last:{margin:0,padding:0},removes:[]},E=r.stack.index;function I(g){if(e.token[oe-2]===g){let A=e.token[oe].replace(/\s*!important\s*/g,d).split(se),z=A.length;e.token[oe].indexOf("!important")>-1&&(q.data[g[4]]=!0),z>3?(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[1]),q.data[g][2]===d&&(q.data[g][2]=A[2]),q.data[g][3]===d&&(q.data[g][3]=A[3])):z>2?(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[1]),q.data[g][2]===d&&(q.data[g][2]=A[2]),q.data[g][3]===d&&(q.data[g][3]=A[1])):z>1?(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[1]),q.data[g][2]===d&&(q.data[g][2]=A[0]),q.data[g][3]===d&&(q.data[g][3]=A[1])):(q.data[g][0]===d&&(q.data[g][0]=A[0]),q.data[g][1]===d&&(q.data[g][1]=A[0]),q.data[g][2]===d&&(q.data[g][2]=A[0]),q.data[g][3]===d&&(q.data[g][3]=A[0]))}else if(e.token[oe-2]===`${g}-bottom`)q.data[g][2]===d&&(q.data[g][2]=e.token[oe]);else if(e.token[oe-2]===`${g}-left`)q.data[g][3]===d&&(q.data[g][3]=e.token[oe]);else if(e.token[oe-2]===`${g}-right`)q.data[g][1]===d&&(q.data[g][1]=e.token[oe]);else if(e.token[oe-2]===`${g}-top`)q.data[g][0]===d&&(q.data[g][0]=e.token[oe]);else return;q.removes.push([oe,g]),q.last[g]=oe}function ie(){let g=0,A=d,z=/^(0+([a-z]+|%))/,V=q.removes.length,ne=q.data.margin[0]!==d&&q.data.margin[1]!==d&&q.data.margin[2]!==d&&q.data.margin[3]!==d,ye=q.data.padding[0]!==d&&q.data.padding[1]!==d&&q.data.padding[2]!==d&&q.data.padding[3]!==d;function xe(_){if(z.test(q.data[_][0])===!0&&(q.data[_][0]="0"),z.test(q.data[_][1])===!0&&(q.data[_][1]="0"),z.test(q.data[_][2])===!0&&(q.data[_][2]="0"),z.test(q.data[_][3])===!0&&(q.data[_][3]="0"),q.data[_][0]===q.data[_][1]&&q.data[_][0]===q.data[_][2]&&q.data[_][0]===q.data[_][3]?A=q.data[_][0]:q.data[_][0]===q.data[_][2]&&q.data[_][1]===q.data[_][3]&&q.data[_][0]!==q.data[_][1]?A=`${q.data[_][0]} ${q.data[_][1]}`:q.data[_][1]===q.data[_][3]&&q.data[_][0]!==q.data[_][2]?A=`${q.data[_][0]} ${q.data[_][1]} ${q.data[_][2]}`:A=`${q.data[_][0]} ${q.data[_][1]} ${q.data[_][2]} ${q.data[_][3]}`,q.data[_[4]]===!0&&(A=`${A.replace(" !important",d)} !important`),q.last[_]>r.count){g=E<1?1:E+1;do{if(e.begin[g]===E&&e.types[g]==="value"&&e.token[g-2].indexOf(_)===0){q.last[_]=g;break}g=g+1}while(g<r.count)}e.token[q.last[_]]=A,e.token[q.last[_]-2]=_}if(V>1&&(ne===!0||ye===!0))do q.removes[g][0]!==q.last.margin&&q.removes[g][0]!==q.last.padding&&(ne===!0&&q.removes[g][1]==="margin"||ye===!0&&q.removes[g][1]==="padding")&&r.splice({data:e,howmany:e.types[q.removes[g][0]+1]==="separator"?4:3,index:q.removes[g][0]-2}),g=g+1;while(g<V-1);ne===!0&&xe("margin"),ye===!0&&xe("padding"),S===!0&&(E<0?r.error="Brace mismatch. There appears to be more closing braces than starting braces.":Zt(E,r.count+1))}let oe=r.count,S=!1;do oe=oe-1,e.begin[oe]===E?e.types[oe]==="value"&&e.types[oe-2]==="property"&&(e.token[oe-2].indexOf("margin")===0?I("margin"):e.token[oe-2].indexOf("padding")===0&&I("padding")):(S=!0,oe=e.begin[oe]);while(oe>E);ie(),r.lineOffset=B}function G(){r.lineOffset=1;do{if(t(p[s],10)&&(r.lineIndex=s,r.lineOffset=r.lineOffset+1,r.lineNumber=r.lineNumber+1),ue(p[s+1])===!1)break;s=s+1}while(s<x)}do ue(p[s])?G():t(p[s],47)&&t(p[s+1],42)?Y(!1):t(p[s],47)&&t(p[s+1],47)?Y(!0):t(p[s],123)&&t(p[s+1],37)?b("{%","%}"):t(p[s],123)&&t(p[s+1],123)?b("{{","}}"):t(p[s],123)||t(p[s],40)&&t(e.token[r.count],58)&&e.types[r.count-1]==="variable"?(c("start"),n="start",h=p[s],t(p[s],40)?(o("map"),l.push(0)):e.types[r.count]==="at_rule"||e.types[r.count]==="selector"||e.types[r.count]==="variable"?(t(e.token[r.count],64)&&(e.types[r.count]="at_rule"),o(e.token[r.count])):e.types[r.count]==="colon"?o(e.token[r.count-1]):o("block"),j.push(!1)):t(p[s],125)||p[s]===")"&&r.stack.token==="map"&&l[l.length-1]===0?t(p[s],125)&&t(e.token[r.count-1],123)&&e.types[r.count]==="item"&&e.token[r.count-2]!==void 0&&e.token[r.count-2].charCodeAt(e.token[r.count-2].length-1)===64?(e.token[r.count-2]=e.token[r.count-2]+"{"+e.token[r.count]+"}",r.pop(e),r.pop(e),r.stack.pop()):(t(p[s],41)&&l.pop(),c("end"),t(p[s],125)&&F(e.token[r.count],59)&&(e.types[r.count]==="value"||e.types[r.count]==="function"||e.types[r.count]==="variable"&&(t(e.token[r.count-1],58)||t(e.token[r.count-1],59))?(a.correct===!0?h=";":h="x;",n="separator",o(d)):e.types[r.count]==="comment"&&f()),j.pop(),h=p[s],n="end",t(p[s],125)&&u(),a.style.sortProperties===!0&&t(p[s],125)&&$t(e),o(d)):t(p[s],59)||t(p[s],44)?(e.types[r.count-1]==="selector"||e.types[r.count-1]==="at_rule"||e.types[r.count]!=="function"&&t(e.token[r.count-1],125)?c("start"):c("separator"),e.types[r.count]!=="separator"&&L(s)===!0&&(h=p[s],n="separator",o(d))):r.count>-1&&t(p[s],58)&&e.types[r.count]!=="end"?(c("colon"),h=":",n="colon",o(d)):(r.stack.token==="map"&&t(p[s],40)&&(l[l.length-1]=l[l.length-1]+1),O()),s=s+1;while(s<x);return a.style.sortProperties===!0&&$t(e),e}function Vt(e){if(e===1)return nn();if(e===3)return _n();if(e===2)return Sn()}function Cn(){let{rules:e}=r,{lineBreakValue:a}=e.markup,i=r.start,p=-1,x=0,l=0,j=isNaN(e.indentLevel)?0:e.indentLevel,s=r.data,n=r.ender<1||r.ender>s.token.length?s.token.length:r.ender+1,h={},o=e.language==="jsx"||e.language==="tsx",L=new Map,k=r.start>0?Array(r.start).fill(0,0,r.start):[],O=ne(),c=q(),f=[];function b(_,W){return s.types[_]===W}function Y(_,W){return s.token[_]===W}function u(_,W){return _>-1&&(s.types[_]||d).indexOf(W)}function G(_,W=!0){let te=[],H=e.preserveLine+1,K=Math.min(s.lines[i+1]-1,H),fe=0;if(_<0&&(_=0),W)do te.push(r.crlf),fe=fe+1;while(fe<K);if(_>0){fe=0;do te.push(c),fe=fe+1;while(fe<_)}return te.join(d)}function B(){let _,W=s.lines[i+1];b(i,"comment")&&(t(s.token[i][1],37)&&e.liquid.preserveComment===!1||F(s.token[i][1],37)&&e.markup.preserveComment===!1)?_=s.token[i].split(r.crlf).map(D=>D.trimStart()):_=s.token[i].split(r.crlf);let te=b(i,"attribute"),H=_.length-1,K=O[i-1]>-1?te?O[i-1]+1:O[i-1]:(()=>{let D=i-1,le=D>-1&&u(D,"start")>-1;if(O[i]>-1&&b(i,"attribute"))return O[i]+1;do{if(D=D-1,O[D]>-1)return b(i,"content")&&le===!1?O[D]:O[D]+1;u(D,"start")>-1&&(le=!0)}while(D>0);return D===-2?0:1})(),fe=0;s.lines[i+1]=0;do b(i,"comment")?(fe===0&&(t(s.token[i][1],37)&&e.liquid.commentNewline===!0||t(s.token[i][1],37)===!1&&e.markup.commentNewline===!0)&&(e.preserveLine===0||f.length>0&&f[f.length-1].lastIndexOf(ee)+1<2)&&f.push(G(K)),_[fe]!==d?(fe>0&&(t(s.token[i][1],37)&&e.liquid.commentIndent===!0||t(s.token[i][1],37)===!1&&e.markup.commentIndent===!0)&&f.push(c),_[fe+1].trimStart()!==d?f.push(_[fe],G(K)):f.push(_[fe],ee)):_[fe+1].trimStart()===d?f.push(ee):f.push(G(K))):te?a==="align"||a==="force-align"?f.push(_[fe].trim(),G(O[i])):a==="indent"||a==="force-indent"?fe+1===H?f.push(_[fe].trim(),G(O[i])):f.push(_[fe].trim(),G(K)):(f.push(_[fe]),a==="force-preserve"&&(fe+1===H||fe===0)?f.push(G(O[i])):f.push(r.crlf)):f.push(_[fe],G(K)),fe=fe+1;while(fe<H);if(te&&F(_[H],60)&&L.get(i-1)>=2&&Me(_[H],62)&&e.markup.delimiterTerminus!=="inline"){L.delete(i-1);let D=G(O[i-1]-1);f[f.length-1]===D&&f.push(e.indentChar.repeat(e.indentSize)),b(i-1,"singleton")&&Qe(_[H],47)?f.push(_[H].slice(0,-2),D,"/>"):f.push(_[H].slice(0,-1),D,">")}else f.push(_[H]);s.lines[i+1]=W,b(i,"comment")&&(b(i+1,"liquid_end")||b(i-1,"liquid_end"))?f.push(G(O[i])):O[i]===-10?f.push(se):f.push(G(O[i]))}function q(){let _=[e.indentChar],W=e.indentSize-1,te=0;if(te<W)do _.push(e.indentChar),te=te+1;while(te<W);return _.join(d)}function E(){let _=i+1,W=0;if(b(_,void 0))return _-1;if(b(_,"comment")||i<n-1&&u(_,"attribute")>-1)do{if(b(_,"jsx_attribute_start")){W=_;do{if(b(_,"jsx_attribute_end")&&s.begin[_]===W)break;_=_+1}while(_<n)}else if(b(_,"comment")===!1&&u(_,"attribute")<0)return _;_=_+1}while(_<n);return _}function I(){let _=/(?!=)\/?>$/,W=s.token[i],te=_.exec(W);if(te===null)return;let H=i+1,K=!1,fe=e.markup.selfCloseSpace===!0&&te[0]==="/>"?se:d;s.token[i]=W.replace(_,d);do{if(b(H,"jsx_attribute_end")&&s.begin[s.begin[H]]===i)K=!1;else if(s.begin[H]===i){if(b(H,"jsx_attribute_start"))K=!0;else if(u(H,"attribute")<0&&K===!1)break}else if(K===!1&&(s.begin[H]<i||u(H,"attribute")<0))break;H=H+1}while(H<n);b(H-1,"comment_attribute")&&(fe=G(O[H-2]-1)),s.token[H-1]=`${s.token[H-1]}${fe}${te[0]}`,b(H,"comment")&&s.lines[i+1]<2&&(O[i]=-10)}function ie(){if(b(i,"end")===!1&&F(s.token[i],60)&&L.get(s.begin[i])>=2&&Me(s.token[i],62)){L.delete(s.begin[i]);let _=G(O[i-1]-1).replace(/\n+/,ee),W=`${s.token[i].slice(0,-1)}${_}>`;b(s.begin[i],"singleton")&&t(s.token[i][s.token[i].length-2],47)?s.token[i]=`${s.token[i].slice(0,-2)}${_}/>`:s.token[i]=W}}function oe(){let _=s.begin[i],W=i;do if(W=W-1,Y(W,"</li>")&&Y(W-1,"</a>")&&s.begin[s.begin[W]]===_&&s.begin[W-1]===s.begin[W]+1)W=s.begin[W];else return;while(W>_+1);W=i;do W=W-1,b(W+1,"attribute")?k[W]=-10:Y(W,"</li>")===!1&&(k[W]=-20);while(W>_+1)}function S(){let _=i,W=!1;if(s.lines[i+1]===0&&e.markup.forceIndent===!1){do{if(s.lines[_]>0){W=!0;break}_=_-1}while(_>p);_=i}else W=!0;if(W===!0){b(s.begin[_]-1,"liquid")&&(k[s.begin[_]-1]=j);let te=b(x,"end")||b(x,"liquid_end")?j+1:j;do k.push(te),_=_-1;while(_>p);te===j+1&&(k[i]=j),(b(_,"attribute")||b(_,"liquid_attribute")||b(_,"jsx_attribute_start"))&&(console.log(s.token[_],te),k[s.begin[_]]=te,k[_]=te)}else{do k.push(-20),_=_-1;while(_>p);k[_]=-20}p=-1}function g(){let _=j;if(e.markup.forceIndent===!0||e.markup.forceAttribute===!0){k.push(j);return}if(x<n&&(u(x,"end")>-1||u(x,"start")>-1)&&s.lines[x]>0?(k.push(j),_=_+1,i>0&&b(i,"singleton")&&u(i-1,"attribute")>-1&&b(s.begin[i-1],"singleton")&&(s.begin[i]<0||b(s.begin[i-1],"singleton")&&s.begin[s.ender[i]-1]!==i?k[i-1]=j:k[i-1]=j+1)):i>0&&b(i,"singleton")&&u(i-1,"attribute")>-1?(k[i-1]=j,l=s.token[i].length,k.push(-10)):s.lines[x]===0?k.push(-20):(e.wrap===0||i<n-2&&s.token[i]!==void 0&&s.token[i+1]!==void 0&&s.token[i+2]!==void 0&&s.token[i].length+s.token[i+1].length+s.token[i+2].length+1>e.wrap&&u(i+2,"attribute")>-1||s.token[i]!==void 0&&s.token[i+1]!==void 0&&s.token[i].length+s.token[i+1].length>e.wrap)&&(b(i+1,"singleton")||b(i+1,"liquid"))?k.push(j):(l=l+1,k.push(-10)),i>0&&u(i-1,"attribute")>-1&&s.lines[i]<1&&(k[i-1]=-20),l>e.wrap){let W=i,te=Math.max(s.begin[i],0);if(b(i,"content")&&e.markup.preserveText===!1){let H=0,K=s.token[i].replace(/\s+/g,se).split(se);do if(W=W-1,k[W]<0)H=H+s.token[W].length,k[W]===-10&&(H=H+1);else break;while(W>0);W=0,te=K.length;do K[W].length+H>e.wrap?(K[W]=r.crlf+K[W],H=K[W].length):(K[W]=` ${K[W]}`,H=H+K[W].length),W=W+1;while(W<te);t(K[0],32)?s.token[i]=K.join(d).slice(1):(k[i-1]=_,s.token[i]=K.join(d).replace(r.crlf,d)),s.token[i].indexOf(r.crlf)>0&&(l=s.token[i].length-s.token[i].lastIndexOf(r.crlf))}else{do{if(W=W-1,k[W]>-1){l=s.token[i].length,s.lines[i+1]>0&&(l=l+1);return}if(u(W,"start")>-1){l=0;return}if(s.lines[W+1]>0&&(b(W,"attribute")===!1||b(W,"attribute")&&b(W+1,"attribute"))&&(b(W,"singleton")===!1||b(W,"attribute")&&b(W+1,"attribute"))){l=s.token[i].length,s.lines[i+1]>0&&(l=l+1);break}}while(W>te);k[W]=_}}}function A(){let _=i;s.types[_-1]==="script_start"&&t(s.token[_-1],123)&&(k[_-1]=-20);do{if(s.lexer[i+1]==="markup"&&s.begin[i+1]<_&&b(i+1,"start")===!1&&b(i+1,"singleton")===!1)break;k.push(0),i=i+1}while(i<n);h[_]=i,s.types[i+1]==="script_end"&&s.token[i+1]==="}"?k.push(-20):(s.types[i+1],k.push(j-1)),x=E(),s.lexer[x]==="markup"&&s.stack[i].indexOf("attribute")<0&&(s.types[x]==="end"||s.types[x]==="liquid_end")&&(j=j-1)}function z(_){let W=s.token[_].replace(/\s+/g,se).split(se),te=W.length,H=1,K=W[0].length;do K+W[H].length>e.wrap?(K=W[H].length,W[H]=r.crlf+W[H]):(W[H]=` ${W[H]}`,K=K+W[H].length),H=H+1;while(H<te);s.token[_]=W.join(d)}function V(){let _=i-1,W=i,te=!1,H=!1,K=u(_+1,"end"),fe=s.token[_].length+1,D=0,le=(()=>{if(u(i,"start")>0){let M=i;do{if(b(M,"end")&&s.begin[M]===i&&M<n-1&&u(M+1,"attribute")>-1){te=!0;break}M=M+1}while(M<n)}else i<n-1&&u(i+1,"attribute")>-1&&(te=!0);return b(x,"end")||b(x,"liquid_end")?b(_,"singleton")?j+2:j+1:b(_,"singleton")?j+1:j})();if(te===!1&&b(i,"comment_attribute")){k.push(j),k[_]=s.types[_]==="singleton"?j+1:j;return}function ve(M){e.markup.forceAttribute===!1?k.push(-10):e.markup.forceAttribute===!0||M>=e.markup.forceAttribute?e.liquid.indentAttribute===!0?(b(i-1,"liquid_attribute_start")&&(k[i-1]=le+D),k.push(le+D)):k.push(le):k.push(-10)}le<1&&(le=1),K=0;do K=K+1;while(u(i+K,"attribute")>-1&&(b(i+K,"end")===!1||b(i+K,"singleton")===!1||b(i+K,"start")===!1||b(i+K,"comment")===!1));(a==="force-preserve"||a==="force-align"||a==="force-indent")&&(st(e.markup.forceAttribute)&&e.markup.forceAttribute===!1||ht(e.markup.forceAttribute)&&K<=e.markup.forceAttribute)&&(K=1/0);do{if(l=l+s.token[i].length+1,s.types[i].indexOf("attribute")>0)b(i,"comment_attribute")?k.push(le):u(i,"start")>0&&u(i,"liquid")<0?(H=!0,i<n-2&&s.types[i+2].indexOf("attribute")>0?(k.push(-20),i=i+1,h[i]=i):(_===i-1&&te===!1?o?k.push(-20):k.push(le):o?k.push(-20):k.push(le+1),s.lexer[i+1]!=="markup"&&(i=i+1,A()))):e.liquid.indentAttribute===!0?b(i,"liquid_attribute_start")?(D>0?k.push(le+D):k.push(le),D=D+1):b(i,"liquid_attribute_else")?k[i-1]=le+D-1:b(i,"liquid_attribute_end")?(D=D-1,k[i-1]=le+D):ve(K):u(i,"end")>0&&b(i,"liquid_attribute_end")===!1?(k[i-1]!==-20&&(k[i-1]=k[s.begin[i]]-1),s.lexer[i+1]!=="markup"?k.push(-20):k.push(le)):u(i,"liquid_attribute")>-1?(fe=fe+s.token[i].length+1,e.markup.preserveAttribute===!0?k.push(-10):e.markup.forceAttribute===!0||e.markup.forceAttribute>=1||H===!0||i<n-1&&u(i+1,"attribute")>-1?ve(K):k.push(-10)):k.push(le);else if(b(i,"attribute"))fe=fe+s.token[i].length+1,e.markup.preserveAttribute===!0?k.push(-10):e.markup.forceAttribute===!0||e.markup.forceAttribute>=1||H===!0||i<n-1&&u(i+1,"attribute")>-1?ve(K):k.push(-10);else if(s.begin[i]<_+1)break;i=i+1}while(i<n);if(i=i-1,u(i,"liquid")<0&&u(i,"end")>-1&&u(i,"attribute")>0&&b(_,"singleton")===!1&&k[i-1]>0&&te===!0&&(k[i-1]=k[i-1]-1),k[i]!==-20&&(o===!0&&u(_,"start")>-1&&b(i+1,"script_start")?k[i]=le:Y(i,"/")&&k[i-1]!==10?k[i-1]=-10:k[i]=k[_]),e.markup.forceAttribute===!0)l=0,k[_]=le,K>=2&&e.markup.delimiterTerminus==="force"&&L.set(_,K);else if(e.markup.forceAttribute>=1)if(K>=e.markup.forceAttribute){k[_]=le;let M=i-1;do(b(M,"liquid")&&k[M]===-10||b(M,"attribute")&&k[M]===-10)&&(k[M]=le),M=M-1;while(M>_);(e.markup.delimiterTerminus==="force"&&K>=2||e.markup.delimiterTerminus==="adapt"&&K===1/0)&&L.set(_,K)}else k[_]=-10;else k[_]=-10;if(e.markup.preserveAttribute===!0||Y(_,"<%xml%>")||Y(_,"<?xml?>")){l=0;return}if(W=i,W>_+1){if(e.markup.selfCloseSpace===!1&&(fe=fe-1),fe>e.wrap&&e.wrap>0&&e.markup.forceAttribute===!1){k[_]=le,l=s.token[i].length,W=W-1;do s.token[W].length>e.wrap&&ue(s.token[W])&&z(W),(u(W,"liquid")>-1&&k[W]===-10||b(W,"attribute")&&k[W]===-10)&&(k[W]=le),W=W-1;while(W>_)}}else e.wrap>0&&b(i,"attribute")&&s.token[i].length>e.wrap&&ue(s.token[i])&&z(i)}function ne(){do s.lexer[i]==="markup"?(b(i,"doctype")&&(k[i-1]=j),u(i,"attribute")>-1?V():b(i,"comment")?(p<0&&(p=i),S()):b(i,"comment")===!1&&(x=E(),(b(x,"end")||b(x,"liquid_end"))&&(j>-1&&(j=j-1),b(x,"liquid_end")&&b(i,"liquid_else")&&j>-1&&(j=j-1),(Y(i,"</ol>")||Y(i,"</ul>")||Y(i,"</dl>"))&&oe()),b(i,"script_end")&&b(x,"end")?s.lines[x]<1?k.push(-20):s.lines[x]>1?k.push(j):k.push(-10):(e.markup.forceIndent===!1||e.markup.forceIndent===!0&&b(x,"script_start"))&&(b(i,"content")||b(i,"singleton")||b(i,"liquid"))?(l=l+s.token[i].length,s.lines[x]>0&&b(x,"script_start")?k.push(-10):e.wrap>0&&b(i,"singleton")===!1&&(u(i,"liquid")<0||x<n&&u(i,"liquid")>-1&&u(x,"liquid")<0)?g():x<n&&(u(x,"end")>-1||u(x,"start")>-1)&&(s.lines[x]>0||u(i,"liquid_")>-1)?k.push(j):s.lines[x]===0?k.push(-20):s.lines[x]===1?k.push(-10):k.push(j)):b(i,"start")||b(i,"liquid_start")?(j=j+1,b(x,"liquid_when")&&e.liquid.dedentTagList.includes("case")===!1&&(j=j+1),o===!0&&Y(i+1,"{")?s.lines[x]===0?k.push(-20):s.lines[x]>1?k.push(j):k.push(-10):b(i,"start")&&b(x,"end")||b(i,"liquid_start")&&b(x,"liquid_end")?s.stack[i]==="liquid"||u(x-1,"comment")>-1?k.push(j):k.push(-20):b(i,"start")&&b(x,"script_start")?k.push(-10):e.markup.forceIndent===!0?k.push(j):s.lines[x]===0&&(b(x,"content")||b(x,"singleton")||b(i,"start")&&b(x,"liquid"))?k.push(-20):k.push(j)):e.markup.forceIndent===!1&&s.lines[x]===0&&(b(x,"content")||b(x,"singleton"))||b(i+2,"script_end")?k.push(-20):b(i,"liquid_else")||b(i,"liquid_when")?(k[i-1]=j-1,b(x,"liquid_end")&&(k[i-1]=j-1),k.push(j)):e.markup.forceIndent===!0&&(b(i,"content")&&(b(x,"liquid")||b(x,"content"))||b(i,"liquid")&&(b(x,"content")||b(x,"liquid")))?s.lines[x]<1?k.push(-20):s.lines[x]>1?k.push(j):k.push(-10):b(i,"liquid_start_bad")?(j=j+1,k.push(j)):b(x,"liquid_end_bad")?(j=j-1,k.push(j)):Y(i,"{% endcase %}")&&e.liquid.dedentTagList.includes("case")===!1?(k[i-1]--,j=j-1):k.push(j)),b(i,"content")===!1&&b(i,"singleton")===!1&&b(i,"liquid")===!1&&b(i,"attribute")===!1&&(l=0)):(l=0,A()),i=i+1;while(i<n);return k}function ye(){let _=s.token[i].split(ee),W=_.length,te=0,H=ee;i-1>0||_[0].length===2||_[0].length,H+=G(O[i-1],!1)+"  ";do{if(te===0)if(te+1===W-1&&(_[te+1].length===2||_[te+1].length===3)){H.length>1&&(H=H.slice(0,-2)),f.push(_[te],H,_[te+1]);break}else f.push(_[te],H);else te===W-1?f.push(_[te]):(te+1===W-1&&(_[te+1].length===2||_[te+1].length===3)&&(H=H.slice(0,-2)),f.push(_[te],H));te=te+1}while(te<W)}function xe(){i=r.start;let _=e.indentLevel;do{if(s.lexer[i]==="markup")(b(i,"start")||b(i,"singleton")||b(i,"xml"))&&i<n-1&&u(i,"attribute")<0&&Ue(s.types[i+1])===!1&&u(i+1,"attribute")>-1&&I(),Ue(s.token[i])===!1&&s.token[i].indexOf(r.crlf)>0&&(b(i,"content")&&e.markup.preserveText===!1||b(i,"comment")||b(i,"attribute"))?B():b(i,"comment")&&(t(s.token[i][1],37)&&e.liquid.preserveComment===!1&&e.liquid.commentNewline===!0||t(s.token[i][1],37)===!1&&e.markup.preserveComment===!1&&e.markup.commentNewline===!0)&&(e.preserveLine===0||f.length>0&&f[f.length-1].lastIndexOf(ee)+1<2)?f.push(G(O[i]),s.token[i],G(O[i])):u(i,"_preserve")>-1?f.push(s.token[i]):b(i+1,"ignore")&&b(i+2,"ignore")?(f.push(s.token[i],G(O[i]).replace(hn,d),s.token[i+1],ft(s.lines[i+2]-1===0?1:s.lines[i+2]-1,ee)),i=i+1):(_=O[i],e.markup.delimiterTerminus==="force"&&ie(),/\n/.test(s.token[i])&&u(i,"liquid")>-1&&!b(i,"liquid_end")?ye():f.push(s.token[i]),O[i]===-10&&i<n-1?f.push(se):O[i]>-1&&u(i+1,"_preserve")<0&&f.push(G(O[i])));else{r.start=i,r.ender=h[i],_>0&&e.liquid.dedentTagList.includes(s.stack[i])&&(f.splice(f.length-1,1,G(O[i]-1)),_=_-1);let W=r.external(_);e.language==="jsx"&&(s.types[i-1]==="template_string_end"||s.types[i-1]==="jsx_attribute_start"||s.types[i-1]==="script_start")?f.push(W):(f.push(W),(e.markup.forceIndent||O[r.iterator]>-1&&i in h&&h[i]>i)&&(i=r.iterator,f.push(G(O[i])))),i!==r.iterator&&(i=r.iterator)}i=i+1}while(i<n);return r.iterator=n-1,(f[0]===r.crlf||t(f[0],32))&&(f[0]=d),e.endNewline===!0?f.join(d).replace(/\s*$/,r.crlf):f.join(d).trimEnd()}return xe()}function An(){let{data:e,rules:a}=r,i=r.language==="json"?a.json:a.script,p=0,x={},l="script",j=r.ender<1||r.ender>e.token.length?e.token.length:r.ender+1,s=(()=>{let n=r.start,h=a.indentLevel,o=!1,L=!1,k=d,O=d,c=e.types[0],f=e.token[0],b=[-1],Y=[],u=r.start>0?Array(r.start).fill(0,0,r.start):[],G=[],B=[[]],q=[],E=[],I=[],ie=[!1],oe=[],S=[];function g(){A(!1,!1);let M=i.commentIndent===!0?h:0;if(o===!1&&/\/\u002a\s*global\s/.test(e.token[n])){let Z=e.token[n].replace(/\/\u002a\s*global\s+/,d).replace(/\s*\u002a\/$/,d).split(","),w=Z.length;do w=w-1,Z[w]=Z[w].replace(/\s+/g,d),Z[w]!==d&&r.stack.push([Z[w],-1]);while(w>0)}if(e.types[n-1]==="comment"||e.types[n+1]==="comment")u[n-1]=M;else if(e.lines[n]<2){let Z=n+1;if(e.types[Z]==="comment")do Z=Z+1;while(Z<j&&e.types[Z]==="comment");if(n<j-1&&e.stack[Z]!=="block"&&(t(e.token[Z],123)||e.token[Z]==="x{")){let w=r.stack.length;if(e.begin.splice(n,0,e.begin[Z]),e.ender.splice(n,0,e.ender[Z]),e.lexer.splice(n,0,e.lexer[Z]),e.lines.splice(n,0,e.lines[Z]),e.stack.splice(n,0,e.stack[Z]),e.token.splice(n,0,e.token[Z]),e.types.splice(n,0,e.types[Z]),w>0)do if(w=w-1,r.stack[w][1]===Z)r.stack[w][1]=n;else if(r.stack[w][1]<n)break;while(w>0);Z=Z+1,e.begin.splice(Z,1),e.ender.splice(Z,1),e.lexer.splice(Z,1),e.lines.splice(Z,1),e.stack.splice(Z,1),e.token.splice(Z,1),e.types.splice(Z,1),w=n+1;do e.begin[w]=n,e.stack[w]=e.stack[Z],w=w+1;while(w<Z);w=w+1;do{if(e.begin[w]===e.begin[Z]&&(e.begin[w]=n,e.types[w]==="end"))break;w=w+1}while(w<j-1);e.begin[Z]=n,n=n-1}else u[n-1]=-10,e.stack[n]==="paren"||e.stack[n]==="method"?u.push(h+2):u.push(h),i.commentIndent===!0&&u[n]>-1&&e.lines[n]<3&&(e.lines[n]=3);e.types[n+1]!=="comment"&&(o=!0);return}else t(e.token[n-1],44)?u[n-1]=M:t(f,61)&&e.types[n-1]!=="comment"&&/^\/\*{2}\s*@[A-Za-z_]+/.test(O)===!0?u[n-1]=-10:t(f,123)&&e.types[n-1]!=="comment"&&e.lines[0]<2?e.stack[n]==="function"?u[n-1]=M:u[n-1]=/\n/.test(O)?M:-10:u[n-1]=M;e.types[n+1]!=="comment"&&(o=!0),t(e.token[e.begin[n]],40)?u.push(h+1):u.push(h),u[n]>-1&&e.lines[n]<3&&(e.types[n-1]==="comment"&&O.startsWith("//")?e.lines[n]=2:e.lines[n]=3),i.commentNewline===!0&&O.startsWith("//")===!1&&e.lines[n]>=3&&(e.lines[n]=2)}function A(M,Z){let w=n-1,Q=M===!0?0:1,X=B[B.length-1]===void 0?[]:B[B.length-1],ae=Z===!1&&e.stack[n]==="array"&&M===!0&&F(O,91);if(!(E[E.length-1]===!1||e.stack[n]==="array"&&i.arrayFormat==="inline"||e.stack[n]==="object"&&i.objectIndent==="inline")){E[E.length-1]=!1;do{if(e.types[w]==="end"?Q=Q+1:e.types[w]==="start"&&(Q=Q-1),e.stack[w]==="global")break;if(Q===0){if(e.stack[n]==="class"||e.stack[n]==="map"||ae===!1&&(M===!1&&e.token[w]!=="("&&e.token[w]!=="x("||M===!0&&t(e.token[w],44)))e.types[w+1]==="liquid_start"?e.lines[w]<1?u[w]=-20:u[w]=h-1:X.length>0&&X[X.length-1]>-1?u[w]=h-1:u[w]=h;else if(e.stack[n]==="array"&&e.types[n]==="operator"&&(t(e.token[w],44)&&(u[w]=h),w===e.begin[n]))break;if(M===!1)break}if(Q<0){e.types[w+1]==="liquid_start"||e.types[w+1]==="template_string_start"?e.lines[w]<1?u[w]=-20:u[w]=h-1:X.length>0&&X[X.length-1]>-1?u[w]=h-1:u[w]=h;break}w=w-1}while(w>-1)}}function z(){let M=Ue(B[B.length-1])?[]:B[B.length-1];function Z(){let w=n,Q=!1,X=e.begin[w];do{if(w=w-1,e.lexer[w]==="markup"){Q=!0;break}e.begin[w]!==X&&(w=e.begin[w])}while(w>X);if(Q===!0){w=n;do w=w-1,e.begin[w]!==X?w=e.begin[w]:t(e.token[w],44)&&(u[w]=h+1);while(w>X);u[X]=h+1,u[n-1]=h}else u[n-1]=-20}if(t(O,41)&&t(e.token[n+1],46)&&F(e.token[M[0]],58)&&M[M.length-1]>-1){let w=e.begin[n],Q=!1,X=!1;do w=w-1;while(w>0&&u[w]<-9);Q=u[w]===h,w=n+1;do{if(w=w+1,t(e.token[w],123)){X=!0;break}if(e.begin[w]===e.begin[n+1]&&(e.types[w]==="separator"||e.types[w]==="end"))break}while(w<j);Q===!1&&X===!0&&B.length>1&&(B[B.length-2].push(e.begin[n]),h=h+1)}if(c!=="separator"&&ye(),t(e.token[n+1],58)&&(e.stack[n]==="object"||e.stack[n]==="array")&&A(!0,!1),t(e.token[e.begin[n]-1],44)&&(t(e.token[n+1],125)||t(e.token[n+1],93))&&(e.stack[n]==="object"||e.stack[n]==="array")&&A(!0,!1),e.stack[n]!=="attribute"&&(F(O,41)&&O!=="x)"&&(e.lexer[n-1]!=="markup"||e.lexer[n-1]==="markup"&&e.token[n-2]!=="return")&&(h=h-1),t(O,125)&&e.stack[n]==="switch"&&i.noCaseIndent===!1&&(h=h-1)),t(O,125)||O==="x}"){if(e.types[n-1]!=="comment"&&f!=="{"&&f!=="x{"&&c!=="end"&&c!=="string"&&c!=="number"&&c!=="separator"&&f!=="++"&&f!=="--"&&(n<2||e.token[n-2]!==";"||e.token[n-2]!=="x;"||f==="break"||f==="return")){let w=n-1,Q=!1,X=e.begin[n],ae=Y.length;do{if(e.begin[w]===X){if((t(e.token[w],61)||t(e.token[w],59)||e.token[w]==="x;")&&(Q=!0),t(e.token[w],46)&&u[w-1]>-1){E[E.length-1]=!1,u[X]=h+1,u[n-1]=h;break}if(w>0&&e.token[w]==="return"&&(e.token[w-1]===")"||e.token[w-1]==="x)"||e.token[w-1]==="{"||e.token[w-1]==="x{"||e.token[w-1]==="}"||e.token[w-1]==="x}"||e.token[w-1]===";"||e.token[w-1]==="x;")){h=h-1,u[n-1]=h;break}if(t(e.token[w],58)&&G.length===0||t(e.token[w],44)&&Q===!1)break;if(w===0||e.token[w-1]==="{"||e.token[w-1]==="x{"||e.token[w]==="for"||e.token[w]==="if"||e.token[w]==="do"||e.token[w]==="function"||e.token[w]==="while"||e.token[w]==="var"||e.token[w]==="let"||e.token[w]==="const"||e.token[w]==="with"){Y[ae-1]===!1&&ae>1&&(n===j-1||e.token[n+1]!==")"&&e.token[n+1]!=="x)")&&e.stack[n]!=="object"&&(h=h-1);break}}else w=e.begin[w];w=w-1}while(w>X)}b.pop()}if(i.bracePadding===!1&&O!=="}"&&c!=="markup"&&c!=="liquid"&&(u[n-1]=-20),i.bracePadding===!0&&c!=="start"&&f!==";"&&(u[e.begin[n]]<-9||E[E.length-1]===!0))u[e.begin[n]]=-10,u[n-1]=-10,u.push(-20);else if(e.stack[n]==="attribute")u[n-1]=-20,u.push(h);else if(e.stack[n]==="array"&&(M.length>0||q[q.length-1]===!0))V(),E[E.length-1]=!1,u[e.begin[n]]=h+1,u[n-1]=h,u.push(-20);else if(M.length>0&&(e.stack[n]==="object"||e.begin[n]===0&&t(O,125)))V(),E[E.length-1]=!1,u[e.begin[n]]=h+1,u[n-1]=h,u.push(-20);else if(O===")"||O==="x)"){let w=O===")"&&F(f,40)&&S.length>0?S.pop()+1:0,Q=e.token[e.begin[n]-1]==="if"?(()=>{let X=n;do if(X=X-1,e.token[X]===")"&&u[X-1]>-1)return w;while(X>e.begin[n]);return w+5})():w;if(w>0&&(r.language!=="jsx"||r.language==="jsx"&&e.token[e.begin[n]-1]!=="render")){let X=a.wrap,ae=e.begin[n],$=S.length,y=n-2;if(Q>X){u[e.begin[n]]=h+1,u[n-1]=h;do e.begin[y]===ae?e.token[y]==="&&"||e.token[y]==="||"?u[y]=h+1:u[y]>-1&&e.types[y]!=="comment"&&e.token[y+1]!=="."&&(u[y]=u[y]+1):u[y]>-1&&e.token[y+1]!=="."&&(u[y]=u[y]+1),y=y-1;while(y>ae)}else $>0&&(S[$-1]=S[$-1]+w)}else if(O===")"&&n>e.begin[n]+2&&e.lexer[e.begin[n]+1]===l&&e.token[e.begin[n]+1]!=="function"){let X=e.begin[n]<0?0:e.begin[n],ae=a.wrap,$=M.length,y=0,m=0,C=0,J=0,he=0,v=!1,N=!1,T=h+1,P=!1,U=!1,de=!1;if(u[X]<-9){m=X;do m=m+1;while(m<n&&u[m]<-9);J=m;do y=y+e.token[m].length,u[m]===-10&&(y=y+1),e.token[m]==="("&&C>0&&C<ae-1&&J===n&&(C=-1),e.token[m]===")"?he=he-1:e.token[m]==="("&&(he=he+1),m===X&&he>0&&(C=y),m=m-1;while(m>X&&u[m]<-9);if(e.token[m+1]==="."&&(T=u[m]+1),y>ae-1&&ae>0&&F(f,40)&&C!==-1&&E[E.length-2]===!1&&(e.token[X-1]==="if"&&Y[Y.length-1]===!0||e.token[X-1]!=="if")&&(u[X]=T,e.token[X-1]==="for")){m=X;do m=m+1,t(e.token[m],59)&&e.begin[m]===X&&(u[m]=T);while(m<n)}}m=n,y=0;do m=m-1,e.stack[m]==="function"?m=e.begin[m]:e.begin[m]===X?(t(e.token[m],63)?de=!0:t(e.token[m],44)&&v===!1?(v=!0,y>=ae&&ae>0&&(P=!0)):e.types[m]==="markup"&&U===!1&&(U=!0),u[m]>-9&&F(e.token[m],44)&&e.types[m]!=="markup"?y=0:(u[m]===-10&&(y=y+1),y=y+e.token[m].length,y>=ae&&ae>0&&(v===!0||U===!0)&&(P=!0))):u[m]>-9?y=0:(y=y+e.token[m].length,y>=ae&&ae>0&&(v===!0||U===!0)&&(P=!0));while(m>X&&P===!1);if(v===!1&&t(e.token[e.begin[n]+1],96))u[e.begin[n]]=-20,u[n-1]=-20;else if((v===!0||U===!0)&&y>=ae&&ae>0||u[X]>-9){if(de===!0){if(T=u[X],t(e.token[X-1],91)){m=n;do if(m=m+1,e.types[m]==="end"||t(e.token[m],44)||t(e.token[m],59))break;while(m<j);t(e.token[m],93)&&(T=T-1,N=!0)}}else $>0&&M[$-1]>m&&(T=T-$);E[E.length-1]=!1,m=n;do if(m=m-1,e.begin[m]===X)if(e.token[m].indexOf("=")>-1&&e.types[m]==="operator"&&e.token[m].indexOf("!")<0&&e.token[m].indexOf("==")<0&&e.token[m]!=="<="&&e.token[m].indexOf(">")<0){y=m;do if(y=y-1,e.begin[y]===X&&(e.token[y]===";"||e.token[y]===","||y===X))break;while(y>X)}else t(e.token[m],44)?u[m]=T:u[m]>-9&&N===!1&&(e.token[X-1]!=="for"||e.token[m+1]==="?"||e.token[m+1]===":")&&(e.token[e.begin[n]]!=="("||e.token[m]!=="+")&&(u[m]=u[m]+1);else u[m]>-9&&N===!1&&(u[m]=u[m]+1);while(m>X);u[X]=T,u[n-1]=T-1}else u[n-1]=-20;e.token[e.begin[n]-1]==="+"&&u[e.begin[n]]>-9&&(u[e.begin[n]-1]=-10)}else r.language==="jsx"||r.language==="tsx"?Z():u[n-1]=-20;u.push(-20)}else if(E[E.length-1]===!0)t(O,93)&&e.begin[n]-1>0&&e.token[e.begin[e.begin[n]-1]]==="["&&(E[E.length-2]=!1),e.begin[n]<u.length&&(u[e.begin[n]]=-20),r.language==="jsx"||r.language==="tsx"?Z():t(O,93)&&u[e.begin[n]]>-1?u[n-1]=u[e.begin[n]]-1:u[n-1]=-20,u.push(-20);else if(e.types[n-1]==="comment"&&e.token[n-1].substring(0,2)==="//")e.token[n-2]==="x}"&&(u[n-3]=h+1),u[n-1]=h,u.push(-20);else if(c.indexOf("liquid")<0&&e.types[n-1]!=="comment"&&(t(f,123)&&t(O,125)||t(f,91)&&t(O,93)))u[n-1]=-20,u.push(-20);else if(t(O,93)){if(Y[Y.length-1]===!0&&E[E.length-1]===!1&&i.arrayFormat!=="inline"||t(f,93)&&u[n-2]===h+1?(u[n-1]=h,u[e.begin[n]]=h+1):u[n-1]===-10&&(u[n-1]=-20),e.token[e.begin[n]+1]==="function")u[n-1]=h;else if(Y[Y.length-1]===!1){(t(f,125)||f==="x}")&&(u[n-1]=h);let w=n-1,Q=1;do{if(t(e.token[w],93)&&(Q=Q+1),t(e.token[w],91)&&(Q=Q-1,Q===0)){if(w>0&&(t(e.token[w+1],123)||t(e.token[w+1],91)||e.token[w+1]==="x{")){u[w]=h+1;break}if(F(e.token[w+1],91)||L===!1){u[w]=-20;break}break}Q===1&&e.token[w]==="+"&&u[w]>1&&(u[w]=u[w]-1),w=w-1}while(w>-1)}else(r.language==="jsx"||r.language==="tsx")&&Z();if(i.arrayFormat==="inline"){let w=n,Q=e.begin[n];do if(w=w-1,e.types[w]==="end")break;while(w>Q);w>Q?(u[e.begin[n]]=h+1,u[n-1]=h):(u[e.begin[n]]=-20,u[n-1]=-20)}else u[e.begin[n]]>-1&&(u[n-1]=u[e.begin[n]]-1);u.push(-20)}else t(O,125)||O==="x}"||Y[Y.length-1]===!0?(t(O,125)&&f==="x}"&&e.token[n+1]==="else"?(u[n-2]=h+2,u.push(-20)):u.push(h),u[n-1]=h):u.push(-20);e.types[n-1]==="comment"&&(u[n-1]=h),V(),L=Y[Y.length-1],Y.pop(),B.pop(),q.pop(),I.pop(),oe.pop(),E.pop(),ie.pop()}function V(){let M=0,Z=B[B.length-1];if(Z!==void 0){if(M=Z.length-1,M<1&&Z[M]<0&&(t(O,59)||O==="x;"||t(O,41)||O==="x)"||t(O,125)||O==="x}")){Z.pop();return}if(!(M<0||Z[M]<0)){if(t(O,58)){if(F(e.token[Z[M]],63))do Z.pop(),M=M-1,h=h-1;while(M>-1&&Z[M]>-1&&F(e.token[Z[M]],63));Z[M]=n,u[n-1]=h}else do Z.pop(),M=M-1,h=h-1;while(M>-1&&Z[M]>-1);(e.stack[n]==="array"||t(O,44))&&Z.length<1&&Z.push(-1)}}}function ne(){let M=n;do{if(e.lexer[n+1]===l&&e.begin[n+1]<M||e.token[M-1]==="return"&&e.types[n]==="end"&&e.begin[n]===M)break;u.push(0),n=n+1}while(n<j);x[M]=n,u.push(h-1)}function ye(){let M=n-1,Z=e.begin[n];if(!(h<1))do{if(Z!==e.begin[M])M=e.begin[M];else if(e.types[M]==="separator"||e.types[M]==="operator"){e.token[M]==="."&&u[M-1]>0&&(e.token[Z-1]==="if"?h=h-2:h=h-1);break}M=M-1}while(M>0&&M>Z)}function xe(){(e.token[n+1]!==","&&O.indexOf("/>")!==O.length-2||e.token[n+1]===","&&e.token[e.begin[n]-3]!=="React")&&A(!1,!1),f==="return"||f==="?"||f===":"?(u[n-1]=-10,u.push(-20)):c==="start"||e.token[n-2]==="return"&&e.stack[n-1]==="method"?u.push(h):u.push(-20)}function _(){let M=Ue(B[B.length-1])?[]:B[B.length-1];function Z(){let w=e.token[n+1],Q=0,X=0,ae=n,$=O==="+"?h+2:h,y=0;if(a.wrap<1){u.push(-10);return}do{if(ae=ae-1,t(e.token[e.begin[n]],40)&&(ae===e.begin[n]&&(y=Q),t(e.token[ae],44)&&e.begin[ae]===e.begin[n]&&Y[Y.length-1]===!0)||Q>a.wrap-1||u[ae]>-9||e.types[ae]==="operator"&&e.token[ae]!=="="&&e.token[ae]!=="+"&&e.begin[ae]===e.begin[n]||(Q=Q+e.token[ae].length,ae===e.begin[n]&&e.token[ae]==="["&&Q<a.wrap-1)||e.token[ae]==="."&&u[ae]>-9)break;u[ae]===-10&&(Q=Q+1)}while(ae>0);if(y>0&&(y=y+w.length),Q=Q+w.length,X=ae,Q>a.wrap-1&&u[ae]<-9)do X=X-1;while(X>0&&u[X]<-9);if(e.token[X+1]==="."&&e.begin[n]<=e.begin[X]?$=$+1:e.types[X]==="operator"&&($=u[X]),X=w.length,Q+X<a.wrap){u.push(-10);return}if(t(e.token[e.begin[n]],40)&&(e.token[M[0]]===":"||e.token[M[0]]==="?")?$=h+3:e.stack[n]==="method"?(u[e.begin[n]]=h,Y[Y.length-1]===!0?$=h+3:$=h+1):(e.stack[n]==="object"||e.stack[n]==="array")&&A(!0,!1),(e.token[ae]==="var"||e.token[ae]==="let"||e.token[ae]==="const")&&(Q=Q-a.indentSize*a.indentChar.length*2),y>0?ae=a.wrap-y:ae=a.wrap-Q,ae>0&&ae<5){u.push($),(e.token[n].charAt(0)==='"'||e.token[n].charAt(0)==="'")&&(n=n+1,u.push(-10));return}if(e.token[e.begin[n]]!=="("||y>a.wrap-1||y===0){if(y>0&&(Q=y),Q-w.length<a.wrap-1&&(w.charAt(0)==='"'||w.charAt(0)==="'")){if(n=n+1,Q=Q+3,Q-w.length>a.wrap-4){u.push($);return}u.push(-10);return}u.push($);return}u.push(-10)}if(ye(),M.length>0&&M[M.length-1]>-1&&e.stack[n]==="array"&&(q[q.length-1]=!0),O!==":"&&(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&E.length>0&&A(!0,!1),O!=="?"&&e.token[M[M.length-1]]===".")){let w=0,Q=n,X=e.begin[Q];do{if(e.begin[Q]===X){if(e.token[Q+1]==="{"||e.token[Q+1]==="["||e.token[Q]==="function")break;if(t(e.token[Q],44)||t(e.token[Q],59)||e.types[Q]==="end"||t(e.token[Q],58)){M.pop(),h=h-1;break}if(e.token[Q]==="?"||t(e.token[Q],58)){e.token[M[M.length-1]]==="."&&w<2&&(M[M.length-1]=X+1);break}e.token[Q]==="."&&(w=w+1)}Q=Q+1}while(Q<j)}if(O==="!"||O==="..."){(t(f,125)||f==="x}")&&(u[n-1]=h),u.push(-20);return}if(f===";"||f==="x;"){e.token[e.begin[n]-1]!=="for"&&(u[n-1]=h),u.push(-20);return}if(O==="*"){f==="function"||f==="yield"?u[n-1]=-20:u[n-1]=-10,u.push(-10);return}if(O==="?"){if(e.lines[n]===0&&e.types[n-2]==="word"&&e.token[n-2]!=="return"&&e.token[n-2]!=="in"&&e.token[n-2]!=="instanceof"&&e.token[n-2]!=="typeof"&&(c==="reference"||c==="word")&&(e.types[n+1]==="word"||e.types[n+1]==="reference"||(t(e.token[n+1],40)||e.token[n+1]==="x(")&&e.token[n-2]==="new")){if(u[n-1]=-20,e.types[n+1]==="word"||e.types[n+1]==="reference"){u.push(-10);return}u.push(-20);return}if(e.token[n+1]===":"){u[n-1]=-20,u.push(-20);return}if(G.push(n),i.ternaryLine===!0)u[n-1]=-10;else{let w=n-1;do w=w-1;while(w>-1&&u[w]<-9);if(M.push(n),h=h+1,u[w]===h&&e.token[w+1]!==":"&&(h=h+1,M.push(n)),u[n-1]=h,t(e.token[e.begin[n]],40)&&(M.length<2||M[0]===M[1])){E[E.length-1]=!1,n-2===e.begin[n]?u[e.begin[n]]=h-1:u[e.begin[n]]=h,w=n-2;do{if(e.types[w]==="end"&&u[w-1]>-1)break;u[w]>-1&&(u[w]=u[w]+1),w=w-1}while(w>e.begin[n])}}u.push(-10);return}if(O===":"){if(e.stack[n]==="map"||e.types[n+1]==="type"||e.types[n+1]==="type_start"){u[n-1]=-20,u.push(-10);return}if(G.length>0&&e.begin[G[G.length-1]]===e.begin[n]){let w=n,Q=e.begin[n];do if(w=w-1,e.begin[w]===Q){if(t(e.token[w],44)||t(e.token[w],59)){u[n-1]=-20;break}if(e.token[w]==="?"){G.pop(),V(),i.ternaryLine===!0&&(u[n-1]=-10),u.push(-10);return}}else e.types[w]==="end"&&(w=e.begin[w]);while(w>Q)}if(e.token[n-2]==="where"&&e.stack[n-2]===e.stack[n]){u[n-1]=-10,u.push(-10);return}if(c==="reference"&&e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("){u[n-1]=-20,u.push(-10);return}if((t(f,41)||f==="x)")&&e.token[e.begin[n-1]-2]==="function"){u[n-1]=-20,u.push(-10);return}if(e.stack[n]==="attribute"){u[n-1]=-20,u.push(-10);return}if(e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&(c==="reference"||t(f,41)||t(f,93)||f==="?")&&(e.stack[n]==="map"||e.stack[n]==="class"||e.types[n+1]==="reference")&&(G.length===0||G[G.length-1]<e.begin[n])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[n])>-1||e.types[n-2]==="word"&&e.stack[n]!=="switch")){u[n-1]=-20,u.push(-10);return}if(e.stack[n]==="switch"&&(G.length<1||G[G.length-1]<e.begin[n])){u[n-1]=-20,i.caseSpace===!0?u.push(-10):u.push(h);return}e.stack[n]==="object"?u[n-1]=-20:G.length>0?u[n-1]=h:u[n-1]=-10,u.push(-10);return}if(O==="++"||O==="--"){c==="number"||c==="reference"?(u[n-1]=-20,u.push(-10)):n<j-1&&(e.types[n+1]==="number"||e.types[n+1]==="reference")?u.push(-20):u.push(-10);return}if(O==="+"){if(c==="start"?u[n-1]=-20:u[n-1]=-10,a.wrap<1||e.token[e.begin[n]]==="x("){u.push(-10);return}let w=e.token[n+1];if(w===void 0){u.push(-10);return}if(e.types[n-1]==="operator"||e.types[n-1]==="start"){if(e.types[n+1]==="reference"||w==="("||w==="["){u.push(-20);return}if(Number(w.slice(1,-1))>-1&&(/\d/.test(w.charAt(1))===!0||w.charAt(1)==="."||w.charAt(1)==="-"||w.charAt(1)==="+")){u.push(-20);return}}return Z()}if(e.types[n-1]!=="comment"&&(t(f,40)?u[n-1]=-20:O==="*"&&e.stack[n]==="object"&&e.types[n+1]==="reference"&&(t(f,123)||t(f,44))?u[n-1]=h:(O!=="?"||G.length===0)&&(u[n-1]=-10)),O.indexOf("=")>-1&&O!=="=="&&O!=="==="&&O!=="!="&&O!=="!=="&&O!==">="&&O!=="<="&&O!=="=>"&&e.stack[n]!=="method"&&e.stack[n]!=="object"){let w=n+1,Q=0,X=!1,ae=d;if((t(e.token[e.begin[n]],40)||e.token[e.begin[n]]==="x(")&&e.token[n+1]!=="function")return;do{if(e.types[w]==="start"){if(X===!0&&e.token[w]!=="["){ie[ie.length-1]===!0&&(ie[ie.length-1]=!1);break}Q=Q+1}if(e.types[w]==="end"&&(Q=Q-1),Q<0){ie[ie.length-1]===!0&&(ie[ie.length-1]=!1);break}if(Q===0){if(ae=e.token[w],X===!0){if(e.types[w]==="operator"||t(e.token[w],59)||e.token[w]==="x;"||e.token[w]==="?"||e.token[w]==="var"||e.token[w]==="let"||e.token[w]==="const"){ae!==void 0&&(ae==="?"||ae.indexOf("=")>-1&&ae!=="=="&&ae!=="==="&&ae!=="!="&&ae!=="!=="&&ae!==">="&&ae!=="<=")&&ie[ie.length-1]===!1&&(ie[ie.length-1]=!0),(ae===";"||ae==="x;"||ae==="var"||ae==="let"||ae==="const")&&ie[ie.length-1]===!0&&(ie[ie.length-1]=!1);break}ie[ie.length-1]===!0&&(ae==="return"||ae==="break"||ae==="continue"||ae==="throw")&&(ie[ie.length-1]=!1)}(ae===";"||ae==="x;"||ae===",")&&(X=!0)}w=w+1}while(w<j);u.push(-10);return}if(O==="-"&&f==="return"||t(f,61)){u.push(-20);return}if(c==="operator"&&e.types[n+1]==="reference"&&f!=="--"&&f!=="++"&&O!=="&&"&&O!=="||"){u.push(-20);return}return Z()}function W(){let M=()=>{let Z=e.begin[n];if(Z<0)r.stack.push([e.token[n],-1]);else{if(e.stack[Z+1]!=="function")do Z=e.begin[Z];while(Z>-1&&e.stack[Z+1]!=="function");r.stack.push([e.token[n],Z])}};if(e.types[n-1]==="comment"?u[n-1]=h:c==="end"&&f!==")"&&e.token[e.begin[n-1]-1]!==")"?u[n-1]=-10:c!=="separator"&&c!=="start"&&c!=="end"&&c.indexOf("template_string")<0&&(c==="word"||c==="operator"||c==="property"||c==="type"||c==="reference"?u[n-1]=-10:u[n-1]=-20),f==="var"&&e.lexer[n-1]===l)M();else if(f==="function")r.stack.push([e.token[n],n]);else if(f==="let"||f==="const")r.stack.push([e.token[n],n]);else if(e.stack[n]==="arguments")r.stack.push([e.token[n],n]);else if(t(f,44)){let Z=n;do Z=Z-1;while(Z>e.begin[n]&&e.token[Z]!=="var"&&e.token[Z]!=="let"&&e.token[Z]!=="const");e.token[Z]==="var"?M():(e.token[Z]==="let"||e.token[Z]==="const")&&r.stack.push([e.token[n],n])}u.push(-10)}function te(){let M=Ue(B[B.length-1])?[]:B[B.length-1],Z=()=>{if(i.methodChain>0){let w=n,Q=e.begin[n],X=[n],ae=e.token[Q-1]==="if";do if(w=w-1,e.types[w]==="end"&&(w=e.begin[w]),e.begin[w]===Q){if(e.types[w]==="string"&&e.token[w].indexOf("${")===e.token[w].length-2)break;if(e.token[w]==="."){if(u[w-1]>0){u[n-1]=ae===!0?h+1:h;return}X.push(w)}else if(e.token[w]===";"||e.token[w]===","||e.types[w]==="operator"||(e.types[w]==="word"||e.types[w]==="reference")&&(e.types[w-1]==="word"||e.types[w-1]==="reference"))break}while(w>Q);if(X.length<i.methodChain){u[n-1]=-20;return}w=0,Q=X.length;do u[X[w]-1]=ae===!0?h+1:h,w=w+1;while(w<Q);w=X[X.length-1]-1;do u[w]>-1&&(u[w]=u[w]+1),w=w+1;while(w<n);h=ae===!0?h+2:h+1}u[n-1]=h};if(O==="::"){u[n-1]=-20,u.push(-20);return}if(O==="."){e.token[e.begin[n]]!=="("&&e.token[e.begin[n]]!=="x("&&M.length>0&&(e.stack[n]==="object"||e.stack[n]==="array"?A(!0,!1):A(!1,!1)),i.methodChain===0?u[n-1]=-20:i.methodChain<0?e.lines[n]>0?Z():u[n-1]=-20:Z(),u.push(-20);return}if(O===","){if(ye(),Y[Y.length-1]===!1&&(e.stack[n]==="object"||e.stack[n]==="array"||e.stack[n]==="paren"||e.stack[n]==="expression"||e.stack[n]==="method")&&(Y[Y.length-1]=!0,t(e.token[e.begin[n]],40))){let w=n;do w=w-1,e.begin[w]===e.begin[n]&&e.token[w]==="+"&&u[w]>-9&&(u[w]=u[w]+2);while(w>e.begin[n])}if(e.stack[n]==="array"&&i.arrayFormat==="indent"){u[n-1]=-20,u.push(h);return}if(e.stack[n]==="array"&&i.arrayFormat==="inline"){u[n-1]=-20,u.push(-10);return}if(e.stack[n]==="object"&&i.objectIndent==="indent"){u[n-1]=-20,u.push(h);return}if(e.stack[n]==="object"&&i.objectIndent==="inline"){u[n-1]=-20,u.push(-10);return}if(M.length>0){M[M.length-1]>-1&&V(),u[n-1]=-20,u.push(h);return}if(e.token[n-2]===":"&&e.token[n-4]==="where"){u[n-1]=-20,u.push(-10);return}if(u[n-1]=-20,e.types[n+1]!=="end"&&(I[I.length-1]=I[I.length-1]+1),(t(e.token[e.begin[n]],40)||e.token[e.begin[n]]==="x(")&&r.language!=="jsx"&&e.stack[n]!=="global"&&(e.types[n-1]!=="string"&&e.types[n-1]!=="number"||e.token[n-2]!=="+"||e.types[n-1]==="string"&&e.types[n-1]!=="number"&&t(e.token[n-2],43)&&e.types[n-3]!=="string"&&e.types[n-3]!=="number")){u.push(-10);return}if(c==="reference"&&e.types[n-2]==="word"&&"var-let-const-from".indexOf(e.token[n-2])<0&&(e.types[n-3]==="end"||e.token[n-3]===";")){oe[oe.length-1]=!0,u.push(-10);return}if(oe[oe.length-1]===!0||e.stack[n]==="notation"){u.push(-10);return}if(I[I.length-1]>3&&(e.stack[n]==="array"||e.stack[n]==="object")){if(E[E.length-1]===!0&&A(!0,!0),u[n-1]=-20,q[q.length-1]===!0){u.push(h);return}let w=e.begin[n],Q=n;do e.types[Q]==="end"?Q=e.begin[Q]:t(e.token[Q],44)&&e.types[Q+1]!=="comment"&&(u[Q]=h),Q=Q-1;while(Q>w);u[w]=h,q[q.length-1]=!0;return}if(e.stack[n]==="object"&&E[E.length-1]===!0&&e.types[e.begin[n]-1]!=="word"&&e.types[e.begin[n]-1]!=="reference"&&e.token[e.begin[n]-1]!=="("&&e.token[e.begin[n]-1]!=="x("){let w=e.begin[n],Q=n-1;do{if(e.begin[Q]===w){if(t(e.token[Q],44))break;if(t(e.token[Q],58)){A(!0,!1);break}}Q=Q-1}while(Q>w)}if(E[E.length-1]===!1||t(e.token[n-2],43)&&(c==="string"||c==="number")&&u[n-2]>0&&(t(f,34)||t(f,39))){if(e.stack[n]==="method"){if(t(e.token[n-2],43)&&(t(f,34)||t(f,39))&&(e.token[n-3].charAt(0)==='"'||e.token[n-3].charAt(0)==="'")){u.push(h+2);return}if(e.token[n-2]!=="+"){u.push(-10);return}}u.push(h);return}if(E[E.length-1]===!0&&e.stack[n]!=="object"){u.push(-10);return}if(I[I.length-1]<4&&(e.stack[n]==="array"||e.stack[n]==="object")){u.push(-10);return}u.push(h);return}if(t(O,59)||O==="x;"){if(ye(),e.token[n+1]!==void 0&&e.types[n+1].indexOf("attribute")>0&&e.types[n+1].indexOf("end")>0){u[n-1]=-20,u.push(h-1);return}if(b[b.length-1]>-1&&e.stack[b[b.length-1]]!=="expression"){let w=n;do{if(w=w-1,t(e.token[w],59))break;if(t(e.token[w],44)){h=h-1;break}e.types[w]==="end"&&(w=e.begin[w])}while(w>0&&w>e.begin[n])}if(b[b.length-1]=-1,V(),e.token[e.begin[n]-1]!=="for"&&A(!1,!1),oe[oe.length-1]=!1,u[n-1]=-20,e.begin[n]>0&&e.token[e.begin[n]-1]==="for"&&e.stack[n]!=="for"){u.push(-10);return}u.push(h);return}u.push(-20)}function H(){let M=e.stack[n+1],Z=n===0?e.stack[n]:e.stack[n-1];if((t(f,41)||F(f,93)&&(Z==="object"||Z==="array"))&&(M!=="method"||M==="method"&&F(e.token[n+1],41)&&F(e.token[n+2],41))&&(t(f,41)&&(M!=="function"||t(e.token[e.begin[e.begin[n-1]-1]],40)||e.token[e.begin[e.begin[n-1]-1]]==="x(")?A(!1,!1):e.types[n+1]!=="end"&&e.types[n+2]!=="end"&&A(!0,!1)),Y.push(!1),B.push([]),ie.push(!1),q.push(!1),oe.push(!1),I.push(0),i.neverFlatten===!0||M==="attribute"||c==="generic"||i.arrayFormat==="indent"&&M==="array"||M==="class"&&F(f,40)&&f!=="x("||t(O,91)&&e.token[n+1]==="function"?E.push(!1):M==="expression"||M==="method"||(M==="object"||M==="class")&&(t(f,40)||f==="x("||c==="word"||c==="reference")||M==="array"||t(O,40)||O==="x("||t(O,123)&&M==="object"&&c!=="operator"&&c!=="start"&&c!=="string"&&c!=="number"&&Z!=="object"&&Z!=="array"&&n>0?E.push(!0):E.push(!1),F(O,40)&&O!=="x("&&e.stack[n+1]!=="attribute"&&(h=h+1),t(O,123)||O==="x{"){if(b.push(-1),e.types[n-1]!=="comment"&&(c==="markup"?u[n-1]=h:i.braceAllman===!0&&c!=="operator"&&f!=="return"?u[n-1]=h-1:e.stack[n+1]!=="block"&&(M==="function"||t(f,41)||f==="x)"||t(f,44)||t(f,125)||c==="markup")?u[n-1]=-10:(t(f,123)||f==="x{"||t(f,91)||t(f,125)||f==="x}")&&(u[n-1]=h-1)),M==="object"){if(i.objectIndent==="indent"){E[E.length-1]=!1,u.push(h);return}if(i.objectIndent==="inline"){E[E.length-1]=!0,u.push(-20);return}}if(M==="switch"){if(i.noCaseIndent===!0){u.push(h-1);return}h=h+1,u.push(h);return}if(E[E.length-1]===!0&&c!=="word"&&c!=="reference"){u.push(-20);return}u.push(h);return}if(t(O,40)||O==="x("){if(a.wrap>0&&t(O,40)&&e.token[n+1]!==")"&&S.push(1),t(f,45)&&(t(e.token[n-2],40)||e.token[n-2]==="x(")&&(u[n-2]=-20),c==="end"&&Z!=="if"&&Z!=="for"&&Z!=="catch"&&Z!=="else"&&Z!=="do"&&Z!=="try"&&Z!=="finally"&&Z!=="catch"&&(e.types[n-1]==="comment"?u[n-1]=h:u[n-1]=-20),f==="async"?u[n-1]=-10:(M==="method"||e.token[n-2]==="function"&&c==="reference")&&(f==="import"||f==="in"||i.functionNameSpace===!0?u[n-1]=-10:t(f,125)&&e.stack[n-1]==="function"||c==="word"||c==="reference"||c==="property"?u[n-1]=-20:Z!=="method"&&M!=="method"&&(u[n-1]=h)),t(f,43)&&(t(e.token[n-2],34)||t(e.token[n-2],39))){u.push(h);return}if(t(f,125)||f==="x}"){u.push(-20);return}(t(f,45)&&(n<2||F(e.token[n-2],41)&&F(e.token[n-2],93)&&e.token[n-2]!=="x)"&&e.types[n-2]!=="reference"&&e.types[n-2]!=="string"&&e.types[n-2]!=="number")||i.functionSpace===!1&&f==="function")&&(u[n-1]=-20),u.push(-20);return}if(t(O,91)){if(t(f,91)&&(Y[Y.length-2]=!0),f==="return"||f==="var"||f==="let"||f==="const"?u[n-1]=-10:e.types[n-1]!=="comment"&&e.stack[n-1]!=="attribute"&&(c==="end"||c==="word"||c==="reference")?u[n-1]=-20:(t(f,91)||t(f,123)||f==="x{")&&(u[n-1]=h-1),e.stack[n]==="attribute"){u.push(-20);return}if(i.arrayFormat==="indent"){E[E.length-1]=!1,u.push(h);return}if(i.arrayFormat==="inline"){E[E.length-1]=!0,u.push(-20);return}if(M==="method"||E[E.length-1]===!0){u.push(-20);return}let w=n+1;do{if(t(e.token[w],93)){u.push(-20);return}if(t(e.token[w],44)){u.push(h);return}w=w+1}while(w<j);u.push(-20)}}function K(){O.length===1?(u.push(-20),e.lines[n]===0&&(u[n-1]=-20)):O.indexOf("#!/")===0?u.push(h):c!=="liquid"&&e.types[n+1]!=="liquid"&&u.push(-10),(t(f,44)||c==="start")&&(e.stack[n]==="object"||e.stack[n]==="array")&&E[E.length-1]===!1&&n>0&&(u[n-1]=h)}function fe(){k==="liquid_else"?c==="string"?(e.lines[n-1]<=1&&(u[n-1]=-20),e.lines[n]>0?(h=h-1,u.push(h)):u.push(-20)):(u[n-1]=h-1,u.push(h)):k==="liquid_start"?c==="string"?(e.lines[n-1]<=1&&(u[n-1]=-20),e.lines[n]>0?(h=h+1,u.push(h)):u.push(-20)):(h=h+1,e.lines[n-1]<1&&(u[n-1]=-20),e.lines[n]>0?u.push(h):u.push(-20)):k==="liquid_end"?c==="string"?(e.lines[n-1]<=1&&(u[n-1]=-20),e.lines[n]>1&&(u[n-1]=h-1,u.push(h))):(h=h-1,c==="liquid_start"||e.lines[n-1]<1?u[n-1]=-20:u[n-1]=h,e.lines[n]>0?u.push(h):u.push(-20)):k==="liquid"&&(t(f,58)&&u[n-2]===-10&&(u[n-2]=-20),e.lines[n]>0?u.push(h):u.push(-20))}function D(){k==="template_string_start"?(h=h+1,u.push(h)):k==="template_string_else"?(ye(),u[n-1]=h-1,u.push(h)):(ye(),h=h-1,u[n-1]=h,u.push(-10)),n>2&&(e.types[n-2]==="template_string_else"||e.types[n-2]==="template_string_start")&&(i.bracePadding===!0?(u[n-2]=-10,u[n-1]=-10):(u[n-2]=-20,u[n-1]=-20))}function le(){t(e.token[n-1],44)||t(e.token[n-1],58)&&e.stack[n-1]!=="data_type"?u[n-1]=-10:u[n-1]=-20,(e.types[n]==="type"||e.types[n]==="type_end")&&u.push(-10),e.types[n]==="type_start"&&u.push(-20)}function ve(){if((t(f,41)||f==="x)")&&e.stack[n]==="class"&&(e.token[e.begin[n-1]-1]==="static"||e.token[e.begin[n-1]-1]==="final"||e.token[e.begin[n-1]-1]==="void")&&(u[n-1]=-10,u[e.begin[n-1]-1]=-10),t(f,93)&&(u[n-1]=-10),O==="else"&&t(f,125)&&(e.token[n-2]==="x}"&&(u[n-3]=u[n-3]-1),(i.braceAllman===!0||i.elseNewline===!0)&&(u[n-1]=h)),O==="new"&&je.js.keywords.has(e.token[n+1])&&(p=p+1),O==="from"&&c==="end"&&n>0&&(e.token[e.begin[n-1]-1]==="import"||t(e.token[e.begin[n-1]-1],44))&&(u[n-1]=-10),O==="function"){if(i.functionSpace===!1&&n<j-1&&(t(e.token[n+1],40)||e.token[n+1]==="x(")){u.push(-20);return}u.push(-10);return}if(t(f,45)&&n>1)e.types[n-2]==="operator"||t(e.token[n-2],44)?u[n-1]=-20:e.types[n-2]==="start"&&(u[n-2]=-20,u[n-1]=-20);else if(O==="while"&&(t(f,125)||f==="x}")){let M=n-1,Z=0;do{if((t(e.token[M],125)||e.token[M]==="x}")&&(Z=Z+1),(t(e.token[M],123)||e.token[M]==="x{")&&(Z=Z-1),Z===0){if(e.token[M-1]==="do"){u[n-1]=-10;break}u[n-1]=h;break}M=M-1}while(M>-1)}else if(O==="in"||(t(f,125)||f==="x}")&&(O==="catch"||O==="else"&&i.elseNewline===!1&&i.braceAllman===!1))u[n-1]=-10;else if(O==="var"||O==="let"||O==="const"){if(b[b.length-1]=n,c==="end"&&(u[n-1]=h),e.token[e.begin[n]-1]!=="for"){let M=n+1,Z=0;do{if(e.types[M]==="end"&&(Z=Z-1),e.types[M]==="start"&&(Z=Z+1),Z<0||Z===0&&(t(e.token[M],59)||t(e.token[M],44)))break;M=M+1}while(M<j);t(e.token[M],44)&&(h=h+1)}u.push(-10);return}if(c!=="word"&&e.stack[n]==="switch"&&(O==="default"||O==="case")){u[n-1]=h-1,u.push(-10);return}if(O==="catch"&&f==="."){u[n-1]=-20,u.push(-20);return}if(O==="catch"||O==="finally"){u[n-1]=-10,u.push(-10);return}if(i.bracePadding===!1&&n<j-1&&t(e.token[n+1],125)){u.push(-20);return}if(e.stack[n]==="object"&&(t(f,123)||t(f,44))&&(t(e.token[n+1],40)||e.token[n+1]==="x(")){u.push(-20);return}e.types[n-1]==="comment"&&t(e.token[e.begin[n]],40)&&(u[n-1]=h+1),a.script.inlineReturn===!0&&O==="return"&&c==="start"&&e.stack[n]==="if"&&f==="x{"?(u[n-1]=-20,u.push(-20),console.log(f,c,O,k,u[n],h)):u.push(-10)}do e.lexer[n]===l?(k=e.types[n],O=e.token[n],k==="comment"?g():k==="regex"?u.push(-20):k==="string"?K():k.indexOf("template_string")===0?D():k==="separator"?te():k==="start"?H():k==="end"?z():k==="type"||k==="type_start"||k==="type_end"?le():k==="operator"?_():k==="word"?ve():k==="reference"?W():k==="markup"?xe():k.indexOf("liquid")===0?fe():k==="generic"?(F(f,35)&&f!=="return"&&c!=="operator"&&f!=="public"&&f!=="private"&&f!=="static"&&f!=="final"&&f!=="implements"&&f!=="class"&&f!=="void"&&(u[n-1]=-20),t(e.token[n+1],40)||e.token[n+1]==="x("?u.push(-20):u.push(-10)):u.push(-10),k!=="comment"&&(c=k,f=O),S.length>0&&F(e.token[n],41)&&(e.types[n]==="comment"&&S[S.length-1]>-1?S[S.length-1]=a.wrap+1:u[n]>-1||t(e.token[n],96)&&e.token[n].indexOf(ee)>0?S[S.length-1]=-1:S[S.length-1]>-1&&(S[S.length-1]=S[S.length-1]+e.token[n].length,u[n]===-10&&(S[S.length-1]=S[S.length-1]+1)))):ne(),n=n+1;while(n<j);return u})();return(()=>{let n=[],h=a.indentChar.repeat(a.indentSize),o=a.preserveLine+1,L=["x;","x}","x{","x(","x)"],k=r.start,O=a.indentLevel;function c(f){let b=k===j-1?1:e.lines[k+1]-1>o?o:e.lines[k+1]>1?e.lines[k+1]-1:1;return r.crlf.repeat(b)+h.repeat(f)}if(i.vertical===!0){let f=function(b){let Y=0,u=0,G=b-1,B=0,q=0,E=e.begin[k],I=[];do{if((e.begin[G]===E||t(e.token[G],93)||t(e.token[G],41))&&(t(e.token[G+1],61)||t(e.token[G+1],59)&&e.stack[G]==="object")){B=G,u=0;do{if(e.begin[B]===E){if(t(e.token[B],58)||t(e.token[B],59)||e.token[B]==="x;"||s[B]>-1&&e.types[B]!=="comment"){t(e.token[B+1],46)&&(u=u+a.indentSize*a.indentChar.length);break}}else if(s[B]>-1)break;e.types[B]!=="comment"&&(s[B-1]===-10&&(u=u+1),u=e.token[B].length+u),B=B-1}while(B>E);if(q=B,t(e.token[q],44)&&t(e.token[G+1],61))do{if(e.types[q]==="end"&&(q=e.begin[q]),e.begin[q]===E){if(t(e.token[q],59)||e.token[q]==="x;")break;if(e.token[q]==="var"||e.token[q]==="const"||e.token[q]==="let"){u=u+a.indentSize*a.indentChar.length;break}}q=q-1}while(q>E);u>Y&&(Y=u),I.push([G,u]),G=B}else e.types[G]==="end"&&(G=e.begin[G]);G=G-1}while(G>E);if(G=I.length,G>0)do if(G=G-1,B=I[G][1],B<Y)do e.token[I[G][0]]=e.token[I[G][0]]+se,B=B+1;while(B<Y);while(G>0)};k=j;do k=k-1,e.lexer[k]==="script"&&t(e.token[k],125)&&F(e.token[k-1],123)&&s[e.begin[k]]>0?f(k):k=e.begin[k];while(k>0)}k=r.start;do{if(e.lexer[k]===l){if(e.types[k]==="comment"&&i.commentIndent===!0&&/\n/.test(e.token[k])){let f=e.begin[k]>-1?t(e.token[k][2],42)?ft(s[k],h)+a.indentChar:ft(s[k],h):a.indentChar,b=e.token[k].split(/\n/),Y=1;do b[Y]=f+b[Y].trimStart(),Y=Y+1;while(Y<b.length);e.token.splice(k,1,b.join(ee))}L.indexOf(e.token[k])<0&&(F(e.token[k],59)||i.noSemicolon===!1?n.push(e.token[k]):s[k]<0&&e.types[k+1]!=="comment"&&n.push(";")),k<j-1&&e.lexer[k+1]!==l&&e.begin[k]===e.begin[k+1]&&e.types[k+1].indexOf("end")<0&&F(e.token[k],44)?n.push(se):s[k]>-1?((s[k]>-1&&t(e.token[k],123)||s[k]>-1&&t(e.token[k+1],125))&&e.lines[k]<3&&i.braceNewline===!0&&e.lines[k+1]<3&&n.push(c(0)),r.mode===2?r.ender!==k&&n.push(c(s[k])):k!==j-1&&n.push(c(s[k])),O=s[k]):s[k]===-10&&(n.push(se),e.lexer[k+1]!==l&&(O=O+1))}else if(x[k]===k)n.push(e.token[k]);else{r.ender=x[k],r.start=k;let f=r.external(O);n.push(f),k=r.iterator,s[k]===-10?n.push(se):s[k]>-1&&n.push(c(s[k]))}k=k+1}while(k<j);return r.iterator=j-1,n.join(d)})()}function In(){let e=[],{data:a,rules:i,crlf:p}=r,x=r.ender>0?r.ender+1:a.token.length,l=i.preserveLine+1,j=i.indentChar.repeat(i.indentSize),s=i.indentLevel,n=r.start,h=[d,d];function o(k,O){return a.types[k]===O}function L(k){let O=[],c=n===x-1?1:a.lines[n+1]-1>l?l:a.lines[n+1]>1?a.lines[n+1]-1:1,f=0;k<0&&(k=0);do O.push(p),f=f+1;while(f<c);if(k>0){f=0;do O.push(j),f=f+1;while(f<k)}e.push(O.join(d))}do(o(n+1,"end")||o(n+1,"liquid_end")||o(n+1,"liquid_else"))&&(s=s-1),o(n,"liquid")&&a.lines[n]>0?(e.push(a.token[n]),F(a.token[n+1],59)&&je.css.units.has(a.token[n+1])===!1&&L(s)):o(n-1,"selector")&&o(n,"liquid")&&o(n+1,"selector")?(e.push(a.token[n]),Me(a.token[n-1],45)&&(t(a.token[n+1],46)||t(a.token[n+1],35)||t(a.token[n+1],38))&&e.push(se)):o(n,"liquid_else")?(e.push(a.token[n]),s=s+1,L(s)):o(n,"start")||o(n,"liquid_start")?(s=s+1,e.push(a.token[n]),o(n+1,"end")===!1&&o(n+1,"liquid_end")===!1&&L(s)):t(a.token[n],59)||o(n,"end")||o(n,"liquid_end")||o(n,"comment")?(e.push(a.token[n]),o(n+1,"value")?a.lines[n+1]===1?e.push(se):a.lines[n+1]>1&&L(s):o(n+1,"separator")===!1?o(n+1,"comment")===!1||o(n+1,"comment")&&a.lines[n+1]>1?L(s):e.push(se):o(n,"comment")&&o(n+1,"comment")===!1&&a.lines[n]>1&&L(s)):t(a.token[n],58)?(e.push(a.token[n]),o(n+1,"selector")===!1&&F(a.token[n+1],44)&&e.push(se)):o(n,"selector")||o(n,"at_rule")?(i.style.classPadding===!0&&o(n-1,"end")&&a.lines[n]<3&&L(s),a.token[n].indexOf("and(")>0?(a.token[n]=a.token[n].replace(/and\(/,"and ("),e.push(a.token[n])):a.token[n].indexOf("when(")>0?(h=a.token[n].split("when("),e.push(h[0].replace(/\s+$/,d)),L(s+1),e.push(`when (${h[1]}`)):e.push(a.token[n]),o(n+1,"start")&&e.push(se)):t(a.token[n],44)?(o(n+1,"value")&&L(s),e.push(a.token[n]),o(n+1,"selector")||o(n+1,"property")?L(s):e.push(se)):a.stack[n]==="map"&&t(a.token[n+1],41)&&n-a.begin[n]>5?(e.push(a.token[n]),L(s)):a.token[n]==="x;"?L(s):(o(n,"variable")||o(n,"function"))&&i.style.classPadding===!0&&o(n-1,"end")&&a.lines[n]<3?(e.push(p),e.push(a.token[n])):F(a.token[n],59)&&e.push(a.token[n]),n=n+1;while(n<x);return r.iterator=x-1,(e[0]===r.crlf||t(e[0],32))&&(e[0]=d),i.endNewline===!0?e.join(d).replace(/\s*$/,r.crlf):e.join(d).replace(/\s+$/,d)}function Bt(e){if(e===1)return Cn();if(e===3)return In();if(e===2)return An()}var rn={crlf:!1,correct:!1,preset:"default",language:"auto",endNewline:!1,indentChar:" ",indentLevel:0,indentSize:2,preserveLine:2,wrap:0,wrapFraction:0,liquid:{commentNewline:!1,commentIndent:!0,delimiterTrims:"preserve",delimiterPlacement:"preserve",forceFilter:0,forceArgument:0,ignoreTagList:[],indentAttribute:!1,lineBreakSeparator:"before",normalizeSpacing:!0,preserveComment:!1,preserveInternal:!1,dedentTagList:[],quoteConvert:"none"},markup:{attributeCasing:"preserve",attributeSort:!1,commentNewline:!1,commentIndent:!0,delimiterTerminus:"inline",forceAttribute:3,forceAttributeValue:!0,forceIndent:!1,ignoreCSS:!1,ignoreJS:!0,ignoreJSON:!1,lineBreakValue:"preserve",preserveComment:!1,preserveText:!1,preserveAttribute:!1,selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!1,quoteConvert:"none"},json:{arrayFormat:"default",braceAllman:!1,bracePadding:!1,objectIndent:"default",objectSort:!1,braceStyle:"none",caseSpace:!1,commentIndent:!1,commentNewline:!1,correct:!1,elseNewline:!1,functionNameSpace:!1,functionSpace:!1,methodChain:4,neverFlatten:!1,noCaseIndent:!1,preserveComment:!1,styleGuide:"none",ternaryLine:!1,variableList:"none",quoteConvert:"double",endComma:"never",noSemicolon:!0,vertical:!1},style:{commentIndent:!1,commentNewline:!1,atRuleSpace:!0,classPadding:!1,noLeadZero:!1,preserveComment:!1,sortSelectors:!1,sortProperties:!1,quoteConvert:"none"},script:{arrayFormat:"default",braceNewline:!1,bracePadding:!1,braceStyle:"none",braceAllman:!1,caseSpace:!1,commentIndent:!1,commentNewline:!1,elseNewline:!1,endComma:"never",functionNameSpace:!1,functionSpace:!1,inlineReturn:!0,methodChain:4,neverFlatten:!1,noCaseIndent:!1,noSemicolon:!1,objectSort:!1,objectIndent:"default",preserveComment:!1,quoteConvert:"none",styleGuide:"none",ternaryLine:!1,variableList:"none",vertical:!1}},Ln=class extends Array{get entry(){return this[this.length-1]}get token(){return this[this.length-1][0]}get index(){return this[this.length-1][1]}update(e,a){let i=this.length-1;return i>0?(a===void 0?typeof e=="string"?this[i][0]=e:this[i][1]=e:(this[i][0]=e,this[i][1]=a),this[i]):(this.push([e,a]),this[i+1])}pop(){let e=this.length-1,a=this[e];return e>0&&this.splice(e,1),a}},Ze=class{constructor(){this.hooks={parse:null,format:null},this.start=0,this.ender=0,this.iterator=0,this.attributes=new Map,this.regions=new Map,this.pairs=new Map,this.error=null,this.crlf=`
`,this.references=[[]],this.count=-1,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineOffset=0,this.lineIndex=0,this.rules=rn,this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]}}get source(){return this.mode===2?Ze.region:ze.env==="node"&&Buffer.isBuffer(Ze.input)?Ze.input.toString():Ze.input}set source(e){Ze.input=ze.env!=="node"||Buffer.isBuffer(e)?e:Buffer.from(e)}get current(){return{begin:this.data.begin[this.count],ender:this.data.ender[this.count],lexer:this.data.lexer[this.count],lines:this.data.lines[this.count],stack:this.data.stack[this.count],token:this.data.token[this.count],types:this.data.types[this.count]}}reset(){this.error=null,this.count=-1,this.start=0,this.ender=0,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineIndex=0,this.lineOffset=0,this.data.begin=[],this.data.ender=[],this.data.lexer=[],this.data.lines=[],this.data.stack=[],this.data.token=[],this.data.types=[],this.references=[[]],this.stack=new Ln(["global",-1]),this.mode=1,this.pairs.size>0&&this.pairs.clear(),this.attributes.size>0&&this.attributes.clear(),this.regions.size>0&&this.regions.clear()}get(e){return{begin:this.data.begin[e],ender:this.data.ender[e],lexer:this.data.lexer[e],lines:this.data.lines[e],stack:this.data.stack[e],token:this.data.token[e],types:this.data.types[e]}}document(e,a=3){return this.reset(),Vt(e),a===1?this.data:(this.mode=3,Bt(e))}external(e,a){if(this.mode===1){this.mode=2;let i=qt(e);Ze.region=a,this.language=e,this.lexer=Le(this.language),this.regions.set(this.count+1,{lexer:i,id:this.language}),Vt(i),this.mode=1,this.lexer=Le(this.rules.language),this.language=this.rules.language}else{if(this.regions.size===0)return this.source;let{id:i,lexer:p}=this.regions.get(this.start);this.mode=2,this.language=i,this.rules.indentLevel=e;let x=Bt(p);return this.mode=3,this.rules.indentLevel=0,this.language=this.rules.language,this.lexer=Le(this.language),x}}final(e){let a=this.count,i=e.begin[a];if(!(e.lexer[a]==="style"&&this.rules.style.sortProperties||e.lexer[a]==="script"&&(this.rules.script.objectSort||this.rules.json.objectSort))){do e.begin[a]===i||e.begin[e.begin[a]]===i&&e.types[a].indexOf("attribute")>-1&&e.types[a].indexOf("attribute_end")<0?e.ender[a]=this.count:a=e.begin[a],a=a-1;while(a>i);a>-1&&(e.ender[a]=this.count)}}syntactic(e,a){if(e.types==="liquid_start"||e.types==="start")this.pairs.set(this.count,{index:this.count,line:this.lineNumber,token:e.token,type:e.types==="start"?2:3,stack:a});else if(this.pairs.has(this.stack.index)&&(e.types==="end"||e.types==="liquid_end")){let i=this.pairs.get(this.stack.index);i.type===3?e.token.indexOf(`end${i.stack}`)>-1?this.pairs.delete(this.stack.index):Qt(112,i):i.type===2&&`</${i.stack}>`===e.token&&this.pairs.delete(this.stack.index)}}push(e,a,i=d){if(e.begin.push(a.begin),e.ender.push(a.ender),e.lexer.push(a.lexer),e.stack.push(a.stack),e.token.push(a.token),e.types.push(a.types),e.lines.push(a.lines),e===this.data){if(this.count=this.count+1,a.lexer!=="style"&&i.replace(/[{}<>%]/g,d)===d&&(i=a.types==="else"?"else":Ee(a.token)),this.lineOffset=0,a.types==="start"||a.types.indexOf("_start")>0)this.stack.push([i,this.count]),this.lineDepth=this.lineDepth+this.rules.indentSize;else if(a.types==="end"||a.types.indexOf("_end")>0){let p=0,x=this.stack.length;x>2&&(e.types[this.stack[x-1][1]]==="else"||e.types[this.stack[x-1][1]].indexOf("_else")>0)&&(e.types[this.stack[x-2][1]]==="start"||e.types[this.stack[x-2][1]].indexOf("_start")>0)&&(e.types[this.stack[x-2][1]+1]==="else"||e.types[this.stack[x-2][1]+1].indexOf("_else")>0)&&(this.stack.pop(),e.begin[this.count]=this.stack.index,e.stack[this.count]=this.stack.token,e.ender[this.count-1]=this.count,p=e.ender[e.begin[this.count]+1]),this.final(e),p>0&&(e.ender[e.begin[this.count]+1]=p),this.stack.pop(),this.lineDepth=this.lineDepth-this.rules.indentSize}else(a.types==="else"||a.types.indexOf("_else")>0)&&(i===d&&(i="else"),this.count>0&&(e.types[this.count-1]==="start"||e.types[this.count-1].indexOf("_start")>0)?this.stack.push([i,this.count]):(this.final(e),this.stack.update(i===d?"else":i,this.count)));this.hooks.parse!==null&&this.hooks.parse[0].call({line:this.lineNumber,stack:this.stack.entry,language:this.language},a,this.count)}}pop(e){return e===this.data&&(this.count=this.count-1),{begin:e.begin.pop(),ender:e.ender.pop(),lexer:e.lexer.pop(),lines:e.lines.pop(),stack:e.stack.pop(),token:e.token.pop(),types:e.types.pop()}}concat(e,a){e.begin=e.begin.concat(a.begin),e.ender=e.ender.concat(a.ender),e.lexer=e.lexer.concat(a.lexer),e.stack=e.stack.concat(a.stack),e.token=e.token.concat(a.token),e.types=e.types.concat(a.types),e.lines=e.lines.concat(a.lines),e===this.data&&(this.count=e.token.length-1)}splice(e){let a=this.data.begin[this.count],i=this.data.token[this.count];e.record!==void 0&&e.record.token!==d?(e.data.begin.splice(e.index,e.howmany,e.record.begin),e.data.ender.splice(e.index,e.howmany,e.record.ender),e.data.token.splice(e.index,e.howmany,e.record.token),e.data.lexer.splice(e.index,e.howmany,e.record.lexer),e.data.stack.splice(e.index,e.howmany,e.record.stack),e.data.types.splice(e.index,e.howmany,e.record.types),e.data.lines.splice(e.index,e.howmany,e.record.lines),e.data===this.data&&(this.count=this.count-e.howmany+1,(a!==this.data.begin[this.count]||i!==this.data.token[this.count])&&(this.lineOffset=0))):(e.data.begin.splice(e.index,e.howmany),e.data.ender.splice(e.index,e.howmany),e.data.token.splice(e.index,e.howmany),e.data.lexer.splice(e.index,e.howmany),e.data.stack.splice(e.index,e.howmany),e.data.types.splice(e.index,e.howmany),e.data.lines.splice(e.index,e.howmany),e.data===this.data&&(this.count=this.count-e.howmany,this.lineOffset=0))}is(e,a){return this.count>0?this.data[e][this.count]===a:!1}lines(e,a){return this.lineNumber=this.lineNumber+1,this.lineIndex=e,a+1}spacer(e){this.lineOffset=1;do{if(e.array[e.index]===ee&&(this.lineOffset=this.lineOffset+1,this.lineNumber=this.lineNumber+1),ue(e.array[e.index+1])===!1)break;e.index=e.index+1}while(e.index<e.end);return e.index}},St=Ze;St.input=d,St.region=d;var r=new St;function Tn(e){let a=[],i=0,p=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)&&/@import/.test(e)===!1,x=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(e);function l(){return/\n\s*#+\s+/.test(e)||/^#+\s+/.test(e)?{language:"markdown",lexer:"markup"}:/\$[a-zA-Z]/.test(e)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(e)&&/:\s*@[a-zA-Z];/.test(e)===!1?{language:"scss",lexer:"style"}:/@[a-zA-Z]:/.test(e)||/\.[a-zA-Z]\(\);/.test(e)?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}}function j(){let n=1,h=d,o=!1,L=!1,k=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(e);function O(){return e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1?x===!0||/\w<\w+(,\s+\w+)*>/.test(e)||/(?:var|let|const)\s+\w+\s*:/.test(e)||/=\s*<\w+/.test(e)?{language:"typescript",lexer:"script"}:{language:"javascript",lexer:"script"}:{language:"unknown",lexer:"text"}}function c(){return/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(e)||/(?:public|private)\s+/.test(e)||/(?:export|declare)\s+type\s+\w+\s*=/.test(e)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(e)||/(?:typeof|keyof|as)\s+\w+/.test(e)||/\w+\s+as\s+\w+/.test(e)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(e)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(e)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(e)?{language:"typescript",lexer:"script"}:/\s(class|var|const|let)\s+\w/.test(e)===!1&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(e)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(e)&&(/\s?\{%/.test(e)||/{{/.test(e))?{language:"liquid",lexer:"markup"}:/^(\s*[$@])/.test(e)===!1&&/([}\]];?\s*)$/.test(e)&&(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(e)||/module\.export\s+=\s+/.test(e)||/export\s+default\s+\{/.test(e)||/[?:]\s*[{[]/.test(e)||/^(?:\s*return;?(?:\s+[{[])?)/.test(e))?{language:"javascript",lexer:"script"}:/{%/.test(e)&&/{{/.test(e)&&/<\w/.test(e)?{language:"liquid",lexer:"markup"}:/{\s*(?:\w|\.|@|#)+\s*\{/.test(e)?{language:"less",lexer:"style"}:/\$(\w|-)/.test(e)?{language:"scss",lexer:"style"}:/[;{:]\s*@\w/.test(e)===!0?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}}if(n<i)do o===!1?t(a[n],42)&&t(a[n-1],47)?(a[n-1]=d,o=!0):L===!1&&n<i-6&&a[n].charCodeAt(0)===102&&a[n+1].charCodeAt(0)===105&&a[n+2].charCodeAt(0)===108&&a[n+3].charCodeAt(0)===116&&a[n+4].charCodeAt(0)===101&&a[n+5].charCodeAt(0)===114&&t(a[n+6],58)&&(L=!0):o===!0&&t(a[n],42)&&n!==i-1&&t(a[n+1],47)?(o=!1,a[n]=d,a[n+1]=d):L===!0&&t(a[n],59)&&(L=!1,a[n]=d),(o===!0||L===!0)&&(a[n]=d),n=n+1;while(n<i);return h=a.join(d),/\s\/\//.test(e)===!1&&/\/\/\s/.test(e)===!1&&/^(\s*(\{|\[)(?!%))/.test(e)===!0&&/((\]|\})\s*)$/.test(e)&&e.indexOf(",")!==-1?{language:"json",lexer:"script"}:/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)===!0&&(p===!0||k===!0||/console\.log\(/.test(e)===!0||/export\s+default\s+class\s+/.test(e)===!0||/export\s+(const|var|let|class)s+/.test(e)===!0||/document\.get/.test(e)===!0||/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)===!0||e.indexOf("{")===-1||/^(\s*if\s+\()/.test(e)===!0)?O():e.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(e)||/^(\s*\/(\*|\/))/.test(e)||/^(\s*\*\s*\{)/.test(e))&&/^(\s*if\s*\()/.test(e)===!1&&/=\s*(\{|\[|\()/.test(h)===!1&&(/(\+|-|=|\?)=/.test(h)===!1||/\/\/\s*=+/.test(h)||/=+('|")?\)/.test(e)&&/;\s*base64/.test(e))&&/function(\s+\w+)*\s*\(/.test(h)===!1?c():e.indexOf("{%")>-1?{language:"liquid",lexer:"markup"}:{language:"unknown",lexer:"text"}}function s(){function n(){return/{%-?\s*(schema|for|if|unless|render|include)/.test(e)||/{%-?\s*end\w+/.test(e)||/{{-?\s*content_for/.test(e)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(e)||/{%/.test(e)&&/%}/.test(e)&&/{{/.test(e)&&/}}/.test(e)?{language:"liquid",lexer:"markup"}:{language:"html",lexer:"markup"}}return/^(\s*<!doctype\s+html>)/i.test(e)||/^(\s*<html)/i.test(e)||/<form\s/i.test(e)&&/<label\s/i.test(e)&&/<input\s/i.test(e)||/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(e)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(e)||/<ul\s/i.test(e)&&/<li\s/i.test(e)&&/<\/li>/i.test(e)&&/<\/ul>/i.test(e)||/<head\s*>/.test(e)&&/<\/head>/.test(e)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)&&/XHTML\s+1\.1/.test(e)===!1&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)===!1?n():/\s?{[{%]-?/.test(e)?{language:"liquid",lexer:"markup"}:{language:"xml",lexer:"markup"}}return e===null||e.replace(/\s+/g,d)===d?{language:"unknown",lexer:"text"}:(/\n\s*#{1,6}\s+/.test(e)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(e))&&(/\[( |x|X)\]/.test(e)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(e)||/\n\s*```[a-zA-Z]*?\s+/.test(e)||/-+\|(-+\|)+/.test(e))?{language:"markdown",lexer:"text"}:/^(\s*<!DOCTYPE\s+html>)/i.test(e)?s():/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(e)||x===!1&&/=(>|=|-|\+|\*)/.test(e)===!1&&/^(?:\s*((if)|(for)|(function))\s*\()/.test(e)===!1&&/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(e)===!1&&p===!1&&/return\s*\w*\s*(;|\})/.test(e)===!1&&(e===void 0||/^(?:\s*#(?!(!\/)))/.test(e)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(e)&&/>\s*<\w/.test(e)===!1||/^\s*:root\s*\{/.test(e)||/-{2}\w+\s*\{/.test(e)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(e))?l():(a=e.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,d).split(d),i=a.length,/^(\s*({{|{%|<))/.test(e)?s():x===!0||/^(?:[\s\w-]*<)/.test(e)===!1&&/(?:>[\s\w-]*)$/.test(e)===!1?j():(/^(?:\s*<\?xml)/.test(e)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(e)||/^\s*</.test(e)&&/<\/\w+(\w|\d)+>\s*$/.test(e))&&(/^(?:[\s\w]*<)/.test(e)||/(?:>[\s\w]*)$/.test(e))||/^(?:\s*<s((cript)|(tyle)))/i.test(e)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(e)?/^(?:[\s\w]*<)/.test(e)===!1||/(?:>[\s\w]*)$/.test(e)===!1?j():s():{language:"unknown",lexer:"text"})}function bt(e,a,i){if(e==="global")switch(a){case"indentChar":return Nn(e,a,i);case"preset":case"language":return Be(e,a,i);case"crlf":case"correct":case"endNewline":return Ye(e,a,i);case"indentLevel":case"indentSize":case"preserveLine":case"wrap":case"wrapFraction":return yt(e,a,i);default:return!1}else if(e==="liquid")switch(a){case"commentNewline":case"commentIndent":case"indentAttribute":case"normalizeSpacing":case"preserveComment":case"preserveInternal":return Ye(e,a,i);case"forceArgument":case"forceFilter":return yt(e,a,i);case"ignoreTagList":case"dedentTagList":return Ht(e,a,i);case"lineBreakSeparator":case"delimiterPlacement":case"delimiterTrims":case"quoteConvert":return Be(e,a,i)}else if(e==="markup")switch(a){case"forceAttribute":if(ht(i))return yt(e,a,i);if(st(i))return Ye(e,a,i);throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["boolean","number"]});case"attributeSort":if(st(i))return Ye(e,a,i);if(Ae(i))return Ht(e,a,i);throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["boolean","number"]});case"commentNewline":case"commentIndent":case"forceIndent":case"forceAttributeValue":case"ignoreCSS":case"ignoreJS":case"ignoreJSON":case"preserveComment":case"preserveText":case"preserveAttribute":case"selfCloseSpace":case"selfCloseSVG":case"stripAttributeLines":return Ye(e,a,i);case"attributeCasing":case"delimiterTerminus":case"lineBreakValue":case"quoteConvert":return Be(e,a,i)}else if(e==="style")switch(a){case"correct":case"atRuleSpace":case"classPadding":case"noLeadZero":case"sortSelectors":case"sortProperties":return st(i);case"quoteConvert":return Be(e,a,i)}else if(e==="json")switch(a){case"arrayFormat":case"objectIndent":return Be(e,a,i);case"allowComments":case"braceAllman":case"bracePadding":case"objectSort":return Ye(e,a,i)}}function Ht(e,a,i){if(Ae(i)){if(i.length===0)return!0;for(let p=0;p<i.length;p++)if(Ct(i[p])===!1)throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a} (index: ${p})`,provided:i,expected:["string"]});return!0}throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:e==="global"?a:`${e} \u2192 ${a}`,provided:i,expected:["string[]"]})}function Nn(e,a,i){if(typeof i=="string")return!0;throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:e==="global"?a:`${e} \u2192 ${a}`,provided:i,expected:["string"]})}function yt(e,a,i){if(ht(i)&&isNaN(i)===!1)return!0;throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:e==="global"?a:`${e} \u2192 ${a}`,provided:i,expected:["number"]})}function Ye(e,a,i){if(ht(i))return i!==0;if(st(i))return!0;throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:e==="global"?a:`${e} \u2192 ${a}`,provided:i,expected:["boolean"]})}function Be(e,a,i){if(Ct(i)===!1)throw _e({message:`Invalid ${e} rule (${a}) type "${typeof i}" provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["string"]});if(a==="language"){switch(i){case"text":case"markup":case"html":case"liquid":case"xml":case"javascript":case"typescript":case"jsx":case"tsx":case"json":case"less":case"scss":case"sass":case"css":return!0}throw _e({message:`Unsupported "${a}" identifier provided`,option:e===`${a} (global)`?a:`${e} \u2192 ${a}`,provided:i,expected:["text","auto","markup","html","liquid","xml","javascript","typescript","jsx","tsx","json","less","scss","sass","css"]})}else if(a==="preset"){switch(i){case"default":case"strict":case"recommended":case"warrington":case"prettier":return!0}throw _e({message:`Unsupported "${a}" provided`,option:e===`${a} (global)`?a:`${e} \u2192 ${a}`,provided:i,expected:["default","strict","recommended","warrington","prettier"]})}else if(a==="attributeCasing")switch(i){case"preserve":case"lowercase":case"lowercase-name":case"lowercase-value":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","lowercase","lowercase-name","lowercase-value"]})}else if(a==="delimiterTrims")switch(i){case"preserve":case"never":case"always":case"tags":case"outputs":case"multiline":case"linebreak":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","never","always","tags","outputs","multiline","linebreak"]})}else if(a==="delimiterPlacement")switch(i){case"default":case"inline":case"preserve":case"consistent":case"force":case"force-multiline":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["default","inline","preserve","consistent","force","force-multiline"]})}else if(a==="lineBreakSeparator")switch(i){case"preserve":case"before":case"after":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","before","after"]})}else if(a==="delimiterTerminus")switch(i){case"force":case"inline":case"adapt":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["force","inline","adapt"]})}else if(a==="lineBreakValue")switch(i){case"preserve":case"align":case"indent":case"force-preserve":case"force-align":case"force-indent":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["preserve","align","indent","force-preserve","force-align","force-indent"]})}else if(a==="quoteConvert")switch(i){case"none":case"double":case"single":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["none","double","single"]})}else if(a==="objectIndent"||a==="arrayFormat")switch(i){case"default":case"indent":case"inline":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["default","indent","inline"]})}else if(a==="endComma")switch(i){case"none":case"always":case"never":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["none","always","never"]})}else if(a==="variableList")switch(i){case"none":case"each":case"list":return!0;default:throw _e({message:`Invalid "${a}" option provided`,option:`${e} \u2192 ${a}`,provided:i,expected:["none","each","list"]})}}var wt={preset:"recommended",language:"auto",preserveLine:2,wrap:120,wrapFraction:90,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,commentNewline:!0,delimiterTrims:"tags",lineBreakSeparator:"after",quoteConvert:"double",delimiterPlacement:"consistent"},markup:{attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:2,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0}},xt={preset:"strict",language:"auto",preserveLine:1,wrap:0,wrapFraction:80,liquid:{ignoreTagList:[],commentNewline:!0,delimiterTrims:"never",lineBreakSeparator:"before",quoteConvert:"double",forceArgument:3,forceFilter:4,delimiterPlacement:"consistent"},markup:{attributeSort:["id","class","type","name","value","href","src"],attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,ignoreJS:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent",objectSort:!0},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0,sortSelectors:!0}},vt={preset:"warrington",language:"auto",preserveLine:2,wrap:0,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}},jt={preset:"prettier",language:"auto",preserveLine:1,wrap:80,wrapFraction:60,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",dedentTagList:["schema"],quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"force",forceAttribute:1,forceIndent:!0,ignoreJS:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}},it=["correct","crlf","endNewline","indentChar","indentLevel","indentSize","preserveLine","wrap","wrapFraction"],rt=["liquid","markup","style","json","script"];function Pn(e){if(e.preset!==r.rules.preset&&Be("global","preset",e.preset)){if(r.rules=Ve({},rn),r.rules.preset=e.preset,e.preset==="default")return;let a;switch(e.preset){case"strict":a=et(xt);for(let i of it)a(i)&&(r.rules[i]=xt[i]);for(let i of rt)a(i)&&Ve(r.rules[i],xt[i]);break;case"recommended":a=et(wt);for(let i of it)a(i)&&(r.rules[i]=wt[i]);for(let i of rt)a(i)&&Ve(r.rules[i],wt[i]);break;case"warrington":a=et(vt);for(let i of it)a(i)&&(r.rules[i]=vt[i]);for(let i of rt)a(i)&&Ve(r.rules[i],vt[i]);break;case"prettier":a=et(jt);for(let i of it)a(i)&&(r.rules[i]=jt[i]);for(let i of rt)a(i)&&Ve(r.rules[i],jt[i]);break}}}function Fn(e,a){let i=et(e),p;a.rules.length>0&&(p={}),"preset"in e&&Pn(e),i("language")&&bt("global","language",e.language)&&r.language!==e.language&&(r.language=r.rules.language=e.language);for(let x of it)i(x)!==!1&&r.rules[x]!==e[x]&&bt("global",x,e[x])&&(p&&(p[x]={from:r.rules[x],to:e[x]}),x==="crlf"&&(r.crlf=e[x]?sn:ee),x==="wrap"&&e[x]>0&&(i("wrapFraction")===!1||i("wrapFraction")&&e.wrapFraction<=0)&&(r.rules.wrapFraction=e[x]-e[x]/4),r.rules[x]=e[x]);for(let x of rt)if(i(x)!==!1&&r.rules[x]!==e[x]){p&&(p[x]={});for(let l in e[x])bt(x,l,e[x][l])&&(p&&(p[x][l]={old:r.rules[x][l],now:e[x][l]}),r.rules[x][l]=e[x][l])}if(a.rules.length>0)for(let x of a.rules)x(p,r.rules);return r.rules}var zn=new class{constructor(){this.language="auto",this.lexer="auto",this.stats=null,this.events={format:[],error:[],rules:[],parse:[]},ze.env==="node"&&(ze.cwd=process.cwd()),ze.env==="browser"&&(window.esthetic=zn)}get table(){return r.data}get definitions(){return wn}get detect(){return Tn}grammar(e){return e?(je.extend(e),this):je.extend()}config(e){if(!e)return ze;for(let a in e)a in ze&&(ze[a]=e[a]);return this}on(e,a){return this.events[e].push(a),this}hook(e,a){r.hooks[e]=[a]}format(e,a){if(r.source=e,Ot(a)&&"language"in a&&this.language!==a.language&&Be("global","language",a.language)&&(this.language=r.language=r.rules.language=a.language,this.lexer=r.lexer=Le(r.language)),this.rules(a),this.lexer==="auto"){let j=this.detect(r.source);this.language=r.language=r.rules.language=j.language,this.lexer=r.lexer=Le(j.language)}let i=qt(this.language),p=ze.reportStats?Lt(this.language,this.lexer):null,x=r.document(i);if(r.error!==null)if(this.events.error.length>0){for(let j of this.events.error)j(r.error);return e}else{if(ze.throwErrors)throw r.error;return e}let l=p===null?this.stats:this.stats=p(x.length);if(this.events.format.length>0){for(let j of this.events.format)if(j.call({get data(){return r.data}},{get output(){return e},get stats(){return l},get rules(){return r.rules}})===!1)return e}return x}parse(e,a){if(r.source=e,Ot(a)&&("language"in a&&this.language!==a.language&&Be("global","language",a.language)&&(this.language=r.language=r.rules.language=a.language,this.lexer=r.lexer=Le(r.language)),this.rules(a)),this.lexer==="auto"){let j=this.detect(r.source);this.language=r.language=r.rules.language=j.language,this.lexer=r.lexer=Le(j.language)}let i=qt(this.language),p=Lt(this.language,this.lexer),x=r.document(i,1),l=this.stats=p(r.count);if(this.events.parse.length>0){for(let j of this.events.parse)if(j({get data(){return r.data},get stats(){return l},get rules(){return r.rules}})===!1)return e}if(r.error!==null){if(this.events.error.length>0)for(let j of this.events.error)j(r.error);return[]}return x}rules(e){if(Ue(e))return r.rules;let{language:a}=Fn(e,this.events);return this.language=a,this.lexer=r.lexer=Le(a),this}liquid(e,a){return this.language=r.language=r.rules.language="liquid",this.lexer=r.lexer=Le(r.language),this.format(e,a)}html(e,a){return this.language=r.language=r.rules.language="html",this.lexer=r.lexer=Le(r.language),this.format(e,a)}xml(e,a){return this.language=r.language=r.rules.language="xml",this.lexer=r.lexer=Le(r.language),this.format(e,a)}css(e,a){return this.language=r.language=r.rules.language="css",this.lexer=r.lexer=Le(r.language),this.format(e,a)}json(e,a){return this.language=r.language=r.rules.language="json",this.lexer=r.lexer=Le(r.language),this.format(e,a)}js(e,a){return this.language=r.language=r.rules.language="javascript",this.lexer=r.lexer=Le(r.language),this.format(e,a)}ts(e,a){return this.language=r.language=r.rules.language="typescript",this.lexer=r.lexer=Le(r.language),this.format(e,a)}};export{zn as default};
