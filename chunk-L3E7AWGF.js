import{a as q,i as X}from"./chunk-IGMHS2AO.js";function rt(t,n){var e,a=1;t==null&&(t=0),n==null&&(n=0);function o(){var i,l=e.length,r,c=0,x=0;for(i=0;i<l;++i)r=e[i],c+=r.x,x+=r.y;for(c=(c/l-t)*a,x=(x/l-n)*a,i=0;i<l;++i)r=e[i],r.x-=c,r.y-=x}return o.initialize=function(i){e=i},o.x=function(i){return arguments.length?(t=+i,o):t},o.y=function(i){return arguments.length?(n=+i,o):n},o.strength=function(i){return arguments.length?(a=+i,o):a},o}function Y(t){let n=+this._x.call(null,t),e=+this._y.call(null,t);return B(this.cover(n,e),n,e,t)}function B(t,n,e,a){if(isNaN(n)||isNaN(e))return t;var o,i=t._root,l={data:a},r=t._x0,c=t._y0,x=t._x1,y=t._y1,d,v,h,m,u,f,s,p;if(!i)return t._root=l,t;for(;i.length;)if((u=n>=(d=(r+x)/2))?r=d:x=d,(f=e>=(v=(c+y)/2))?c=v:y=v,o=i,!(i=i[s=f<<1|u]))return o[s]=l,t;if(h=+t._x.call(null,i.data),m=+t._y.call(null,i.data),n===h&&e===m)return l.next=i,o?o[s]=l:t._root=l,t;do o=o?o[s]=new Array(4):t._root=new Array(4),(u=n>=(d=(r+x)/2))?r=d:x=d,(f=e>=(v=(c+y)/2))?c=v:y=v;while((s=f<<1|u)===(p=(m>=v)<<1|h>=d));return o[p]=i,o[s]=l,t}function C(t){var n,e,a=t.length,o,i,l=new Array(a),r=new Array(a),c=1/0,x=1/0,y=-1/0,d=-1/0;for(e=0;e<a;++e)isNaN(o=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(l[e]=o,r[e]=i,o<c&&(c=o),o>y&&(y=o),i<x&&(x=i),i>d&&(d=i));if(c>y||x>d)return this;for(this.cover(c,x).cover(y,d),e=0;e<a;++e)B(this,l[e],r[e],t[e]);return this}function P(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,a=this._y0,o=this._x1,i=this._y1;if(isNaN(e))o=(e=Math.floor(t))+1,i=(a=Math.floor(n))+1;else{for(var l=o-e||1,r=this._root,c,x;e>t||t>=o||a>n||n>=i;)switch(x=(n<a)<<1|t<e,c=new Array(4),c[x]=r,r=c,l*=2,x){case 0:o=e+l,i=a+l;break;case 1:e=o-l,i=a+l;break;case 2:o=e+l,a=i-l;break;case 3:e=o-l,a=i-l;break}this._root&&this._root.length&&(this._root=r)}return this._x0=e,this._y0=a,this._x1=o,this._y1=i,this}function R(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function T(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function N(t,n,e,a,o){this.node=t,this.x0=n,this.y0=e,this.x1=a,this.y1=o}function F(t,n,e){var a,o=this._x0,i=this._y0,l,r,c,x,y=this._x1,d=this._y1,v=[],h=this._root,m,u;for(h&&v.push(new N(h,o,i,y,d)),e==null?e=1/0:(o=t-e,i=n-e,y=t+e,d=n+e,e*=e);m=v.pop();)if(!(!(h=m.node)||(l=m.x0)>y||(r=m.y0)>d||(c=m.x1)<o||(x=m.y1)<i))if(h.length){var f=(l+c)/2,s=(r+x)/2;v.push(new N(h[3],f,s,c,x),new N(h[2],l,s,f,x),new N(h[1],f,r,c,s),new N(h[0],l,r,f,s)),(u=(n>=s)<<1|t>=f)&&(m=v[v.length-1],v[v.length-1]=v[v.length-1-u],v[v.length-1-u]=m)}else{var p=t-+this._x.call(null,h.data),_=n-+this._y.call(null,h.data),g=p*p+_*_;if(g<e){var w=Math.sqrt(e=g);o=t-w,i=n-w,y=t+w,d=n+w,a=h.data}}return a}function L(t){if(isNaN(y=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var n,e=this._root,a,o,i,l=this._x0,r=this._y0,c=this._x1,x=this._y1,y,d,v,h,m,u,f,s;if(!e)return this;if(e.length)for(;;){if((m=y>=(v=(l+c)/2))?l=v:c=v,(u=d>=(h=(r+x)/2))?r=h:x=h,n=e,!(e=e[f=u<<1|m]))return this;if(!e.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(a=n,s=f)}for(;e.data!==t;)if(o=e,!(e=e.next))return this;return(i=e.next)&&delete e.next,o?(i?o.next=i:delete o.next,this):n?(i?n[f]=i:delete n[f],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(a?a[s]=e:this._root=e),this):(this._root=i,this)}function G(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function H(){return this._root}function J(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function K(t){var n=[],e,a=this._root,o,i,l,r,c;for(a&&n.push(new N(a,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(a=e.node,i=e.x0,l=e.y0,r=e.x1,c=e.y1)&&a.length){var x=(i+r)/2,y=(l+c)/2;(o=a[3])&&n.push(new N(o,x,y,r,c)),(o=a[2])&&n.push(new N(o,i,y,x,c)),(o=a[1])&&n.push(new N(o,x,l,r,y)),(o=a[0])&&n.push(new N(o,i,l,x,y))}return this}function O(t){var n=[],e=[],a;for(this._root&&n.push(new N(this._root,this._x0,this._y0,this._x1,this._y1));a=n.pop();){var o=a.node;if(o.length){var i,l=a.x0,r=a.y0,c=a.x1,x=a.y1,y=(l+c)/2,d=(r+x)/2;(i=o[0])&&n.push(new N(i,l,r,y,d)),(i=o[1])&&n.push(new N(i,y,r,c,d)),(i=o[2])&&n.push(new N(i,l,d,y,x)),(i=o[3])&&n.push(new N(i,y,d,c,x))}e.push(a)}for(;a=e.pop();)t(a.node,a.x0,a.y0,a.x1,a.y1);return this}function U(t){return t[0]}function V(t){return arguments.length?(this._x=t,this):this._x}function W(t){return t[1]}function Z(t){return arguments.length?(this._y=t,this):this._y}function Q(t,n,e){var a=new S(n??U,e??W,NaN,NaN,NaN,NaN);return t==null?a:a.addAll(t)}function S(t,n,e,a,o,i){this._x=t,this._y=n,this._x0=e,this._y0=a,this._x1=o,this._y1=i,this._root=void 0}function $(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var M=Q.prototype=S.prototype;M.copy=function(){var t=new S(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,a;if(!n)return t;if(!n.length)return t._root=$(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(a=n.source[o])&&(a.length?e.push({source:a,target:n.target[o]=new Array(4)}):n.target[o]=$(a));return t};M.add=Y;M.addAll=C;M.cover=P;M.data=R;M.extent=T;M.find=F;M.remove=L;M.removeAll=G;M.root=H;M.size=J;M.visit=K;M.visitAfter=O;M.x=V;M.y=Z;function A(t){return function(){return t}}function j(t){return(t()-.5)*1e-6}function it(t){return t.index}function k(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function ot(t){var n=it,e=d,a,o=A(30),i,l,r,c,x,y=1;t==null&&(t=[]);function d(f){return 1/Math.min(r[f.source.index],r[f.target.index])}function v(f){for(var s=0,p=t.length;s<y;++s)for(var _=0,g,w,z,I,b,D,E;_<p;++_)g=t[_],w=g.source,z=g.target,I=z.x+z.vx-w.x-w.vx||j(x),b=z.y+z.vy-w.y-w.vy||j(x),D=Math.sqrt(I*I+b*b),D=(D-i[_])/D*f*a[_],I*=D,b*=D,z.vx-=I*(E=c[_]),z.vy-=b*E,w.vx+=I*(E=1-E),w.vy+=b*E}function h(){if(l){var f,s=l.length,p=t.length,_=new Map(l.map((w,z)=>[n(w,z,l),w])),g;for(f=0,r=new Array(s);f<p;++f)g=t[f],g.index=f,typeof g.source!="object"&&(g.source=k(_,g.source)),typeof g.target!="object"&&(g.target=k(_,g.target)),r[g.source.index]=(r[g.source.index]||0)+1,r[g.target.index]=(r[g.target.index]||0)+1;for(f=0,c=new Array(p);f<p;++f)g=t[f],c[f]=r[g.source.index]/(r[g.source.index]+r[g.target.index]);a=new Array(p),m(),i=new Array(p),u()}}function m(){if(l)for(var f=0,s=t.length;f<s;++f)a[f]=+e(t[f],f,t)}function u(){if(l)for(var f=0,s=t.length;f<s;++f)i[f]=+o(t[f],f,t)}return v.initialize=function(f,s){l=f,x=s,h()},v.links=function(f){return arguments.length?(t=f,h(),v):t},v.id=function(f){return arguments.length?(n=f,v):n},v.iterations=function(f){return arguments.length?(y=+f,v):y},v.strength=function(f){return arguments.length?(e=typeof f=="function"?f:A(+f),m(),v):e},v.distance=function(f){return arguments.length?(o=typeof f=="function"?f:A(+f),u(),v):o},v}function tt(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function nt(t){return t.x}function et(t){return t.y}var ft=10,at=Math.PI*(3-Math.sqrt(5));function ut(t){var n,e=1,a=.001,o=1-Math.pow(a,1/300),i=0,l=.6,r=new Map,c=X(d),x=q("tick","end"),y=tt();t==null&&(t=[]);function d(){v(),x.call("tick",n),e<a&&(c.stop(),x.call("end",n))}function v(u){var f,s=t.length,p;u===void 0&&(u=1);for(var _=0;_<u;++_)for(e+=(i-e)*o,r.forEach(function(g){g(e)}),f=0;f<s;++f)p=t[f],p.fx==null?p.x+=p.vx*=l:(p.x=p.fx,p.vx=0),p.fy==null?p.y+=p.vy*=l:(p.y=p.fy,p.vy=0);return n}function h(){for(var u=0,f=t.length,s;u<f;++u){if(s=t[u],s.index=u,s.fx!=null&&(s.x=s.fx),s.fy!=null&&(s.y=s.fy),isNaN(s.x)||isNaN(s.y)){var p=ft*Math.sqrt(.5+u),_=u*at;s.x=p*Math.cos(_),s.y=p*Math.sin(_)}(isNaN(s.vx)||isNaN(s.vy))&&(s.vx=s.vy=0)}}function m(u){return u.initialize&&u.initialize(t,y),u}return h(),n={tick:v,restart:function(){return c.restart(d),n},stop:function(){return c.stop(),n},nodes:function(u){return arguments.length?(t=u,h(),r.forEach(m),n):t},alpha:function(u){return arguments.length?(e=+u,n):e},alphaMin:function(u){return arguments.length?(a=+u,n):a},alphaDecay:function(u){return arguments.length?(o=+u,n):+o},alphaTarget:function(u){return arguments.length?(i=+u,n):i},velocityDecay:function(u){return arguments.length?(l=1-u,n):1-l},randomSource:function(u){return arguments.length?(y=u,r.forEach(m),n):y},force:function(u,f){return arguments.length>1?(f==null?r.delete(u):r.set(u,m(f)),n):r.get(u)},find:function(u,f,s){var p=0,_=t.length,g,w,z,I,b;for(s==null?s=1/0:s*=s,p=0;p<_;++p)I=t[p],g=u-I.x,w=f-I.y,z=g*g+w*w,z<s&&(b=I,s=z);return b},on:function(u,f){return arguments.length>1?(x.on(u,f),n):x.on(u)}}}function lt(){var t,n,e,a,o=A(-30),i,l=1,r=1/0,c=.81;function x(h){var m,u=t.length,f=Q(t,nt,et).visitAfter(d);for(a=h,m=0;m<u;++m)n=t[m],f.visit(v)}function y(){if(t){var h,m=t.length,u;for(i=new Array(m),h=0;h<m;++h)u=t[h],i[u.index]=+o(u,h,t)}}function d(h){var m=0,u,f,s=0,p,_,g;if(h.length){for(p=_=g=0;g<4;++g)(u=h[g])&&(f=Math.abs(u.value))&&(m+=u.value,s+=f,p+=f*u.x,_+=f*u.y);h.x=p/s,h.y=_/s}else{u=h,u.x=u.data.x,u.y=u.data.y;do m+=i[u.data.index];while(u=u.next)}h.value=m}function v(h,m,u,f){if(!h.value)return!0;var s=h.x-n.x,p=h.y-n.y,_=f-m,g=s*s+p*p;if(_*_/c<g)return g<r&&(s===0&&(s=j(e),g+=s*s),p===0&&(p=j(e),g+=p*p),g<l&&(g=Math.sqrt(l*g)),n.vx+=s*h.value*a/g,n.vy+=p*h.value*a/g),!0;if(h.length||g>=r)return;(h.data!==n||h.next)&&(s===0&&(s=j(e),g+=s*s),p===0&&(p=j(e),g+=p*p),g<l&&(g=Math.sqrt(l*g)));do h.data!==n&&(_=i[h.data.index]*a/g,n.vx+=s*_,n.vy+=p*_);while(h=h.next)}return x.initialize=function(h,m){t=h,e=m,y()},x.strength=function(h){return arguments.length?(o=typeof h=="function"?h:A(+h),y(),x):o},x.distanceMin=function(h){return arguments.length?(l=h*h,x):Math.sqrt(l)},x.distanceMax=function(h){return arguments.length?(r=h*h,x):Math.sqrt(r)},x.theta=function(h){return arguments.length?(c=h*h,x):Math.sqrt(c)},x}function st(t){var n=A(.1),e,a,o;typeof t!="function"&&(t=A(t==null?0:+t));function i(r){for(var c=0,x=e.length,y;c<x;++c)y=e[c],y.vx+=(o[c]-y.x)*a[c]*r}function l(){if(e){var r,c=e.length;for(a=new Array(c),o=new Array(c),r=0;r<c;++r)a[r]=isNaN(o[r]=+t(e[r],r,e))?0:+n(e[r],r,e)}}return i.initialize=function(r){e=r,l()},i.strength=function(r){return arguments.length?(n=typeof r=="function"?r:A(+r),l(),i):n},i.x=function(r){return arguments.length?(t=typeof r=="function"?r:A(+r),l(),i):t},i}function ht(t){var n=A(.1),e,a,o;typeof t!="function"&&(t=A(t==null?0:+t));function i(r){for(var c=0,x=e.length,y;c<x;++c)y=e[c],y.vy+=(o[c]-y.y)*a[c]*r}function l(){if(e){var r,c=e.length;for(a=new Array(c),o=new Array(c),r=0;r<c;++r)a[r]=isNaN(o[r]=+t(e[r],r,e))?0:+n(e[r],r,e)}}return i.initialize=function(r){e=r,l()},i.strength=function(r){return arguments.length?(n=typeof r=="function"?r:A(+r),l(),i):n},i.y=function(r){return arguments.length?(t=typeof r=="function"?r:A(+r),l(),i):t},i}export{rt as a,ot as b,ut as c,lt as d,st as e,ht as f};
