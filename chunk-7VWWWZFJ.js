import{r as O,s as W}from"./chunk-ATAPBDX7.js";import{a as R,f as F}from"./chunk-NA7FJBPQ.js";import{$b as w,Ac as _,Db as s,Eb as v,Ic as N,Oa as f,Ob as y,Qb as b,Ra as a,Sa as u,ac as z,ad as l,cd as E,ea as d,ic as S,jc as x,kc as C,qc as T,ra as i,rc as D,va as r,wa as c,ya as m,yb as g}from"./chunk-Z42XPK5A.js";var n=class{constructor(h){this.node=h,this.position=s("top"),this.template=s(null),this.offset=s(10),this.point=l(()=>{switch(this.position()){case"top":return{x:this.node.size().width/2-this.size().width/2,y:-this.size().height-this.offset()};case"bottom":return{x:this.node.size().width/2-this.size().width/2,y:this.node.size().height+this.offset()};case"left":return{x:-this.size().width-this.offset(),y:this.node.size().height/2-this.size().height/2};case"right":return{x:this.node.size().width+this.offset(),y:this.node.size().height/2-this.size().height/2}}}),this.transform=l(()=>`translate(${this.point().x}, ${this.point().y})`),this.size=s({width:0,height:0})}};var I=["toolbar"],j=["*"];function q(e,h){if(e&1&&(w(0,"div",1),C(1),z()),e&2){let o=S();b("model",o.model)}}var V=(()=>{class e{constructor(){this.overlaysService=i(O),this.nodeService=i(F),this.position=a("top"),this.toolbarContentTemplate=v.required("toolbar"),this.model=new n(this.nodeService.model()),E(()=>this.model.position.set(this.position()),{allowSignalWrites:!0})}ngOnInit(){this.model.template.set(this.toolbarContentTemplate()),this.overlaysService.addToolbar(this.model)}ngOnDestroy(){this.overlaysService.removeToolbar(this.model)}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=c({type:e,selectors:[["node-toolbar"]],viewQuery:function(t,p){t&1&&T(p.toolbarContentTemplate,I,5),t&2&&D()},inputs:{position:[r.SignalBased,"position"]},standalone:!0,features:[_],ngContentSelectors:j,decls:2,vars:0,consts:[["toolbar",""],["nodeToolbarWrapper","",1,"wrapper",3,"model"]],template:function(t,p){t&1&&(x(),y(0,q,2,1,"ng-template",null,0,N))},dependencies:()=>[M],styles:[".wrapper[_ngcontent-%COMP%]{width:max-content}"],changeDetection:0})}}return e})(),M=(()=>{class e{constructor(){this.element=i(u),this.zone=i(g),this.destroyRef=i(f),this.model=a.required()}ngOnInit(){W([this.element.nativeElement],this.zone).pipe(d(()=>this.setSize()),R(this.destroyRef)).subscribe()}setSize(){this.model().size.set({width:this.element.nativeElement.clientWidth,height:this.element.nativeElement.clientHeight})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275dir=m({type:e,selectors:[["","nodeToolbarWrapper",""]],inputs:{model:[r.SignalBased,"model"]},standalone:!0})}}return e})();export{V as a};
