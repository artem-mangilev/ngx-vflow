import{q as R,r as O}from"./chunk-LJGB2BKL.js";import{b as E}from"./chunk-NQNYWDMR.js";import{Bb as u,Ca as c,Db as v,Fa as m,Hb as g,Ja as r,Ka as d,Lc as D,Ma as s,Tb as y,Yc as h,Zc as _,ad as N,ca as p,cc as b,dc as w,mc as z,nc as x,oa as i,oc as C,uc as S,vb as f,vc as T}from"./chunk-7JBMCLDE.js";var n=class{constructor(l){this.node=l,this.position=s("top"),this.template=s(null),this.offset=s(10),this.point=h(()=>{switch(this.position()){case"top":return{x:this.node.size().width/2-this.size().width/2,y:-this.size().height-this.offset()};case"bottom":return{x:this.node.size().width/2-this.size().width/2,y:this.node.size().height+this.offset()};case"left":return{x:-this.size().width-this.offset(),y:this.node.size().height/2-this.size().height/2};case"right":return{x:this.node.size().width+this.offset(),y:this.node.size().height/2-this.size().height/2}}}),this.transform=h(()=>`translate(${this.point().x}, ${this.point().y})`),this.size=s({width:0,height:0})}};var W=["toolbar"],j=["*"];function q(e,l){if(e&1&&(b(0,"div",1),C(1),w()),e&2){let o=z();y("model",o.model)}}var K=(()=>{class e{constructor(){this.overlaysService=i(R),this.nodeService=i(E),this.position=r("top"),this.toolbarContentTemplate=f.required("toolbar"),this.model=new n(this.nodeService.model()),_(()=>this.model.position.set(this.position()),{allowSignalWrites:!0})}ngOnInit(){this.model.template.set(this.toolbarContentTemplate()),this.overlaysService.addToolbar(this.model)}ngOnDestroy(){this.overlaysService.removeToolbar(this.model)}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=u({type:e,selectors:[["node-toolbar"]],viewQuery:function(t,a){t&1&&S(a.toolbarContentTemplate,W,5),t&2&&T()},inputs:{position:[1,"position"]},ngContentSelectors:j,decls:2,vars:0,consts:[["toolbar",""],["nodeToolbarWrapper","",1,"wrapper",3,"model"]],template:function(t,a){t&1&&(x(),g(0,q,2,1,"ng-template",null,0,D))},dependencies:()=>[M],styles:[".wrapper[_ngcontent-%COMP%]{width:max-content}"],changeDetection:0})}}return e})(),M=(()=>{class e{constructor(){this.element=i(d),this.zone=i(m),this.destroyRef=i(c),this.model=r.required()}ngOnInit(){O([this.element.nativeElement],this.zone).pipe(p(()=>this.setSize()),N(this.destroyRef)).subscribe()}setSize(){this.model().size.set({width:this.element.nativeElement.clientWidth,height:this.element.nativeElement.clientHeight})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275dir=v({type:e,selectors:[["","nodeToolbarWrapper",""]],inputs:{model:[1,"model"]}})}}return e})();export{K as a};
