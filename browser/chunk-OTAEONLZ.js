import{a as mi,b as gi}from"./chunk-YV53NWFE.js";import{b as uo,c as Ft,d as se,f as fe,g as ct,h as Nt,i as hi,j as Vt,k as po,l as Et,m as Sn}from"./chunk-IQL2UJ6C.js";import{a as Oe,b as I,c as W,d as ut,e as At}from"./chunk-IO7LDB7E.js";import{b as lo,g as Ve,i as co}from"./chunk-MU5S45C6.js";import{$b as G,Ac as ye,C as li,Cc as fi,Da as ci,Db as $,Dc as oo,E as ue,Eb as at,Ec as ro,Fb as St,Fc as ao,G as me,Ga as de,Gb as yn,Gc as so,H as Yi,Ha as pe,Hb as no,Ia as k,Ib as io,Ja as rt,Ka as gn,Ma as Ct,Oa as Zi,Ob as A,Pa as Ki,Pb as di,Qa as Ji,Qb as pi,R as $t,Ra as B,Rb as F,Sa as Ue,Sb as R,Ta as eo,Tb as Ye,Ub as vn,W as _t,Wb as bt,Xb as M,Yb as _n,Zb as $e,_b as Fe,aa as Be,ac as Y,ba as Qi,bc as q,bd as C,c as hn,ca as _e,cd as wn,dd as ke,ea as Ce,ec as xe,f as yt,fc as Me,hc as we,i as mn,ic as y,j as Ui,ka as re,kb as to,l as je,nb as ui,o as si,p as vt,pb as S,pc as Tt,qc as st,ra as g,rc as lt,sb as wt,v as V,va as P,wa as ge,ya as U,yb as xn,zc as Cn}from"./chunk-WSOERDLG.js";import{a as Ht,b as ji}from"./chunk-P2VZOJAX.js";var xi=(()=>{class e{constructor(){this.templateRef=g(wt)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["ng-template","edge",""]],standalone:!0})}}return e})(),yi=(()=>{class e{constructor(){this.templateRef=g(wt)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["ng-template","connection",""]],standalone:!0})}}return e})(),vi=(()=>{class e{constructor(){this.templateRef=g(wt)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["ng-template","edgeLabelHtml",""]],standalone:!0})}}return e})(),_i=(()=>{class e{constructor(){this.templateRef=g(wt)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["ng-template","nodeHtml",""]],standalone:!0})}}return e})(),Ci=(()=>{class e{constructor(){this.templateRef=g(wt)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["ng-template","groupNode",""]],standalone:!0})}}return e})();var Rt=(()=>{class e{constructor(){this._event$=new yt,this.event$=this._event$.asObservable()}pushEvent(t){this._event$.next(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();var bn=(()=>{class e{constructor(){this.eventBus=g(Rt),this.nodeService=g(Vt),this.destroyRef=g(Zi),this.selected=this.nodeService.model().selected,this.data=$(void 0)}ngOnInit(){this.trackEvents().pipe(Oe(this.destroyRef)).subscribe()}trackEvents(){let t=Object.getOwnPropertyNames(this),n=new Map;for(let o of t){let r=this[o];r instanceof eo&&n.set(r,o),r instanceof Ki&&n.set(Sa(r),o)}return ue(...Array.from(n.keys()).map(o=>o.pipe(Ce(r=>{this.eventBus.pushEvent({nodeId:this.nodeService.model()?.node.id??"",eventName:n.get(o),eventPayload:r})}))))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e})}}return e})();function Sa(e){return new hn(i=>{let t=e.subscribe(n=>{i.next(n)});return()=>{t.unsubscribe()}})}var Tn=(()=>{class e extends bn{constructor(){super(...arguments),this.node=B.required()}ngOnInit(){this.node().data&&this.data.set(this.node().data),super.ngOnInit()}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=gn(e)))(o||e)}})()}static{this.\u0275dir=U({type:e,inputs:{node:[P.SignalBased,"node"]},features:[yn]})}}return e})();var fo=(()=>{class e extends bn{constructor(){super(...arguments),this.node=B.required()}ngOnInit(){let t=this.node().data;t&&(this.data=t),super.ngOnInit()}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=gn(e)))(o||e)}})()}static{this.\u0275dir=U({type:e,inputs:{node:[P.SignalBased,"node"]},features:[yn]})}}return e})();function Ge(e){return typeof e.point=="function"}function Nu(e){return Tn.isPrototypeOf(e.type)}function Eu(e){return e.type==="default"}var Nn="http://www.w3.org/1999/xhtml",wi={svg:"http://www.w3.org/2000/svg",xhtml:Nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function We(e){var i=e+="",t=i.indexOf(":");return t>=0&&(i=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),wi.hasOwnProperty(i)?{space:wi[i],local:e}:e}function ba(e){return function(){var i=this.ownerDocument,t=this.namespaceURI;return t===Nn&&i.documentElement.namespaceURI===Nn?i.createElement(e):i.createElementNS(t,e)}}function Ta(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function En(e){var i=We(e);return(i.local?Ta:ba)(i)}function Na(){}function dt(e){return e==null?Na:function(){return this.querySelector(e)}}function ho(e){typeof e!="function"&&(e=dt(e));for(var i=this._groups,t=i.length,n=new Array(t),o=0;o<t;++o)for(var r=i[o],a=r.length,s=n[o]=new Array(a),l,c,u=0;u<a;++u)(l=r[u])&&(c=e.call(l,l.__data__,u,r))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new Q(n,this._parents)}function Si(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ea(){return[]}function Pt(e){return e==null?Ea:function(){return this.querySelectorAll(e)}}function Ma(e){return function(){return Si(e.apply(this,arguments))}}function mo(e){typeof e=="function"?e=Ma(e):e=Pt(e);for(var i=this._groups,t=i.length,n=[],o=[],r=0;r<t;++r)for(var a=i[r],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(n.push(e.call(l,l.__data__,c,a)),o.push(l));return new Q(n,o)}function Lt(e){return function(){return this.matches(e)}}function Mn(e){return function(i){return i.matches(e)}}var ka=Array.prototype.find;function Oa(e){return function(){return ka.call(this.children,e)}}function Da(){return this.firstElementChild}function go(e){return this.select(e==null?Da:Oa(typeof e=="function"?e:Mn(e)))}var za=Array.prototype.filter;function Ia(){return Array.from(this.children)}function Ha(e){return function(){return za.call(this.children,e)}}function xo(e){return this.selectAll(e==null?Ia:Ha(typeof e=="function"?e:Mn(e)))}function yo(e){typeof e!="function"&&(e=Lt(e));for(var i=this._groups,t=i.length,n=new Array(t),o=0;o<t;++o)for(var r=i[o],a=r.length,s=n[o]=[],l,c=0;c<a;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&s.push(l);return new Q(n,this._parents)}function kn(e){return new Array(e.length)}function vo(){return new Q(this._enter||this._groups.map(kn),this._parents)}function Bt(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}Bt.prototype={constructor:Bt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _o(e){return function(){return e}}function $a(e,i,t,n,o,r){for(var a=0,s,l=i.length,c=r.length;a<c;++a)(s=i[a])?(s.__data__=r[a],n[a]=s):t[a]=new Bt(e,r[a]);for(;a<l;++a)(s=i[a])&&(o[a]=s)}function Fa(e,i,t,n,o,r,a){var s,l,c=new Map,u=i.length,h=r.length,p=new Array(u),x;for(s=0;s<u;++s)(l=i[s])&&(p[s]=x=a.call(l,l.__data__,s,i)+"",c.has(x)?o[s]=l:c.set(x,l));for(s=0;s<h;++s)x=a.call(e,r[s],s,r)+"",(l=c.get(x))?(n[s]=l,l.__data__=r[s],c.delete(x)):t[s]=new Bt(e,r[s]);for(s=0;s<u;++s)(l=i[s])&&c.get(p[s])===l&&(o[s]=l)}function Va(e){return e.__data__}function Co(e,i){if(!arguments.length)return Array.from(this,Va);var t=i?Fa:$a,n=this._parents,o=this._groups;typeof e!="function"&&(e=_o(e));for(var r=o.length,a=new Array(r),s=new Array(r),l=new Array(r),c=0;c<r;++c){var u=n[c],h=o[c],p=h.length,x=Aa(e.call(u,u&&u.__data__,c,n)),O=x.length,z=s[c]=new Array(O),j=a[c]=new Array(O),w=l[c]=new Array(p);t(u,h,z,j,w,x,i);for(var ie=0,oe=0,m,T;ie<O;++ie)if(m=z[ie]){for(ie>=oe&&(oe=ie+1);!(T=j[oe])&&++oe<O;);m._next=T||null}}return a=new Q(a,n),a._enter=s,a._exit=l,a}function Aa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wo(){return new Q(this._exit||this._groups.map(kn),this._parents)}function So(e,i,t){var n=this.enter(),o=this,r=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),i!=null&&(o=i(o),o&&(o=o.selection())),t==null?r.remove():t(r),n&&o?n.merge(o).order():o}function bo(e){for(var i=e.selection?e.selection():e,t=this._groups,n=i._groups,o=t.length,r=n.length,a=Math.min(o,r),s=new Array(o),l=0;l<a;++l)for(var c=t[l],u=n[l],h=c.length,p=s[l]=new Array(h),x,O=0;O<h;++O)(x=c[O]||u[O])&&(p[O]=x);for(;l<o;++l)s[l]=t[l];return new Q(s,this._parents)}function To(){for(var e=this._groups,i=-1,t=e.length;++i<t;)for(var n=e[i],o=n.length-1,r=n[o],a;--o>=0;)(a=n[o])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function No(e){e||(e=Ra);function i(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r){for(var a=t[r],s=a.length,l=o[r]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(i)}return new Q(o,this._parents).order()}function Ra(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function Eo(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mo(){return Array.from(this)}function ko(){for(var e=this._groups,i=0,t=e.length;i<t;++i)for(var n=e[i],o=0,r=n.length;o<r;++o){var a=n[o];if(a)return a}return null}function Oo(){let e=0;for(let i of this)++e;return e}function Do(){return!this.node()}function zo(e){for(var i=this._groups,t=0,n=i.length;t<n;++t)for(var o=i[t],r=0,a=o.length,s;r<a;++r)(s=o[r])&&e.call(s,s.__data__,r,o);return this}function Pa(e){return function(){this.removeAttribute(e)}}function La(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ba(e,i){return function(){this.setAttribute(e,i)}}function Ga(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function Wa(e,i){return function(){var t=i.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function qa(e,i){return function(){var t=i.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function Io(e,i){var t=We(e);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((i==null?t.local?La:Pa:typeof i=="function"?t.local?qa:Wa:t.local?Ga:Ba)(t,i))}function On(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xa(e){return function(){this.style.removeProperty(e)}}function ja(e,i,t){return function(){this.style.setProperty(e,i,t)}}function Ua(e,i,t){return function(){var n=i.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,t)}}function Ho(e,i,t){return arguments.length>1?this.each((i==null?Xa:typeof i=="function"?Ua:ja)(e,i,t??"")):Qe(this.node(),e)}function Qe(e,i){return e.style.getPropertyValue(i)||On(e).getComputedStyle(e,null).getPropertyValue(i)}function Ya(e){return function(){delete this[e]}}function Qa(e,i){return function(){this[e]=i}}function Za(e,i){return function(){var t=i.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function $o(e,i){return arguments.length>1?this.each((i==null?Ya:typeof i=="function"?Za:Qa)(e,i)):this.node()[e]}function Fo(e){return e.trim().split(/^|\s+/)}function bi(e){return e.classList||new Vo(e)}function Vo(e){this._node=e,this._names=Fo(e.getAttribute("class")||"")}Vo.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ao(e,i){for(var t=bi(e),n=-1,o=i.length;++n<o;)t.add(i[n])}function Ro(e,i){for(var t=bi(e),n=-1,o=i.length;++n<o;)t.remove(i[n])}function Ka(e){return function(){Ao(this,e)}}function Ja(e){return function(){Ro(this,e)}}function es(e,i){return function(){(i.apply(this,arguments)?Ao:Ro)(this,e)}}function Po(e,i){var t=Fo(e+"");if(arguments.length<2){for(var n=bi(this.node()),o=-1,r=t.length;++o<r;)if(!n.contains(t[o]))return!1;return!0}return this.each((typeof i=="function"?es:i?Ka:Ja)(t,i))}function ts(){this.textContent=""}function ns(e){return function(){this.textContent=e}}function is(e){return function(){var i=e.apply(this,arguments);this.textContent=i??""}}function Lo(e){return arguments.length?this.each(e==null?ts:(typeof e=="function"?is:ns)(e)):this.node().textContent}function os(){this.innerHTML=""}function rs(e){return function(){this.innerHTML=e}}function as(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i??""}}function Bo(e){return arguments.length?this.each(e==null?os:(typeof e=="function"?as:rs)(e)):this.node().innerHTML}function ss(){this.nextSibling&&this.parentNode.appendChild(this)}function Go(){return this.each(ss)}function ls(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wo(){return this.each(ls)}function qo(e){var i=typeof e=="function"?e:En(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function cs(){return null}function Xo(e,i){var t=typeof e=="function"?e:En(e),n=i==null?cs:typeof i=="function"?i:dt(i);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function us(){var e=this.parentNode;e&&e.removeChild(this)}function jo(){return this.each(us)}function ds(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function ps(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function Uo(e){return this.select(e?ps:ds)}function Yo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fs(e){return function(i){e.call(this,i,this.__data__)}}function hs(e){return e.trim().split(/^|\s+/).map(function(i){var t="",n=i.indexOf(".");return n>=0&&(t=i.slice(n+1),i=i.slice(0,n)),{type:i,name:t}})}function ms(e){return function(){var i=this.__on;if(i){for(var t=0,n=-1,o=i.length,r;t<o;++t)r=i[t],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):i[++n]=r;++n?i.length=n:delete this.__on}}}function gs(e,i,t){return function(){var n=this.__on,o,r=fs(i);if(n){for(var a=0,s=n.length;a<s;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=t),o.value=i;return}}this.addEventListener(e.type,r,t),o={type:e.type,name:e.name,value:i,listener:r,options:t},n?n.push(o):this.__on=[o]}}function Qo(e,i,t){var n=hs(e+""),o,r=n.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(o=0,u=s[l];o<r;++o)if((a=n[o]).type===u.type&&a.name===u.name)return u.value}return}for(s=i?gs:ms,o=0;o<r;++o)this.each(s(n[o],i,t));return this}function Zo(e,i,t){var n=On(e),o=n.CustomEvent;typeof o=="function"?o=new o(i,t):(o=n.document.createEvent("Event"),t?(o.initEvent(i,t.bubbles,t.cancelable),o.detail=t.detail):o.initEvent(i,!1,!1)),e.dispatchEvent(o)}function xs(e,i){return function(){return Zo(this,e,i)}}function ys(e,i){return function(){return Zo(this,e,i.apply(this,arguments))}}function Ko(e,i){return this.each((typeof i=="function"?ys:xs)(e,i))}function*Jo(){for(var e=this._groups,i=0,t=e.length;i<t;++i)for(var n=e[i],o=0,r=n.length,a;o<r;++o)(a=n[o])&&(yield a)}var Ti=[null];function Q(e,i){this._groups=e,this._parents=i}function er(){return new Q([[document.documentElement]],Ti)}function vs(){return this}Q.prototype=er.prototype={constructor:Q,select:ho,selectAll:mo,selectChild:go,selectChildren:xo,filter:yo,data:Co,enter:vo,exit:wo,join:So,merge:bo,selection:vs,order:To,sort:No,call:Eo,nodes:Mo,node:ko,size:Oo,empty:Do,each:zo,attr:Io,style:Ho,property:$o,classed:Po,text:Lo,html:Bo,raise:Go,lower:Wo,append:qo,insert:Xo,remove:jo,clone:Uo,datum:Yo,on:Qo,dispatch:Ko,[Symbol.iterator]:Jo};var qe=er;function ee(e){return typeof e=="string"?new Q([[document.querySelector(e)]],[document.documentElement]):new Q([[e]],Ti)}function tr(e){let i;for(;i=e.sourceEvent;)e=i;return e}function be(e,i){if(e=tr(e),i===void 0&&(i=e.currentTarget),i){var t=i.ownerSVGElement||i;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(i.getScreenCTM().inverse()),[n.x,n.y]}if(i.getBoundingClientRect){var o=i.getBoundingClientRect();return[e.clientX-o.left-i.clientLeft,e.clientY-o.top-i.clientTop]}}return[e.pageX,e.pageY]}var _s={value:()=>{}};function ir(){for(var e=0,i=arguments.length,t={},n;e<i;++e){if(!(n=arguments[e]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Dn(t)}function Dn(e){this._=e}function Cs(e,i){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");if(o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Dn.prototype=ir.prototype={constructor:Dn,on:function(e,i){var t=this._,n=Cs(e+"",t),o,r=-1,a=n.length;if(arguments.length<2){for(;++r<a;)if((o=(e=n[r]).type)&&(o=ws(t[o],e.name)))return o;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++r<a;)if(o=(e=n[r]).type)t[o]=nr(t[o],e.name,i);else if(i==null)for(o in t)t[o]=nr(t[o],e.name,null);return this},copy:function(){var e={},i=this._;for(var t in i)e[t]=i[t].slice();return new Dn(e)},call:function(e,i){if((o=arguments.length-2)>0)for(var t=new Array(o),n=0,o,r;n<o;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],n=0,o=r.length;n<o;++n)r[n].value.apply(i,t)},apply:function(e,i,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,r=n.length;o<r;++o)n[o].value.apply(i,t)}};function ws(e,i){for(var t=0,n=e.length,o;t<n;++t)if((o=e[t]).name===i)return o.value}function nr(e,i,t){for(var n=0,o=e.length;n<o;++n)if(e[n].name===i){e[n]=_s,e=e.slice(0,n).concat(e.slice(n+1));break}return t!=null&&e.push({name:i,value:t}),e}var pt=ir;var or={passive:!1},ft={capture:!0,passive:!1};function zn(e){e.stopImmediatePropagation()}function Ze(e){e.preventDefault(),e.stopImmediatePropagation()}function Gt(e){var i=e.document.documentElement,t=ee(e).on("dragstart.drag",Ze,ft);"onselectstart"in i?t.on("selectstart.drag",Ze,ft):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function Wt(e,i){var t=e.document.documentElement,n=ee(e).on("dragstart.drag",null);i&&(n.on("click.drag",Ze,ft),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}var qt=e=>()=>e;function Xt(e,{sourceEvent:i,subject:t,target:n,identifier:o,active:r,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Xt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ss(e){return!e.ctrlKey&&!e.button}function bs(){return this.parentNode}function Ts(e,i){return i??{x:e.x,y:e.y}}function Ns(){return navigator.maxTouchPoints||"ontouchstart"in this}function In(){var e=Ss,i=bs,t=Ts,n=Ns,o={},r=pt("start","drag","end"),a=0,s,l,c,u,h=0;function p(m){m.on("mousedown.drag",x).filter(n).on("touchstart.drag",j).on("touchmove.drag",w,or).on("touchend.drag touchcancel.drag",ie).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(m,T){if(!(u||!e.call(this,m,T))){var D=oe(this,i.call(this,m,T),m,T,"mouse");D&&(ee(m.view).on("mousemove.drag",O,ft).on("mouseup.drag",z,ft),Gt(m.view),zn(m),c=!1,s=m.clientX,l=m.clientY,D("start",m))}}function O(m){if(Ze(m),!c){var T=m.clientX-s,D=m.clientY-l;c=T*T+D*D>h}o.mouse("drag",m)}function z(m){ee(m.view).on("mousemove.drag mouseup.drag",null),Wt(m.view,c),Ze(m),o.mouse("end",m)}function j(m,T){if(e.call(this,m,T)){var D=m.changedTouches,H=i.call(this,m,T),te=D.length,ce,K;for(ce=0;ce<te;++ce)(K=oe(this,H,m,T,D[ce].identifier,D[ce]))&&(zn(m),K("start",m,D[ce]))}}function w(m){var T=m.changedTouches,D=T.length,H,te;for(H=0;H<D;++H)(te=o[T[H].identifier])&&(Ze(m),te("drag",m,T[H]))}function ie(m){var T=m.changedTouches,D=T.length,H,te;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),H=0;H<D;++H)(te=o[T[H].identifier])&&(zn(m),te("end",m,T[H]))}function oe(m,T,D,H,te,ce){var K=r.copy(),J=be(ce||D,T),it,ot,d;if((d=t.call(m,new Xt("beforestart",{sourceEvent:D,target:p,identifier:te,active:a,x:J[0],y:J[1],dx:0,dy:0,dispatch:K}),H))!=null)return it=d.x-J[0]||0,ot=d.y-J[1]||0,function v(f,_,b){var N=J,E;switch(f){case"start":o[te]=v,E=a++;break;case"end":delete o[te],--a;case"drag":J=be(b||_,T),E=a;break}K.call(f,m,new Xt(f,{sourceEvent:_,subject:d,target:p,identifier:te,active:E,x:J[0]+it,y:J[1]+ot,dx:J[0]-N[0],dy:J[1]-N[1],dispatch:K}),H)}}return p.filter=function(m){return arguments.length?(e=typeof m=="function"?m:qt(!!m),p):e},p.container=function(m){return arguments.length?(i=typeof m=="function"?m:qt(m),p):i},p.subject=function(m){return arguments.length?(t=typeof m=="function"?m:qt(m),p):t},p.touchable=function(m){return arguments.length?(n=typeof m=="function"?m:qt(!!m),p):n},p.on=function(){var m=r.on.apply(r,arguments);return m===r?p:m},p.clickDistance=function(m){return arguments.length?(h=(m=+m)*m,p):Math.sqrt(h)},p}function Hn(e,i,t){e.prototype=i.prototype=t,t.constructor=e}function Ni(e,i){var t=Object.create(e.prototype);for(var n in i)t[n]=i[n];return t}function Yt(){}var jt=.7,Vn=1/jt,Mt="\\s*([+-]?\\d+)\\s*",Ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Es=/^#([0-9a-f]{3,8})$/,Ms=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),ks=new RegExp(`^rgb\\(${Ae},${Ae},${Ae}\\)$`),Os=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Ut}\\)$`),Ds=new RegExp(`^rgba\\(${Ae},${Ae},${Ae},${Ut}\\)$`),zs=new RegExp(`^hsl\\(${Ut},${Ae},${Ae}\\)$`),Is=new RegExp(`^hsla\\(${Ut},${Ae},${Ae},${Ut}\\)$`),rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(Yt,Ke,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ar,formatHex:ar,formatHex8:Hs,formatHsl:$s,formatRgb:sr,toString:sr});function ar(){return this.rgb().formatHex()}function Hs(){return this.rgb().formatHex8()}function $s(){return fr(this).formatHsl()}function sr(){return this.rgb().formatRgb()}function Ke(e){var i,t;return e=(e+"").trim().toLowerCase(),(i=Es.exec(e))?(t=i[1].length,i=parseInt(i[1],16),t===6?lr(i):t===3?new ve(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):t===8?$n(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):t===4?$n(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=Ms.exec(e))?new ve(i[1],i[2],i[3],1):(i=ks.exec(e))?new ve(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=Os.exec(e))?$n(i[1],i[2],i[3],i[4]):(i=Ds.exec(e))?$n(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=zs.exec(e))?dr(i[1],i[2]/100,i[3]/100,1):(i=Is.exec(e))?dr(i[1],i[2]/100,i[3]/100,i[4]):rr.hasOwnProperty(e)?lr(rr[e]):e==="transparent"?new ve(NaN,NaN,NaN,0):null}function lr(e){return new ve(e>>16&255,e>>8&255,e&255,1)}function $n(e,i,t,n){return n<=0&&(e=i=t=NaN),new ve(e,i,t,n)}function Fs(e){return e instanceof Yt||(e=Ke(e)),e?(e=e.rgb(),new ve(e.r,e.g,e.b,e.opacity)):new ve}function kt(e,i,t,n){return arguments.length===1?Fs(e):new ve(e,i,t,n??1)}function ve(e,i,t,n){this.r=+e,this.g=+i,this.b=+t,this.opacity=+n}Hn(ve,kt,Ni(Yt,{brighter(e){return e=e==null?Vn:Math.pow(Vn,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jt:Math.pow(jt,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ve(mt(this.r),mt(this.g),mt(this.b),An(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cr,formatHex:cr,formatHex8:Vs,formatRgb:ur,toString:ur}));function cr(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function Vs(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function ur(){let e=An(this.opacity);return`${e===1?"rgb(":"rgba("}${mt(this.r)}, ${mt(this.g)}, ${mt(this.b)}${e===1?")":`, ${e})`}`}function An(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ht(e){return e=mt(e),(e<16?"0":"")+e.toString(16)}function dr(e,i,t,n){return n<=0?e=i=t=NaN:t<=0||t>=1?e=i=NaN:i<=0&&(e=NaN),new De(e,i,t,n)}function fr(e){if(e instanceof De)return new De(e.h,e.s,e.l,e.opacity);if(e instanceof Yt||(e=Ke(e)),!e)return new De;if(e instanceof De)return e;e=e.rgb();var i=e.r/255,t=e.g/255,n=e.b/255,o=Math.min(i,t,n),r=Math.max(i,t,n),a=NaN,s=r-o,l=(r+o)/2;return s?(i===r?a=(t-n)/s+(t<n)*6:t===r?a=(n-i)/s+2:a=(i-t)/s+4,s/=l<.5?r+o:2-r-o,a*=60):s=l>0&&l<1?0:a,new De(a,s,l,e.opacity)}function hr(e,i,t,n){return arguments.length===1?fr(e):new De(e,i,t,n??1)}function De(e,i,t,n){this.h=+e,this.s=+i,this.l=+t,this.opacity=+n}Hn(De,hr,Ni(Yt,{brighter(e){return e=e==null?Vn:Math.pow(Vn,e),new De(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jt:Math.pow(jt,e),new De(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*i,o=2*t-n;return new ve(Ei(e>=240?e-240:e+120,o,n),Ei(e,o,n),Ei(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new De(pr(this.h),Fn(this.s),Fn(this.l),An(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=An(this.opacity);return`${e===1?"hsl(":"hsla("}${pr(this.h)}, ${Fn(this.s)*100}%, ${Fn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pr(e){return e=(e||0)%360,e<0?e+360:e}function Fn(e){return Math.max(0,Math.min(1,e||0))}function Ei(e,i,t){return(e<60?i+(t-i)*e/60:e<180?t:e<240?i+(t-i)*(240-e)/60:i)*255}function Mi(e,i,t,n,o){var r=e*e,a=r*e;return((1-3*e+3*r-a)*i+(4-6*r+3*a)*t+(1+3*e+3*r-3*a)*n+a*o)/6}function mr(e){var i=e.length-1;return function(t){var n=t<=0?t=0:t>=1?(t=1,i-1):Math.floor(t*i),o=e[n],r=e[n+1],a=n>0?e[n-1]:2*o-r,s=n<i-1?e[n+2]:2*r-o;return Mi((t-n/i)*i,a,o,r,s)}}function gr(e){var i=e.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*i),o=e[(n+i-1)%i],r=e[n%i],a=e[(n+1)%i],s=e[(n+2)%i];return Mi((t-n/i)*i,o,r,a,s)}}var ki=e=>()=>e;function As(e,i){return function(t){return e+t*i}}function Rs(e,i,t){return e=Math.pow(e,t),i=Math.pow(i,t)-e,t=1/t,function(n){return Math.pow(e+n*i,t)}}function xr(e){return(e=+e)==1?Rn:function(i,t){return t-i?Rs(i,t,e):ki(isNaN(i)?t:i)}}function Rn(e,i){var t=i-e;return t?As(e,t):ki(isNaN(e)?i:e)}var Pn=function e(i){var t=xr(i);function n(o,r){var a=t((o=kt(o)).r,(r=kt(r)).r),s=t(o.g,r.g),l=t(o.b,r.b),c=Rn(o.opacity,r.opacity);return function(u){return o.r=a(u),o.g=s(u),o.b=l(u),o.opacity=c(u),o+""}}return n.gamma=e,n}(1);function yr(e){return function(i){var t=i.length,n=new Array(t),o=new Array(t),r=new Array(t),a,s;for(a=0;a<t;++a)s=kt(i[a]),n[a]=s.r||0,o[a]=s.g||0,r[a]=s.b||0;return n=e(n),o=e(o),r=e(r),s.opacity=1,function(l){return s.r=n(l),s.g=o(l),s.b=r(l),s+""}}}var Ps=yr(mr),Ls=yr(gr);function Te(e,i){return e=+e,i=+i,function(t){return e*(1-t)+i*t}}var Di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Oi=new RegExp(Di.source,"g");function Bs(e){return function(){return e}}function Gs(e){return function(i){return e(i)+""}}function zi(e,i){var t=Di.lastIndex=Oi.lastIndex=0,n,o,r,a=-1,s=[],l=[];for(e=e+"",i=i+"";(n=Di.exec(e))&&(o=Oi.exec(i));)(r=o.index)>t&&(r=i.slice(t,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Te(n,o)})),t=Oi.lastIndex;return t<i.length&&(r=i.slice(t),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?Gs(l[0].x):Bs(i):(i=l.length,function(c){for(var u=0,h;u<i;++u)s[(h=l[u]).i]=h.x(c);return s.join("")})}var vr=180/Math.PI,Ln={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ii(e,i,t,n,o,r){var a,s,l;return(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a),(l=e*t+i*n)&&(t-=e*l,n-=i*l),(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s,l/=s),e*n<i*t&&(e=-e,i=-i,l=-l,a=-a),{translateX:o,translateY:r,rotate:Math.atan2(i,e)*vr,skewX:Math.atan(l)*vr,scaleX:a,scaleY:s}}var Bn;function _r(e){let i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return i.isIdentity?Ln:Ii(i.a,i.b,i.c,i.d,i.e,i.f)}function Cr(e){return e==null?Ln:(Bn||(Bn=document.createElementNS("http://www.w3.org/2000/svg","g")),Bn.setAttribute("transform",e),(e=Bn.transform.baseVal.consolidate())?(e=e.matrix,Ii(e.a,e.b,e.c,e.d,e.e,e.f)):Ln)}function wr(e,i,t,n){function o(c){return c.length?c.pop()+" ":""}function r(c,u,h,p,x,O){if(c!==h||u!==p){var z=x.push("translate(",null,i,null,t);O.push({i:z-4,x:Te(c,h)},{i:z-2,x:Te(u,p)})}else(h||p)&&x.push("translate("+h+i+p+t)}function a(c,u,h,p){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),p.push({i:h.push(o(h)+"rotate(",null,n)-2,x:Te(c,u)})):u&&h.push(o(h)+"rotate("+u+n)}function s(c,u,h,p){c!==u?p.push({i:h.push(o(h)+"skewX(",null,n)-2,x:Te(c,u)}):u&&h.push(o(h)+"skewX("+u+n)}function l(c,u,h,p,x,O){if(c!==h||u!==p){var z=x.push(o(x)+"scale(",null,",",null,")");O.push({i:z-4,x:Te(c,h)},{i:z-2,x:Te(u,p)})}else(h!==1||p!==1)&&x.push(o(x)+"scale("+h+","+p+")")}return function(c,u){var h=[],p=[];return c=e(c),u=e(u),r(c.translateX,c.translateY,u.translateX,u.translateY,h,p),a(c.rotate,u.rotate,h,p),s(c.skewX,u.skewX,h,p),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,p),c=u=null,function(x){for(var O=-1,z=p.length,j;++O<z;)h[(j=p[O]).i]=j.x(x);return h.join("")}}}var Hi=wr(_r,"px, ","px)","deg)"),$i=wr(Cr,", ",")",")");var Ws=1e-12;function Sr(e){return((e=Math.exp(e))+1/e)/2}function qs(e){return((e=Math.exp(e))-1/e)/2}function Xs(e){return((e=Math.exp(2*e))-1)/(e+1)}var Fi=function e(i,t,n){function o(r,a){var s=r[0],l=r[1],c=r[2],u=a[0],h=a[1],p=a[2],x=u-s,O=h-l,z=x*x+O*O,j,w;if(z<Ws)w=Math.log(p/c)/i,j=function(H){return[s+H*x,l+H*O,c*Math.exp(i*H*w)]};else{var ie=Math.sqrt(z),oe=(p*p-c*c+n*z)/(2*c*t*ie),m=(p*p-c*c-n*z)/(2*p*t*ie),T=Math.log(Math.sqrt(oe*oe+1)-oe),D=Math.log(Math.sqrt(m*m+1)-m);w=(D-T)/i,j=function(H){var te=H*w,ce=Sr(T),K=c/(t*ie)*(ce*Xs(i*te+T)-qs(T));return[s+K*x,l+K*O,c*ce/Sr(i*te+T)]}}return j.duration=w*1e3*i/Math.SQRT2,j}return o.rho=function(r){var a=Math.max(.001,+r),s=a*a,l=s*s;return e(a,s,l)},o}(Math.SQRT2,2,4);var Ot=0,Zt=0,Qt=0,Tr=1e3,Gn,Kt,Wn=0,gt=0,qn=0,Jt=typeof performance=="object"&&performance.now?performance:Date,Nr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tn(){return gt||(Nr(js),gt=Jt.now()+qn)}function js(){gt=0}function en(){this._call=this._time=this._next=null}en.prototype=Xn.prototype={constructor:en,restart:function(e,i,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?tn():+t)+(i==null?0:+i),!this._next&&Kt!==this&&(Kt?Kt._next=this:Gn=this,Kt=this),this._call=e,this._time=t,Vi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vi())}};function Xn(e,i,t){var n=new en;return n.restart(e,i,t),n}function Er(){tn(),++Ot;for(var e=Gn,i;e;)(i=gt-e._time)>=0&&e._call.call(void 0,i),e=e._next;--Ot}function br(){gt=(Wn=Jt.now())+qn,Ot=Zt=0;try{Er()}finally{Ot=0,Ys(),gt=0}}function Us(){var e=Jt.now(),i=e-Wn;i>Tr&&(qn-=i,Wn=e)}function Ys(){for(var e,i=Gn,t,n=1/0;i;)i._call?(n>i._time&&(n=i._time),e=i,i=i._next):(t=i._next,i._next=null,i=e?e._next=t:Gn=t);Kt=e,Vi(n)}function Vi(e){if(!Ot){Zt&&(Zt=clearTimeout(Zt));var i=e-gt;i>24?(e<1/0&&(Zt=setTimeout(br,e-Jt.now()-qn)),Qt&&(Qt=clearInterval(Qt))):(Qt||(Wn=Jt.now(),Qt=setInterval(Us,Tr)),Ot=1,Nr(br))}}function jn(e,i,t){var n=new en;return i=i==null?0:+i,n.restart(o=>{n.stop(),e(o+i)},i,t),n}var Qs=pt("start","end","cancel","interrupt"),Zs=[],Or=0,Mr=1,Yn=2,Un=3,kr=4,Qn=5,nn=6;function Je(e,i,t,n,o,r){var a=e.__transition;if(!a)e.__transition={};else if(t in a)return;Ks(e,t,{name:i,index:n,group:o,on:Qs,tween:Zs,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Or})}function on(e,i){var t=ne(e,i);if(t.state>Or)throw new Error("too late; already scheduled");return t}function le(e,i){var t=ne(e,i);if(t.state>Un)throw new Error("too late; already running");return t}function ne(e,i){var t=e.__transition;if(!t||!(t=t[i]))throw new Error("transition not found");return t}function Ks(e,i,t){var n=e.__transition,o;n[i]=t,t.timer=Xn(r,0,t.time);function r(c){t.state=Mr,t.timer.restart(a,t.delay,t.time),t.delay<=c&&a(c-t.delay)}function a(c){var u,h,p,x;if(t.state!==Mr)return l();for(u in n)if(x=n[u],x.name===t.name){if(x.state===Un)return jn(a);x.state===kr?(x.state=nn,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete n[u]):+u<i&&(x.state=nn,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete n[u])}if(jn(function(){t.state===Un&&(t.state=kr,t.timer.restart(s,t.delay,t.time),s(c))}),t.state=Yn,t.on.call("start",e,e.__data__,t.index,t.group),t.state===Yn){for(t.state=Un,o=new Array(p=t.tween.length),u=0,h=-1;u<p;++u)(x=t.tween[u].value.call(e,e.__data__,t.index,t.group))&&(o[++h]=x);o.length=h+1}}function s(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=Qn,1),h=-1,p=o.length;++h<p;)o[h].call(e,u);t.state===Qn&&(t.on.call("end",e,e.__data__,t.index,t.group),l())}function l(){t.state=nn,t.timer.stop(),delete n[i];for(var c in n)return;delete e.__transition}}function xt(e,i){var t=e.__transition,n,o,r=!0,a;if(t){i=i==null?null:i+"";for(a in t){if((n=t[a]).name!==i){r=!1;continue}o=n.state>Yn&&n.state<Qn,n.state=nn,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete t[a]}r&&delete e.__transition}}function Dr(e){return this.each(function(){xt(this,e)})}function Js(e,i){var t,n;return function(){var o=le(this,e),r=o.tween;if(r!==t){n=t=r;for(var a=0,s=n.length;a<s;++a)if(n[a].name===i){n=n.slice(),n.splice(a,1);break}}o.tween=n}}function el(e,i,t){var n,o;if(typeof t!="function")throw new Error;return function(){var r=le(this,e),a=r.tween;if(a!==n){o=(n=a).slice();for(var s={name:i,value:t},l=0,c=o.length;l<c;++l)if(o[l].name===i){o[l]=s;break}l===c&&o.push(s)}r.tween=o}}function zr(e,i){var t=this._id;if(e+="",arguments.length<2){for(var n=ne(this.node(),t).tween,o=0,r=n.length,a;o<r;++o)if((a=n[o]).name===e)return a.value;return null}return this.each((i==null?Js:el)(t,e,i))}function Dt(e,i,t){var n=e._id;return e.each(function(){var o=le(this,n);(o.value||(o.value={}))[i]=t.apply(this,arguments)}),function(o){return ne(o,n).value[i]}}function Zn(e,i){var t;return(typeof i=="number"?Te:i instanceof Ke?Pn:(t=Ke(i))?(i=t,Pn):zi)(e,i)}function tl(e){return function(){this.removeAttribute(e)}}function nl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function il(e,i,t){var n,o=t+"",r;return function(){var a=this.getAttribute(e);return a===o?null:a===n?r:r=i(n=a,t)}}function ol(e,i,t){var n,o=t+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===n?r:r=i(n=a,t)}}function rl(e,i,t){var n,o,r;return function(){var a,s=t(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===n&&l===o?r:(o=l,r=i(n=a,s)))}}function al(e,i,t){var n,o,r;return function(){var a,s=t(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===n&&l===o?r:(o=l,r=i(n=a,s)))}}function Ir(e,i){var t=We(e),n=t==="transform"?$i:Zn;return this.attrTween(e,typeof i=="function"?(t.local?al:rl)(t,n,Dt(this,"attr."+e,i)):i==null?(t.local?nl:tl)(t):(t.local?ol:il)(t,n,i))}function sl(e,i){return function(t){this.setAttribute(e,i.call(this,t))}}function ll(e,i){return function(t){this.setAttributeNS(e.space,e.local,i.call(this,t))}}function cl(e,i){var t,n;function o(){var r=i.apply(this,arguments);return r!==n&&(t=(n=r)&&ll(e,r)),t}return o._value=i,o}function ul(e,i){var t,n;function o(){var r=i.apply(this,arguments);return r!==n&&(t=(n=r)&&sl(e,r)),t}return o._value=i,o}function Hr(e,i){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(i==null)return this.tween(t,null);if(typeof i!="function")throw new Error;var n=We(e);return this.tween(t,(n.local?cl:ul)(n,i))}function dl(e,i){return function(){on(this,e).delay=+i.apply(this,arguments)}}function pl(e,i){return i=+i,function(){on(this,e).delay=i}}function $r(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?dl:pl)(i,e)):ne(this.node(),i).delay}function fl(e,i){return function(){le(this,e).duration=+i.apply(this,arguments)}}function hl(e,i){return i=+i,function(){le(this,e).duration=i}}function Fr(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?fl:hl)(i,e)):ne(this.node(),i).duration}function ml(e,i){if(typeof i!="function")throw new Error;return function(){le(this,e).ease=i}}function Vr(e){var i=this._id;return arguments.length?this.each(ml(i,e)):ne(this.node(),i).ease}function gl(e,i){return function(){var t=i.apply(this,arguments);if(typeof t!="function")throw new Error;le(this,e).ease=t}}function Ar(e){if(typeof e!="function")throw new Error;return this.each(gl(this._id,e))}function Rr(e){typeof e!="function"&&(e=Lt(e));for(var i=this._groups,t=i.length,n=new Array(t),o=0;o<t;++o)for(var r=i[o],a=r.length,s=n[o]=[],l,c=0;c<a;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&s.push(l);return new he(n,this._parents,this._name,this._id)}function Pr(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,t=e._groups,n=i.length,o=t.length,r=Math.min(n,o),a=new Array(n),s=0;s<r;++s)for(var l=i[s],c=t[s],u=l.length,h=a[s]=new Array(u),p,x=0;x<u;++x)(p=l[x]||c[x])&&(h[x]=p);for(;s<n;++s)a[s]=i[s];return new he(a,this._parents,this._name,this._id)}function xl(e){return(e+"").trim().split(/^|\s+/).every(function(i){var t=i.indexOf(".");return t>=0&&(i=i.slice(0,t)),!i||i==="start"})}function yl(e,i,t){var n,o,r=xl(i)?on:le;return function(){var a=r(this,e),s=a.on;s!==n&&(o=(n=s).copy()).on(i,t),a.on=o}}function Lr(e,i){var t=this._id;return arguments.length<2?ne(this.node(),t).on.on(e):this.each(yl(t,e,i))}function vl(e){return function(){var i=this.parentNode;for(var t in this.__transition)if(+t!==e)return;i&&i.removeChild(this)}}function Br(){return this.on("end.remove",vl(this._id))}function Gr(e){var i=this._name,t=this._id;typeof e!="function"&&(e=dt(e));for(var n=this._groups,o=n.length,r=new Array(o),a=0;a<o;++a)for(var s=n[a],l=s.length,c=r[a]=new Array(l),u,h,p=0;p<l;++p)(u=s[p])&&(h=e.call(u,u.__data__,p,s))&&("__data__"in u&&(h.__data__=u.__data__),c[p]=h,Je(c[p],i,t,p,c,ne(u,t)));return new he(r,this._parents,i,t)}function Wr(e){var i=this._name,t=this._id;typeof e!="function"&&(e=Pt(e));for(var n=this._groups,o=n.length,r=[],a=[],s=0;s<o;++s)for(var l=n[s],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var p=e.call(u,u.__data__,h,l),x,O=ne(u,t),z=0,j=p.length;z<j;++z)(x=p[z])&&Je(x,i,t,z,p,O);r.push(p),a.push(u)}return new he(r,a,i,t)}var _l=qe.prototype.constructor;function qr(){return new _l(this._groups,this._parents)}function Cl(e,i){var t,n,o;return function(){var r=Qe(this,e),a=(this.style.removeProperty(e),Qe(this,e));return r===a?null:r===t&&a===n?o:o=i(t=r,n=a)}}function Xr(e){return function(){this.style.removeProperty(e)}}function wl(e,i,t){var n,o=t+"",r;return function(){var a=Qe(this,e);return a===o?null:a===n?r:r=i(n=a,t)}}function Sl(e,i,t){var n,o,r;return function(){var a=Qe(this,e),s=t(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Qe(this,e))),a===l?null:a===n&&l===o?r:(o=l,r=i(n=a,s))}}function bl(e,i){var t,n,o,r="style."+i,a="end."+r,s;return function(){var l=le(this,e),c=l.on,u=l.value[r]==null?s||(s=Xr(i)):void 0;(c!==t||o!==u)&&(n=(t=c).copy()).on(a,o=u),l.on=n}}function jr(e,i,t){var n=(e+="")=="transform"?Hi:Zn;return i==null?this.styleTween(e,Cl(e,n)).on("end.style."+e,Xr(e)):typeof i=="function"?this.styleTween(e,Sl(e,n,Dt(this,"style."+e,i))).each(bl(this._id,e)):this.styleTween(e,wl(e,n,i),t).on("end.style."+e,null)}function Tl(e,i,t){return function(n){this.style.setProperty(e,i.call(this,n),t)}}function Nl(e,i,t){var n,o;function r(){var a=i.apply(this,arguments);return a!==o&&(n=(o=a)&&Tl(e,a,t)),n}return r._value=i,r}function Ur(e,i,t){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(i==null)return this.tween(n,null);if(typeof i!="function")throw new Error;return this.tween(n,Nl(e,i,t??""))}function El(e){return function(){this.textContent=e}}function Ml(e){return function(){var i=e(this);this.textContent=i??""}}function Yr(e){return this.tween("text",typeof e=="function"?Ml(Dt(this,"text",e)):El(e==null?"":e+""))}function kl(e){return function(i){this.textContent=e.call(this,i)}}function Ol(e){var i,t;function n(){var o=e.apply(this,arguments);return o!==t&&(i=(t=o)&&kl(o)),i}return n._value=e,n}function Qr(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Ol(e))}function Zr(){for(var e=this._name,i=this._id,t=Kn(),n=this._groups,o=n.length,r=0;r<o;++r)for(var a=n[r],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=ne(l,i);Je(l,e,t,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new he(n,this._parents,e,t)}function Kr(){var e,i,t=this,n=t._id,o=t.size();return new Promise(function(r,a){var s={value:a},l={value:function(){--o===0&&r()}};t.each(function(){var c=le(this,n),u=c.on;u!==e&&(i=(e=u).copy(),i._.cancel.push(s),i._.interrupt.push(s),i._.end.push(l)),c.on=i}),o===0&&r()})}var Dl=0;function he(e,i,t,n){this._groups=e,this._parents=i,this._name=t,this._id=n}function Jr(e){return qe().transition(e)}function Kn(){return++Dl}var Xe=qe.prototype;he.prototype=Jr.prototype={constructor:he,select:Gr,selectAll:Wr,selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:Rr,merge:Pr,selection:qr,transition:Zr,call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:Lr,attr:Ir,attrTween:Hr,style:jr,styleTween:Ur,text:Yr,textTween:Qr,remove:Br,tween:zr,delay:$r,duration:Fr,ease:Vr,easeVarying:Ar,end:Kr,[Symbol.iterator]:Xe[Symbol.iterator]};function Jn(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zl={time:null,delay:0,duration:250,ease:Jn};function Il(e,i){for(var t;!(t=e.__transition)||!(t=t[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return t}function ea(e){var i,t;e instanceof he?(i=e._id,e=e._name):(i=Kn(),(t=zl).time=tn(),e=e==null?null:e+"");for(var n=this._groups,o=n.length,r=0;r<o;++r)for(var a=n[r],s=a.length,l,c=0;c<s;++c)(l=a[c])&&Je(l,e,i,c,a,t||Il(l,i));return new he(n,this._parents,e,i)}qe.prototype.interrupt=Dr;qe.prototype.transition=ea;var rn=e=>()=>e;function Ai(e,{sourceEvent:i,target:t,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function ze(e,i,t){this.k=e,this.x=i,this.y=t}ze.prototype={constructor:ze,scale:function(e){return e===1?this:new ze(this.k*e,this.x,this.y)},translate:function(e,i){return e===0&i===0?this:new ze(this.k,this.x+this.k*e,this.y+this.k*i)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var et=new ze(1,0,0);Ri.prototype=ze.prototype;function Ri(e){for(;!e.__zoom;)if(!(e=e.parentNode))return et;return e.__zoom}function ei(e){e.stopImmediatePropagation()}function zt(e){e.preventDefault(),e.stopImmediatePropagation()}function Hl(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function $l(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ta(){return this.__zoom||et}function Fl(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Al(e,i,t){var n=e.invertX(i[0][0])-t[0][0],o=e.invertX(i[1][0])-t[1][0],r=e.invertY(i[0][1])-t[0][1],a=e.invertY(i[1][1])-t[1][1];return e.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function Pi(){var e=Hl,i=$l,t=Al,n=Fl,o=Vl,r=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Fi,c=pt("start","zoom","end"),u,h,p,x=500,O=150,z=0,j=10;function w(d){d.property("__zoom",ta).on("wheel.zoom",te,{passive:!1}).on("mousedown.zoom",ce).on("dblclick.zoom",K).filter(o).on("touchstart.zoom",J).on("touchmove.zoom",it).on("touchend.zoom touchcancel.zoom",ot).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(d,v,f,_){var b=d.selection?d.selection():d;b.property("__zoom",ta),d!==b?T(d,v,f,_):b.interrupt().each(function(){D(this,arguments).event(_).start().zoom(null,typeof v=="function"?v.apply(this,arguments):v).end()})},w.scaleBy=function(d,v,f,_){w.scaleTo(d,function(){var b=this.__zoom.k,N=typeof v=="function"?v.apply(this,arguments):v;return b*N},f,_)},w.scaleTo=function(d,v,f,_){w.transform(d,function(){var b=i.apply(this,arguments),N=this.__zoom,E=f==null?m(b):typeof f=="function"?f.apply(this,arguments):f,L=N.invert(E),Z=typeof v=="function"?v.apply(this,arguments):v;return t(oe(ie(N,Z),E,L),b,a)},f,_)},w.translateBy=function(d,v,f,_){w.transform(d,function(){return t(this.__zoom.translate(typeof v=="function"?v.apply(this,arguments):v,typeof f=="function"?f.apply(this,arguments):f),i.apply(this,arguments),a)},null,_)},w.translateTo=function(d,v,f,_,b){w.transform(d,function(){var N=i.apply(this,arguments),E=this.__zoom,L=_==null?m(N):typeof _=="function"?_.apply(this,arguments):_;return t(et.translate(L[0],L[1]).scale(E.k).translate(typeof v=="function"?-v.apply(this,arguments):-v,typeof f=="function"?-f.apply(this,arguments):-f),N,a)},_,b)};function ie(d,v){return v=Math.max(r[0],Math.min(r[1],v)),v===d.k?d:new ze(v,d.x,d.y)}function oe(d,v,f){var _=v[0]-f[0]*d.k,b=v[1]-f[1]*d.k;return _===d.x&&b===d.y?d:new ze(d.k,_,b)}function m(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function T(d,v,f,_){d.on("start.zoom",function(){D(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(_).end()}).tween("zoom",function(){var b=this,N=arguments,E=D(b,N).event(_),L=i.apply(b,N),Z=f==null?m(L):typeof f=="function"?f.apply(b,N):f,He=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),ae=b.__zoom,Ne=typeof v=="function"?v.apply(b,N):v,Pe=l(ae.invert(Z).concat(He/ae.k),Ne.invert(Z).concat(He/Ne.k));return function(Ee){if(Ee===1)Ee=Ne;else{var Le=Pe(Ee),ai=He/Le[2];Ee=new ze(ai,Z[0]-Le[0]*ai,Z[1]-Le[1]*ai)}E.zoom(null,Ee)}})}function D(d,v,f){return!f&&d.__zooming||new H(d,v)}function H(d,v){this.that=d,this.args=v,this.active=0,this.sourceEvent=null,this.extent=i.apply(d,v),this.taps=0}H.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,v){return this.mouse&&d!=="mouse"&&(this.mouse[1]=v.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=v.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=v.invert(this.touch1[0])),this.that.__zoom=v,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var v=ee(this.that).datum();c.call(d,this.that,new Ai(d,{sourceEvent:this.sourceEvent,target:w,type:d,transform:this.that.__zoom,dispatch:c}),v)}};function te(d,...v){if(!e.apply(this,arguments))return;var f=D(this,v).event(d),_=this.__zoom,b=Math.max(r[0],Math.min(r[1],_.k*Math.pow(2,n.apply(this,arguments)))),N=be(d);if(f.wheel)(f.mouse[0][0]!==N[0]||f.mouse[0][1]!==N[1])&&(f.mouse[1]=_.invert(f.mouse[0]=N)),clearTimeout(f.wheel);else{if(_.k===b)return;f.mouse=[N,_.invert(N)],xt(this),f.start()}zt(d),f.wheel=setTimeout(E,O),f.zoom("mouse",t(oe(ie(_,b),f.mouse[0],f.mouse[1]),f.extent,a));function E(){f.wheel=null,f.end()}}function ce(d,...v){if(p||!e.apply(this,arguments))return;var f=d.currentTarget,_=D(this,v,!0).event(d),b=ee(d.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",He,!0),N=be(d,f),E=d.clientX,L=d.clientY;Gt(d.view),ei(d),_.mouse=[N,this.__zoom.invert(N)],xt(this),_.start();function Z(ae){if(zt(ae),!_.moved){var Ne=ae.clientX-E,Pe=ae.clientY-L;_.moved=Ne*Ne+Pe*Pe>z}_.event(ae).zoom("mouse",t(oe(_.that.__zoom,_.mouse[0]=be(ae,f),_.mouse[1]),_.extent,a))}function He(ae){b.on("mousemove.zoom mouseup.zoom",null),Wt(ae.view,_.moved),zt(ae),_.event(ae).end()}}function K(d,...v){if(e.apply(this,arguments)){var f=this.__zoom,_=be(d.changedTouches?d.changedTouches[0]:d,this),b=f.invert(_),N=f.k*(d.shiftKey?.5:2),E=t(oe(ie(f,N),_,b),i.apply(this,v),a);zt(d),s>0?ee(this).transition().duration(s).call(T,E,_,d):ee(this).call(w.transform,E,_,d)}}function J(d,...v){if(e.apply(this,arguments)){var f=d.touches,_=f.length,b=D(this,v,d.changedTouches.length===_).event(d),N,E,L,Z;for(ei(d),E=0;E<_;++E)L=f[E],Z=be(L,this),Z=[Z,this.__zoom.invert(Z),L.identifier],b.touch0?!b.touch1&&b.touch0[2]!==Z[2]&&(b.touch1=Z,b.taps=0):(b.touch0=Z,N=!0,b.taps=1+!!u);u&&(u=clearTimeout(u)),N&&(b.taps<2&&(h=Z[0],u=setTimeout(function(){u=null},x)),xt(this),b.start())}}function it(d,...v){if(this.__zooming){var f=D(this,v).event(d),_=d.changedTouches,b=_.length,N,E,L,Z;for(zt(d),N=0;N<b;++N)E=_[N],L=be(E,this),f.touch0&&f.touch0[2]===E.identifier?f.touch0[0]=L:f.touch1&&f.touch1[2]===E.identifier&&(f.touch1[0]=L);if(E=f.that.__zoom,f.touch1){var He=f.touch0[0],ae=f.touch0[1],Ne=f.touch1[0],Pe=f.touch1[1],Ee=(Ee=Ne[0]-He[0])*Ee+(Ee=Ne[1]-He[1])*Ee,Le=(Le=Pe[0]-ae[0])*Le+(Le=Pe[1]-ae[1])*Le;E=ie(E,Math.sqrt(Ee/Le)),L=[(He[0]+Ne[0])/2,(He[1]+Ne[1])/2],Z=[(ae[0]+Pe[0])/2,(ae[1]+Pe[1])/2]}else if(f.touch0)L=f.touch0[0],Z=f.touch0[1];else return;f.zoom("touch",t(oe(E,L,Z),f.extent,a))}}function ot(d,...v){if(this.__zooming){var f=D(this,v).event(d),_=d.changedTouches,b=_.length,N,E;for(ei(d),p&&clearTimeout(p),p=setTimeout(function(){p=null},x),N=0;N<b;++N)E=_[N],f.touch0&&f.touch0[2]===E.identifier?delete f.touch0:f.touch1&&f.touch1[2]===E.identifier&&delete f.touch1;if(f.touch1&&!f.touch0&&(f.touch0=f.touch1,delete f.touch1),f.touch0)f.touch0[1]=this.__zoom.invert(f.touch0[0]);else if(f.end(),f.taps===2&&(E=be(E,this),Math.hypot(h[0]-E[0],h[1]-E[1])<j)){var L=ee(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return w.wheelDelta=function(d){return arguments.length?(n=typeof d=="function"?d:rn(+d),w):n},w.filter=function(d){return arguments.length?(e=typeof d=="function"?d:rn(!!d),w):e},w.touchable=function(d){return arguments.length?(o=typeof d=="function"?d:rn(!!d),w):o},w.extent=function(d){return arguments.length?(i=typeof d=="function"?d:rn([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),w):i},w.scaleExtent=function(d){return arguments.length?(r[0]=+d[0],r[1]=+d[1],w):[r[0],r[1]]},w.translateExtent=function(d){return arguments.length?(a[0][0]=+d[0][0],a[1][0]=+d[1][0],a[0][1]=+d[0][1],a[1][1]=+d[1][1],w):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},w.constrain=function(d){return arguments.length?(t=d,w):t},w.duration=function(d){return arguments.length?(s=+d,w):s},w.interpolate=function(d){return arguments.length?(l=d,w):l},w.on=function(){var d=c.on.apply(c,arguments);return d===c?w:d},w.clickDistance=function(d){return arguments.length?(z=(d=+d)*d,w):Math.sqrt(z)},w.tapDistance=function(d){return arguments.length?(j=+d,w):j},w}function Se(e){return e!==void 0}function Li(){let e=window.navigator.userAgent.toLowerCase(),i=/(macintosh|macintel|macppc|mac68k|macos)/i,t=/(win32|win64|windows|wince)/i,n=/(iphone|ipad|ipod)/i,o=null;return i.test(e)?o="macos":n.test(e)?o="ios":t.test(e)?o="windows":/android/.test(e)?o="android":!o&&/linux/.test(e)&&(o="linux"),o}var an=(()=>{class e{constructor(){this.actions=$({multiSelection:[Li()==="macos"?"MetaLeft":"ControlLeft",Li()==="macos"?"MetaRight":"ControlRight"]}),this.actionsActive={multiSelection:!1},W(this.actions).pipe(_e(()=>ue(li(document,"keydown").pipe(Ce(t=>{for(let n in this.actions())(this.actions()[n]??[]).includes(t.code)&&(this.actionsActive[n]=!0)})),li(document,"keyup").pipe(Ce(t=>{for(let n in this.actions())(this.actions()[n]??[]).includes(t.code)&&(this.actionsActive[n]=!1)})))),Oe()).subscribe()}setShortcuts(t){this.actions.update(n=>Ht(Ht({},n),t))}isActiveAction(t){return this.actionsActive[t]}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();var tt=(()=>{class e{constructor(){this.flowEntitiesService=g(se),this.keyboardService=g(an),this.viewport$=new yt,this.resetSelection=this.viewport$.pipe(Ce(({start:t,end:n,target:o})=>{if(t&&n&&o){let r=e.delta,a=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y),l=a<r&&s<r,c=!o.closest(".selectable");l&&c&&this.select(null)}}),Oe()).subscribe()}static{this.delta=6}setViewport(t){this.viewport$.next(t)}select(t){t?.selected()||(this.keyboardService.isActiveAction("multiSelection")||this.flowEntitiesService.entities().forEach(n=>n.selected.set(!1)),t&&t.selected.set(!0))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();var ti=(()=>{class e{constructor(){this.rootSvg=g(Nt).element,this.host=g(Ue).nativeElement,this.selectionService=g(tt),this.viewportService=g(ct),this.flowSettingsService=g(fe),this.rootSvgSelection=ee(this.rootSvg),this.zoomableSelection=ee(this.host),this.viewportForSelection={},this.manualViewportChangeEffect=ke(()=>{let t=this.viewportService.writableViewport(),n=t.state;if(t.changeType!=="initial"){if(Se(n.zoom)&&!Se(n.x)&&!Se(n.y)){this.rootSvgSelection.transition().duration(t.duration).call(this.zoomBehavior.scaleTo,n.zoom);return}if(Se(n.x)&&Se(n.y)&&!Se(n.zoom)){let o=wn(this.viewportService.readableViewport).zoom;this.rootSvgSelection.transition().duration(t.duration).call(this.zoomBehavior.transform,et.translate(n.x,n.y).scale(o));return}if(Se(n.x)&&Se(n.y)&&Se(n.zoom)){this.rootSvgSelection.transition().duration(t.duration).call(this.zoomBehavior.transform,et.translate(n.x,n.y).scale(n.zoom));return}}},{allowSignalWrites:!0}),this.handleZoom=({transform:t})=>{this.viewportService.readableViewport.set(Bi(t)),this.zoomableSelection.attr("transform",t.toString())},this.handleZoomStart=({transform:t})=>{this.viewportForSelection={start:Bi(t)}},this.handleZoomEnd=({transform:t,sourceEvent:n})=>{this.viewportForSelection=ji(Ht({},this.viewportForSelection),{end:Bi(t),target:Rl(n)}),this.selectionService.setViewport(this.viewportForSelection)},this.filterCondition=t=>t.type==="mousedown"||t.type==="touchstart"?t.target.closest(".vflow-node")===null:!0}ngOnInit(){this.zoomBehavior=Pi().scaleExtent([this.flowSettingsService.minZoom(),this.flowSettingsService.maxZoom()]).filter(this.filterCondition).on("start",this.handleZoomStart).on("zoom",this.handleZoom).on("end",this.handleZoomEnd),this.rootSvgSelection.call(this.zoomBehavior).on("dblclick.zoom",null)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["g","mapContext",""]],standalone:!0})}}return e})(),Bi=e=>({zoom:e.k,x:e.x,y:e.y}),Rl=e=>{if(e instanceof Event&&e.target instanceof Element)return e.target};var ni=(()=>{class e{constructor(){this.entitiesService=g(se)}enable(t,n){ee(t).call(this.getDragBehavior(n))}disable(t){ee(t).call(In().on("drag",null))}destroy(t){ee(t).on(".drag",null)}getDragBehavior(t){let n=[],o=[],r=a=>t.dragHandlesCount()?!!a.target.closest(".vflow-drag-handle"):!0;return In().filter(r).on("start",a=>{n=this.getDragNodes(t),o=n.map(s=>({x:s.point().x-a.x,y:s.point().y-a.y}))}).on("drag",a=>{n.forEach((s,l)=>{let c={x:hi(a.x+o[l].x),y:hi(a.y+o[l].y)};Pl(s,c)})})}getDragNodes(t){return t.selected()?this.entitiesService.nodes().filter(n=>n.selected()&&n.draggable()):[t]}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();function Pl(e,i){let t=e.parent();t&&(i.x=Math.min(t.size().width-e.size().width,i.x),i.x=Math.max(0,i.x),i.y=Math.min(t.size().height-e.size().height,i.y),i.y=Math.max(0,i.y)),e.setPoint(i,!0)}function Gi(e,i){let t=e.reduce((n,o)=>(n[o.node.id]=o,n),{});i.forEach(n=>{n.source.set(t[n.edge.source]),n.target.set(t[n.edge.target])})}var Re=(()=>{class e{constructor(){this.status=$({state:"idle",payload:null})}setIdleStatus(){this.status.set({state:"idle",payload:null})}setConnectionStartStatus(t,n){this.status.set({state:"connection-start",payload:{source:t,sourceHandle:n}})}setConnectionValidationStatus(t,n,o,r,a){this.status.set({state:"connection-validation",payload:{source:n,target:o,sourceHandle:r,targetHandle:a,valid:t}})}setConnectionEndStatus(t,n,o,r){this.status.set({state:"connection-end",payload:{source:t,target:n,sourceHandle:o,targetHandle:r}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();function na(...e){if(e.length){let[i,...t]=e;i(),t.forEach(n=>setTimeout(()=>n()))}}function Wi(e){let i={};return e.sourceHandle.rawHandle.type==="source"?(i.source=e.source,i.sourceHandle=e.sourceHandle):(i.source=e.target,i.sourceHandle=e.targetHandle),e.targetHandle.rawHandle.type==="target"?(i.target=e.target,i.targetHandle=e.targetHandle):(i.target=e.source,i.targetHandle=e.sourceHandle),i}var ii=(()=>{class e{constructor(){this.onConnect=Ji(),this.statusService=g(Re),this.flowEntitiesService=g(se),this.connectEffect=ke(()=>{let t=this.statusService.status();if(t.state==="connection-end"){let n=t.payload.source,o=t.payload.target,r=t.payload.sourceHandle,a=t.payload.targetHandle;if(this.isStrictMode()){let x=Wi({source:t.payload.source,sourceHandle:t.payload.sourceHandle,target:t.payload.target,targetHandle:t.payload.targetHandle});n=x.source,o=x.target,r=x.sourceHandle,a=x.targetHandle}let s=n.node.id,l=o.node.id,c=r.rawHandle.id,u=a.rawHandle.id,h=this.flowEntitiesService.connection(),p={source:s,target:l,sourceHandle:c,targetHandle:u};h.validator(p)&&this.onConnect.emit(p)}},{allowSignalWrites:!0}),this.isStrictMode=C(()=>this.flowEntitiesService.connection().mode==="strict")}startConnection(t){this.statusService.setConnectionStartStatus(t.parentNode,t)}validateConnection(t){let n=this.statusService.status();if(n.state==="connection-start"){let o=n.payload.source,r=t.parentNode,a=n.payload.sourceHandle,s=t;if(this.isStrictMode()){let c=Wi({source:n.payload.source,sourceHandle:n.payload.sourceHandle,target:t.parentNode,targetHandle:t});o=c.source,r=c.target,a=c.sourceHandle,s=c.targetHandle}let l=this.flowEntitiesService.connection().validator({source:o.node.id,target:r.node.id,sourceHandle:a.rawHandle.id,targetHandle:s.rawHandle.id});t.state.set(l?"valid":"invalid"),this.statusService.setConnectionValidationStatus(l,n.payload.source,t.parentNode,n.payload.sourceHandle,t)}}resetValidateConnection(t){t.state.set("idle");let n=this.statusService.status();n.state==="connection-validation"&&this.statusService.setConnectionStartStatus(n.payload.source,n.payload.sourceHandle)}endConnection(t){let n=this.statusService.status();if(n.state==="connection-validation"){let o=n.payload.source,r=n.payload.sourceHandle,a=n.payload.target,s=n.payload.targetHandle;na(()=>this.statusService.setConnectionEndStatus(o,a,r,s),()=>this.statusService.setIdleStatus())}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["","connectionController",""]],outputs:{onConnect:"onConnect"},standalone:!0})}}return e})();var ia=(()=>{class e{static{this.defaultWidth=100}static{this.defaultHeight=50}static{this.defaultColor="#1b262c"}constructor(t){this.node=t,this.flowSettingsService=g(fe),this.entitiesService=g(se),this.internalPoint=this.createInternalPointSignal(),this.throttledPoint$=W(this.internalPoint).pipe(vt(Ui)),this.notThrottledPoint$=new yt,this.point=ut(ue(this.throttledPoint$,this.notThrottledPoint$),{initialValue:this.internalPoint()}),this.point$=this.throttledPoint$,this.size=$({width:0,height:0}),this.size$=W(this.size),this.width=C(()=>this.size().width),this.height=C(()=>this.size().height),this.renderOrder=$(0),this.selected=$(!1),this.selected$=W(this.selected),this.globalPoint=C(()=>{let n=this.parent(),o=this.point().x,r=this.point().y;for(;n!==null;)o+=n.point().x,r+=n.point().y,n=n.parent();return{x:o,y:r}}),this.pointTransform=C(()=>`translate(${this.globalPoint().x}, ${this.globalPoint().y})`),this.handles=$([]),this.handles$=W(this.handles),this.draggable=$(!0),this.dragHandlesCount=$(0),this.magnetRadius=20,this.isComponentType=Tn.isPrototypeOf(this.node.type)||fo.isPrototypeOf(this.node.type),this.text=this.createTextSignal(),this.componentTypeInputs={node:this.node},this.parent=C(()=>this.entitiesService.nodes().find(n=>n.node.id===this.parentId())??null),this.children=C(()=>this.entitiesService.nodes().filter(n=>n.parentId()===this.node.id)),this.color=$(e.defaultColor),this.resizable=$(!1),this.resizing=$(!1),this.resizerTemplate=$(null),this.parentId=$(null),Se(t.draggable)&&(Ge(t)?this.draggable=t.draggable:this.draggable.set(t.draggable)),Se(t.parentId)&&(Ge(t)?this.parentId=t.parentId:this.parentId.set(t.parentId)),t.type==="default-group"&&t.color&&(Ge(t)?this.color=t.color:this.color.set(t.color)),t.type==="default-group"&&t.resizable&&(Ge(t)?this.resizable=t.resizable:this.resizable.set(t.resizable))}setPoint(t,n){n?this.internalPoint.set(t):this.notThrottledPoint$.next(t)}linkDefaultNodeSizeWithModelSize(){let t=this.node;switch(t.type){case"default":case"default-group":case"template-group":Ge(t)?ke(()=>{this.size.set({width:t.width?.()??e.defaultWidth,height:t.height?.()??e.defaultHeight})},{allowSignalWrites:!0}):this.size.set({width:t.width??e.defaultWidth,height:t.height??e.defaultHeight})}(t.type==="html-template"||this.isComponentType)&&(Ge(t)?ke(()=>{t.width&&t.height&&this.size.set({width:t.width(),height:t.height()})},{allowSignalWrites:!0}):t.width&&t.height&&this.size.set({width:t.width,height:t.height}))}createTextSignal(){let t=this.node;return t.type==="default"?Ge(t)?t.text??$(""):$(t.text??""):$("")}createInternalPointSignal(){return Ge(this.node)?this.node.point:$({x:this.node.point.x,y:this.node.point.y})}}return e})();var It=class{constructor(i){this.edgeLabel=i,this.size=$({width:0,height:0})}};function Ie(e,i,t){return{x:(1-t)*e.x+t*i.x,y:(1-t)*e.y+t*i.y}}function sn(e,i,t=[!1,!1,!1]){let[n,o,r]=t,a={x:0,y:0};return{path:`M ${e.x},${e.y}L ${i.x},${i.y}`,points:{start:n?Ie(e,i,.15):a,center:o?Ie(e,i,.5):a,end:r?Ie(e,i,.85):a}}}function ln(e,i,t,n,o=[!1,!1,!1]){let r={x:e.x-i.x,y:e.y-i.y},a=oa(e,t,r),s=oa(i,n,r),l=`M${e.x},${e.y} C${a.x},${a.y} ${s.x},${s.y} ${i.x},${i.y}`;return Bl(l,e,i,a,s,o)}function oa(e,i,t){let n={x:0,y:0};switch(i){case"top":n.y=1;break;case"bottom":n.y=-1;break;case"right":n.x=1;break;case"left":n.x=-1;break}let o={x:t.x*Math.abs(n.x),y:t.y*Math.abs(n.y)},a=.25*25*Math.sqrt(Math.abs(o.x+o.y));return{x:e.x+n.x*a,y:e.y-n.y*a}}function Bl(e,i,t,n,o,r){let[a,s,l]=r,c={x:0,y:0};return{path:e,points:{start:a?qi(i,t,n,o,.1):c,center:s?qi(i,t,n,o,.5):c,end:l?qi(i,t,n,o,.9):c}}}function qi(e,i,t,n,o){let r=Ie(e,t,o),a=Ie(t,n,o),s=Ie(n,i,o);return Ie(Ie(r,a,o),Ie(a,s,o),o)}var ra={left:{x:-1,y:0},right:{x:1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1}};function Gl(e,i){let t=Math.abs(i.x-e.x)/2,n=i.x<e.x?i.x+t:i.x-t,o=Math.abs(i.y-e.y)/2,r=i.y<e.y?i.y+o:i.y-o;return[n,r,t,o]}var Wl=({source:e,sourcePosition:i="bottom",target:t})=>i==="left"||i==="right"?e.x<t.x?{x:1,y:0}:{x:-1,y:0}:e.y<t.y?{x:0,y:1}:{x:0,y:-1},aa=(e,i)=>Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));function ql({source:e,sourcePosition:i="bottom",target:t,targetPosition:n="top",offset:o}){let r=ra[i],a=ra[n],s={x:e.x+r.x*o,y:e.y+r.y*o},l={x:t.x+a.x*o,y:t.y+a.y*o},c=Wl({source:s,sourcePosition:i,target:l}),u=c.x!==0?"x":"y",h=c[u],p=[],x,O,z={x:0,y:0},j={x:0,y:0},[w,ie]=Gl(e,t);if(r[u]*a[u]===-1){x=w,O=ie;let m=[{x,y:s.y},{x,y:l.y}],T=[{x:s.x,y:O},{x:l.x,y:O}];r[u]===h?p=u==="x"?m:T:p=u==="x"?T:m}else{let m=[{x:s.x,y:l.y}],T=[{x:l.x,y:s.y}];if(u==="x"?p=r.x===h?T:m:p=r.y===h?m:T,i===n){let K=Math.abs(e[u]-t[u]);if(K<=o){let J=Math.min(o-1,o-K);r[u]===h?z[u]=(s[u]>e[u]?-1:1)*J:j[u]=(l[u]>t[u]?-1:1)*J}}if(i!==n){let K=u==="x"?"y":"x",J=r[u]===a[K],it=s[K]>l[K],ot=s[K]<l[K];(r[u]===1&&(!J&&it||J&&ot)||r[u]!==1&&(!J&&ot||J&&it))&&(p=u==="x"?m:T)}let D={x:s.x+z.x,y:s.y+z.y},H={x:l.x+j.x,y:l.y+j.y},te=Math.max(Math.abs(D.x-p[0].x),Math.abs(H.x-p[0].x)),ce=Math.max(Math.abs(D.y-p[0].y),Math.abs(H.y-p[0].y));te>=ce?(x=(D.x+H.x)/2,O=p[0].y):(x=p[0].x,O=(D.y+H.y)/2)}return[[e,{x:s.x+z.x,y:s.y+z.y},...p,{x:l.x+j.x,y:l.y+j.y},t],x,O]}function Xl(e,i,t,n){let o=Math.min(aa(e,i)/2,aa(i,t)/2,n),{x:r,y:a}=i;if(e.x===r&&r===t.x||e.y===a&&a===t.y)return`L${r} ${a}`;if(e.y===a){let c=e.x<t.x?-1:1,u=e.y<t.y?1:-1;return`L ${r+o*c},${a}Q ${r},${a} ${r},${a+o*u}`}let s=e.x<t.x?1:-1,l=e.y<t.y?-1:1;return`L ${r},${a+o*l}Q ${r},${a} ${r+o*s},${a}`}function nt(e,i,t,n,o=5){let[r,a,s]=ql({source:e,sourcePosition:t,target:i,targetPosition:n,offset:20});return{path:r.reduce((c,u,h)=>{let p="";return h>0&&h<r.length-1?p=Xl(r[h-1],u,r[h+1],o):p=`${h===0?"M":"L"}${u.x} ${u.y}`,c+=p,c},""),points:{start:{x:a,y:s},center:{x:a,y:s},end:{x:a,y:s}}}}var oi=class{constructor(i){this.edge=i,this.source=$(void 0),this.target=$(void 0),this.selected=$(!1),this.selected$=W(this.selected),this.detached=C(()=>{let t=this.source(),n=this.target();if(!t||!n)return!0;let o=!1,r=!1;return this.edge.sourceHandle?o=!!t.handles().find(a=>a.rawHandle.id===this.edge.sourceHandle):o=!!t.handles().find(a=>a.rawHandle.type==="source"),this.edge.targetHandle?r=!!n.handles().find(a=>a.rawHandle.id===this.edge.targetHandle):r=!!n.handles().find(a=>a.rawHandle.type==="target"),!o||!r}),this.detached$=W(this.detached),this.path=C(()=>{let t;this.edge.sourceHandle?t=this.source()?.handles().find(o=>o.rawHandle.id===this.edge.sourceHandle):t=this.source()?.handles().find(o=>o.rawHandle.type==="source");let n;if(this.edge.targetHandle?n=this.target()?.handles().find(o=>o.rawHandle.id===this.edge.targetHandle):n=this.target()?.handles().find(o=>o.rawHandle.type==="target"),!t||!n)return{path:"",points:{start:{x:0,y:0},center:{x:0,y:0},end:{x:0,y:0}}};switch(this.curve){case"straight":return sn(t.pointAbsolute(),n.pointAbsolute(),this.usingPoints);case"bezier":return ln(t.pointAbsolute(),n.pointAbsolute(),t.rawHandle.position,n.rawHandle.position,this.usingPoints);case"smooth-step":return nt(t.pointAbsolute(),n.pointAbsolute(),t.rawHandle.position,n.rawHandle.position);case"step":return nt(t.pointAbsolute(),n.pointAbsolute(),t.rawHandle.position,n.rawHandle.position,0)}}),this.edgeLabels={},this.type=i.type??"default",this.curve=i.curve??"bezier",i.edgeLabels?.start&&(this.edgeLabels.start=new It(i.edgeLabels.start)),i.edgeLabels?.center&&(this.edgeLabels.center=new It(i.edgeLabels.center)),i.edgeLabels?.end&&(this.edgeLabels.end=new It(i.edgeLabels.end)),this.usingPoints=[!!this.edgeLabels.start,!!this.edgeLabels.center,!!this.edgeLabels.end]}};var cn=class{static nodes(i,t){let n=new Map;return t.forEach(o=>n.set(o.node,o)),i.map(o=>n.has(o)?n.get(o):new ia(o))}static edges(i,t){let n=new Map;return t.forEach(o=>n.set(o.edge,o)),i.map(o=>n.has(o)?n.get(o):new oi(o))}};var jl=25,un=(()=>{class e{constructor(){this.entitiesService=g(se),this.nodesPositionChange$=W(this.entitiesService.nodes).pipe(_e(t=>ue(...t.map(n=>n.point$.pipe(Be(1),V(()=>n))))),V(t=>this.entitiesService.nodes().filter(n=>n===t||n.selected()).map(n=>({type:"position",id:n.node.id,point:n.point()})))),this.nodeSizeChange$=W(this.entitiesService.nodes).pipe(_e(t=>ue(...t.map(n=>n.size$.pipe(Be(1),V(()=>n))))),V(t=>[{type:"size",id:t.node.id,size:t.size()}])),this.nodeAddChange$=W(this.entitiesService.nodes).pipe(_t(),V(([t,n])=>n.filter(o=>!t.includes(o))),me(t=>!!t.length),V(t=>t.map(n=>({type:"add",id:n.node.id})))),this.nodeRemoveChange$=W(this.entitiesService.nodes).pipe(_t(),V(([t,n])=>t.filter(o=>!n.includes(o))),me(t=>!!t.length),V(t=>t.map(n=>({type:"remove",id:n.node.id})))),this.nodeSelectedChange$=W(this.entitiesService.nodes).pipe(_e(t=>ue(...t.map(n=>n.selected$.pipe($t(),Be(1),V(()=>n))))),V(t=>[{type:"select",id:t.node.id,selected:t.selected()}])),this.changes$=ue(this.nodesPositionChange$,this.nodeSizeChange$,this.nodeAddChange$,this.nodeRemoveChange$,this.nodeSelectedChange$).pipe(vt(mn,jl))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();var Ul=(e,i)=>e.length===i.length&&[...new Set([...e,...i])].every(t=>e.filter(n=>n===t).length===i.filter(n=>n===t).length),dn=(()=>{class e{constructor(){this.entitiesService=g(se),this.edgeDetachedChange$=ue(W(C(()=>{let t=this.entitiesService.nodes();return wn(this.entitiesService.edges).filter(({source:o,target:r})=>!t.includes(o())||!t.includes(r()))})),W(this.entitiesService.edges).pipe(_e(t=>Yi(...t.map(n=>n.detached$.pipe(V(()=>n))))),V(t=>t.filter(n=>n.detached())),Be(2))).pipe($t(Ul),me(t=>!!t.length),V(t=>t.map(({edge:n})=>({type:"detached",id:n.id})))),this.edgeAddChange$=W(this.entitiesService.edges).pipe(_t(),V(([t,n])=>n.filter(o=>!t.includes(o))),me(t=>!!t.length),V(t=>t.map(({edge:n})=>({type:"add",id:n.id})))),this.edgeRemoveChange$=W(this.entitiesService.edges).pipe(_t(),V(([t,n])=>t.filter(o=>!n.includes(o))),me(t=>!!t.length),V(t=>t.map(({edge:n})=>({type:"remove",id:n.id})))),this.edgeSelectChange$=W(this.entitiesService.edges).pipe(_e(t=>ue(...t.map(n=>n.selected$.pipe($t(),Be(1),V(()=>n))))),V(t=>[{type:"select",id:t.edge.id,selected:t.selected()}])),this.changes$=ue(this.edgeDetachedChange$,this.edgeAddChange$,this.edgeRemoveChange$,this.edgeSelectChange$).pipe(vt(mn))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();var sa=(()=>{class e{constructor(){this.nodesChangeService=g(un),this.edgesChangeService=g(dn),this.onNodesChange=I(this.nodesChangeService.changes$),this.onNodesChangePosition=I(this.nodeChangesOfType("position"),{alias:"onNodesChange.position"}),this.onNodesChangePositionSignle=I(this.singleChange(this.nodeChangesOfType("position")),{alias:"onNodesChange.position.single"}),this.onNodesChangePositionMany=I(this.manyChanges(this.nodeChangesOfType("position")),{alias:"onNodesChange.position.many"}),this.onNodesChangeSize=I(this.nodeChangesOfType("size"),{alias:"onNodesChange.size"}),this.onNodesChangeSizeSingle=I(this.singleChange(this.nodeChangesOfType("size")),{alias:"onNodesChange.size.single"}),this.onNodesChangeSizeMany=I(this.manyChanges(this.nodeChangesOfType("size")),{alias:"onNodesChange.size.many"}),this.onNodesChangeAdd=I(this.nodeChangesOfType("add"),{alias:"onNodesChange.add"}),this.onNodesChangeAddSingle=I(this.singleChange(this.nodeChangesOfType("add")),{alias:"onNodesChange.add.single"}),this.onNodesChangeAddMany=I(this.manyChanges(this.nodeChangesOfType("add")),{alias:"onNodesChange.add.many"}),this.onNodesChangeRemove=I(this.nodeChangesOfType("remove"),{alias:"onNodesChange.remove"}),this.onNodesChangeRemoveSingle=I(this.singleChange(this.nodeChangesOfType("remove")),{alias:"onNodesChange.remove.single"}),this.onNodesChangeRemoveMany=I(this.manyChanges(this.nodeChangesOfType("remove")),{alias:"onNodesChange.remove.many"}),this.onNodesChangeSelect=I(this.nodeChangesOfType("select"),{alias:"onNodesChange.select"}),this.onNodesChangeSelectSingle=I(this.singleChange(this.nodeChangesOfType("select")),{alias:"onNodesChange.select.single"}),this.onNodesChangeSelectMany=I(this.manyChanges(this.nodeChangesOfType("select")),{alias:"onNodesChange.select.many"}),this.onEdgesChange=I(this.edgesChangeService.changes$),this.onNodesChangeDetached=I(this.edgeChangesOfType("detached"),{alias:"onEdgesChange.detached"}),this.onNodesChangeDetachedSingle=I(this.singleChange(this.edgeChangesOfType("detached")),{alias:"onEdgesChange.detached.single"}),this.onNodesChangeDetachedMany=I(this.manyChanges(this.edgeChangesOfType("detached")),{alias:"onEdgesChange.detached.many"}),this.onEdgesChangeAdd=I(this.edgeChangesOfType("add"),{alias:"onEdgesChange.add"}),this.onEdgeChangeAddSingle=I(this.singleChange(this.edgeChangesOfType("add")),{alias:"onEdgesChange.add.single"}),this.onEdgeChangeAddMany=I(this.manyChanges(this.edgeChangesOfType("add")),{alias:"onEdgesChange.add.many"}),this.onEdgeChangeRemove=I(this.edgeChangesOfType("remove"),{alias:"onEdgesChange.remove"}),this.onEdgeChangeRemoveSingle=I(this.singleChange(this.edgeChangesOfType("remove")),{alias:"onEdgesChange.remove.single"}),this.onEdgeChangeRemoveMany=I(this.manyChanges(this.edgeChangesOfType("remove")),{alias:"onEdgesChange.remove.many"}),this.onEdgeChangeSelect=I(this.edgeChangesOfType("select"),{alias:"onEdgesChange.select"}),this.onEdgeChangeSelectSingle=I(this.singleChange(this.edgeChangesOfType("select")),{alias:"onEdgesChange.select.single"}),this.onEdgeChangeSelectMany=I(this.manyChanges(this.edgeChangesOfType("select")),{alias:"onEdgesChange.select.many"})}nodeChangesOfType(t){return this.nodesChangeService.changes$.pipe(V(n=>n.filter(o=>o.type===t)),me(n=>!!n.length))}edgeChangesOfType(t){return this.edgesChangeService.changes$.pipe(V(n=>n.filter(o=>o.type===t)),me(n=>!!n.length))}singleChange(t){return t.pipe(me(n=>n.length===1),V(([n])=>n))}manyChanges(t){return t.pipe(me(n=>n.length>1))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["","changesController",""]],outputs:{onNodesChange:"onNodesChange",onNodesChangePosition:"onNodesChange.position",onNodesChangePositionSignle:"onNodesChange.position.single",onNodesChangePositionMany:"onNodesChange.position.many",onNodesChangeSize:"onNodesChange.size",onNodesChangeSizeSingle:"onNodesChange.size.single",onNodesChangeSizeMany:"onNodesChange.size.many",onNodesChangeAdd:"onNodesChange.add",onNodesChangeAddSingle:"onNodesChange.add.single",onNodesChangeAddMany:"onNodesChange.add.many",onNodesChangeRemove:"onNodesChange.remove",onNodesChangeRemoveSingle:"onNodesChange.remove.single",onNodesChangeRemoveMany:"onNodesChange.remove.many",onNodesChangeSelect:"onNodesChange.select",onNodesChangeSelectSingle:"onNodesChange.select.single",onNodesChangeSelectMany:"onNodesChange.select.many",onEdgesChange:"onEdgesChange",onNodesChangeDetached:"onEdgesChange.detached",onNodesChangeDetachedSingle:"onEdgesChange.detached.single",onNodesChangeDetachedMany:"onEdgesChange.detached.many",onEdgesChangeAdd:"onEdgesChange.add",onEdgeChangeAddSingle:"onEdgesChange.add.single",onEdgeChangeAddMany:"onEdgesChange.add.many",onEdgeChangeRemove:"onEdgesChange.remove",onEdgeChangeRemoveSingle:"onEdgesChange.remove.single",onEdgeChangeRemoveMany:"onEdgesChange.remove.many",onEdgeChangeSelect:"onEdgesChange.select",onEdgeChangeSelectSingle:"onEdgesChange.select.single",onEdgeChangeSelectMany:"onEdgesChange.select.many"},standalone:!0})}}return e})();function Xi(e){return e.node.type==="default-group"||e.node.type==="template-group"}var pn=(()=>{class e{constructor(){this.flowEntitiesService=g(se),this.nodes=C(()=>this.flowEntitiesService.nodes().sort((t,n)=>t.renderOrder()-n.renderOrder())),this.groups=C(()=>this.nodes().filter(t=>Xi(t))),this.nonGroups=C(()=>this.nodes().filter(t=>!Xi(t))),this.maxOrder=C(()=>Math.max(...this.flowEntitiesService.nodes().map(t=>t.renderOrder())))}pullNode(t){t.renderOrder.set(this.maxOrder()+1),this.flowEntitiesService.nodes().filter(n=>n.parent()===t).forEach(n=>this.pullNode(n))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return e})();function la(e){return typeof e=="string"?{type:"solid",color:e}:e}si();var ri=(()=>{class e{constructor(){this.toolbars=$([]),this.nodeToolbars=C(()=>{let t=new Map;return this.toolbars().forEach(n=>{t.set(n.node,n)}),t})}addToolbar(t){this.toolbars.update(n=>[...n,t])}removeToolbar(t){this.toolbars.update(n=>n.filter(o=>o!==t))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=re({token:e,factory:e.\u0275fac})}}return je([At],e.prototype,"addToolbar",null),je([At],e.prototype,"removeToolbar",null),e})();si();var Ql=["edgeLabelWrapper"],Zl=["edgeLabel",""];function Kl(e,i){e&1&&xe(0)}function Jl(e,i){if(e&1&&(k(),G(0,"foreignObject"),rt(),G(1,"div",1,0),A(3,Kl,1,0,"ng-container",2),Y()()),e&2){let t=y(2);F("x",t.edgeLabelPoint().x)("y",t.edgeLabelPoint().y)("width",t.model().size().width)("height",t.model().size().height),S(3),R("ngTemplateOutlet",i)("ngTemplateOutletContext",t.getLabelContext())}}function ec(e,i){if(e&1&&A(0,Jl,4,6,":svg:foreignObject"),e&2){let t,n=y();M(0,(t=n.htmlTemplate())?0:-1,t)}}var ca=(()=>{class e{constructor(){this.model=B.required(),this.edgeModel=B.required(),this.point=B({x:0,y:0}),this.htmlTemplate=B(),this.edgeLabelWrapperRef=at.required("edgeLabelWrapper"),this.edgeLabelPoint=C(()=>{let t=this.point(),{width:n,height:o}=this.model().size();return{x:t.x-n/2,y:t.y-o/2}})}ngAfterViewInit(){let n=this.edgeLabelWrapperRef().nativeElement.clientWidth+2,o=this.edgeLabelWrapperRef().nativeElement.clientHeight+2;this.model().size.set({width:n,height:o})}getLabelContext(){return{$implicit:{edge:this.edgeModel().edge,label:this.model().edgeLabel}}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["g","edgeLabel",""]],viewQuery:function(n,o){n&1&&st(o.edgeLabelWrapperRef,Ql,5),n&2&&lt()},inputs:{model:[P.SignalBased,"model"],edgeModel:[P.SignalBased,"edgeModel"],point:[P.SignalBased,"point"],htmlTemplate:[P.SignalBased,"htmlTemplate"]},standalone:!0,features:[ye],attrs:Zl,decls:1,vars:1,consts:[["edgeLabelWrapper",""],[1,"edge-label-wrapper"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){n&1&&A(0,ec,1,1),n&2&&M(0,o.model().edgeLabel.type==="html-template"&&o.htmlTemplate()?0:-1)},dependencies:[Ve],styles:[".edge-label-wrapper[_ngcontent-%COMP%]{width:max-content;margin-top:1px;margin-left:1px}"],changeDetection:0})}}return je([At],e.prototype,"ngAfterViewInit",null),e})();var tc=["edge",""];function nc(e,i){if(e&1){let t=Me();k(),G(0,"path",2),we("mousedown",function(){de(t);let o=y();return pe(o.onEdgeMouseDown())}),Y()}if(e&2){let t=y();vn("edge_selected",t.model().selected()),F("d",t.model().path().path)("marker-start",t.markerStartUrl())("marker-end",t.markerEndUrl())}}function ic(e,i){if(e&1&&xe(0,3),e&2){let t=y(2);R("ngTemplateOutlet",i)("ngTemplateOutletContext",t.edgeContext)("ngTemplateOutletInjector",t.injector)}}function oc(e,i){if(e&1&&A(0,ic,1,3,"ng-container",3),e&2){let t,n=y();M(0,(t=n.edgeTemplate())?0:-1,t)}}function rc(e,i){if(e&1&&(k(),q(0,"g",1)),e&2){let t=y();R("model",i)("point",t.model().path().points.start)("edgeModel",t.model())("htmlTemplate",t.edgeLabelHtmlTemplate())}}function ac(e,i){if(e&1&&(k(),q(0,"g",1)),e&2){let t=y();R("model",i)("point",t.model().path().points.center)("edgeModel",t.model())("htmlTemplate",t.edgeLabelHtmlTemplate())}}function sc(e,i){if(e&1&&(k(),q(0,"g",1)),e&2){let t=y();R("model",i)("point",t.model().path().points.end)("edgeModel",t.model())("htmlTemplate",t.edgeLabelHtmlTemplate())}}var ua=(()=>{class e{constructor(){this.injector=g(Ct),this.selectionService=g(tt),this.flowSettingsService=g(fe),this.model=B.required(),this.edgeTemplate=B(),this.edgeLabelHtmlTemplate=B(),this.markerStartUrl=C(()=>{let t=this.model().edge.markers?.start;return t?`url(#${Ft(JSON.stringify(t))})`:""}),this.markerEndUrl=C(()=>{let t=this.model().edge.markers?.end;return t?`url(#${Ft(JSON.stringify(t))})`:""})}ngOnInit(){this.edgeContext={$implicit:{edge:this.model().edge,path:C(()=>this.model().path().path),markerStart:this.markerStartUrl,markerEnd:this.markerEndUrl,selected:this.model().selected.asReadonly()}}}onEdgeMouseDown(){this.flowSettingsService.entitiesSelectable()&&this.selectionService.select(this.model())}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["g","edge",""]],hostAttrs:[1,"selectable"],inputs:{model:[P.SignalBased,"model"],edgeTemplate:[P.SignalBased,"edgeTemplate"],edgeLabelHtmlTemplate:[P.SignalBased,"edgeLabelHtmlTemplate"]},standalone:!0,features:[ye],attrs:tc,decls:5,vars:5,consts:[[1,"edge",3,"edge_selected"],["edgeLabel","",3,"model","point","edgeModel","htmlTemplate"],[1,"edge",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"]],template:function(n,o){if(n&1&&A(0,nc,1,5,":svg:path",0)(1,oc,1,1)(2,rc,1,4,":svg:g",1)(3,ac,1,4,":svg:g",1)(4,sc,1,4,":svg:g",1),n&2){let r,a,s;M(0,o.model().type==="default"?0:-1),S(),M(1,o.model().type==="template"&&o.edgeTemplate()?1:-1),S(),M(2,(r=o.model().edgeLabels.start)?2:-1,r),S(),M(3,(a=o.model().edgeLabels.center)?3:-1,a),S(),M(4,(s=o.model().edgeLabels.end)?4:-1,s)}},dependencies:[Ve,ca],styles:[".edge[_ngcontent-%COMP%]{fill:none;stroke-width:2;stroke:#b1b1b7}.edge_selected[_ngcontent-%COMP%]{stroke-width:2.5;stroke:#0f4c75}"],changeDetection:0})}}return e})();si();function fn(e,i){return new hn(t=>{let n=new ResizeObserver(o=>{i.run(()=>t.next(o))});return e.forEach(o=>n.observe(o)),()=>n.disconnect()})}var da=(()=>{class e{constructor(){this.handleModel=B.required({alias:"handleSizeController"}),this.handleWrapper=g(Ue)}ngAfterViewInit(){let t=this.handleWrapper.nativeElement,n=t.getBBox(),o=lc(t);this.handleModel().size.set({width:n.width+o,height:n.height+o})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["","handleSizeController",""]],inputs:{handleModel:[P.SignalBased,"handleSizeController","handleModel"]},standalone:!0})}}return e})();function lc(e){let i=e.firstElementChild;if(i){let t=getComputedStyle(i).strokeWidth,n=Number(t.replace("px",""));return isNaN(n)?0:n}return 0}var cc=["htmlWrapper"],uc=["node",""],dc=()=>[Sn,import("./chunk-OKTONCW7.js").then(e=>e.DefaultNodeComponent),import("./chunk-R2OQP2UC.js").then(e=>e.HandleComponent)],pc=()=>[Sn,import("./chunk-XMNXI3Q5.js").then(e=>e.ResizableComponent)],fc=(e,i)=>({node:e,selected:i}),pa=e=>({$implicit:e}),hc=(e,i,t,n)=>({node:e,selected:i,width:t,height:n});function mc(e,i){if(e&1){let t=Me();k(),G(0,"foreignObject",2),we("pointerStart",function(){de(t);let o=y(2);return o.pullNode(),pe(o.selectNode())}),rt(),G(1,"default-node",3,0),q(3,"div",4)(4,"handle",5)(5,"handle",6),Y()()}if(e&2){let t=y(2);F("width",t.nodeModel().size().width)("height",t.nodeModel().size().height),S(),Ye("width",t.styleWidth())("height",t.styleHeight())("max-width",t.styleWidth())("max-height",t.styleHeight()),R("selected",t.nodeModel().selected()),S(2),R("outerHTML",t.nodeModel().text(),to)}}function gc(e,i){e&1&&(A(0,mc,6,12),di(1,0,dc),pi())}function xc(e,i){if(e&1){let t=Me();k(),G(0,"foreignObject",2),we("pointerStart",function(){de(t);let o=y();return pe(o.pullNode())}),rt(),G(1,"div",7,0),xe(3,8),Y()()}if(e&2){let t,n=y();F("width",n.nodeModel().size().width)("height",n.nodeModel().size().height),S(),Ye("width",n.styleWidth())("height",n.styleHeight()),S(2),R("ngTemplateOutlet",(t=n.nodeTemplate())!==null&&t!==void 0?t:null)("ngTemplateOutletContext",fi(12,pa,oo(9,fc,n.nodeModel().node,n.nodeModel().selected)))("ngTemplateOutletInjector",n.injector)}}function yc(e,i){if(e&1){let t=Me();k(),G(0,"foreignObject",2),we("pointerStart",function(){de(t);let o=y();return pe(o.pullNode())}),rt(),G(1,"div",7,0),xe(3,9),Y()()}if(e&2){let t=y();F("width",t.nodeModel().size().width)("height",t.nodeModel().size().height),S(),Ye("width",t.styleWidth())("height",t.styleHeight()),S(2),R("ngComponentOutlet",t.nodeModel().node.type)("ngComponentOutletInputs",t.nodeModel().componentTypeInputs)("ngComponentOutletInjector",t.injector)}}function vc(e,i){if(e&1){let t=Me();k(),G(0,"rect",10),we("pointerStart",function(){de(t);let o=y(2);return o.pullNode(),pe(o.selectNode())}),Y()}if(e&2){let t=y(2);Ye("stroke",t.nodeModel().color())("fill",t.nodeModel().color()),vn("default-group-node_selected",t.nodeModel().selected()),R("resizable",t.nodeModel().resizable())("gap",3)("resizerColor",t.nodeModel().color()),F("width",t.nodeModel().size().width)("height",t.nodeModel().size().height)}}function _c(e,i){e&1&&(A(0,vc,1,11),di(1,0,pc),pi())}function Cc(e,i){if(e&1){let t=Me();k(),G(0,"g",2),we("pointerStart",function(){de(t);let o=y();return pe(o.pullNode())}),xe(1,8),Y()}if(e&2){let t,n=y();S(),R("ngTemplateOutlet",(t=n.groupNodeTemplate())!==null&&t!==void 0?t:null)("ngTemplateOutletContext",fi(8,pa,ro(3,hc,n.nodeModel().node,n.nodeModel().selected,n.nodeModel().width,n.nodeModel().height)))("ngTemplateOutletInjector",n.injector)}}function wc(e,i){}function Sc(e,i){if(e&1&&A(0,wc,0,0,"ng-template",11),e&2){let t=y();R("ngTemplateOutlet",t)}}function bc(e,i){if(e&1&&A(0,Sc,1,1,null,11),e&2){let t=y();M(0,t.nodeModel().resizable()?0:-1)}}function Tc(e,i){if(e&1){let t=Me();k(),G(0,"circle",15),we("pointerStart",function(o){de(t);let r=y().$implicit,a=y();return pe(a.startConnection(o,r))})("pointerEnd",function(){de(t);let o=y().$implicit,r=y();return pe(r.endConnection(o))}),Y()}if(e&2){let t=y().$implicit;F("cx",t.offset().x)("cy",t.offset().y)("stroke-width",t.strokeWidth)}}function Nc(e,i){e&1&&(k(),xe(0))}function Ec(e,i){if(e&1){let t=Me();k(),G(0,"g",16),we("pointerStart",function(o){de(t);let r=y().$implicit,a=y();return pe(a.startConnection(o,r))})("pointerEnd",function(){de(t);let o=y().$implicit,r=y();return pe(r.endConnection(o))}),A(1,Nc,1,0,"ng-container",17),Y()}if(e&2){let t=y().$implicit;R("handleSizeController",t),S(),R("ngTemplateOutlet",t.template)("ngTemplateOutletContext",t.templateContext)}}function Mc(e,i){if(e&1){let t=Me();k(),G(0,"circle",18),we("pointerEnd",function(){de(t);let o=y().$implicit,r=y();return r.endConnection(o),pe(r.resetValidateConnection(o))})("pointerOver",function(){de(t);let o=y().$implicit,r=y();return pe(r.validateConnection(o))})("pointerOut",function(){de(t);let o=y().$implicit,r=y();return pe(r.resetValidateConnection(o))}),Y()}if(e&2){let t=y().$implicit,n=y();F("r",n.nodeModel().magnetRadius)("cx",t.offset().x)("cy",t.offset().y)}}function kc(e,i){if(e&1&&A(0,Tc,1,3,":svg:circle",12)(1,Ec,2,3,":svg:g",13)(2,Mc,1,3,":svg:circle",14),e&2){let t=i.$implicit,n=y();M(0,t.template?-1:0),S(),M(1,t.template?1:-1),S(),M(2,n.showMagnet()?2:-1)}}function Oc(e,i){if(e&1&&(k(),G(0,"foreignObject"),rt(),xe(1,11),Y()),e&2){let t=i;F("width",t.size().width)("height",t.size().height)("transform",t.transform()),S(),R("ngTemplateOutlet",t.template())}}var fa=(()=>{class e{constructor(){this.injector=g(Ct),this.handleService=g(mi),this.draggableService=g(ni),this.flowStatusService=g(Re),this.nodeRenderingService=g(pn),this.flowSettingsService=g(fe),this.selectionService=g(tt),this.hostRef=g(Ue),this.connectionController=g(ii),this.nodeAccessor=g(Vt),this.overlaysService=g(ri),this.zone=g(xn),this.nodeModel=B.required(),this.nodeTemplate=B(),this.groupNodeTemplate=B(),this.htmlWrapperRef=at.required("htmlWrapper"),this.showMagnet=C(()=>this.flowStatusService.status().state==="connection-start"||this.flowStatusService.status().state==="connection-validation"),this.styleWidth=C(()=>`${this.nodeModel().size().width}px`),this.styleHeight=C(()=>`${this.nodeModel().size().height}px`),this.toolbar=C(()=>this.overlaysService.nodeToolbars().get(this.nodeModel()))}ngOnInit(){this.nodeAccessor.model.set(this.nodeModel()),this.handleService.node.set(this.nodeModel()),ke(()=>{this.nodeModel().draggable()?this.draggableService.enable(this.hostRef.nativeElement,this.nodeModel()):this.draggableService.disable(this.hostRef.nativeElement)}),this.nodeModel().handles$.pipe(_e(t=>fn(t.map(n=>n.parentReference),this.zone).pipe(V(()=>t))),Ce(t=>{t.forEach(n=>n.updateParent())}),Oe()).subscribe()}ngAfterViewInit(){this.nodeModel().linkDefaultNodeSizeWithModelSize(),(this.nodeModel().node.type==="html-template"||this.nodeModel().isComponentType)&&fn([this.htmlWrapperRef().nativeElement],this.zone).pipe(Qi(null),Ce(()=>this.nodeModel().handles().forEach(t=>t.updateParent())),me(()=>!this.nodeModel().resizing()),Ce(()=>{let t=this.htmlWrapperRef().nativeElement.clientWidth,n=this.htmlWrapperRef().nativeElement.clientHeight;this.nodeModel().size.set({width:t,height:n})}),Oe()).subscribe()}ngOnDestroy(){this.draggableService.destroy(this.hostRef.nativeElement)}startConnection(t,n){t.stopPropagation(),this.connectionController.startConnection(n)}validateConnection(t){this.connectionController.validateConnection(t)}resetValidateConnection(t){this.connectionController.resetValidateConnection(t)}endConnection(t){this.connectionController.endConnection(t)}pullNode(){this.nodeRenderingService.pullNode(this.nodeModel())}selectNode(){this.flowSettingsService.entitiesSelectable()&&this.selectionService.select(this.nodeModel())}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["g","node",""]],viewQuery:function(n,o){n&1&&st(o.htmlWrapperRef,cc,5),n&2&&lt()},hostAttrs:[1,"vflow-node"],inputs:{nodeModel:[P.SignalBased,"nodeModel"],nodeTemplate:[P.SignalBased,"nodeTemplate"],groupNodeTemplate:[P.SignalBased,"groupNodeTemplate"]},standalone:!0,features:[Cn([mi,Vt]),ye],attrs:uc,decls:9,vars:7,consts:[["htmlWrapper",""],[1,"selectable"],[1,"selectable",3,"pointerStart"],[3,"selected"],[3,"outerHTML"],["type","source","position","right"],["type","target","position","left"],[1,"wrapper"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngComponentOutlet","ngComponentOutletInputs","ngComponentOutletInjector"],["rx","5","ry","5",1,"default-group-node",3,"pointerStart","resizable","gap","resizerColor"],[3,"ngTemplateOutlet"],["r","5",1,"default-handle"],[3,"handleSizeController"],[1,"magnet"],["r","5",1,"default-handle",3,"pointerStart","pointerEnd"],[3,"pointerStart","pointerEnd","handleSizeController"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"magnet",3,"pointerEnd","pointerOver","pointerOut"]],template:function(n,o){if(n&1&&(A(0,gc,3,0)(1,xc,4,14,":svg:foreignObject",1)(2,yc,4,9,":svg:foreignObject",1)(3,_c,3,0)(4,Cc,2,10,":svg:g",1)(5,bc,1,1),$e(6,kc,3,3,null,null,_n),A(8,Oc,2,4,":svg:foreignObject")),n&2){let r,a;M(0,o.nodeModel().node.type==="default"?0:-1),S(),M(1,o.nodeModel().node.type==="html-template"&&o.nodeTemplate()?1:-1),S(),M(2,o.nodeModel().isComponentType?2:-1),S(),M(3,o.nodeModel().node.type==="default-group"?3:-1),S(),M(4,o.nodeModel().node.type==="template-group"&&o.groupNodeTemplate()?4:-1),S(),M(5,(r=o.nodeModel().resizerTemplate())?5:-1,r),S(),Fe(o.nodeModel().handles()),S(2),M(8,(a=o.toolbar())?8:-1,a)}},dependencies:[Sn,Ve,lo,da],styles:[".magnet[_ngcontent-%COMP%]{opacity:0}.wrapper[_ngcontent-%COMP%]{display:table-cell}.default-group-node[_ngcontent-%COMP%]{stroke-width:1.5px;fill-opacity:.05}.default-group-node_selected[_ngcontent-%COMP%]{stroke-width:2px}.default-handle[_ngcontent-%COMP%]{stroke:#fff;fill:#1b262c}"],changeDetection:0})}}return je([gi],e.prototype,"ngOnInit",null),je([gi],e.prototype,"ngAfterViewInit",null),e})();var Dc=["connection",""];function zc(e,i){if(e&1&&(k(),q(0,"path",0)),e&2){let t=y(2);F("d",i)("marker-end",t.markerUrl())("stroke",t.defaultColor)}}function Ic(e,i){if(e&1&&A(0,zc,1,3,":svg:path",0),e&2){let t,n=y();M(0,(t=n.path())?0:-1,t)}}function Hc(e,i){e&1&&xe(0)}function $c(e,i){if(e&1&&A(0,Hc,1,0,"ng-container",1),e&2){let t=y(2);R("ngTemplateOutlet",i)("ngTemplateOutletContext",t.getContext())}}function Fc(e,i){if(e&1&&A(0,$c,1,2,"ng-container"),e&2){let t,n=y();M(0,(t=n.template())?0:-1,t)}}var ma=(()=>{class e{constructor(){this.model=B.required(),this.template=B(),this.flowStatusService=g(Re),this.spacePointContext=g(Et),this.path=C(()=>{let t=this.flowStatusService.status();if(t.state==="connection-start"){let n=t.payload.sourceHandle,o=n.pointAbsolute(),r=n.rawHandle.position,a=this.spacePointContext.svgCurrentSpacePoint(),s=ha(n.rawHandle.position);switch(this.model().curve){case"straight":return sn(o,a).path;case"bezier":return ln(o,a,r,s).path;case"smooth-step":return nt(o,a,r,s).path;case"step":return nt(o,a,r,s,0).path}}if(t.state==="connection-validation"){let n=t.payload.sourceHandle,o=n.pointAbsolute(),r=n.rawHandle.position,a=t.payload.targetHandle,s=t.payload.valid?a.pointAbsolute():this.spacePointContext.svgCurrentSpacePoint(),l=t.payload.valid?a.rawHandle.position:ha(n.rawHandle.position);switch(this.model().curve){case"straight":return sn(o,s).path;case"bezier":return ln(o,s,r,l).path;case"smooth-step":return nt(o,s,r,l).path;case"step":return nt(o,s,r,l,0).path}}return null}),this.markerUrl=C(()=>{let t=this.model().settings.marker;return t?`url(#${Ft(JSON.stringify(t))})`:""}),this.defaultColor="rgb(177, 177, 183)"}getContext(){return{$implicit:{path:this.path,marker:this.markerUrl}}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["g","connection",""]],inputs:{model:[P.SignalBased,"model"],template:[P.SignalBased,"template"]},standalone:!0,features:[ye],attrs:Dc,decls:2,vars:2,consts:[["fill","none","stroke-width","2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){n&1&&A(0,Ic,1,1)(1,Fc,1,1),n&2&&(M(0,o.model().type==="default"?0:-1),S(),M(1,o.model().type==="template"?1:-1))},dependencies:[Ve],encapsulation:2,changeDetection:0})}}return e})();function ha(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left"}}function ga(){return String.fromCharCode(65+Math.floor(Math.random()*26))+Date.now()}var Vc=["background",""];function Ac(e,i){if(e&1&&(k(),G(0,"pattern",0),q(1,"circle"),Y(),q(2,"rect",1)),e&2){let t=y();F("id",t.patternId)("x",t.x())("y",t.y())("width",t.scaledGap())("height",t.scaledGap()),S(),F("cx",t.patternSize())("cy",t.patternSize())("r",t.patternSize())("fill",t.patternColor()),S(),F("fill",t.patternUrl)}}function Rc(e,i){if(e&1&&(k(),G(0,"pattern",0),q(1,"image"),Y(),q(2,"rect",1)),e&2){let t=y(2);F("id",t.patternId)("x",t.imageX())("y",t.imageY())("width",t.scaledImageWidth())("height",t.scaledImageHeight()),S(),F("href",t.bgImageSrc())("width",t.scaledImageWidth())("height",t.scaledImageHeight()),S(),F("fill",t.patternUrl)}}function Pc(e,i){if(e&1&&(k(),q(0,"image")),e&2){let t=y(2);F("x",t.imageX())("y",t.imageY())("width",t.scaledImageWidth())("height",t.scaledImageHeight())("href",t.bgImageSrc())}}function Lc(e,i){if(e&1&&A(0,Rc,3,9)(1,Pc,1,5,":svg:image"),e&2){let t=y();M(0,t.repeated()?0:-1),S(),M(1,t.repeated()?-1:1)}}var Bc="#fff",Gc=20,Wc=2,xa="rgb(177, 177, 183)",ya=.1,qc=!0,va=(()=>{class e{constructor(){this.viewportService=g(ct),this.rootSvg=g(Nt).element,this.settingsService=g(fe),this.backgroundSignal=this.settingsService.background,this.scaledGap=C(()=>{let t=this.backgroundSignal();return t.type==="dots"?this.viewportService.readableViewport().zoom*(t.gap??Gc):0}),this.x=C(()=>this.viewportService.readableViewport().x%this.scaledGap()),this.y=C(()=>this.viewportService.readableViewport().y%this.scaledGap()),this.patternColor=C(()=>{let t=this.backgroundSignal();return t.type==="dots"?t.color??xa:xa}),this.patternSize=C(()=>{let t=this.backgroundSignal();return t.type==="dots"?this.viewportService.readableViewport().zoom*(t.size??Wc)/2:0}),this.bgImageSrc=C(()=>{let t=this.backgroundSignal();return t.type==="image"?t.src:""}),this.imageSize=ut(W(this.backgroundSignal).pipe(_e(()=>Xc(this.bgImageSrc())),V(t=>({width:t.naturalWidth,height:t.naturalHeight}))),{initialValue:{width:0,height:0}}),this.scaledImageWidth=C(()=>{let t=this.backgroundSignal();if(t.type==="image"){let n=t.fixed?1:this.viewportService.readableViewport().zoom;return this.imageSize().width*n*(t.scale??ya)}return 0}),this.scaledImageHeight=C(()=>{let t=this.backgroundSignal();if(t.type==="image"){let n=t.fixed?1:this.viewportService.readableViewport().zoom;return this.imageSize().height*n*(t.scale??ya)}return 0}),this.imageX=C(()=>{let t=this.backgroundSignal();return t.type==="image"?t.repeat?t.fixed?0:this.viewportService.readableViewport().x%this.scaledImageWidth():t.fixed?0:this.viewportService.readableViewport().x:0}),this.imageY=C(()=>{let t=this.backgroundSignal();return t.type==="image"?t.repeat?t.fixed?0:this.viewportService.readableViewport().y%this.scaledImageHeight():t.fixed?0:this.viewportService.readableViewport().y:0}),this.repeated=C(()=>{let t=this.backgroundSignal();return t.type==="image"&&(t.repeat??qc)}),this.patternId=ga(),this.patternUrl=`url(#${this.patternId})`,ke(()=>{let t=this.backgroundSignal();t.type==="dots"&&(this.rootSvg.style.backgroundColor=t.backgroundColor??Bc),t.type==="solid"&&(this.rootSvg.style.backgroundColor=t.color)})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["g","background",""]],standalone:!0,features:[ye],attrs:Vc,decls:2,vars:2,consts:[["patternUnits","userSpaceOnUse"],["x","0","y","0","width","100%","height","100%"]],template:function(n,o){n&1&&A(0,Ac,3,10)(1,Lc,2,2),n&2&&(M(0,o.backgroundSignal().type==="dots"?0:-1),S(),M(1,o.backgroundSignal().type==="image"?1:-1))},encapsulation:2,changeDetection:0})}}return e})();function Xc(e){let i=new Image;return i.src=e,new Promise(t=>{i.onload=()=>t(i)})}var jc=["flowDefs",""];function Uc(e,i){if(e&1&&(k(),q(0,"polyline",3)),e&2){let t,n,o,r=y().$implicit,a=y();Ye("stroke",(t=r.value.color)!==null&&t!==void 0?t:a.defaultColor)("stroke-width",(n=r.value.strokeWidth)!==null&&n!==void 0?n:2)("fill",(o=r.value.color)!==null&&o!==void 0?o:a.defaultColor)}}function Yc(e,i){if(e&1&&(k(),q(0,"polyline",4)),e&2){let t,n,o=y().$implicit,r=y();Ye("stroke",(t=o.value.color)!==null&&t!==void 0?t:r.defaultColor)("stroke-width",(n=o.value.strokeWidth)!==null&&n!==void 0?n:2)}}function Qc(e,i){if(e&1&&(k(),G(0,"marker",0),A(1,Uc,1,6,":svg:polyline",1)(2,Yc,1,4,":svg:polyline",2),Y()),e&2){let t,n,o,r,a=i.$implicit;F("id",a.key)("markerWidth",(t=a.value.width)!==null&&t!==void 0?t:16.5)("markerHeight",(n=a.value.height)!==null&&n!==void 0?n:16.5)("orient",(o=a.value.orient)!==null&&o!==void 0?o:"auto-start-reverse")("markerUnits",(r=a.value.markerUnits)!==null&&r!==void 0?r:"userSpaceOnUse"),S(),M(1,a.value.type==="arrow-closed"||!a.value.type?1:-1),S(),M(2,a.value.type==="arrow"?2:-1)}}var _a=(()=>{class e{constructor(){this.markers=B.required(),this.defaultColor="rgb(177, 177, 183)"}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["defs","flowDefs",""]],inputs:{markers:[P.SignalBased,"markers"]},standalone:!0,features:[ye],attrs:jc,decls:3,vars:2,consts:[["viewBox","-10 -10 20 20","refX","0","refY","0"],["points","-5,-4 1,0 -5,4 -5,-4",1,"marker__arrow_closed",3,"stroke","stroke-width","fill"],["points","-5,-4 0,0 -5,4",1,"marker__arrow_default",3,"stroke","stroke-width"],["points","-5,-4 1,0 -5,4 -5,-4",1,"marker__arrow_closed"],["points","-5,-4 0,0 -5,4",1,"marker__arrow_default"]],template:function(n,o){n&1&&($e(0,Qc,3,7,":svg:marker",0,_n),ao(2,"keyvalue")),n&2&&Fe(so(2,0,o.markers()))},dependencies:[co],styles:[".marker__arrow_default[_ngcontent-%COMP%]{stroke-width:1px;stroke-linecap:round;stroke-linejoin:round;fill:none}.marker__arrow_closed[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}"],changeDetection:0})}}return e})();var Ca=(()=>{class e{constructor(){this.host=g(Ue),this.flowSettingsService=g(fe),this.flowWidth=C(()=>{let t=this.flowSettingsService.view();return t==="auto"?"100%":t[0]}),this.flowHeight=C(()=>{let t=this.flowSettingsService.view();return t==="auto"?"100%":t[1]}),fn([this.host.nativeElement],g(xn)).pipe(Ce(([t])=>{this.flowSettingsService.computedFlowWidth.set(t.contentRect.width),this.flowSettingsService.computedFlowHeight.set(t.contentRect.height)}),Oe()).subscribe()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["svg","flowSizeController",""]],hostVars:2,hostBindings:function(n,o){n&2&&F("width",o.flowWidth())("height",o.flowHeight())},standalone:!0})}}return e})();var wa=(()=>{class e{constructor(){this.flowStatusService=g(Re)}resetConnection(){this.flowStatusService.status().state==="connection-start"&&this.flowStatusService.setIdleStatus()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=U({type:e,selectors:[["svg","rootSvgContext",""]],hostBindings:function(n,o){n&1&&we("mouseup",function(){return o.resetConnection()},!1,ui)("touchend",function(){return o.resetConnection()},!1,ui)},standalone:!0})}}return e})();function Zc(e,i){if(e&1&&(k(),q(0,"g",7)),e&2){let t,n=i.$implicit,o=y(2);R("nodeModel",n)("groupNodeTemplate",(t=o.groupNodeTemplateDirective())==null?null:t.templateRef),F("transform",n.pointTransform())}}function Kc(e,i){if(e&1&&(k(),q(0,"g",8)),e&2){let t,n,o=i.$implicit,r=y(2);R("model",o)("edgeTemplate",(t=r.edgeTemplateDirective())==null?null:t.templateRef)("edgeLabelHtmlTemplate",(n=r.edgeLabelHtmlDirective())==null?null:n.templateRef)}}function Jc(e,i){if(e&1&&(k(),q(0,"g",9)),e&2){let t,n=i.$implicit,o=y(2);R("nodeModel",n)("nodeTemplate",(t=o.nodeTemplateDirective())==null?null:t.templateRef),F("transform",n.pointTransform())}}function eu(e,i){if(e&1&&($e(0,Zc,1,3,":svg:g",7,bt().trackNodes,!0),$e(2,Kc,1,3,":svg:g",8,bt().trackEdges,!0),$e(4,Jc,1,3,":svg:g",9,bt().trackNodes,!0)),e&2){let t=y();Fe(t.groups()),S(2),Fe(t.edgeModels()),S(2),Fe(t.nonGroups())}}function tu(e,i){if(e&1&&(k(),q(0,"g",8)),e&2){let t,n,o=i.$implicit,r=y(2);R("model",o)("edgeTemplate",(t=r.edgeTemplateDirective())==null?null:t.templateRef)("edgeLabelHtmlTemplate",(n=r.edgeLabelHtmlDirective())==null?null:n.templateRef)}}function nu(e,i){if(e&1&&(k(),q(0,"g",10)),e&2){let t,n,o=i.$implicit,r=y(2);R("nodeModel",o)("nodeTemplate",(t=r.nodeTemplateDirective())==null?null:t.templateRef)("groupNodeTemplate",(n=r.groupNodeTemplateDirective())==null?null:n.templateRef),F("transform",o.pointTransform())}}function iu(e,i){if(e&1&&($e(0,tu,1,3,":svg:g",8,bt().trackEdges,!0),$e(2,nu,1,4,":svg:g",10,bt().trackNodes,!0)),e&2){let t=y();Fe(t.edgeModels()),S(2),Fe(t.nodeModels())}}function ou(e,i){e&1&&(k(),xe(0,6)),e&2&&R("ngTemplateOutlet",i.template())}var ev=(()=>{class e{constructor(){this.viewportService=g(ct),this.flowEntitiesService=g(se),this.nodesChangeService=g(un),this.edgesChangeService=g(dn),this.nodeRenderingService=g(pn),this.flowSettingsService=g(fe),this.componentEventBusService=g(Rt),this.keyboardService=g(an),this.injector=g(Ct),this.optimization=B({detachedGroupsLayer:!1}),this.nodeModels=C(()=>this.nodeRenderingService.nodes()),this.groups=C(()=>this.nodeRenderingService.groups()),this.nonGroups=C(()=>this.nodeRenderingService.nonGroups()),this.edgeModels=C(()=>this.flowEntitiesService.validEdges()),this.onComponentNodeEvent=I(this.componentEventBusService.event$),this.nodeTemplateDirective=St(_i),this.groupNodeTemplateDirective=St(Ci),this.edgeTemplateDirective=St(xi),this.edgeLabelHtmlDirective=St(vi),this.connectionTemplateDirective=St(yi),this.mapContext=at(ti),this.spacePointContext=at.required(Et),this.viewport=this.viewportService.readableViewport.asReadonly(),this.nodesChange=ut(this.nodesChangeService.changes$,{initialValue:[]}),this.edgesChange=ut(this.edgesChangeService.changes$,{initialValue:[]}),this.viewportChange$=W(this.viewportService.readableViewport).pipe(Be(1)),this.nodesChange$=this.nodesChangeService.changes$,this.edgesChange$=this.edgesChangeService.changes$,this.markers=this.flowEntitiesService.markers,this.minimap=this.flowEntitiesService.minimap}set view(t){this.flowSettingsService.view.set(t)}set minZoom(t){this.flowSettingsService.minZoom.set(t)}set maxZoom(t){this.flowSettingsService.maxZoom.set(t)}set background(t){this.flowSettingsService.background.set(la(t))}set entitiesSelectable(t){this.flowSettingsService.entitiesSelectable.set(t)}set keyboardShortcuts(t){this.keyboardService.setShortcuts(t)}set connection(t){this.flowEntitiesService.connection.set(t)}get connection(){return this.flowEntitiesService.connection()}set nodes(t){let n=ci(this.injector,()=>cn.nodes(t,this.flowEntitiesService.nodes()));Gi(n,this.flowEntitiesService.edges()),this.flowEntitiesService.nodes.set(n)}set edges(t){let n=ci(this.injector,()=>cn.edges(t,this.flowEntitiesService.edges()));Gi(this.nodeModels(),n),this.flowEntitiesService.edges.set(n)}ngOnInit(){this.setInitialNodesOrder()}viewportTo(t){this.viewportService.writableViewport.set({changeType:"absolute",state:t,duration:0})}zoomTo(t){this.viewportService.writableViewport.set({changeType:"absolute",state:{zoom:t},duration:0})}panTo(t){this.viewportService.writableViewport.set({changeType:"absolute",state:t,duration:0})}fitView(t){this.viewportService.fitView(t)}getNode(t){return this.flowEntitiesService.getNode(t)?.node}getDetachedEdges(){return this.flowEntitiesService.getDetachedEdges().map(t=>t.edge)}documentPointToFlowPoint(t){return this.spacePointContext().documentPointToFlowPoint(t)}trackNodes(t,{node:n}){return n}trackEdges(t,{edge:n}){return n}setInitialNodesOrder(){this.nodeModels().forEach(t=>{switch(t.node.type){case"default-group":case"template-group":this.nodeRenderingService.pullNode(t)}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=ge({type:e,selectors:[["vflow"]],contentQueries:function(n,o,r){n&1&&(Tt(r,o.nodeTemplateDirective,_i,5),Tt(r,o.groupNodeTemplateDirective,Ci,5),Tt(r,o.edgeTemplateDirective,xi,5),Tt(r,o.edgeLabelHtmlDirective,vi,5),Tt(r,o.connectionTemplateDirective,yi,5)),n&2&&lt(5)},viewQuery:function(n,o){n&1&&(st(o.mapContext,ti,5),st(o.spacePointContext,Et,5)),n&2&&lt(2)},inputs:{view:"view",minZoom:"minZoom",maxZoom:"maxZoom",background:"background",optimization:[P.SignalBased,"optimization"],entitiesSelectable:"entitiesSelectable",keyboardShortcuts:"keyboardShortcuts",connection:[P.HasDecoratorInputTransform,"connection","connection",t=>new uo(t)],nodes:"nodes",edges:"edges"},outputs:{onComponentNodeEvent:"onComponentNodeEvent"},standalone:!0,features:[Cn([ni,ct,Re,se,un,dn,pn,tt,fe,Rt,an,ri]),io,no([{directive:ii,outputs:["onConnect","onConnect"]},{directive:sa,outputs:["onNodesChange","onNodesChange","onNodesChange.position","onNodesChange.position","onNodesChange.position.single","onNodesChange.position.single","onNodesChange.position.many","onNodesChange.position.many","onNodesChange.size","onNodesChange.size","onNodesChange.size.single","onNodesChange.size.single","onNodesChange.size.many","onNodesChange.size.many","onNodesChange.add","onNodesChange.add","onNodesChange.add.single","onNodesChange.add.single","onNodesChange.add.many","onNodesChange.add.many","onNodesChange.remove","onNodesChange.remove","onNodesChange.remove.single","onNodesChange.remove.single","onNodesChange.remove.many","onNodesChange.remove.many","onNodesChange.select","onNodesChange.select","onNodesChange.select.single","onNodesChange.select.single","onNodesChange.select.many","onNodesChange.select.many","onEdgesChange","onEdgesChange","onEdgesChange.detached","onEdgesChange.detached","onEdgesChange.detached.single","onEdgesChange.detached.single","onEdgesChange.detached.many","onEdgesChange.detached.many","onEdgesChange.add","onEdgesChange.add","onEdgesChange.add.single","onEdgesChange.add.single","onEdgesChange.add.many","onEdgesChange.add.many","onEdgesChange.remove","onEdgesChange.remove","onEdgesChange.remove.single","onEdgesChange.remove.single","onEdgesChange.remove.many","onEdgesChange.remove.many","onEdgesChange.select","onEdgesChange.select","onEdgesChange.select.single","onEdgesChange.select.single","onEdgesChange.select.many","onEdgesChange.select.many"]}]),ye],decls:9,vars:6,consts:[["flow",""],["rootSvgRef","","rootSvgContext","","rootPointer","","flowSizeController","",1,"root-svg"],["flowDefs","",3,"markers"],["background",""],["mapContext","","spacePointContext",""],["connection","",3,"model","template"],[3,"ngTemplateOutlet"],["node","",3,"nodeModel","groupNodeTemplate"],["edge","",3,"model","edgeTemplate","edgeLabelHtmlTemplate"],["node","",3,"nodeModel","nodeTemplate"],["node","",3,"nodeModel","nodeTemplate","groupNodeTemplate"]],template:function(n,o){if(n&1&&(k(),G(0,"svg",1,0),q(2,"defs",2)(3,"g",3),G(4,"g",4),q(5,"g",5),A(6,eu,6,0)(7,iu,4,0),Y(),A(8,ou,1,1,":svg:ng-container",6),Y()),n&2){let r,a;S(2),R("markers",o.markers()),S(3),R("model",o.connection)("template",(r=o.connectionTemplateDirective())==null?null:r.templateRef),S(),M(6,o.optimization().detachedGroupsLayer?6:-1),S(),M(7,o.optimization().detachedGroupsLayer?-1:7),S(),M(8,(a=o.minimap())?8:-1,a)}},dependencies:[Nt,wa,po,Ca,_a,va,ti,Et,ma,fa,ua,Ve],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     *{box-sizing:border-box}"],changeDetection:0})}}return e})();export{pt as a,Xn as b,tt as c,xi as d,vi as e,_i as f,Ci as g,Tn as h,Nu as i,Eu as j,ri as k,ua as l,fa as m,ev as n};
