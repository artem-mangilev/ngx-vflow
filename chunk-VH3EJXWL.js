import{a as is}from"./chunk-26CSLXR4.js";import{a as q}from"./chunk-S3I3S5BX.js";import{c as J,d as K,e as X,f as Z,g as ss,l as ns,t as es,v as as,x as ts}from"./chunk-C4BU5KRR.js";import{a as Q}from"./chunk-SH6HWCPG.js";import"./chunk-CQCG3KCY.js";import{a as D}from"./chunk-WT6KFS7F.js";import{$ as F,Ba as I,Bb as l,Ea as v,Fa as p,Ga as g,Ha as x,Ia as N,Ka as E,La as k,Na as z,O as u,Oa as R,Pa as o,Q as j,Qa as m,R as r,Ra as i,Sa as A,Ta as W,Va as G,Xa as $,Y as b,Ya as h,Z as M,_ as c,ba as P,eb as L,fa as y,fb as B,ka as V,na as t,nb as U,ob as f,vc as ms,xb as Y,ya as _,za as H}from"./chunk-VLX6VUPD.js";import{a as O,b as T,g as gs}from"./chunk-P2VZOJAX.js";var rs=gs(ms());var S=class{constructor(){this.template=_(null)}};var hs=["minimap"];function fs(n,d){if(n&1&&(c(),o(0,"foreignObject"),F(),o(1,"default-node",4),i(2,"div",5),m()()),n&2){let s=h().$implicit;p("transform",s.pointTransform())("width",s.size().width)("height",s.size().height),t(),x("width",s.size().width,"px")("height",s.size().height,"px")("max-width",s.size().width,"px")("max-height",s.size().height,"px"),g("selected",s.selected()),t(),g("outerHTML",s.text(),V)}}function us(n,d){if(n&1&&(c(),i(0,"rect",6)),n&2){let s=h().$implicit;x("stroke",s.color())("fill",s.color()),N("default-group-node_selected",s.selected()),p("transform",s.pointTransform())("width",s.size().width)("height",s.size().height)}}function js(n,d){if(n&1&&(c(),A(0),v(1,fs,3,13,":svg:foreignObject")(2,us,1,9,":svg:rect",3),W()),n&2){let s=d.$implicit;t(),k(1,s.node.type==="default"||s.node.type==="html-template"||s.isComponentType?1:-1),t(),k(2,s.node.type==="default-group"||s.node.type==="template-group"?2:-1)}}function ys(n,d){if(n&1){let s=G();c(),i(0,"rect",1),o(1,"svg",2),$("mouseover",function(){b(s);let a=h();return M(a.hovered.set(!0))})("mouseleave",function(){b(s);let a=h();return M(a.hovered.set(!1))}),i(2,"rect"),o(3,"g"),i(4,"rect"),z(5,js,3,2,":svg:ng-container",null,E().trackNodes,!0),m()()}if(n&2){let s=h();p("x",s.minimapPoint().x)("y",s.minimapPoint().y)("width",s.minimapWidth())("height",s.minimapHeight())("stroke",s.strokeColor()),t(),p("x",s.minimapPoint().x)("y",s.minimapPoint().y)("width",s.minimapWidth())("height",s.minimapHeight()),t(),p("width",s.minimapWidth())("height",s.minimapHeight())("fill",s.maskColor()),t(),p("transform",s.minimapTransform()),t(),p("fill",s.viewportColor())("transform",s.viewportTransform())("width",s.minimapWidth())("height",s.minimapHeight()),t(),R(s.entitiesService.nodes())}}var ls=(()=>{class n{constructor(){this.entitiesService=u(K),this.flowSettingsService=u(Z),this.viewportService=u(ss),this.injector=u(P),this.maskColor=y("rgba(215, 215, 215, 0.6)"),this.strokeColor=y("rgb(200, 200, 200)"),this.position=y("bottom-right"),this.scaleOnHover=y(!1),this.minimap=H.required("minimap"),this.minimapOffset=10,this.minimapScale=l(()=>this.scaleOnHover()&&this.hovered()?.4:.2),this.viewportColor=l(()=>{let s=this.flowSettingsService.background();return s.type==="dots"||s.type==="solid"?s.color??"#fff":"#fff"}),this.hovered=_(!1),this.minimapPoint=l(()=>{switch(this.position()){case"top-left":return{x:this.minimapOffset,y:this.minimapOffset};case"top-right":return{x:this.flowSettingsService.computedFlowWidth()-this.minimapWidth()-this.minimapOffset,y:this.minimapOffset};case"bottom-left":return{x:this.minimapOffset,y:this.flowSettingsService.computedFlowHeight()-this.minimapHeight()-this.minimapOffset};case"bottom-right":return{x:this.flowSettingsService.computedFlowWidth()-this.minimapWidth()-this.minimapOffset,y:this.flowSettingsService.computedFlowHeight()-this.minimapHeight()-this.minimapOffset}}}),this.minimapWidth=l(()=>this.flowSettingsService.computedFlowWidth()*this.minimapScale()),this.minimapHeight=l(()=>this.flowSettingsService.computedFlowHeight()*this.minimapScale()),this.viewportTransform=l(()=>{let s=this.viewportService.readableViewport(),e=1/s.zoom,a=-(s.x*this.minimapScale())*e;a/=this.minimapScale();let C=-(s.y*this.minimapScale())*e;return C/=this.minimapScale(),e/=this.minimapScale(),`translate(${a}, ${C}) scale(${e})`}),this.boundsViewport=l(()=>{let s=this.entitiesService.nodes();return X(J(s),this.flowSettingsService.computedFlowWidth(),this.flowSettingsService.computedFlowHeight(),-1/0,1.5,0)}),this.minimapTransform=l(()=>{let s=this.boundsViewport(),e=s.x*this.minimapScale(),a=s.y*this.minimapScale(),C=s.zoom*this.minimapScale();return`translate(${e} ${a}) scale(${C})`})}ngOnInit(){let s=new S;s.template.set(this.minimap()),this.entitiesService.minimap.set(s)}trackNodes(s,{node:e}){return e}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=r({type:n,selectors:[["mini-map"]],viewQuery:function(e,a){e&1&&L(a.minimap,hs,5),e&2&&B()},inputs:{maskColor:[j.SignalBased,"maskColor"],strokeColor:[j.SignalBased,"strokeColor"],position:[j.SignalBased,"position"],scaleOnHover:[j.SignalBased,"scaleOnHover"]},standalone:!0,features:[f],decls:2,vars:0,consts:[["minimap",""],["fill","none"],[3,"mouseover","mouseleave"],["rx","5","ry","5",1,"default-group-node",3,"default-group-node_selected","stroke","fill"],[3,"selected"],[3,"outerHTML"],["rx","5","ry","5",1,"default-group-node"]],template:function(e,a){e&1&&v(0,ys,7,17,"ng-template",null,0,Y)},dependencies:[es],styles:[".default-group-node[_ngcontent-%COMP%]{stroke-width:1.5px;fill-opacity:.05}.default-group-node_selected[_ngcontent-%COMP%]{stroke-width:2px}"],changeDetection:0})}}return n})();function vs(n,d){if(n&1&&(c(),o(0,"rect",3),i(1,"handle",4),m()),n&2){let s=d.$implicit;x("stroke","red")("fill","red")("fill-opacity",.05)("stroke-width",s.selected()?3:1),p("width",s.width())("height",s.height())}}var os=(()=>{class n{constructor(){this.nodes=[{id:"1",point:{x:10,y:10},type:"default",text:"1",parentId:"3"},{id:"2",point:{x:90,y:80},type:"default",text:"<strong>2</strong>",parentId:"3"},{id:"3",point:{x:10,y:10},type:"default-group",width:250,height:250},{id:"4",point:{x:280,y:10},type:"default",text:"4"},{id:"5",point:{x:10,y:160},type:"template-group",width:170,height:70,parentId:"3"},{id:"6",point:{x:10,y:10},type:"default",text:"6",parentId:"5"}],this.edges=[{source:"1",target:"2",id:"1 -> 2"},{source:"2",target:"4",id:"2 -> 4"},{source:"5",target:"4",id:"5 -> 4"}]}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=r({type:n,selectors:[["ng-component"]],standalone:!0,features:[f],decls:3,vars:3,consts:[["view","auto",3,"nodes","edges"],["groupNode",""],[3,"scaleOnHover"],["selectable","","rx","5","ry","5"],["type","source","position","right"]],template:function(e,a){e&1&&(o(0,"vflow",0),v(1,vs,2,10,"ng-template",1),i(2,"mini-map",2),m()),e&2&&(g("nodes",a.nodes)("edges",a.edges),t(2),g("scaleOnHover",!0))},dependencies:[ts,as,is,ls,ns],styles:["[_nghost-%COMP%]{width:100%;height:100%}"],changeDetection:0})}}return n})();var xs={title:"Minimap",mdFile:"./index.md",category:q,demos:{MinimapDemoComponent:os},order:1},w=xs;var cs=[];var ws={MinimapDemoComponent:[{title:"TypeScript",code:`<pre class="ngde hljs"><code lang="typescript" class="hljs language-typescript code-lines ngde"><span class="line ngde"><span class="hljs-keyword ngde">import</span> { <span class="hljs-title class_ ngde">ChangeDetectionStrategy</span>, <span class="hljs-title class_ ngde">Component</span> } <span class="hljs-keyword ngde">from</span> <span class="hljs-string ngde">'@angular/core'</span>;
</span><span class="line ngde"><span class="hljs-keyword ngde">import</span> { <span class="hljs-title class_ ngde"><a href="/api/ngx-vflow/interfaces/Edge" class="ng-doc-code-anchor ngde" data-link-type="Interface" class="ngde">Edge</a></span>, <span class="hljs-title class_ ngde"><a href="/api/ngx-vflow/type-aliases/Node" class="ng-doc-code-anchor ngde" data-link-type="TypeAlias" class="ngde">Node</a></span>, <span class="hljs-title class_ ngde"><a href="/api/ngx-vflow/variables/Vflow" class="ng-doc-code-anchor ngde" data-link-type="Variable" class="ngde">Vflow</a></span> } <span class="hljs-keyword ngde">from</span> <span class="hljs-string ngde">'ngx-vflow'</span>;
</span><span class="line ngde">
</span><span class="line ngde"><span class="hljs-meta ngde">@Component</span>({
</span><span class="line ngde">  <span class="hljs-attr ngde">template</span>: <span class="hljs-string ngde">\`&#x3C;vflow view="auto" [nodes]="nodes" [edges]="edges"></span>
</span><span class="line ngde"><span class="hljs-string ngde">    &#x3C;ng-template let-ctx groupNode></span>
</span><span class="line ngde"><span class="hljs-string ngde">      &#x3C;svg:rect</span>
</span><span class="line ngde"><span class="hljs-string ngde">        selectable</span>
</span><span class="line ngde"><span class="hljs-string ngde">        rx="5"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        ry="5"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        [attr.width]="ctx.width()"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        [attr.height]="ctx.height()"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        [style.stroke]="'red'"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        [style.fill]="'red'"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        [style.fill-opacity]="0.05"</span>
</span><span class="line ngde"><span class="hljs-string ngde">        [style.stroke-width]="ctx.selected() ? 3 : 1"></span>
</span><span class="line ngde"><span class="hljs-string ngde">        &#x3C;handle type="source" position="right" /></span>
</span><span class="line ngde"><span class="hljs-string ngde">      &#x3C;/svg:rect></span>
</span><span class="line ngde"><span class="hljs-string ngde">    &#x3C;/ng-template></span>
</span><span class="line ngde"><span class="hljs-string ngde"></span>
</span><span class="line ngde"><span class="hljs-string ngde">    &#x3C;mini-map [scaleOnHover]="true" /></span>
</span><span class="line ngde"><span class="hljs-string ngde">  &#x3C;/vflow>\`</span>,
</span><span class="line ngde">  <span class="hljs-attr ngde">styles</span>: [
</span><span class="line ngde">    <span class="hljs-string ngde">\`</span>
</span><span class="line ngde"><span class="hljs-string ngde">      :host {</span>
</span><span class="line ngde"><span class="hljs-string ngde">        width: 100%;</span>
</span><span class="line ngde"><span class="hljs-string ngde">        height: 100%;</span>
</span><span class="line ngde"><span class="hljs-string ngde">      }</span>
</span><span class="line ngde"><span class="hljs-string ngde">    \`</span>,
</span><span class="line ngde">  ],
</span><span class="line ngde">  <span class="hljs-attr ngde">changeDetection</span>: <span class="hljs-title class_ ngde">ChangeDetectionStrategy</span>.<span class="hljs-property ngde">OnPush</span>,
</span><span class="line ngde">  <span class="hljs-attr ngde">standalone</span>: <span class="hljs-literal ngde">true</span>,
</span><span class="line ngde">  <span class="hljs-attr ngde">imports</span>: [<span class="hljs-title class_ ngde"><a href="/api/ngx-vflow/variables/Vflow" class="ng-doc-code-anchor ngde" data-link-type="Variable" class="ngde">Vflow</a></span>],
</span><span class="line ngde">})
</span><span class="line ngde"><span class="hljs-keyword ngde">export</span> <span class="hljs-keyword ngde">class</span> <span class="hljs-title class_ ngde">MinimapDemoComponent</span> {
</span><span class="line ngde">  <span class="hljs-keyword ngde">public</span> <span class="hljs-attr ngde">nodes</span>: <span class="hljs-title class_ ngde"><a href="/api/ngx-vflow/type-aliases/Node" class="ng-doc-code-anchor ngde" data-link-type="TypeAlias" class="ngde">Node</a></span>[] = [
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'1'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">point</span>: { <span class="hljs-attr ngde">x</span>: <span class="hljs-number ngde">10</span>, <span class="hljs-attr ngde">y</span>: <span class="hljs-number ngde">10</span> },
</span><span class="line ngde">      <span class="hljs-attr ngde">type</span>: <span class="hljs-string ngde">'default'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">text</span>: <span class="hljs-string ngde">\`1\`</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">parentId</span>: <span class="hljs-string ngde">'3'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'2'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">point</span>: { <span class="hljs-attr ngde">x</span>: <span class="hljs-number ngde">90</span>, <span class="hljs-attr ngde">y</span>: <span class="hljs-number ngde">80</span> },
</span><span class="line ngde">      <span class="hljs-attr ngde">type</span>: <span class="hljs-string ngde">'default'</span>,
</span><span class="line ngde">      <span class="hljs-comment ngde">// it's possible to pass html in this field</span>
</span><span class="line ngde">      <span class="hljs-attr ngde">text</span>: <span class="hljs-string ngde">\`&#x3C;strong>2&#x3C;/strong>\`</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">parentId</span>: <span class="hljs-string ngde">'3'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'3'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">point</span>: { <span class="hljs-attr ngde">x</span>: <span class="hljs-number ngde">10</span>, <span class="hljs-attr ngde">y</span>: <span class="hljs-number ngde">10</span> },
</span><span class="line ngde">      <span class="hljs-attr ngde">type</span>: <span class="hljs-string ngde">'default-group'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">width</span>: <span class="hljs-number ngde">250</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">height</span>: <span class="hljs-number ngde">250</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'4'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">point</span>: { <span class="hljs-attr ngde">x</span>: <span class="hljs-number ngde">280</span>, <span class="hljs-attr ngde">y</span>: <span class="hljs-number ngde">10</span> },
</span><span class="line ngde">      <span class="hljs-attr ngde">type</span>: <span class="hljs-string ngde">'default'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">text</span>: <span class="hljs-string ngde">\`4\`</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'5'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">point</span>: { <span class="hljs-attr ngde">x</span>: <span class="hljs-number ngde">10</span>, <span class="hljs-attr ngde">y</span>: <span class="hljs-number ngde">160</span> },
</span><span class="line ngde">      <span class="hljs-attr ngde">type</span>: <span class="hljs-string ngde">'template-group'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">width</span>: <span class="hljs-number ngde">170</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">height</span>: <span class="hljs-number ngde">70</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">parentId</span>: <span class="hljs-string ngde">'3'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'6'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">point</span>: { <span class="hljs-attr ngde">x</span>: <span class="hljs-number ngde">10</span>, <span class="hljs-attr ngde">y</span>: <span class="hljs-number ngde">10</span> },
</span><span class="line ngde">      <span class="hljs-attr ngde">type</span>: <span class="hljs-string ngde">'default'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">text</span>: <span class="hljs-string ngde">\`6\`</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">parentId</span>: <span class="hljs-string ngde">'5'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">  ];
</span><span class="line ngde">
</span><span class="line ngde">  <span class="hljs-keyword ngde">public</span> <span class="hljs-attr ngde">edges</span>: <span class="hljs-title class_ ngde"><a href="/api/ngx-vflow/interfaces/Edge" class="ng-doc-code-anchor ngde" data-link-type="Interface" class="ngde">Edge</a></span>[] = [
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">source</span>: <span class="hljs-string ngde">'1'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">target</span>: <span class="hljs-string ngde">'2'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'1 -> 2'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">source</span>: <span class="hljs-string ngde">'2'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">target</span>: <span class="hljs-string ngde">'4'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'2 -> 4'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">    {
</span><span class="line ngde">      <span class="hljs-attr ngde">source</span>: <span class="hljs-string ngde">'5'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">target</span>: <span class="hljs-string ngde">'4'</span>,
</span><span class="line ngde">      <span class="hljs-attr ngde">id</span>: <span class="hljs-string ngde">'5 -> 4'</span>,
</span><span class="line ngde">    },
</span><span class="line ngde">  ];
</span><span class="line ngde">}
</span></code></pre>`}]},ds=ws;var Cs='<h1 id="minimap" class="ngde">Minimap<a title="Link to heading" class="ng-doc-header-link ngde" href="/features/minimap#minimap"><ng-doc-icon icon="link-2" size="16" class="ngde"></ng-doc-icon></a></h1><p class="ngde">The library includes a minimap that offers an overview of the entire flow. To enable it, simply add a <code class="ngde">&#x3C;mini-map /></code> component as a direct child of <code class="ngde">&#x3C;vflow /></code>. For customization options, see the available inputs in <code class="ngde ng-doc-code-with-link" class="ngde"><a href="/api/ngx-vflow/classes/MiniMapComponent" class="ng-doc-code-anchor ngde" data-link-type="Component" class="ngde">MiniMapComponent</a></code>.</p><p class="ngde">Planned enhancements for the minimap:</p><ul class="ngde"><li class="ngde">Develop an API to customize mini-node appearance (e.g., color, stroke)</li><li class="ngde">Enable panning and zooming within the minimap</li><li class="ngde">Render mini-nodes to visually match main nodes, using a simplified DOM structure to optimize performance</li></ul><ng-doc-demo-pane componentname="MinimapDemoComponent" indexable="false" class="ngde"><div id="options" class="ngde">{}</div></ng-doc-demo-pane>',_s=(()=>{class n extends D{constructor(){super(),this.routePrefix="",this.pageType="guide",this.pageContent=Cs,this.editSourceFileUrl="https://github.com/artem-mangilev/ngx-vflow/edit/main/projects/ngx-vflow-demo/src/app/categories/features/pages/minimap/index.md?message=docs(minimap): describe your changes here...",this.page=w,this.demoAssets=ds}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=r({type:n,selectors:[["ng-doc-page-features-minimap"]],standalone:!0,features:[U([{provide:D,useExisting:n},cs,w.providers??[]]),I,f],decls:1,vars:0,template:function(e,a){e&1&&i(0,"ng-doc-page")},dependencies:[Q],encapsulation:2,changeDetection:0})}}return n})(),Ss=[T(O({},(0,rs.isRoute)(w.route)?w.route:{}),{path:"",component:_s,title:"Minimap"})],Js=Ss;export{_s as DynamicComponent,Js as default};
