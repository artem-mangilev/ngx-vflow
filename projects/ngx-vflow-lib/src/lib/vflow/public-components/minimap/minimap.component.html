<ng-template #minimap>
  <svg:svg
    [attr.x]="minimapPoint().x"
    [attr.y]="minimapPoint().y"
    [attr.width]="minimapWidth()"
    [attr.height]="minimapHeight()"
  >
    <svg:rect [attr.width]="minimapWidth()" [attr.height]="minimapHeight()" class="minimap-bg" />

    <svg:g [attr.transform]="minimapTransform()">
      <svg:rect
        class="viewport-rect"
        [attr.transform]="viewportTransform()"
        [attr.width]="minimapWidth()"
        [attr.height]="minimapHeight()"
      />

      <svg:foreignObject
        *ngFor="let model of entitiesService.nodes(); trackBy: trackNodes"
        [attr.transform]="model.pointTransform()"
        [attr.width]="model.size().width"
        [attr.height]="model.size().height"
      >
        <default-node
          [style.width.px]="model.size().width"
          [style.height.px]="model.size().height"
          [style.max-width.px]="model.size().width"
          [style.max-height.px]="model.size().height"
        />
      </svg:foreignObject>
    </svg:g>
  </svg:svg>
</ng-template>
