@if (backgroundSignal().type === 'dots') {
  <svg:pattern
    patternUnits="userSpaceOnUse"
    [attr.id]="patternId"
    [attr.x]="x()"
    [attr.y]="y()"
    [attr.width]="scaledGap()"
    [attr.height]="scaledGap()">
    <svg:circle
      [attr.cx]="patternSize()"
      [attr.cy]="patternSize()"
      [attr.r]="patternSize()"
      [attr.fill]="patternColor()" />
  </svg:pattern>

  <svg:rect x="0" y="0" width="100%" height="100%" [attr.fill]="patternUrl" />
}

@if (backgroundSignal().type === 'image') {
  @if (repeated()) {
    <svg:pattern
      patternUnits="userSpaceOnUse"
      [attr.id]="patternId"
      [attr.x]="imageX()"
      [attr.y]="imageY()"
      [attr.width]="scaledImageWidth()"
      [attr.height]="scaledImageHeight()">
      <svg:image [attr.href]="bgImageSrc()" [attr.width]="scaledImageWidth()" [attr.height]="scaledImageHeight()" />
    </svg:pattern>

    <svg:rect x="0" y="0" width="100%" height="100%" [attr.fill]="patternUrl" />
  }

  @if (!repeated()) {
    <svg:image
      [attr.x]="imageX()"
      [attr.y]="imageY()"
      [attr.width]="scaledImageWidth()"
      [attr.height]="scaledImageHeight()"
      [attr.href]="bgImageSrc()" />
  }
}

@if (backgroundSignal().type === 'grid') {
  <svg:pattern
    patternUnits="userSpaceOnUse"
    [attr.id]="patternId"
    [attr.x]="x()"
    [attr.y]="y()"
    [attr.width]="patternSize()"
    [attr.height]="patternSize()">
    <svg:path
      fill="none"
      [attr.d]="'M ' + patternSize() + ' 0 L 0 0 0 ' + patternSize()"
      [attr.stroke]="patternColor()"
      [attr.stroke-width]="strokeWidth()" />
  </svg:pattern>

  <svg:rect x="0" y="0" width="100%" height="100%" [attr.fill]="patternUrl" />
}
