<svg:svg
  rootSvgRef
  rootSvgContext
  class="root-svg"
  #flow
  [style.backgroundColor]="background"
  [attr.width]="flowModel.flowWidth()"
  [attr.height]="flowModel.flowHeight()"
>
  <defs>
    <marker edgeMarker
      [id]="marker.key" [marker]="marker.value"
      *ngFor="let marker of markers() | keyvalue"
    />
  </defs>

  <svg:g
    mapContext
    spacePointContext
    [minZoom]="minZoom"
    [maxZoom]="maxZoom"
  >
    <!-- Connection -->
    <svg:g
      connection
      [model]="connection"
      [template]="connectionTemplateDirective?.templateRef"
    />

    <!-- Edges  -->
    <svg:g
      *ngFor="let model of edgeModels; trackBy: trackEdges"
      edge
      [model]="model"
      [edgeTemplate]="edgeTemplateDirective?.templateRef"
      [edgeLabelHtmlTemplate]="edgeLabelHtmlDirective?.templateRef"
    />

    <!-- Nodes -->
    <svg:g
      *ngFor="let model of nodeModels; trackBy: trackNodes"
      node
      [nodeModel]="model"
      [nodeHtmlTemplate]="nodeHtmlDirective?.templateRef"
      [handleTemplate]="handleTemplateDirective?.templateRef"
      [attr.transform]="model.pointTransform()"
    />
  </svg:g>

</svg:svg>
